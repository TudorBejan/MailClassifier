window.NeoConfig=window.NeoConfig||{};window.NeoGV=window.NeoGV||{};window.Neo=(function(){var v=window,AP=document,AN="getElementById",AQ="body",A="head",D="getElementsByTagName",M="parentNode",AS="createElement",AB="setAttribute",r="getAttribute",E="className",AD="firstChild",Y="lastChild",C="nodeName",AE="Inbox",Q={},W=[],AM=false,AG=0,T=navigator.userAgent.match(/MSIE\s([^;]*)/),AU=false,o,Z="active",AK="hidden",j="selected",AR="visible",e="galaxyPageContainer",n="inboxcontainer",p="messageid",U=0,k={"Inbox":"inbox","%40C%40Chats":"conv","%40B%40Bulk":"spam","Trash":"trash","Draft":"drafts","Sent":"sent"},V={};NeoGV.statQueue=[];NeoGV.inject=function(AW){var AX,w,d,b=function(AY){if(AY.el){AY.el.innerHTML=AY.html;return;}AX=AY.id||"centerpane";if(AP[AN](AX)){AP[AN](AX).innerHTML=AY.html;}};if(AW.css){AV(AW.css,AW.cssID);}b(AW);AX=AW.id;if(AX){w=AP[AN](AX);if(!w){return;}d=w[E];if(AW.html&&d&&d.indexOf(AK)!==-1&&!(""+AW.html).match(/^\s*$/)){AC(w,"hidden");}if(AW.customClass&&!AA(w,AW.customClass)){w[E]+=" "+AW.customClass;}}if(AX==="gx_messages"){Neo.formatRuefcDates();}};o={addHandler:function(b,w,d){if(b){if(v.addEventListener){b.addEventListener(w,d,false);}else{if(v.attachEvent){b["evt"+w+d]=d;b[w+d]=function(){b["evt"+w+d](v.event);};b.attachEvent("on"+w,b[w+d]);}}}},removeHandler:function(b,w,d){if(b){if(v.removeEventListener){b.removeEventListener(w,d,false);}else{if(v.detachEvent){b.detachEvent("on"+w,b[w+d]);b[w+d]=null;b["evt"+w+d]=null;}}}},preventDefault:function(b){if(b.preventDefault){b.preventDefault();}else{b.returnValue=false;}},getTarget:function(d){var b=d.target||d.srcElement;try{if(b&&3===b.nodeType){b=b.parentNode;}}catch(w){}return b;}};var t=(function(){var AX=["MSXML2.XMLHTTP","MSXML2.XMLHTTP.6.0","MSXML3.XMLHTTP","Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0"],w,b;var d;try{d=new XMLHttpRequest();}catch(AY){for(w=0,b=AX.length;w<b;w++){try{d=new ActiveXObject(AX[w]);}catch(AW){}}}var AZ=function(Aa,Ab,Ad,Ac){var Ae=Ad.chunked,Ai,Ah;var Af=function(){if(Ae){try{var An=d.responseText,Ak=An.lastIndexOf(Ad.delimiter||"/*=*/");if(Ah!=Ak){Ae(An.substring(Ah||0,Ak));Ah=Ak;}}catch(Aj){}}if(d&&d.readyState==4){if(Ai){clearInterval(Ai);}Ai=0;var Al;try{if(d.status!==undefined&&d.status!==0){Al=d.status;}else{Al=13030;}}catch(Am){Al=13030;}if((Al>=200&&Al<300)||Al===1223){if(Ad&&Ad.success){Ad.success(d);}}}};d.open(Aa,Ab,true);if(Aa.toUpperCase()=="POST"){d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");}else{Ac=null;}d.setRequestHeader("X-Requested-With","XMLHttpRequest");try{d.onreadystatechange=Af;}catch(Ag){d.onload=Af;}if(Ae){Ai=setInterval(Af,50);}d.send(Ac);};return AZ;}());function L(AY,AX,d){var b=AY;d=d||"beforeEnd";if(AY instanceof Array){b=AY.join("");}try{if(typeof AY==="string"){if(T){AX.insertAdjacentHTML(d,b);return;}var AW=AX.ownerDocument.createRange();AW.setStartBefore(AX);b=AW.createContextualFragment(AY);}if(T){AX.insertAdjacentElement(d,b);return;}switch(d){case"beforeBegin":AX.parentNode.insertBefore(b,AX);break;case"afterBegin":AX.insertBefore(b,AX[AD]);break;case"afterEnd":if(AX.nextSibling){AX.parentNode.insertBefore(b,AX.nextSibling);}else{AX.parentNode.appendChild(b);}break;default:AX.appendChild(b);break;}return b;}catch(w){}}function AV(b,w){var d=AP[AS]("link");d.type="text/css";d.rel="stylesheet";if(w){d.id=w;}d.href=b;AP[D](A)[0].appendChild(d);}function c(AZ,AY,w,d,b,AW){var AX=/{{([^{}]*)}}/g;return AZ.replace(AX,function(Ab,Aa){var Ad,Ac;if(w&&(Ad=w[Aa])){return(Ad(AY,d))||"";}else{if(AY&&Aa in AY){return AY[Aa];}else{if(b&&Aa in b){Ac=b[Aa];return Ac.match(AX)?c(Ac,AY,w,d,b,AW):Ac;}else{if(AW&&Aa in AW){return c(AW[Aa].base||AW[Aa],AY,w,d,b,AW);}else{return"";}}}}});}function AH(w,d){if(!d){return w;}for(var b in d){if(d.hasOwnProperty(b)){if(!(b in w)){w[b]=d[b];}}}}function m(w){var d=AP[D](A)[0],b=AP[AS]("script");b.type="text/javascript";b.async=true;if(!T){b.appendChild(AP.createTextNode(w));}else{b.text=w;}try{d.appendChild(b);d.removeChild(b);}catch(AW){}}function AA(b,d){return(b&&b[E].indexOf(d)!==-1);}function f(b,d){if(!AA(b,d)){b[E]=b[E]+" "+d;}}function X(b,w){if(AA(b,w)){var d=new RegExp("\\b"+w+"\\b");b[E]=b[E].replace(d,"");}}function AC(d,w,b){d[E]=d.className.replace(w,b||"");}function K(AZ,Ac,Ab){var AW=[],AX,AY;if(AP.evaluate){var Aa=AP.evaluate(".//*[contains(concat(' ', @class, ' '), ' "+AZ+" ')]",AP[AN](Ab)||AP,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(AX=0,AY=Aa.snapshotLength;AX<AY;AX++){AW.push(Aa.snapshotItem(AX));}return AW;}else{if(typeof Ab==="string"){Ab=AP[AN](Ab);}var b=(Ab||AP)[D]((Ac||"*")),w,d=new RegExp("(^|\\s)"+AZ+"(\\s|$)");for(AX=0,AY=b.length;AX<AY;AX++){w=b[AX];if(d.test(w[E])){AW.push(w);}}}return AW;}function a(d){var b=d.nextSibling;while(b.nodeType!=1){b=b.nextSibling;}return b;}function G(d){var b=d.previousSibling;while(b.nodeType!=1){b=b.previousSibling;}return b;}function s(b){AJ(n);P(b);if(NeoConfig.isMailPlus!==1){AC(AP[AQ],"withoutad","withsky");}}function J(AW,w){var b=NeoConfig;AJ(e);P(AW);if(!w){var d="/neo/whatsnew?galaxy=1&mode=data&ncrumb="+b.ncrumb+b.extraURLArgs;t("GET",d,{success:function(AX){m(AX.responseText);}});}}function H(d){var w=AP[AN]("tabinbox"),Aa=w[M],AY=AP[AN]("msg-list"),AW=K("list-view-items","div","msg-list"),AX=d[r]("data-fid"),b=AP[AN]("msg-preview"),Ab=NeoConfig;if(AX===null&&d[C].toUpperCase()=="LI"){AX=d.id;}if(AX===null||AX===""){return true;}s(Aa);AM=AM||b.innerHTML;if(AE==AX){return true;}if(!AA(d,j)&&!NeoConfig.isFresh){var AZ=K(j,"li","shellnavigation");if(AZ&&AZ.length){AC(AZ[0],j);}d[E]+=" selected";}w.innerHTML=(AX&&k[AX])?Ab.strings["str_tabs_"+k[AX]]:d[D]("i")[0].innerHTML;if(AW&&AW[0]){AW[0].innerHTML="";AW[0].className+=" loading";if(Ab.fullPage){AW[0].style.height="82px";}}b.innerHTML="";if(AX.toString().length>0){Neo.fid=AX;if(NeoConfig.extraURLArgs.indexOf("isFresh")===-1){NeoConfig.isFresh?Ab.extraURLArgs=Ab.extraURLArgs+"&isFresh=1":"";}Neo.async("GET","showFolder?fid="+encodeURIComponent(AX)+"&mode=data&noFlush&ncrumb="+Ab.ncrumb+Ab.extraURLArgs,{success:function(Af){if(window.yui){return;
}Neo.exec(Af.responseText);var Ad=Neo.msgListResp;var Ae=Ad.html;if(AY){var Ac=AY[M];Ac.removeChild(AY);L(Ae,Ac,"afterBegin");}y(Ad.json);if(!Ab.fullPage&&AM){S(AM,false,false,true);}AE=AX;},failure:function(){}});return true;}return false;}function x(AY){if(AY&&((AY.which&&AY.which==3)||(AY.button&&AY.button==2))){return;}var d=o.getTarget(AY)||AY,Ah=NeoConfig,Aa=d[C].toUpperCase(),Af=Af||AP[AQ][E],w="none",Ad=d,b=null;var Ae={I:{n:d[M][M],a:"folder"},A:(function(){var Ak=(d[r]("role")=="tab")?{n:d,a:"tab"}:{n:d[M],a:"folder"};if(d[r]("data-action")=="compose"||d[M].id=="btn-new"){Ak.a="compose";}if(d[r]("msgheader")){Ak.a="message";Ak.n=d;}if(d[E]=="more"&&AA(d[M],"icn-inbox")){Ak.a="tab";Ak.n=AP[AN]("tabinbox");}if(d[r]("data-action")=="toggle-msg-header"){if(!NeoConfig.isFresh){var Ai=a(d[M][M][M]),Al;if(Ai.children&&Ai.children[1]){Al=Ai.children[1];if(AA(Ai,"hidden")){d.innerHTML=d[r]("toggle-off");AC(Ai,"hidden","expanded");AC(Al,"hidden","");Ai.className+="collapsed-header";Ah.showHdrDetails=1;}else{d.innerHTML=d[r]("toggle-on");AC(Ai,"expanded","hidden");Al.className+=" hidden";Ah.showHdrDetails=0;}}}else{var Ai=d[M][M][M];if(Ai.children&&Ai.children[1]){var Aq=Ai.children[1].children[0],An=Aq.children[3].children[0].children.length,Aj=Aq.children[5]?Aq.children[5].children[0].children.length:"",Ap=An+Aj,Am=Ai.children[0].children[4].children[2],Ao=NeoConfig.strings;if(AA(Ai,"collapsed-header")){d.innerHTML=d[r]("toggle-off");AC(Ai.children[1],"hidden","expanded");X(Ai,"collapsed-header");Ah.showHdrDetails=1;}else{d.innerHTML=d[r]("toggle-on");f(Ai,"collapsed-header");Am.innerHTML=Ap==="1"?"1 "+Ao.str_small_header_recipient:Ap+" "+Ao.str_small_header_recipients;Ah.showHdrDetails=0;}}}}return Ak;}()),SPAN:(function(){var Aj=(d[E]=="rht")?{n:d[M],a:"folder"}:{n:d[M][M][M],a:"folder"};if(d[r]("data-action")=="close-tab"){Aj.a="close";Aj.n=G(d);}if(d[M][M][r]("data-action")=="collapsable"){var Ai=d[M][M];if(AA(Ai,"expanded")){AC(Ai,"expanded","collapsed");}else{AC(Ai,"collapsed","expanded");}}return Aj;}()),EM:(function(){var Ai={};return Ai;}()),LI:{n:d,a:"folder"},B:{n:d[M],a:"tab"}};Ae.IMG=Ae.EM;b=Ae[Aa];if(b){Ad=b.n;w=b.a;}try{switch(w){case"folder":if(Ah.hasConv){return true;}o.preventDefault(AY);H(Ad);NeoGV.statQueue.push({well:"folderview",name:"folderBeforeRender"});case"tab":o.preventDefault(AY);switch(Ad.id){case"tabwhatsnew":if(!Ah.low_bandwidth&&!(typeof slowConnDlg=="object"&&slowConnDlg.isOpen())){J(Ad[M]);if(Ah.hasAds){AP[AQ][E]=Af;}}break;case"okDialupModal":Ad=AP[AN]("tabinbox");case"tabinbox":s(Ad[M]);break;default:if(Ad.id.indexOf("tabmessage")!==-1){AJ(p+Ad.tabIndex);P(Ad[M]);}}NeoGV.statQueue.push({well:"tab",name:"tabBeforeRender"});break;case"compose":o.preventDefault(AY);setTimeout(function(){if(window.slowConnDlg&&!Neo.filesDone){slowConnDlg.switchDisplay("dialupMask",1);slowConnDlg.switchDisplay("dialupLoading",1);Neo.openCompose=true;}},100);NeoGV.statQueue.push({well:"compose",name:"composeBeforeRender"});break;case"close":o.preventDefault(AY);for(var Ab in Q){if(Ad.tabIndex==Q[Ab].idx){Q[Ab].visible=false;Q[Ab].idx=null;var AX=Ad[M],Ac=AA(AX,Z);AX[M].removeChild(AX);var Ag=AP[AN](p+Ad.tabIndex);Ag[M].removeChild(Ag);if(Ac){s(AP[AN]("tabinbox")[M]);}break;}}NeoGV.statQueue.push({well:"tab",name:"closeTabBeforeRender"});break;case"message":if(Ah.hasConv){return true;}o.preventDefault(AY);var AW=Ad[r]("msgheader")||Ad[r]("data-msghdr");m("Neo.RUEFCHdr = "+AW+";");i(Neo.RUEFCHdr.mid,true);Neo.RUEFCHdr=null;NeoGV.statQueue.push({well:"message",name:"messageBeforeRender"});break;}}catch(AZ){}return true;}o.addHandler(AP,"click",x);function P(AX){var w,AW,d=AP[AN]("tablist").children,b=d.length;for(w=0;w<b;w++){AW=d[w];if(AW!==AX){AC(d[w],Z);}}if(AX&&!AA(AX,Z)){AX[E]+=(" "+Z);}}function AJ(AX){var d,AW=AP[AN]("shellcontent").children,b=AW.length,w=(typeof AX==="object")?AX:AP[AN](AX),AY;for(d=0;d<b;d++){AY=AW[d];if(AY&&(AY!==w)&&!AA(AY,AK)){if(AY.style.visibility){AY.style.visibility=AK;}AY[E]+=(" "+AK);}}if(w){if(w.style.visibility){w.style.visibility=AR;}AC(w,AK);}}function S(Aa,AW,AX,b){if(Neo.filesDone){return;}var Ab=AP[AN]("msg-preview"),Ai=NeoConfig,Ag=Ai.userDataObj.userUIPref.msgPaneVisible,AY=Ai.strings,Ae;function Ad(){var Am=AP[AN]("msg_details");if(!Am){return;}var Ak=K("sm_rawDate","span",Am)[0];if(!Ak){return;}var Aj=Ak[M],Al=Ak[M][M][M].children[1].children[0];Aj.innerHTML=g(new Date(Ak.innerHTML*1000),AY.str_tog_dateformat_header_l10n);Al.innerHTML=g(new Date(Ak.innerHTML*1000),AY.str_tog_dateformat_rsstime_l10n);AC(Aj,"hidden","");}if(b||(!Ai.fullPage&&Ag&&!AW)){Neo.orginalClass=Neo.orginalClass||Ab[E];Ab[E]="message content";Ab.innerHTML=Aa;Ad();Ab.scrollTop=0;}else{var d=AP[AN]("tablist");AJ();if(typeof AX==="undefined"){var AZ=AP[AN]("shellcontent");L('<div id="'+p+U+'"><div role="document" class=" message content" tabindex="0" style="display:block;visibility:visible;"></div></div>',AZ);var w=AP[AN](p+U)[D]("div")[0],Ac,Af,Ah;w.innerHTML=Aa;Ad();Af=w[D]("h3");Ac=(Af&&Af.length>0&&(Ah=Af[0][D]("a")[0]))?(Ah.innerText||Ah.textContent||Ah.getAttribute("title")):"__title__";L(('<li role="presentation" class="removable active messagetabs" visibility="'+AR+'"><a data-action="navigate" href="#" role="tab" id="tabmessage'+U+'" title="__title__" tabindex="'+U+++'" aria-selected="true"><b>__title__</b></a><span data-action="close-tab" title="Close tab [Ctrl + ]">Close tab</span></li>').replace(/__title__/g,Ac),d);Ae=U-1;}else{Ae=AX;AJ(p+Ae);}P(AP[AN]("tabmessage"+Ae).parentNode);}}function R(AZ,AW){if(NeoConfig.hasConv){return;}var AY=o.getTarget(AZ),AX=function(Ad){var Ab=K(j,"div","msg-list"),Ac,Aa;if(Ab&&Ab.length){for(Ac=0,Aa=Ad||Ab.length;Ac<Aa;Ac++){AC(Ab[Ac],j);Ab[Ac][D]("input")[0].checked=false;}}},d=function(Ab){if(!AM){AM=AP[AN]("msg-preview").innerHTML;}var Ac=Ab[D]("input")[0],Aa=Ac.value;AG=0;AX();Ab[E]+=" selected";i(Aa,AW,Ab);},w=false,b;if(AY){while(AY.id!="shellcontent"){b=AY.tagName;b=b?b.toUpperCase():"";switch(b){case"LI":case"DIV":if(AY[r]("data-action")=="select-message"){w=true;
d(AY);break;}case"INPUT":if(AY.type=="checkbox"){if(AY.name=="mid"){o.preventDefault(AZ);d(AY[M][M][M]);}w=true;break;}default:AY=AY[M];break;}if(w){break;}}}}function AT(d){var b=NeoConfig,w=b.userDataObj.userUIPref.msgPaneVisible;if(!b.fullPage&&w){R(d,true);}}function i(d,w,AY){var b=NeoConfig,AX=b.userDataObj.userUIPref.msgPaneVisible,AW;if(V[d]){return;}if(!Q[d]||!Q[d].html){V[d]=true;AW=Neo.fid||"Inbox";if(NeoConfig.extraURLArgs.indexOf("isFresh")===-1){NeoConfig.isFresh?b.extraURLArgs=b.extraURLArgs+"&isFresh=1":"";}Neo.async("GET","showMessage?mid="+encodeURIComponent(d)+"&fid="+encodeURIComponent(AW)+b.extraURLArgs+"&shd="+b.showHdrDetails+"&mode=data&noFlush&ncrumb="+b.ncrumb,{success:function(Ac){if(window.yui){window.yui.fire("openMessage",{fid:AW,msg:{mid:d}});}else{Neo.exec(Ac.responseText);if(!AU){AV(b.showMsgCSSURL);AU=true;}var Ab=b.msgCache[d];Q[d]={html:Ab,idx:U};W[U]=b.msgHdr[d];if(b.fullPage||!AX||w){Q[d].visible=true;}S(Ab,w);if(!AY){var Ad=AP[AN]("msg-list")[D]("input"),AZ=Ad.length;for(var Aa=0;Aa<AZ;Aa++){if(Ad[Aa].value==d){AY=Ad[Aa][M][M][M];break;}}}AY&&AC(AY,"unread");}delete V[d];},failure:function(){}});}else{if(Q[d].visible){S(Q[d].html,w,Q[d].idx);}else{if(b.fullPage||!AX||w){Q[d].visible=true;}Q[d].idx=U;S(Q[d].html,w);}}}function AL(){o.addHandler(AP[AN]("shellcontent"),"click",R);o.addHandler(AP[AN]("shellcontent"),"dblclick",AT);}function q(AZ){var Ae=NeoConfig,Ac=Ae.mailboxListTmpl,Aa,d,w="",Ad,AX=AP[AN]("system-folders")[D]("li")[0],b,Ab=Ae.strings,AW=Ae.showExtAccountsParam===3||Ab.str_cfg_tog_ext_accnt_expand,AY=(Ae.showExtAccountsParam>0&&Ae.showExtAccountsParam<3)||(AW&&Ae.expandEA);AZ=AZ||Ae.mailboxes;if(!AZ){return;}Ae.mailboxes=AZ;for(Aa in AZ){d=AZ[Aa];if(d.server_addr||Aa==="Inbox"){if(AY){d.leftpane_pane_mboxes_expanded_else="";}w+=c(Ac.mailboxes,d,null,null,Ab,Ac);}}b={mailboxes:w};if(AW){if(Ae.expandEA){b.leftpane_pane_mboxes_expanded_else1="";}else{b.leftpane_pane_mboxes_expanded="";}}Ad=AW?c(Ac.base,b,null,null,Ab,Ac):w;L(Ad,AX,"afterEnd");}function z(d){function b(AX,AW){var w=AX.folderInfo.name.toLowerCase();var AY=AW.folderInfo.name.toLowerCase();return w.localeCompare(AY);}d.sort(b);}function O(d){function b(AX,AW){var w=AX.folderInfo.name;var Ab=AW.folderInfo.name;var AY=0,Aa,AZ=0;w=w.split("/");Ab=Ab.split("/");Aa=(w.length<Ab.length)?w.length:Ab.length;for(;AY<Aa&&(AZ===0);AY++){AZ=w[AY].toLowerCase().localeCompare(Ab[AY].toLowerCase());if(AZ===0){AZ=w[AY].localeCompare(Ab[AY]);}}return AZ||(w.length-Ab.length);}d.sort(b);}function h(Ad){var w=Ad.folderInfo.fid,AW=AP[AN](w),AX=AP[AN]("tabinbox"),AZ=NeoConfig.strings,Ac,AY;if(AW){var Ab=AW[D]("a"),b=(w==="Draft"),Ag=(w==="%40C%40Chats"),Af=b?Ad.total:Ad.unread,d="{{str_nav_inbox_unread_attr}}";if(b){d=(Af==1)?"{{str_nav_draft_attr}}":"{{str_nav_drafts_attr}}";}else{if(Ag){d="{{str_nav_conversations}}";}}Ac={};d=c(d,{inbox_unread_cnt:Af},null,null,AZ);if(Ab&&Ab[0]){Ac[k[w]+"_cnt"]=Ad.total;if(b||Ag){Ab[0].title=d;}else{Ab[0].title=c("{{str_nav_"+k[w]+"_attr}}",Ac,null,null,AZ);}}if(w=="Sent"){return;}if(w=="Inbox"&&AX&&!NeoConfig.hasConv&&!NeoConfig.isFresh){var Ae=AX[D]("i");if(Ae[0]){Ae[0].innerHTML="("+Ad.total+")";}AY=AZ["str_tabs_"+k[w]];AX[AB]("title",AY+" ("+Ad.total+")");}if(Af>0&&!b){AW[E]+=" has-unread";}if(NeoConfig.grayoutEnabled&&Ad.total===0&&(w==="%40B%40Bulk"||w==="Trash")){AW[E].replace("hasmultimsg","hasnomsg");}var Aa=AW[D]("span");if(Aa&&Aa[0]){if(NeoConfig.isFresh){Aa=Aa[0];}else{Aa=Aa[0][AD];}if(Af>0){if(NeoConfig.isFresh){if(Af>999){Aa.innerHTML="(999+)";}else{Aa.innerHTML="("+Af+")";}}else{Aa.innerHTML=Af;}X(Aa,"invisible");}}Aa.title=d;}}function AF(Ap){var d=NeoConfig,Ao=d.folderListTmpl,AW=d.strings,b,AY,An,Ac,Am,Ab,Ag,Aj,Ad,Ah,Ak,Aq="",w="",Aa=0,AZ=0,Ae,Af;Ap=Ap||d;if(!Ap.folders){return;}Aj=Ap.folders.folder;Ad=Aj.length;if(NeoConfig.isCorpmail){O(Aj);}else{z(Aj);}for(Af=0;Af<Ad;Af++){AY=Aj[Af];b=AY.folderInfo.fid;Am=false;if(b.indexOf("Sync%20Trap")==0){continue;}An=AY.folderInfo.name;Am=(((Af+1)<Ad)&&(Aj[Af+1].folderInfo.name.indexOf(An+"/")===0));An=An.split("/");Aa=An.length-1;if(Aa){if(Ah.folderInfo.name===An[0]){An=An[Aa];}else{Aa=0;An=AY.folderInfo.name;}}if(!AY.isSystem){Ae={url:"#",name:An,fid:b,total_cnt:AY.total,isParent:Am?"papa-folder":"",clicker:Am?'<div class="clicker" style="width:'+(Aa*10+16)+'px;"></div>':"",email_str:(AY.total==1)?AW.str_email_cnt_one:AW.str_email_cnt_multi,depth_attr:Aa?'fdepth="'+Aa+'"':"",indent_level:Aa?'style="padding-left:'+(Aa*10+16)+"px;background-position-x:"+(Aa*10)+'px;"':""};if(NeoConfig.bidi&&AY.folderInfo.dir){Ae.name=(AY.folderInfo.dir=="rtl"?"\u202B":"\u202A")+Ae.name+"\u202C";}if(AY.unread){if(NeoConfig.isFresh){(AY.unread>999)?Ae.unread_cnt=Ae.inbox_unread_cnt="999+":Ae.unread_cnt=Ae.inbox_unread_cnt=AY.unread;}else{Ae.unread_cnt=Ae.inbox_unread_cnt=AY.unread;}Ae.hidden_class="";}else{Ae.has_unread="";Ae.hidden_class=" invisible";}Ab=c(Ao.folders,Ae,null,null,AW,Ao);}if(Aa){if(Aa>AZ){Ak+="<ul>";AZ++;}else{if(Aa<AZ){while(AZ>Aa){Ak+="</ul>";AZ--;}}}Ak+=Ab;}else{while(AZ){Ak+="</ul>";AZ--;}if(Ak){if(Ah.isSystem){L(Ak,AP[AN](Ah.folderInfo.fid),"afterEnd");}else{w+=Ak;}}if(AY.isSystem){if(Am){Ac=AP[AN](AY.folderInfo.fid);f(Ac,"papa-folder");L("<div class='clicker' style='width:16px;'></div>",Ac,"afterBegin");}h(AY);if(b=="%40C%40Chats"){d.ssa_enabled=true;}}else{w+=Ab;}Ak="";Ah=AY;}}while(AZ){Ak+="</ul>";AZ--;}if(Ak){if(Ah.isSystem){L(Ak,AP[AN](Ah.folderInfo.fid),"afterEnd");}else{w+=Ak;}}if(d.enable_ssa){if(d.hasIM&&d.tog_hasIM&&d.ssa_enabled){AP[AN]("%40C%40Chats")[E]="chats ";}}var Ai=AP[AN]("custom-folders-nav"),Al=AP[AN]("custom-folders-btn"),AX=AP[AN]("smart-folders-nav");NeoGV.inject({html:w,el:Ai[D]("ul")[0]});if(AX){AX[E]=AX[E].replace("collapsed","expanded");AX[AB]("title",AW.str_nav_left_smart_folders_expanded_attr);}if(d.expandPF){Ai[E]=Ai[E].replace("collapsed","expanded");Al[AB]("title",AW.str_nav_left_folders_expanded_attr);}else{Al[AB]("title",AW.str_nav_left_folders_collapsed_attr);}}function N(d){var b=AP[AN]("uhimage");
if(b&&AP[AN]("btn-account")&&b.style.display=="none"){d=d||AP[AN]("btn-account")[D]("img")[0].src;}if(b&&d){b.src=d;b.style.display="";}}var l=(function(d){var b;return function(AW){var w=NeoConfig.strings;if(!b){b={"Inbox":w.str_nav_inbox,"Draft":w.str_nav_drafts,"Trash":w.str_nav_trash,"Sent":w.str_nav_sent,"%40B%40Bulk":w.str_nav_spam,"%40C%40Chats":w.str_nav_conversations};}return b[AW];};}());function u(){var AW=NeoConfig.folders,d,AZ,AX,AY;for(var w=0;w<AW.numberOfFolders;w++){AX=AW.folder[w];d=AX.folderInfo;AY=d.fid;if(AY===(Neo.fid||"Inbox")){AZ=AX.isSystem?l(AY):d.name;break;}}if(AZ){var b=K("list-view","div","msg-list");if(b.length){b[0][AB]("aria-label",AZ);}}}function B(b){u();if(!b){return;}var Ag=NeoConfig,Af=Ag.msgListTmpl,AW=[],Ah,AX,Ac,AY=0,Ab,w=Ag.strings;try{Ab=parseInt(AP[AN]("msg-list").style.height,10);}catch(AZ){Ab="auto";}if(Ag.pagedResults){Ab=Ag.messagesPerPage;}else{Ab=Ab=="auto"?1000:parseInt((Ab/21)+Ag.ulPadding,10);}if(Ag.defaultSortOrder=="up"){b.reverse();}for(AX in b){if(++AY>Ab){break;}Ah=b[AX];Ac=Ah.mid;var Ae=(Ag.hasConv?Ah.anchorDate:Ah.rawDate)*1000;Ah.receivedDate=g(new Date(Ae),F(Ae));Ah.checkbox_label=c(w.str_msg_list_checkbox_label,{messagenumber:(parseInt(AX,10)+1)});var Aa="&nbsp;",Ad=Ah.flags1;Ah.is_deleted="";Ah.is_selected="";Ah.is_replied="";Ah.is_forwarded="";Ah.is_unread="";Ah.is_flagged="";Ah.attachment_previews="";Ah.hashKey=Ac.split("_").pop();Ah.inboxservices="";if(Ad.match("replied")){Ah.is_replied=w["str_msg_list_info-replied"];}if(Ad.match("forwarded")){Ah.is_forwarded=w["str_msg_list_info-forwarded"];}if(Ah.flags.match("unread")){Ah.is_unread="unread";}if(Ah.flags.match("flagged")){Ah.is_flagged="flagged";}if(Ah.hasOwnProperty("hide_attachments_else")){Ah.hasAttachment="";}Ah.status_message=Aa;AW[AX]=c(Af.message,Ah,null,null,w,Af);Ah.mid=Ac;}var d=K("list-view-items","div",AP[AN](n))[0];NeoGV.inject({html:AW.join(""),el:d});AC(d,"loading","");if(AA(AP[AQ],"fullpage")){d.style.height="auto";}}function y(b){u();if(!b){return;}var Ah=NeoConfig,Ag=Ah.msgListTmpl,AW=[],Ai,AX,Ad,AZ=0,Ac,w=Ah.strings;try{Ac=parseInt(AP[AN]("msg-list").style.height,10);}catch(Aa){Ac="auto";}if(Ah.pagedResults){Ac=Ah.messagesPerPage;}else{Ac=Ac=="auto"?1000:parseInt((Ac/21)+Ah.ulPadding,10);}if(Ah.defaultSortOrder=="up"){b.reverse();}for(AX in b){if(++AZ>Ac){break;}Ai=b[AX];Ad=Ai.mid;Ai.mid='name="mid" value="'+Ad+'"';var Af=(Ah.hasConv?Ai.anchorDate:Ai.rawDate)*1000;Ai.receivedDate=g(new Date(Af),F(Af));Ai.checkbox_label=c(w.str_msg_list_checkbox_label,{messagenumber:(parseInt(AX,10)+1)});var Ab="&nbsp;",Ae=Ai.flags1,AY=Ai.inboxservices;if(Ae.match("replied")){Ab=w["str_msg_list_info-replied"];}else{if(Ae.match("forwarded")){Ab=w["str_msg_list_info-forwarded"];}else{if(Ai.flags.match("unread")){Ab=w["str_msg_list_info-unread"];}else{if(AY&&AY.match("data-certified")){Ab=w["str_msg_list_info-certified"];}}}}Ai.status_message=Ab;AW[AX]=c(Ag.message,Ai,null,null,w,Ag);Ai.mid=Ad;}var d=K("list-view-items","div",AP[AN](n))[0];NeoGV.inject({html:AW.join(""),el:d});AC(d,"loading","");if(AA(AP[AQ],"fullpage")){d.style.height="auto";}}function F(w){var d=NeoConfig,AX,AZ=(new Date()).setHours(0,0,0,0),AY=AZ-(518400*1000),AW=(new Date()).setMonth(0,1),Aa=d.strings,b=Aa.dateObj;if(w>AZ){AX=b.mlt;}else{if(w<AZ&&w>AY){AX=b.mldt;}else{if(NeoConfig.isFresh){if(w>AW){AX=b.ml;}else{AX=b.mly;}}else{AX=b.ml;}}}return AX;}function g(An,Al){var AW="d_",Ae="m_",Af="a_",AZ=NeoConfig.strings,w=AZ.dateObj,d=function(At,As){return((At.getFullYear()==As.getFullYear())&&(At.getMonth()==As.getMonth())&&(At.getDate()==As.getDate()));},Ar=function(As){return d((new Date()),As);},Ao=function(At){var As=new Date(),Au=new Date(As.getFullYear(),As.getMonth(),As.getDate()-1);return d(Au,At);};if(!An||!("getTime" in An)||isNaN(An.getTime())){return"";}var Am=Al,Ai=An.getDay(),Ak,Ap,Ab,Aa,AY,Ad,Ah,Ac,AX,Aq,Aj,Ag,b=new RegExp(".{2}$");if(Am.indexOf("{EEE}")>-1){if(Ar(An)){Ak=w.t;}else{if(Ao(An)){Ak=w.y;}else{Ak=w[AW+Ai];}}Am=Am.replace("{EEE}",Ak);}Am=Am.replace("{EE}",w[AW+Ai]);Am=Am.replace("{E}",w[AW+Af+Ai]);Ap=An.getMonth();Am=Am.replace("{M}",Ap+1).replace("{MM}",b.exec("0"+(Ap+1)));Am=Am.replace("{MMMM}",w[Ae+Ap]);Am=Am.replace("{MMM}",w[Ae+Af+Ap]);Ab=An.getDate();Am=Am.replace("{d}",Ab).replace("{dd}",b.exec("0"+Ab));Am=Am.replace("{yy}",An.getFullYear().toString().substring(2,4)).replace("{yyyy}",An.getFullYear());Aa=An.getHours();AY=Aa;Ad=(AY<12)?w.am:w.pm;if(AY===0){AY=12;}else{if(AY>12){AY-=12;}}Am=Am.replace("{h}",AY).replace("{hh}",b.exec("0"+AY));Am=Am.replace("{H}",Aa).replace("{HH}",b.exec("0"+Aa));Ah=An.getMinutes();Am=Am.replace("{m}",Ah).replace("{mm}",b.exec("0"+Ah)).replace("{A}",Ad);Am=Am.replace("{tt}",Ad).replace("{t}",Ad.substring(0,1));Ac=An.getSeconds();Am=Am.replace("{S}",Ac).replace("{SS}",b.exec("0"+Ac));AX=An.getTimezoneOffset();Aq=AX>0?"-":"+";AX=Math.abs(AX);Aj=Math.floor(AX/60);Ag=AX%60;Aj=b.exec("0"+Aj);Ag=b.exec("0"+Ag);Am=Am.replace("{Z}",Aq+Aj+Ag).replace("{ZZ}",Aq+Aj+":"+Ag);return Am;}function I(){var AW,d,w,AX,b=0;AW=d=AP[AN]("paneshell");if(AW){w=window.innerHeight||(AP.documentElement&&AP.documentElement.clientHeight)||AP[AQ].clientHeight;b=0;do{b+=d.offsetTop;}while(d=d.offsetParent);if(!w&&!b){return;}AX=(w-b-2)+"px";if(AX!=AW.style.height){AW.style.height=AX;}}}function AO(){if(window.slowConnDlg){slowConnDlg.switchDisplay("dialupMask",0);slowConnDlg.switchDisplay("dialupLoading",0);}Neo.Event.removeHandler(AP,"click",x);Neo.Event.removeHandler(AP[AN]("shellcontent"),"click",R);Neo.Event.removeHandler(AP[AN]("shellcontent"),"dblclick",AT);}function AI(){var b=AP[AN]("slot_LREC");if(b){b.style.display="none";}}return{Event:o,fetchCSS:AV,supplant:c,mix:AH,exec:m,replaceClass:AC,getElementsByClass:K,globalClick:x,rightPaneClick:R,rightPaneDblClick:AT,init:AL,drawFolders:AF,drawMailboxes:q,insert:L,setUHImage:N,injectMessages:y,injectSearchMessages:B,async:t,getDateFormat:F,dateFormatter:g,resizeFullpage:I,sortFolders:z,sortCorpFolders:O,msgHdrStack:W,openMessage:i,removeEvents:AO,hideLREC:AI,_getSysFolderName:l,_hasClass:AA,_addClass:f,_removeClass:X,_getNextSibling:a,_getPrevSibling:G,_switchToInboxTab:s,_switchToWhatsNewTab:J};
}());