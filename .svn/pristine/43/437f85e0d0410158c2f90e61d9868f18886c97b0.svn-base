YUI.add("common-ui-dialog-helper",function(C){var A=C.common.Utils.substitute,B=C.ui.Templates,D="alertdialog";C.namespace("common.ui");C.common.ui.DialogHelper=new function(){var G={modal_header:function(L){return L.hd;},modal_body:function(L){return L.bd;},modal_ft:function(L){return A(L.ft,0,0,0,strings);},_shared_module_offscreen_bin_modal_btn_ok:function(L){return L.ok;},_shared_module_offscreen_bin_modal_btn_cancel:function(L){return L.cancel;},_shared_module_offscreen_bin_modal_close_icon:function(L){return(L.hideClose)?"":A(B._shared_module_offscreen_bin_modal_close_icon.base,0,0,0,strings);},global_path_img:function(){return NeoConfig.globalPathImg+"/u/assets/img";},antivirus_logo_path_img:function(){return NeoConfig.avLogoUrl;}};function K(M,N,L){M.ft=B._shared_module_offscreen_bin_modal_btn_ok.base||"";M.role=D;if(N&&N.ok&&N.ok.text){M.ft=A(M.ft,0,0,0,{str_ok:N.ok.text});}E(M,N,L);}function J(M,N,L){C.use("_shared_module_offscreen_bin_modal_btn_cancel",function(){var O={cancel:B._shared_module_offscreen_bin_modal_btn_cancel.base};M.ft=A(B._shared_module_offscreen_bin_modal_btn_cancel.base,O,G,0,strings);M.focusedNode='.modal-ft [data-action="cancel"]';M.role=D;E(M,N,L);});}function F(M,N,L){C.use("_shared_module_offscreen_bin_modal_btns_ok_cancel",function(){var O={ok:B._shared_module_offscreen_bin_modal_btn_ok.base,cancel:B._shared_module_offscreen_bin_modal_btn_cancel.base};if(N&&N.ok&&N.ok.text){O.ok=A(O.ok,0,0,0,{str_ok:N.ok.text});}M.ft=A(B._shared_module_offscreen_bin_modal_btns_ok_cancel.base,O,G,0,strings);M.role=D;E(M,N,L);});}function I(M,N,L){M.ft=A(M.ft,0,G,0,strings);E(M,N,L);}function E(M,N,L){M=M||{};if(!M.template){var P=M.rawTemplate||B._shared_module_offscreen_bin_modal.base;M.template=A(P,M,G,0,strings);}M.centered=true;M.cssPrefix="modal";M.focusedNode=M.focusedNode||".yui3-widget-ft span.default a";function O(Q){Q.get("contentBox").set("aria-live","polite");Q.show();if(L){L(Q);}}H(M,N,O);}function H(M,O,L){var N=new C.comms.ui.Dialog(M);O=O||{};N.render();N.get("contentBox").on("click",function(R){var S=C.common.Utils.getDataAction(R),Q=S.action,P=S.node;if(Q){if(!M.allowDefault){R.preventDefault();}if(NeoConfig.intl==="jp"){N.set("adAction",(Q=="ok"?"disableRetriggerOnOk":"disableRetriggerOnHide"));}N.fire("dialog:action",{dataAction:Q,item:P});}});N.after("dialog:action",function(S){var Q=S.dataAction,P;if(Q){P=O[Q];try{if(!P||!P.stopDestroy){N.destroy();}P&&P.handler&&P.handler.call(this,S,N);}catch(R){}}});if(L){L(N);}}C.mix(this,{alert:K,cancelDialog:J,confirm:F,create:H,custom:I,createCommon:E});};},"1.0.0",{requires:["common-utils","modal_css","comms-ui-dialog-base","_shared_module_offscreen_bin_modal","_shared_module_offscreen_bin_modal_btn_ok"]});YUI.add("mail-errormap",function(C){C.namespace("mail.Errormap");var R=C.common.Utils,M=C.Lang,I=C.common.net.Error,Q=R.substitute,J="_{{method}}",B="_{{status}}",P=J+B,S="{{subcode}}",L={"ComposeError":[14,"ComposeError"],"ComposeErrorMessage":[14,"ComposeError"],"ComposeErrorServiceError":[14,"ComposeError"],"ComposeErrorUnknown":[14,"ComposeError"],"ComposeErrorAttachment":[14,"ComposeAttachFailed"],"ComposeErrorBadMIME":[14,"BadMime"],"ComposeErrorBadRecipient":[0,"BadRecipient"],"ComposeErrorBadFrom":[0,"BadFrom"],"ExceededMaxTo":[0,"MaxToAddressesExceeded"],"ExceededMaxCc":[0,"MaxCCAddressesExceeded"],"ExceededMaxBcc":[0,"MaxBCCAddressesExceeded"],"ExceededMaxRecipients":[0,"MaxTotalAddressesExceeded"],"ExceededMaxHourlyMessages":[0,"HourlyLimitExceeded"],"ExceededMaxDailyMessages":[0,"DailyLimitExceeded"],"InvalidFromAddress":[0,"BadFrom"],"InvalidRecipientAddress":[0,"BadRecipient"],"NicknameExpansionFailed":[0,"NicknameExpansionFailed"],"EmptyFolderFailed":[14,"EmptyFolderFailed"],"FolderEmptyFailed":[14,"EmptyFolderFailed"],"FolderCreateFailed":[14,"FolderCreateFailed"],"FolderFetchFailed":[14,"FolderFetchFailed"],"FolderIdDoesntExist":[14,"FolderIdDoesntExist"],"FolderIdIsSystemFolder":[0,"FolderIdIsSystemFolder"],"FolderListFetchFailed":[2,"FolderListFetchFailed"],"FolderNameExists":[0,"FolderAlreadyExists"],"FolderNameNotAllowed":[0,"folder_name_is_reserved"],"FolderNameIllegalCharacter":[0,"FolderNameIllegalCharacter"],"FolderNameIllegalCharset":[14,"FolderNameIllegalCharacter"],"FolderNameTooLong":[0,"folder_name_too_long"],"FolderRemoveFailed":[14,"FolderRemoveFailed"],"FolderRenameFailed":[14,"FolderRenameFailed"],"GetMessageFailed":[6,"GetMessageFailed"],"BadCharset":[6,"download_message_viewing_error"],"HumanVerificationRequired":[0,"HumanVerificationRequired"],"AccountVerificationRequired":[0,"AccountVerificationRequired"],"CannotSendThisMessage":[14,"CannotSendThisMessage"],"InputTooEarly":[14,"HumanVerificationFailed"],"InvalidYID":[14,"HumanVerificationFailed"],"MaxAttempts":[12,"HumanVerificationFailed"],"TimedOut":[14,"HumanVerificationFailed"],"WrongInput":[14,"HumanVerificationFailed"],"WrongUser":[14,"HumanVerificationFailed"],"ListMessagesFailed":[2,"ListMessagesFailed"],"MailboxOpenFailed.Busy":[5,"MailboxBusy"],"MailboxOpenFailed":[2,"MailboxOpenFailed"],"MessageDeleteFailed":[2,"MessageDeleteFailed"],"MessageFetchFailed":[4,"MessageFetchFailed"],"MessageIdsNotFound":[4,"MessageIdsNotFound"],"MessageNotFound":[4,"MessageNotFound"],"MessageSaveFailed":[2,"MessageSaveFailed"],"MessageSelectionNotFound":[4,"MessageSelectionNotFound"],"MissingApplicationID":[14,"MissingApplicationID"],"MissingCredentials":[14,"MissingCredentials",null,[]],"NoRecipientsSpecified":[0,"MissingRecipients"],"NoSenderSpecified":[0,"NoSenderSpecified"],"ResetSpamFilterFailed":[2,"ResetSpamFilterFailed"],"SaveMessageFailed":[2,"SaveMessageFailed"],"SendMessageFailed":[14,"SendMessageFailed"],"MetaDataFetchFailed":[2,"ServerError"],"MetaDataSaveFailed":[2,"ServerError"],"UserOpenFailed":[1,"ServerError"],"ServerError":[14,"ServerError"],"SetUserDataFailed":[1,"SetUserDataFailed"],"SpamReportingFailed":[14,"SpamReportingFailed"],"SpamTrainingFailed":[14,"SpamTrainingFailed"],"TooManyCallsBatched":[14,"TooManyCallsBatched"],"TooManyFolders":[0,"TooManyFolders"],"TooManyMessagesRequested":[14,"TooManyMessagesRequested"],"UserOverQuota":[19,strings["str_cfg_tog_hasUnlimitedStorage"]?"UserTempSuspended":"UserOverQuota"],"UserAbuseDetected":[19,"UserTempSuspended"],"UserPreferenceFetchFailed":[2,"UserPreferenceFetchFailed"],"UserSuspended":[19,"UserSuspended"],"MessageTooLarge":[0,"MessageToLarge"],"ParentalControlsNoAttachments":[0,"ypcUploadDisallowed"],"ExceededAttachmentLimit":[0,"uploadNumFiles"],"SendMessageAttachmentFailed":[14,"SendAttachmentFailed"],"MessageTooLargeSomeRecipients":[0,"MessageTooLargeForSomeRecipients"],"SendMessageFailedSomeRecipients":[14,"SendMessageFailedForSomeRecipients"],"UserDataFetchFailed":[1,"UserDataFetchFailed"],"FarmNameNotFound":[1,"FarmNameNotFound"],"GetMessageInvalidId":[4,"GetMessageInvalidId"],"GetDisplayMessageFailed":[6,"GetDisplayMessageFailed"],"GetPartContentFailed":[6,"GetDisplayMessageFailed"],"ComposeFailed":[14,"ComposeFailed"],"MetaDataMissingPath":[2,"MetaDataMissingPath"],"SetMetaData":[2,"BadRequest"],"MoveMessagesInvalidId":[4,"MoveMessagesInvalidId"],"MetaDataTooLarge":[2,"ServerError"],"InputInvalid":[8,"ServerError"],"InvalidRequest":[8,"BadRequest",null,["UE_ALERT_TAE8_{{code}}_{{method}}","UE_ALERT_TAE8_{{code}}_{{method}}_{{message}}"]],"FailedDependency":[14,"ServerError"],"SearchProgramFailed":[20,"error_searching_messages"],"ListMessagesFailed.SearchMessages":[2,"error_searching_messages"],"FeatureUnavailable":[11,"INTERNAL MESSAGE:\nThe underlying version of Cascade on this box doesn't support the API that was requested\nMethod : \n","ServerErrorFeatureUnavailable"+J],"999":[19],"BatchItemError":[],"OperationNotAllowedCurrently":[24,"OperationNotAllowedCurrently"],"ServiceTemporarilyUnavailable":[21]},D={"999":[19],"2":[18,"Offline","OfflineTitle",["E_HTTP"+B,"E_HTTP"+P]],"conn":[18,"Connect",null,["E_HTTPConnect","E_HTTPConnect"+P]],"Malformed-unk":[14,null,null,["E_RespParseUnk","E_RespParse"+P]],"Malformed-mail":[14,null,null,["E_RespParseMail","E_RespParse"+P]],"HTMLResponse-unk":[14,null,null,["E_RespHTMLUnk","E_RespHTML"+S+P]],"HTMLResponse-mail":[14,null,null,["E_RespHTMLMail","E_RespHTML"+S+P]],"NoResponse-unk":[14,null,null,["E_RespEmptyUnk","E_RespEmpty"+P]],"NoResponse-mail":[14,null,null,["E_RespEmptyMail","E_RespEmpty"+P]],"MalformedFault":[14,null,null,["E_RespFault","E_RespFault"+J]],"timeout":[18,"Timeout",null,["E_Timeout"+J]],"invalidwssid":[14,null,null,["E_InvalidWssid"]],"loginfail":[14]};function K(Y,W,T,b,U){var X,Z=Y.detail,d,c,V="E_ServerBatch_"+U.join("_"),a=F(Y,W,T,true,U);R.assert(Z);if(W==200){for(X=0;X<Z.length;X++){d=Z[X];c=d.detail.idx;a=a.concat(F(d,W,U[c],b));a.push([V,c,d.code].join("_"));}}return a;
}function F(f,l,Z,U,i){function a(r){var p,q,s,t=f.message||"";if(r){p=[];s={code:V,method:Z,status:l,subcode:f.subcode,message:t.replace(/\s/g,"").replace(/\./g,"")};for(q=0;q<r.length;q++){p[q]=Q(r[q],s,null,null,strings);}}return p;}var V=f.code,c=f&&f.code&&(f.code.indexOf("-unk")>0),e,k,o,W,h,b,Y,d,m,n,g=Z+(i?"_"+i.join("_"):"");V=/^[^-]+/.exec(V);V=V&&V[0];h=I.isHttp(V);b=!h&&N(f,null,L);Y=!b&&N(f,null,D);d=b||Y;m=a(d&&d[3])||[];if(l==500){o="E_Server500_"+g;m.push(o,o+"_"+V);}if(!d){if(h){o="E_HTTP";m.push(o,o+"_"+l,[o,g,l].join("_"));}else{o="E_ServerUnknown_"+g;m.push(o,o+"_"+V);}}if(!U){W=d&&d[0];W=W!==undefined?W:(h?18:14);o="UE_ALERT_TAE"+W;if(W==14&&c){m.push("INTERCEPT_UNK_"+V);m.push("INTERCEPT_UNK_"+Z);}else{m.push(o,o+"_"+(h?l:V));if(W==14){m.push(o+"_"+Z);}if(W==5&&NeoConfig.isCorpmail){m.push(o+"_corpmail");}}if(W==4){function j(p){if(p!="Inbox"&&p!="Sent"&&p!="Draft"&&p!="Trash"&&p!="%40S%40Search"&&p!="%40B%40Bulk"&&p!="%40C%40Chats"&&p!="@S@Search"&&p!="@B@Bulk"&&p!="@C@Chats"){return"userfid";}return p;}var T,X;if(f.detail&&f.detail.request&&(n=f.detail.request.postdata)){if(g=="MoveMessages"){k=n.match(/"sourceFid":"(.*?)"/);k=(k&&k[1])||"?";e=n.match(/"destinationFid":"(.*?)"/);e=(e&&e[1])||"?";T=j(k)+"-"+j(e);}else{T=n.match(/"fid":"(.*?)"/);if(T&&T[1]){T=j(T[1]);}else{T="?";}}}else{T="?";}m.push(o+"_"+(h?l:V)+"_"+g+"_"+T);}}m.push("E_"+g,"E_"+g+"_"+(h?l:V));return m;}function O(U){var T=U&&(U.match(/Client\.([\w\W]+)$/)||U.match(/Server\.([\w\W]+)$/));return(T&&T[1])||U;}function G(U){var V,T=new RegExp(I.base+"([\\w\\W]+)$");return((V=U.match(T))&&V[1])||U;}function E(V,U,T){return U&&(M.isNumber(T)?V[U]&&V[U][T]:V[U]);}function N(Y,a,Z){var X,W=Y.code,U,V,b,T=I.isHttp(W);V=(Z&&[Z])||(T?[D]:[L,D]);U=T?G(W):O(W);for(X=0;X<V.length;X++){if((b=E(V[X],U,a))!==undefined){return b;}}}function H(T){return T.code=="BatchItemError"&&T.detail;}function A(X){var V,W="",T,Y,U;if(U=H(X.fault)){V=[];for(T=0;T<U.length;T++){W=A({fault:U[T]},1);W&&V.push(W);}W=V.join("; ");}else{Y=N(X.fault,1);W=Y&&strings["str_error_"+Y];}return W;}C.mix(C.mail.Errormap,{getTAE:function(W){var V,T,U=W.fault;U=((V=H(U))&&V[0])||U;return((T=N(U,0))!==undefined)?T:(I.isHttp(U.code)?18:14);},getMessage:A,getTitle:function(V){var U,W,T=V.fault;T=((U=H(T))&&U[0])||T;W=N(T,2);return W&&strings["str_error_"+W];},getStats:function(W,U){var T=W.fault,V=H(T)?K:F;return V(T,W.status,W.callback.method,U,W.callback.batchopcbk);},getTAEStats:function(T,U){var V=["UE_ALERT_TAE"+T];U&&V.push(V[0]+"_"+U);return V;}});},"1.0.0",{requires:["json-stringify","common-net-error"]});YUI.add("_shared_module_offscreen_bin_modal_launch_error_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_launch_error_rollup={base:'<p>{{str_rough_errlaunch_message}}</p><ul> <li><a href="{{link_goto_latest}}" class="more">{{str_rough_try_again_now}}</a></li> <li><a href="{{link_goto_tae_help}}" class="more" target="_blank">{{str_rough_visit_help_page}}</a></li> </ul> <br/><span>{{str_rough_errlaunch_troubleshoot}}</span>'};},"1.0.0");YUI.add("mail-error",function(C){C.namespace("mail.Error");var K=C.common.net.Error,M=C.common.Utils,B=C.mail.Errormap,I=M.rocketstats,H=C.JSON.stringify,E="45";function G(S,P){function X(){var Z,a="";for(Z=0;Z<Q.length;Z++){a+=" "+[Q[Z].method,Q[Z].code].join(":");}return a;}function T(){var b,Z,a=S.request;if(/SaveMessage/.test(O)||/SendMessage/.test(O)){Z=a.postdata;a.postdata="<filtered>";b=H(a);a.postdata=Z;}return b||H(a);}var V=P.fault,R=V.code,W=P.callback||{},U=R=="BatchItemError",Q=U&&W.batchopcbk,O=W.method,Y={method:O,fault:U?X():R,tae:B.getTAE(P),message:B.getMessage(P)||V.message||"",request:T(),http:[P.status,P.statusText].join(" "),headers:P.allHeadersText||"",response:P.responseText||"",duration:S.end?(S.end-S.start):"X",yid:NeoConfig.loginId||""};return Y;}function F(R){var Q,O;if(strings["str_tog_TAESupported"]){if(R.tae===E&&strings["str_cfg_url_yahoo_mail_help_tae"+E]){O=strings["str_cfg_url_yahoo_mail_help_tae"+E];}else{O=strings["str_cfg_url_TAEHelpPages"]+"mltamtae"+R.tae+".html";}}else{O=strings["str_cfg_url_contact_customer_care"];}Q={link_goto_latest:"launch?reason=ignore&rs=1",launch_error_code:R.tae,link_goto_tae_help:O};var P=M.substitute(C.ui.Templates._shared_module_offscreen_bin_modal_launch_error_rollup.base,Q,null,null,strings);K.show(null,P,strings["str_error_MailErrorTitle"],{modal_classes:"lg"});}function D(O,Q){var P,S,R=Q?":background":"";if(O){S=O.length||0;for(P=0;P<S;P++){I.stat("mailnet"+R,O[P]);if((typeof navigator.onLine!="undefined")&&!navigator.onLine){I.stat("mailnet:offline"+R,O[P]);}}}return O;}function J(U,S,Q,P){function T(V){try{U.stats=V;U.detail=S.fault.message||"";M.netError(H(U));}catch(W){}}var O=!Q&&B.getStats(S,P),R=S.callback&&S.callback.backgroundLogs&&S.callback.backgroundLogs[0]=="*";D(O,R);if(P){I.stat("mailnet","TAE4:SUPPRESS:"+U.method);}T(O);}function N(O,P){O&&D(B.getTAEStats(O,P));}function A(p,Z,b){function f(e){return(O.search(e)!==-1)||((g+"")==e);}M.assert(b.fault);try{var W=b.fault,g=b.status,O=W.code,j=O=="BatchItemError",U,h,o=b.callback||{},P=o.method,d,Q=/xhrsend/.test(O),l,c=[401],X,R,V,S,T=b.callback,a=W&&W.message&&W.message.match("Content-Length:0"),Y={"Server.Malformed-mail":true};if(a){I.stat("mailnet","empty-post-body-"+(T.retry?"1":"0"));}if((Y[O]||a)&&!T.retry){R=b.request;S=C.common.net.SessionMgr;C.mix(T,{retry:true});if(O=="Server.Malformed-mail"){I.stat("mailnet","malformed-mail-retried");}if(a){I.stat("mailnet","empty-post-body-retried");}V=S.request(R.url,S.formatQueryParams(R.urlparams,R.enc),T,R.mthd,R.enc);if(R.mthd=="POST"){V.request.post=R.postdata;}V.send();return;}if(j){for(var k=0;k<W.detail.length;k++){A(p,Z,W.detail[k]);}return;}function m(e,q,i){p.callDefault(e,q,i);}d=G(Z,b);l=K.suppress(o.suppressCodes,c.concat(o.exceptCodes||[]),f),X=K.suppress(o.suppressLogs,o.exceptLogs,f);M.assert(o.service=="mail");if(d.method==="GetDisplayMessage"){if(d.fault==="Client.MessageIdsNotFound"){I.stat("mailnet","TAE4:MIDsNotFound:"+NeoConfig.permMsgDelOp1+":"+NeoConfig.permMsgDelOp2);}prime=(typeof Z.callbackData.primeMsg!="undefined")?"1":"0";I.stat("mailnet","TAE4:GDM:FAILURE:PRIME:"+prime+":"+d.fault);}if(g==500||j){if(/SessionIdReissue/.test(O)){m(402);}else{if(/Credentials/.test(O)){m(401,{stat:O+"_"+P});}else{if(/ClientRedirect/.test(O)){U=M.substitute(strings["str_error_reload_account_migrated"],null,null,strings);if(/HostCorrection/.test(O)){m(401,{msg:U,url:"http://mail.yahoo.com",stat:O+"_"+P});}else{m(310,{msg:U,stat:O+"_"+P});}}else{if(/999/.test(O)){m(999,W.detail&&W.detail.token);}else{if(/ServiceTemporarilyUnavailable/.test(O)&&W.detail&&W.detail.displayUrl){I.stat("redirect:outage:500","client");window.location=W.detail.displayUrl;return;}if(!l){F(d);}}}}}}else{if(O.indexOf("-unk")>-1){h={};h.message=strings.str_error_Unk;h.title=strings.str_error_Unk_title;m(null,h,Q);}else{if(!l){h={};h.message=d.message;h.title=B.getTitle(b);m(null,h,Q);}}}if(!p.retry){J(d,b,Q||X,l);}}catch(n){M.assert(0,"mail:controller:error - "+n.message);}if(!p.isdone()){p.done();}}function L(R){var P,Q="",O="";I.stat("mailnet","FetchExternalAccount"+O);M.netError("FetchExternalAccount Error"+H(R));for(P=0;P<R.length;P++){Q+=M.substitute(strings["str_error_extFetch_"+R[P].status],R[P]);Q+="<br/><br/>";}}C.mix(C.mail.Error,{handle:A,extFetchError:L,_showTae:F,statTAE:N});},"1.0.0",{requires:["common-net-error","mail-errormap","rocket-stats","json-stringify","_shared_module_offscreen_bin_modal_launch_error_rollup"]});