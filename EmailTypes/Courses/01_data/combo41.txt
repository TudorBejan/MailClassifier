YUI.add("oui-window-modder",function(A){A.namespace("Messenger").WindowModder=function(Q,K){K=K||{};var i=Q||A.config.win,H=i.document,P,m;var W=false,q=(i.external&&typeof i.XMLHttpRequest=="undefined"),L=false,Y=A.Messenger.WindowAPI,l="",T=0,C=0,O,J=false,S=false,R=false,G,e=false,b=false,a=false,o={},V,j=K.rtl||false;if(typeof(i.IOWA)==="object"){if(typeof(i.IOWA.rpc)==="object"){L=i.IOWA.rpc;}}function k(r){if((typeof(console)==="object")&&(typeof(console.log)==="function")){console.log(H.URL+": "+r);}}function Z(t,s,u,r){if(typeof r==="undefined"){r=false;}if(t.addEventListener){t.addEventListener(s,u,r);}else{t.attachEvent("on"+s,u);}}function c(t,s,u,r){if(typeof r==="undefined"){r=false;}if(t.removeEventListener){t.removeEventListener(s,u,r);}else{t.detachEvent("on"+s,u);}}function N(r){if(typeof(r)==="string"){r=A.one(H.body).one(r);}if(r){r.set("unselectable","on");r.setStyle("MozUserSelect","none");r.setStyle("WebkitUserSelect","none");}}function g(r){if(typeof(r)==="string"){r=A.one(H.body).one(r);}if(r){r.set("unselectable","off");r.setStyle("MozUserSelect","");r.setStyle("WebkitUserSelect","");}if(i.getSelection){var s=i.getSelection();s.collapse(H.body,0);}}function D(){if(i.getSelection){var s=i.getSelection();s.removeAllRanges();}else{try{if(H.selection.createRange){var r=H.selection.createRange();H.selection.empty();}}catch(t){}}}function f(r){i=r;H=i.document;}function M(r){if(r.move_only_x){S=r.move_only_x;}if(r.move_only_y){R=r.move_only_y;}if(r.resize_only_x){b=r.resize_only_x;}if(r.resize_only_y){a=r.resize_only_y;}}function h(r){if(O!==undefined){c(O,"mousedown",F);O=undefined;}if(r&&r!==""){var s=H.getElementById(r);if(s){O=s;Z(s,"mousedown",F);}}}function I(s,r){if(o[s]!==undefined){c(o[s],"mousedown",U);o[s]=undefined;}if(r&&r!==""){var t=H.getElementById(r);if(t){o[s]=t;Z(t,"mousedown",U);}}}function F(r){if(J){return;}J=true;n(r);}function U(r){if(e){return;}e=true;n(r);}function n(s){s=s||i.event;var r;var t;D();N(A.one(H.body));t=s.target?s.target:s.srcElement;t&&t.setCapture&&t.setCapture();if(P){Y.MakeTopMostDiv(m);Y.Show(m);Y.MakeTopMostDiv(l);}r=(t&&t.setCapture)?t:H;Z(r,"mousemove",B,true);Z(r,"mouseup",p,true);if(P){if(A.UA.ie){Z(P.document,"mousemove",B,true);Z(P.document,"mouseup",p,true);}else{Z(P,"mousemove",B,true);Z(P,"mouseup",p,true);}}T=s.screenX;C=s.screenY;if(J){Y.BeginMove(l);}if(e){V=t.id;Y.BeginResize(l);}}function p(s){s=s||i.event;var r;var t=s.target?s.target:s.srcElement;if(J){J=false;Y.EndMove(l);}if(e){e=false;Y.EndResize(l);}P&&Y.Hide(m);r=(t&&t.setCapture)?t:H;H.releaseCapture&&H.releaseCapture();c(r,"mouseup",p,true);c(r,"mousemove",B,true);if(P){if(A.UA.ie){c(P.document,"mousemove",B,true);c(P.document,"mouseup",p,true);}else{c(P,"mousemove",B,true);c(P,"mouseup",p,true);}}V=undefined;g(A.one(H.body));}function B(u){u=u||i.event;var t=(u.screenX-T),s=(u.screenY-C);if(J){if(S){s=0;}if(R){t=0;}if(W){k("calling OUI.window.Move("+l+", "+t+", "+s+")");}Y.Move(l,t,s);}else{if(e){if(b){s=0;}if(a){t=0;}var r,v;if(V=="IowaWindowResizerTop"){t=0;r=false;v=true;}else{if(V=="IowaWindowResizerBottom"){t=0;r=false;v=false;}else{if(V=="IowaWindowResizerLeft"){s=0;r=true;v=false;}else{if(V=="IowaWindowResizerRight"){s=0;r=false;v=false;}else{if(V=="IowaWindowResizerTopLeft"){r=true;v=true;}else{if(V=="IowaWindowResizerTopRight"){r=false;v=true;}else{if(V=="IowaWindowResizerBottomLeft"){r=true;v=false;}else{if(V=="IowaWindowResizerBottomRight"){r=false;v=false;}}}}}}}}if(j){r=!r;}Y.Resize(l,t,s,r,v);}}}function X(r){if(r.oui_div_id){l=r.oui_div_id;}if(typeof(r.gripper_element_id)!="undefined"){h(r.gripper_element_id);}if(typeof(r.resizer_element_id)!="undefined"){I(3,r.resizer_element_id);}if(typeof(r.top_resizer_element_id)!="undefined"){I(0,r.top_resizer_element_id);}if(typeof(r.top_right_resizer_element_id)!="undefined"){I(1,r.top_right_resizer_element_id);}if(typeof(r.right_resizer_element_id)!="undefined"){I(2,r.right_resizer_element_id);}if(typeof(r.bottom_right_resizer_element_id)!="undefined"){I(3,r.bottom_right_resizer_element_id);}if(typeof(r.bottom_resizer_element_id)!="undefined"){I(4,r.bottom_resizer_element_id);}if(typeof(r.bottom_left_resizer_element_id)!="undefined"){I(5,r.bottom_left_resizer_element_id);}if(typeof(r.left_resizer_element_id)!="undefined"){I(6,r.left_resizer_element_id);}if(typeof(r.top_left_resizer_element_id)!="undefined"){I(7,r.top_left_resizer_element_id);}}function d(s,r){P=r;m=s;}function E(){var r={};r.oui_div_id="";r.gripper_element_id="";r.resizer_element_id="";r.top_resizer_element_id="";r.top_right_resizer_element_id="";r.right_resizer_element_id="";r.bottom_right_resizer_element_id="";r.bottom_resizer_element_id="";r.bottom_left_resizer_element_id="";r.left_resizer_element_id="";r.top_left_resizer_element_id="";X(r);}return{setConstraints:M,setElementIds:X,clearElementIds:E,setBackingDiv:d,setWindowContext:f};};},"@VERSION@",{requires:["om-window-api"]});YUI.add("oui-basewindow",function(B){var F=B.Node,H="oui-modalwindow-event",A="oui-modalwindow-closed",D="oui-window-shown",J="oui-window-hidden",E="drag-backing-div",C=B.Messenger.WindowAPI,G=window.WINDOW_MOVEMENT_BACKER;function I(K){I.superclass.constructor.apply(this,arguments);}I.NAME="oui-basewindow";I.ATTRS={windowName:{value:"BaseWindow"},contentClass:{},requires:{},showChrome:{value:true},visible:{value:false},disabled:{value:false},waiting:{value:false},minimized:{value:false},modal:{value:false},startHidden:{value:false},startMinimized:{value:false},showClose:{value:true},showMaximize:{value:false},showMinimize:{value:false},allowResize:{value:true},allowMove:{value:true},startPosition:{value:{top:400,left:400}},startHeight:{value:200},startWidth:{value:200},minWidth:{value:0},minHeight:{value:0},limitToViewport:{value:true},centerOnShow:{value:false},cssFiles:{value:[]},cssClass:{value:""},cssLoaded:{value:false},contentObject:{value:null},srcWindow:{value:""},allowDisable:{value:true},title:{setter:function(L){if(L&&this._rendered&&this.get("showChrome")&&this._win){var K=B.one(this._win.document.body);if(K.one("#titleText")){K.one("#titleText")._node.innerHTML=L;}}if((this.get("windowType")=="browserWindow")&&this._win&&this._win.document){this._win.document.title=L;}else{if(this.get("windowType")=="mailTab"&&this._rendered){C.SetTitle(this.get("windowName"),{title:L});}}return L;}},windowContentType:{value:""},elementTitle:{value:""},rendered:{value:false},showPopOut:{value:false},showPopIn:{value:false},windowType:{value:"iframe"},ariaRole:{value:""},rtl:{value:false},iframeLocation:{value:"overlay"}};B.extend(I,B.Base,{initializer:function(K){this._eh=[];this._unloaded=false;if(K.initData){this._initData=K.initData;}},render:function(P,L){var K=this.get("windowName"),N=this.get("centerOnShow")?{}:this.get("startPosition")||{},M=this.get("windowType");if(this._rendered){throw new Error("Tried to render the same OUI window twice.  Window name = "+K);}this._rendered=true;N.id=K;N.hidden=true;N.height=this.get("startHeight");N.width=this.get("startWidth");N.minWidth=this.get("minWidth");N.minHeight=this.get("minHeight");N.limit_to_viewport=this.get("limitToViewport");N.title=this.get("title");N.store=false;N.elementTitle=this.get("elementTitle");N.ariaRole=this.get("ariaRole");if(M=="browserWindow"){N.new_browser_window=true;this.set("showMaximize",false);this.set("showMinimize",false);this.set("showClose",false);this.set("allowResize",false);this.set("allowMove",false);this.set("showPopIn",this.get("showPopOut"));this.set("showPopOut",false);}else{if(M=="mailTab"){N.target="tab";N.inactive=this.get("startHidden");this.set("showMaximize",false);this.set("showMinimize",false);this.set("showClose",false);this.set("allowResize",false);this.set("allowMove",false);this.set("showPopIn",false);this.set("showPopOut",false);}else{if(M=="iframe"){N.new_browser_window=false;N.target=this.get("iframeLocation");}}}if(!L){try{C.LoadWindow({},K,N,B.bind(function(Q){if(Q.loadError){if(M==="browserWindow"){this.set("windowType","iframe");this._rendered=false;this.render(P);}}else{this.initWindow(Q,P);}},this));}catch(O){if(M==="browserWindow"){this.set("windowType","iframe");this._rendered=false;this.render(P);}}}else{this.initWindow(L,P);}},initWindow:function(L,N){var K=this,M=this.get("windowType");this.set("rendered",true);this._win=L;this._win.windowName=this.get("windowName");if(this.get("ariaRole")!==""){this._win.document.body.setAttribute("role",this.get("ariaRole"));}if(this.get("allowResize")||this.get("allowMove")){this._windowModder=new B.Messenger.WindowModder(L,{rtl:this.get("rtl")});if(this._windowModder){if(!G){B.later(100,this,function(){C.LoadWindow({},E,{hidden:true,width:5000,height:5000,top:-500,left:-500,id:E},function(P){var O=B.one(P.document.body).one(".window-loading-div");if(O){O.setStyle("display","none");}window.WINDOW_MOVEMENT_BACKER=G=P;G.windowName=E;K._windowModder.setBackingDiv(E,G);});});}else{this._windowModder.setBackingDiv(E,G);}}}if(this.get("windowType")=="browserWindow"||!this.get("startHidden")){this.show();}this._injectContent(L,B.bind(function(O){if(M!="iframe"){if(M=="browserWindow"){if(this.get("title")){this._win.document.title=this.get("title");}this._addEventListener(this._win,"focus",B.bind(this.focus,this));this._addEventListener(this._win,"unload",B.bind(function(P){this.hide(true);},this));}else{this._win.focusHandler=B.bind(this.focus,this);this._win.closeHandler=B.bind(function(){this._unloaded=true;B.later(0,this,function(){this.hide(true);});},this);this._win.blurHandler=B.bind(this.blur,this);}this._addEventListener(this._win,"resize",B.bind(function(P){B.Global.fire("ytogo.WindowResized",this.get("windowName"));},this));}else{if(this.get("startMinimized")){this.minimize();}}N&&N(O);},this));},destructor:function(){B.each(this._eh,function(M){M.detach();});var K=this.get("contentObject");if(K&&K.destroy){try{K.destroy();}catch(L){}}if(!(this.get("windowType")=="browserWindow")){if(!this._unloaded){C.Unload(this.get("windowName"));}}else{this._win.close();}this._win=null;},show:function(N){if(!this._rendered){this.render();B.later(100,this,function(){this.show(N);});return;}if(!this.get("rendered")){B.later(100,this,function(){this.show(N);});return;}if(!this._pendingShowListener){if(!this.get("visible")){if(!this.get("cssLoaded")){this._pendingShowListener=this.after("cssLoadedChange",B.bind(function(){this._pendingShowListener.detach();this._pendingShowListener=null;this.show(N);},this));return;}var L=this.get("windowName"),M,K;if(this.get("centerOnShow")){C.MoveToCenter(L,this.get("startWidth"),this.get("startHeight"),B.bind(function(){C.Show(L);if(this.get("windowType")=="iframe"&&!this.get("disabled")){this.bringToFront();}},this));}else{C.Show(L);if(this.get("windowType")=="iframe"&&!this.get("disabled")){this.bringToFront();}}}this.onWindowShow(N);}},hide:function(M){if(this.get("visible")||M){var K=this.get("contentObject");if(K&&K.blur){try{K.blur();
}catch(L){}}this.onWindowHide();if(M){if(K&&K.onClose){K.onClose();}}else{if(this.get("windowType")=="browserWindow"){this.destroy();}}}},bringToFront:function(){if(this.get("windowType")=="browserWindow"){this.getDOMWindow().focus();this.focus();}else{if(this.get("windowType")=="mailTab"){openmail.Application.openView({id:this.get("windowName"),target:"tab",view:launchData.blankHtml});}else{C.MakeTopMostDiv(this.get("windowName"));}}},restore:function(){if((this.get("windowType")=="iframe")&&this.get("minimized")){var L=this.getDOMWindow(),K=B.one(L.document.body);this.set("minimized",false);K.removeClass("minimized");K.addClass("visible");if(this._windowModder){this._windowModder.setElementIds(this._modderIds);}C.Restore(this.get("windowName"));this.onWindowRestored();}},minimize:function(N){if((this.get("windowType")=="iframe")&&!this.get("minimized")){var M=this.getDOMWindow(),L=B.one(M.document.body);this.set("minimized",true);L.addClass("minimized");L.removeClass("visible");if(this._windowModder){this._windowModder.clearElementIds();}var K=this.get("windowName");C.Minimize(K);this.onWindowMinimized(N);}},onWindowMinimized:function(L){var K=this.get("contentObject");if(K&&K.onWindowMinimized){K.onWindowMinimized(L);}},onWindowRestored:function(){var K=this.get("contentObject");if(K&&K.onWindowRestored){K.onWindowRestored();}},onWindowShow:function(M){var L=this.get("windowName");this.set("visible",true);if(this.get("modal")){B.Global.fire(H,L);}var K=this.get("contentObject");if(K&&K.onWindowShow){K.onWindowShow(M);}},onWindowHide:function(){var L=this.get("windowName");if(this.get("modal")){B.Global.fire(A,L);}if(!(this.get("windowType")=="browserWindow")){C.Hide(L);}else{B.Global.fire("ytogo.WindowHidden",L);}this.set("visible",false);if(B.UA.ie===7){B.later(0,this,function(){try{this._win.document.body.className=this._win.document.body.className;}catch(M){}});}var K=this.get("contentObject");if(K&&K.onWindowHide){K.onWindowHide();}},focus:function(){var K=this.get("contentObject");if(!this.get("disabled")&&K&&K.focus){K.focus();}},blur:function(){var K=this.get("contentObject");if(K&&K.blur){K.blur();}},startWaiting:function(){if(this.get("waiting")){return;}this.set("waiting",true);var K=B.one(this._win.document.body);K.addClass("waiting");this.disableWindow(true);},stopWaiting:function(){if(!this.get("waiting")){return;}this.set("waiting",false);var K=B.one(this._win.document.body);K.removeClass("waiting");this.enableWindow();},disableWindow:function(N){var M,L=B.one(this._win.document.body);if(!this.get("disabled")&&(this.get("allowDisable")||N)){M=L.one("#disableOverlay");if(!M){M=this._win.document.createElement("div");M.id="disableOverlay";this._win.document.body.appendChild(M);M=B.one(M);this._eh.push(M.on("click",function(O){O.halt();}));this._eh.push(M.on("keydown",function(O){O.halt();}));this._eh.push(M.on("contextmenu",function(O){O.halt();}));this._eh.push(M.on("mousedown",function(O){O.halt();}));}else{M.removeClass("hidden");}this.set("disabled",true);var K=this.get("contentObject");if(K&&K.onWindowDisabled){K.onWindowDisabled();}}},enableWindow:function(){if(this.get("disabled")){B.one(this._win.document.body).one("#disableOverlay").addClass("hidden");this.set("disabled",false);var K=this.get("contentObject");if(K&&K.onWindowEnabled){K.onWindowEnabled();}}},getDOMWindow:function(){return this._win;},getBackingDiv:function(){return G;},loadFiles:function(L,K,N){var M=this;YUI().use("get",function(P){P.config.win=M._win;P.config.doc=M._win.document;var U=M._win,O=L.length,W=K=="css"?"css":"script",S,V={};function Q(){O--;if(O===0){N();}}function T(Y,a){a=a||0;var Z,b=U?U.document:P.config.doc,d=b.styleSheets,c=false;for(Z=d.length-1;Z>-1;Z--){if(d[Z].href===Y){if(P.UA.webkit){c=true;}else{try{d[Z].cssRules;c=true;}catch(X){if(X.code==X.INVALID_ACCESS_ERR){}else{c=true;}}}break;}}if(c||a>100){Q();}else{P.later(50,this,T,[Y,++a]);}}if(U){V.win=U;}V.onSuccess=function(X){if(K=="css"&&(P.UA.webkit||P.UA.gecko)){T(X.nodes[0].href);}else{Q();}};V.onFailure=function(X){X.purge();Q();};if(P.UA.ie){V.onSuccess=N;P.Get[W](L,V);}else{for(S=0;S<L.length;S++){try{P.Get[W](L[S],V);}catch(R){}}}});},loadModule:function(L,N){var M=this,K=this._win.Y;window.Y.use(L,function(O){K.config.bootstrap=true;K.use(L,function(P){P.config.bootstrap=false;M._copyCSS();N&&N();});});},_injectContent:function(N,Q){var P,K,L,O=this;function M(){var S,R,a=O.get("requires"),T=O.get("contentClass"),Y,W,X=window.Y,V,U=false,Z;if(T){W=T.split(".");for(V=0;V<W.length;V++){X=X[W[V]];}if(!X&&a){S=a;S.push(function(){O._copyCSS();M();});R=window.Y;R.use.apply(R,S);return;}}log("Doing YUI.use call for window "+O._win.windowName);R=YUI({win:O._win,bootstrap:false});Z=B.Object.keys(YUI.Env.mods);Z.unshift("intl");R.use(Z,function(b){log("YUI.use callback invoked for window "+O._win.windowName);O._win.Y=b;if(window.patchYUI&&b.Widget){b.Widget.prototype.oldWidgetDestructor=b.Widget.prototype.destructor;b.Widget.prototype.destructor=function(){var d=this.get("boundingBox"),c=this.get("contentBox");if(c===d){c.remove(true);d.remove=function(){};}this.oldWidgetDestructor();};}if(T){X=b;for(V=0;V<W.length;V++){X=X[W[V]];}Y=new X({windowName:O.get("windowName")});O.set("contentObject",Y);Y.render(P,O._initData);O._initData&&delete O._initData;}if(window.log){b["log"]=window.log;}if(!O.get("cssLoaded")){O.after("cssLoadedChange",function(){L.addClass("hidden");});}else{L.addClass("hidden");}Q&&Q(P);});}YUI().use("node",function(S){S.config.win=O._win;S.config.doc=O._win.document;P=S.one(N.document.body);L=P.one(".window-loading-div");function R(){var V=O.get("windowType"),U,T;if(!O.get("minimized")){P.addClass("visible");}if(V=="browserWindow"){P.addClass("poppedOut");}else{if(V=="mailTab"){P.addClass("mailTab");}}P.addClass(O.get("cssClass"));if(O.get("showChrome")){O._injectChrome(P);L=P.one(".window-loading-div");P=P.one("#iowaWindow-content-inner");}M();}O._copyCSS();R();});},_copyCSS:function(){this.set("cssLoaded",false);
var M=document.getElementsByTagName("link"),L=this._win.document.getElementsByTagName("link"),K,O,P,R,N=[],Q=this.get("cssFiles")||[];for(P=0;P<M.length;P++){K=M[P].href;if(K){R=false;for(O=0;O<L.length;O++){if(L[O].href==K){R=true;break;}}if(R){continue;}N.push(K);}}if(Q.length>0||N.length>0){this.loadFiles(N.concat(Q),"css",B.bind(function(){this.set("cssLoaded",true);},this));}else{this.set("cssLoaded",true);}},_injectChrome:function(P){var N,K,S,M,V=this.get("title"),O,Q=this.get("showClose"),T=this.get("showMinimize"),U=this.get("showPopOut"),L=this.get("showPopIn")&&!U;try{P.setContent(B.Messenger.OuiBaseWindow.baseTemplate);}catch(R){}B.later(0,this,function(){this._modderIds={oui_div_id:this.get("windowName")};if(this._windowModder){if(this.get("allowMove")){this._modderIds.gripper_element_id="titleBar";P.addClass("movable");}if(this.get("allowResize")){this._modderIds.resizer_element_id="resizeGripper";this._modderIds.left_resizer_element_id="IowaWindowResizerLeft";this._modderIds.right_resizer_element_id="IowaWindowResizerRight";this._modderIds.top_resizer_element_id="IowaWindowResizerTop";this._modderIds.bottom_resizer_element_id="IowaWindowResizerBottom";this._modderIds.top_left_resizer_element_id="IowaWindowResizerTopLeft";this._modderIds.top_right_resizer_element_id="IowaWindowResizerTopRight";this._modderIds.bottom_left_resizer_element_id="IowaWindowResizerBottomLeft";P.addClass("resizable");}this._windowModder.setElementIds(this._modderIds);}if(Q){K=P.one("#closeButton");O=K.get("parentNode");O.removeClass("hidden");this._eh.push(K.on("click",this.onCloseButtonClicked,this));this._eh.push(K.on("mousedown",function(W){W.halt();}));if(!T&&!U){O.addClass("left");}}if(T){N=P.one("#minMaxButton");O=N.get("parentNode");O.removeClass("hidden");this._eh.push(N.on("click",this.onMinimizeButtonClicked,this));this._eh.push(N.on("mousedown",function(W){W.halt();}));if(!Q&&!U){O.addClass("right");}}if(U){S=P.one("#popOutButton");O=S.get("parentNode");O.removeClass("hidden");this._eh.push(S.on("click",this.onPopOutButtonClicked,this));this._eh.push(S.on("mousedown",function(W){W.halt();}));if(!Q){O.addClass("right");}if(!T){O.addClass("left");}}if(L){M=P.one("#popInButton");O=M.get("parentNode");O.removeClass("hidden");if(!B.UA.ie){this._eh.push(M.on("click",this.onPopInButtonClicked,this));this._eh.push(M.on("mousedown",function(W){W.halt();}));}else{this._addEventListener(M._node,"click",B.bind(this.onPopInButtonClicked,this));}if(!Q){O.addClass("right");}if(!T){O.addClass("left");}}if(V){P.one("#titleText")._node.innerHTML=V;}else{P.one("#titleText").addClass("hidden");}});},_modifyChromeForNative:function(L){var M=L.one("#titleBar"),K=L.one("#resizeGripper");if(M){M.addClass("hidden");}if(K){K.addClass("hidden");}},onCloseButtonClicked:function(K){var L=this.get("contentObject");if(K){K.halt();}if(L&&L.onBeforeClose&&L.onBeforeClose()){return;}this.hide(true);},onMinimizeButtonClicked:function(K){var L=this.get("minimized");if(L){this.restore();}else{this.minimize(true);}K.halt();},onPopOutButtonClicked:function(K){var L=this.get("windowName");this.hide(false);B.Global.fire("ytogo:popoutWindow",L);},onPopInButtonClicked:function(K){B.Global.fire("ytogo:popinWindow",this.get("windowName"));},_addEventListener:function(M,L,K){if(M.addEventListener){M.addEventListener(L,K,false);}else{M.attachEvent("on"+L,K);}}});B.namespace("Messenger").OuiBaseWindow=I;I.baseTemplate='        <div id="IowaWindowDiv" class="iowa_window_div">\n\n	        <div class="header" id="titleBar">\n	            <h2 id="titleText"></h2>\n				<div class="shaded tools">\n		            <span class="btn small left hidden">\n		               <a id="minMaxButton" class="icon minimize" href="javascript:;"></a>\n		            </span>\n		            <span class="btn small hidden">\n                       <a id="popOutButton" class="icon pop_out" href="javascript:;"></a>\n                    </span>\n                    <span class="btn small hidden">\n                       <a id="popInButton" class="icon pop_in" href="javascript:;"></a>\n                    </span>\n		            <span class="btn small right hidden">\n		               <a id="closeButton" class="icon close" href="javascript:;"></a>\n		            </span>\n	            </div>\n	        </div>\n\n			<!-- CONTENT DIV -->\n			<div id="iowaWindow-content">\n                <div class="window-loading-div"></div>\n                <div id="iowaWindow-content-inner">\n                    <!-- Window content should be placed here -->\n                </div>\n			</div>\n\n	        <div id="resizeGripper">\n	        </div>\n	        \n	        <div class=\'iowa_window_div_overlay1\'></div>\n	        \n			<div id=\'IowaWindowResizerLeft\'  class=\'iowa_window_resizer_left\'></div>\n			<div id=\'IowaWindowResizerRight\' class=\'iowa_window_resizer_right\'></div>\n			\n			<div id=\'IowaWindowResizerTop\'    class=\'iowa_window_resizer_top\'></div>\n			<div id=\'IowaWindowResizerBottom\' class=\'iowa_window_resizer_bottom\'></div>\n			\n			<div id=\'IowaWindowResizerTopLeft\'  class=\'iowa_window_resizer_top_left\'></div>\n			<div id=\'IowaWindowResizerTopRight\' class=\'iowa_window_resizer_top_right\'></div>\n			\n			<div id=\'IowaWindowResizerBottomLeft\'  class=\'iowa_window_resizer_bottom_left\'></div>\n\n\n\n\n		</div>\n\n';},"@VERSION@",{requires:["intl","oui-window-modder","om-window-api","node"]});YUI.add("omapi",function(A){if(!YUI.namespace("Messenger").OMAPI){(function(){var D=openmail.Application,C=A.Messenger.Events,B;YUI.Messenger.OMAPI={setData:function(F,E){E=E||function(){};D.setData(F,E);},persistGroupToggle:function(G){var E=G.groupId,F=G.state,H={keys:{}};switch(E){case A.Messenger.ContactList.FACEBOOK_GROUP_ID:H.keys.fbgroupExpandPref=F=="collapsed"?0:1;break;case A.Messenger.ContactList.DEFAULT_GROUP_ID:H.keys.expandGroups=F=="collapsed"?0:1;break;default:return;}this.setData(H);},loadAddressBook:function(){callInternal("getAddressbook",null,function(E){var F=E.contactsync?E.contactsync.contacts:(E.contacts?E.contacts.contact:null);A.Global.fire(C.AB_DATA_RECEIVED,F);});},toggleBrowserTitle:function(E){callInternal("browser.toggleTitle",{title:E});},sendEmail:function(E){var F=E.email;if(!F&&E.network=="yahoo"){if(E.user.indexOf("@")>-1){F=E.user;}else{F=E.user+"@yahoo.com";}}openmail.Mail.compose({to:F});},deleteFromAB:function(G){if(!launchData.guid||!G.addressbookId){return;}var F=openmail.Application.getAuthService("delete"+G.addressbookId),E=["http://social.yahooapis.com/v1/user/",launchData.guid,"/contact/",G.addressbookId].join("");F.callWebService({url:E,method:"DELETE",parameters:{"format":"json"}},function(H){if(H.error){}else{callInternal("contactChanged",{});}});},showDialog:function(H,F){var G={hd:H,bd:F};var E=function(){};callInternal("alertDialog",G,E);}};A.Global.on(C.GROUP_COLLAPSE_CHANGE,YUI.Messenger.OMAPI.persistGroupToggle,YUI.Messenger.OMAPI);A.Global.on(C.DELETE_FROM_AB,YUI.Messenger.OMAPI.deleteFromAB);callInternal("setListener",{event:"mail.signout"},function(E){A.Messenger.SessionManager.quickLogout();});callInternal("setListener",{event:"contacts.changed"},function(J){var H=J.data.type,I=J.data.list,G,F,E;if(!I){A.Messenger.OMAPI.loadAddressBook();return;}for(G=0,F=I.length;G<F;G+=1){I[G]=+(I[G]);}if(H==="delete"){for(G=0,F=I.length;G<F;G+=1){A.Messenger.ContactsManager.abContactDeleted(I[G]);}}else{if(H==="add"||H==="update"){callInternal("getAddressbook",null,function(K){var L=K.contactsync?K.contactsync.contacts:(K.contacts?K.contacts.contact:null);if(L){A.Messenger.ABUtils.parseUpdate(L,I,H);}});}}});callInternal("setListener",{event:"themes:change"},function(E){if(!E||!E.css||!E.name){return;}A.Messenger.GlobalConfig.set("themeInfo",E);});openmail.Mail.sendKeyEvent=function(F){var E={keyCode:F.keyCode||0,charCode:F.charCode||0,type:F.type||"keydown",ctrlKey:F.ctrlKey||false,altKey:F.altKey||false,shiftKey:F.shiftKey||false,metaKey:F.metaKey||false};callInternal("sendKeyEvent",E);};A.Global.on(C.PRESENCE_PREF_UPDATED,function(F){var E=-1;F=Number(F);switch(F){case 9999:E=9999;break;case -1:E=12;break;case 0:E=0;break;case 2:E=2;break;case 999:default:}if(E!==-1){callInternal("setLoginPref",{value:E});}});A.Global.on(C.MESSAGE_SENT,function(){if(!B){B=A.later(0,null,function(){B=null;callInternal("triggerAds",{spaceId:"978500261",trace:"messenger",pageView:false});});}callInternal("trackEvent",{spaceId:"978500255",trace:"messenger"});});A.Global.on(C.IM_TAB_SWITCHED,function(){if(!B){B=A.later(500,this,function(){B=null;callInternal("triggerAds",{spaceId:"978500262",trace:"messenger",pageView:false});});}});A.Global.on(C.ADD_CONTACT_SENT,function(){callInternal("contactChanged",{});});})();A.Command.registerModule("yim",YUI.Messenger.OMAPI);}A.namespace("Messenger").OMAPI=YUI.Messenger.OMAPI;},"@VERSION@",{requires:["events"]});YUI.add("windowmanager",function(B){var H=YUI.namespace("Messenger"),K=B.Messenger.CommonUtils,L=H.Events,A=B.Messenger.Intl,J=B.Messenger.GlobalConfig,C=B.Messenger.GlobalConstants,G=B.Messenger.WindowAPI,I=window.log,E=B.Messenger.OMAPI,F=B.UA.ie===7?false:true,D=0;if(!H.WindowManager){H.WindowManager=(function(){function M(N){M.superclass.constructor.apply(this,arguments);}M.NAME="yim-windowmanager";M.ATTRS={};M.WINDOW_DEFINITIONS={"MintyMainWindow":{contentClass:"Messenger.MintyMainWindow",windowName:"MintyMainWindow",startHidden:false,startHeight:0,allowResize:false,showMaximize:false,allowMove:false,showChrome:false,limitToViewport:false,elementTitle:K.substitute(A.get("str_window_title_main"),{str_cfg_branding_messenger:J.getGenericAppName()}),allowDisable:true,ariaRole:"application",requires:["mintymainwindow"],iframeLocation:"folderpane",cssClass:"mintymainwindow"},"ContactMenuWindow":{showChrome:false,startHidden:true,startWidth:280,startHeight:184,requires:["contactmenuwindow"],contentClass:"Messenger.ContactMenuWindow"},"OptionsWindow":{allowResize:false,allowMove:true,showClose:true,allowDisable:true,showMaximize:false,showMinimize:false,centerOnShow:true,modal:false,startWidth:600,startHeight:500,elementTitle:K.substitute(A.get("str_window_title_options"),{str_cfg_branding_messenger:J.getGenericAppName()}),title:K.substitute(A.get("str_nav_opt_msg_title"),{str_cfg_branding_messenger:J.getGenericAppName()}),cssClass:"yim_dialog optionswindow",ariaRole:"application",requires:["optionswindow"],contentClass:"Messenger.OptionsWindow"},"SignoutWindow":{allowMove:true,allowResize:false,startHidden:false,showMaximize:false,showMinimize:false,showClose:true,centerOnShow:true,modal:true,startWidth:510,startHeight:B.UA.ie===7?197:178,limit_to_viewport:true,title:K.substitute(A.get("str_menu_sign_out_messenger"),{str_cfg_branding_messenger:J.getGenericAppName()}),elementTitle:K.substitute(A.get("str_window_title_signout"),{str_cfg_branding_messenger:J.getGenericAppName()}),cssClass:"yim_dialog signoutwindow",destroyOnHide:true,ariaRole:"application",requires:["signoutwindow"],contentClass:"Messenger.SignOutWindow"},"DialogWindow":{allowResize:false,allowMove:true,showChrome:true,startWidth:420,minWidth:420,startHeight:130,showMaximize:false,showMinimize:false,showClose:true,centerOnShow:true,startHidden:true,modal:true,cssClass:"dialogwindow yim_dialog",elementTitle:K.substitute(A.get("str_window_title_alert"),{str_cfg_branding_messenger:J.getGenericAppName()}),title:A.get("str_conv_dialog_alert"),ariaRole:"application",requires:["dialogwindow"],contentClass:"Messenger.DialogWindow"}};B.extend(M,B.Base,{initializer:function(){this._openWindows={};this._listeners=[];this._titleToggleState={};this._destroyListeners={};this._listeners.push(B.Global.on(L.SYNC_WINDOW_SIZE,this.syncWindowSize,this));this._openModalWindows=[];this._listeners.push(B.Global.on(L.MODAL_WINDOW_OPENED,B.bind(this._modalWindowOpened,this)));this._listeners.push(B.Global.on(L.MODAL_WINDOW_CLOSED,B.bind(this._modalWindowClosed,this)));this._listeners.push(B.Global.on(L.YTOGO_WINDOW_SHOWN,B.bind(this._windowShown,this)));this._listeners.push(B.Global.on(L.YTOGO_WINDOW_HIDDEN,B.bind(this._windowHidden,this)));this._listeners.push(B.Global.on(L.YTOGO_WINDOW_RESIZED,B.bind(this._windowResized,this)));this._listeners.push(B.Global.on(L.SET_WINDOW_FOCUS,B.bind(this._windowSetFocus,this)));this._listeners.push(B.Global.on(L.WINDOW_FOCUSED,this._setWindowFocus,this,true));this._listeners.push(B.Global.on(L.WINDOW_BLURRED,this._setWindowFocus,this,false));this._listeners.push(B.Global.on(L.SHOW_WINDOW,B.bind(this.showWindow,this)));this._listeners.push(B.Global.on(L.HIDE_WINDOW,B.bind(this.hideWindow,this)));this._listeners.push(B.Global.on(L.WAIT_WINDOW,B.bind(this.setWindowWaitState,this)));this._pendingBlurTimers={};if(B.UA.ie){window.attachEvent("onunload",B.bind(this._destroyPoppedOutWindows,this));}else{window.addEventListener("unload",B.bind(this._destroyPoppedOutWindows,this),false);}},destructor:function(){B.each(this._listeners,function(N){N.detach();});B.each(this._pendingBlurTimers,function(N){N.cancel();});this.destroyAllWindows();},addWindowDefinition:function(O,N){M.WINDOW_DEFINITIONS[O]=N;},getWindowDefinition:function(N){return M.WINDOW_DEFINITIONS[N];},_destroyPoppedOutWindows:function(){B.each(this._openWindows,function(O){if(O.get("windowType")=="browserWindow"){try{O.destroy();}catch(N){}}});},_modalWindowOpened:function(N){if(this._openModalWindows.length===0){B.each(this._openWindows,function(O,P){if(P!=N){O.disableWindow();}});this._openModalWindows.push(N);}else{if(this._openModalWindows[this._openModalWindows.length-1]!=N){this._openModalWindows.push(N);}}},_modalWindowClosed:function(){this._openModalWindows.pop();if(this._openModalWindows.length===0){B.each(this._openWindows,function(O){O.enableWindow();});}else{var N=this.getWindow(this._openModalWindows[this._openModalWindows.length-1]);N.bringToFront();N.enableWindow();}},_windowShown:function(N){var O=this.getWindow(N);if(O&&!O.get("modal")&&this._openModalWindows.length>0){G.MakeTopMostDiv(this._openModalWindows[this._openModalWindows.length-1]);}},_windowHidden:function(O){var T=this.getWindow(O),R,N,Q,U,S,P;if(T){if(T._childWindows){while(T._childWindows.length){U=this.getWindow(T._childWindows.pop());if(U){U.hide();}}}if(T._parentWindow){S=this.getWindow(T._parentWindow);if(S&&S._childWindows){for(P=0;P<S._childWindows.length;P++){if(S._childWindows[P]==O){S._childWindows.splice(P,1);break;}}}}R=T.get("srcWindow");if(R){N=this.getWindow(R);if(N&&!N.get("disabled")){N.focus();}}Q=T.__winType__;if(Q&&M.WINDOW_DEFINITIONS[Q].destroyOnHide){this.destroyWindow(O);}}},_windowSetFocus:function(N){var O=this.getWindow(N);if(O&&O.get("visible")&&!O.get("disabled")){O.focus();}},_windowResized:function(N){var P=this.getWindow(N),O;if(P){O=P.get("contentObject");if(O&&O.onResize){O.onResize();}}},showWindow:function(U,Q,O){var S=this.getWindow(U),T={},P=this,V,N,R;
if(O&&O.srcWindow){N=this.getWindow(O.srcWindow);if(N){R=N.get("windowType");if(R!="mailTab"){T.windowType=R;if(S&&S.get("windowType")!=T.windowType){this.destroyWindow(U);S=null;}}}}if(!S){if(Q){T.startPosition={left:Q.left||0,top:Q.top||0};T.startHidden=true;V=function(){S=P.getWindow(U);S.show(O);};}else{T.startHidden=false;}this.createWindow({windowType:U,initParms:T,callback:V,initData:O});}else{if(Q){G.MoveTo(U,Q.left||0,Q.top||0);}S.show(O);}},hideWindow:function(N){var O=this.getWindow(N);O&&O.hide();},setWindowWaitState:function(O,P){var N=this.getWindow(O);if(N){if(P){N.startWaiting();}else{N.stopWaiting();}}},createWindow:function(X){var R=X.windowType,Y=X.windowId,V=X.initParms,O=X.domWin,Z=X.callback,a=X.skipLoad,U,S=this,N;U=M.WINDOW_DEFINITIONS[R]||{};U=B.mix(U,V||{},true);U.initData=X.initData;if(!Y){Y=R;}if(this._openWindows[Y]){throw new Error("Duplicate createWindow calls for window with type = "+R+" and ID = "+Y);}U.windowName=Y;var Q="",W=[],P,T;if(A.isRTL()){Q="rtl/";W=[launchData.phonehomeData.comboBase+launchData.phonehomeData.root+"yimapp/build/assets/css/"+Q+"cssfix-min.css"];}if(A.isBIDI()){if(A.detectDirection&&B.Intl.detectDirection(U.title)=="rtl"){U.title+="&rlm;";}else{U.title+="&lrm;";}}T=J.get("themeInfo");if(T){if(T.css){W.push(T.css);}}U.cssFiles=W;this._openWindows[Y]=new B.Messenger.OuiBaseWindow(U);this._openWindows[Y].render(Z,O);this._openWindows[Y].__winType__=R;this._destroyListeners[Y]=this._openWindows[Y].after("destroy",B.bind(function(){this._windowDestroyed(Y);},this));},loadModule:function(P,O,Q){var N=this._openWindows[O];if(N){N.loadModule(P,Q);}},destroyWindow:function(O){var N=this._openWindows[O];if(N){N.destroy();}},_windowDestroyed:function(N){delete this._openWindows[N];if(this._titleToggleState[N]){if(this._titleToggleState[N].timerHandle){this._titleToggleState[N].timerHandle.cancel();}delete this._titleToggleState[N];}this._destroyListeners[N].detach();delete this._destroyListeners[N];},destroyAllWindows:function(){for(var N in this._openWindows){if(this._openWindows.hasOwnProperty(N)){this.destroyWindow(N);}}setTimeout(function(){G.Unload("messenger");},0);},getWindow:function(N){return this._openWindows[N];},syncWindowSize:function(V){var O=this.getWindow(V),T=O.getDOMWindow(),S=B.one(T.document.body),U,R,Q,X,P=O.get("minWidth")||O.get("startWidth"),N=0,W=O.get("minHeight")||0;if(O.get("windowType")=="mailTab"){return;}if(O.get("showChrome")){U=S.one("#iowaWindow-content-inner");R=S.one("#iowaWindow-content");Q=S.one(".dialog-buttons");if(!P){P=U.get("scrollWidth")-R.get("offsetWidth")+S.get("scrollWidth");}if(V==="yimapp_dialogwindow"){X=S.one("#checkBoxDiv");if(X){if(X.hasClass("hidden")){X=null;}else{X.addClass("hidden");}}if(Q){Q.addClass("hidden");}U.setStyle("position","static");N=U.get("scrollHeight")-R.get("offsetHeight")+S.get("scrollHeight");U.setStyle("position","absolute");if(X){N+=42;X.removeClass("hidden");}if(Q){N+=34;Q.removeClass("hidden");}}else{if(Q){N=Q.get("offsetTop")+Q.get("offsetHeight")+S.one("#titleBar").get("offsetHeight")+16;}else{U.setStyle("position","static");N=U.get("scrollHeight")-R.get("offsetHeight")+S.get("scrollHeight");U.setStyle("position","absolute");}}}else{U.setStyle("position","static");if(!P){P=S.get("scrollWidth");}N=S.get("scrollHeight");U.setStyle("position","absolute");}if(N<W){N=W;}if(O.get("windowType")=="browserWindow"){if(typeof(T.outerHeight)=="undefined"){D=60;}else{if((T.outerHeight-T.innerHeight)>D){D=T.outerHeight-T.innerHeight;}}N+=D;T.resizeTo(P,N);}else{G.SetSize(V,P,N);}},alert:function(Q,U,P,V,R,S){var O=this.getWindow(C.DIALOG_WINDOW);if(!O){this.createWindow({windowType:C.DIALOG_WINDOW,callback:B.bind(function(){this.alert(Q,U,P,V,R,S);},this)});}else{O.get("contentObject").alert(Q,U,P,V,R,S);function T(c){var W=c.left,b=c.top,Y=c.width,a=420,X,Z;X=W+((Y-a)/2);if(X<0){X=0;}Z=b+20;G.MoveTo(C.DIALOG_WINDOW,X,Z);O.show();}var N=B.Messenger.ConversationManager?B.Messenger.ConversationManager.getActiveWindow():null;if(N&&N.get("visible")&&!N.get("minimized")){G.GetPosAndSize(N.get("windowName"),B.bind(T,this));}else{G.MoveToCenter(C.DIALOG_WINDOW,420,130);O.show();}}},confirm:function(X,U,W,Q,V,R,S,O){var P=this.getWindow(C.DIALOG_WINDOW);if(!P){this.createWindow({windowType:C.DIALOG_WINDOW,callback:B.bind(function(){this.confirm(X,U,W,Q,V,R,S,O);},this)});}else{P.get("contentObject").confirm(X,U,W,Q,V,R,S,O);function T(e){var Y=e.left,d=e.top,a=e.width,c=420,Z,b;Z=Y+((a-c)/2);if(Z<0){Z=0;}b=d+20;G.MoveTo(C.DIALOG_WINDOW,Z,b);P.show();}var N=B.Messenger.ConversationManager?B.Messenger.ConversationManager.getActiveWindow():null;if(N&&N.get("visible")&&!N.get("minimized")){N._childWindows=N._childWindows||[];N._childWindows.push(C.DIALOG_WINDOW);P._parentWindow=N.get("windowName");G.GetPosAndSize(N.get("windowName"),B.bind(T,this));}else{G.MoveToCenter(C.DIALOG_WINDOW,420,130);P.show();}}},addWindowTitleToggle:function(V,S){if(window.openmail){var O=this.getWindow(V),R,Q,P=O.get("windowType"),U,T,N;if(P=="iframe"){E.toggleBrowserTitle(S);}else{if(P=="mailTab"){E.toggleBrowserTitle(S);}if(!this._titleToggleState[V]){this._titleToggleState[V]={strings:[O.get("title")],timerHandle:null,currentIndex:0};}R=this._titleToggleState[V];R.strings.push(S);if(!R.timerHandle){if(P=="mailTab"){openmail.Application.setTabCloseMessage({id:V,msg:A.get("str_conv_tab_close_confirm")});}R.timerHandle=B.later(1000,this,function(){if(O){R.currentIndex++;if(R.currentIndex>=R.strings.length){R.currentIndex=0;}if(P=="mailTab"){if(J.get("isFresh")){G.SetTitle(this.getWindow(V).get("windowName"),{className:"mim-flash"});}else{U=B.UA.ie?"#E0E0E0":"rgba(255, 255, 255, 0.5)";T=B.UA.gecko?"-moz-linear-gradient(rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.0))":(B.UA.webkit?"-webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(255, 255, 255, 1)), color-stop(100%, rgba(255, 255, 255, 0)))":"none");N="progid:DXImageTransform.Microsoft.Gradient(startColorStr=#F0F0F0, endColorStr=#D0D0D0)";G.SetTitle(this.getWindow(V).get("windowName"),{style:R.currentIndex?{backgroundColor:U,backgroundImage:T,filter:N}:{backgroundColor:"",backgroundImage:"",filter:""}});
}}else{O.set("title",R.strings[R.currentIndex]);}}else{R.timerHandle.cancel();R.timerHandle=null;}},null,true);}}}},removeWindowTitleToggle:function(O){if(window.openmail){var N=this.getWindow(O),R,Q,P=N.get("windowType");if(P=="iframe"){E.toggleBrowserTitle(false);}else{if(P=="mailTab"){E.toggleBrowserTitle(false);}R=this._titleToggleState[O];if(R&&R.timerHandle){R.timerHandle.cancel();R.timerHandle=null;if(P=="mailTab"){openmail.Application.setTabCloseMessage({id:O,msg:""});G.SetTitle(N.get("windowName"),{style:{backgroundColor:"",backgroundImage:"",filter:""},removeClass:"mim-flash"});}else{N.set("title",R.strings[0]);}delete this._titleToggleState[O];}}}},_setWindowFocus:function(U,S){var N=this.getWindow(U),T,P,Q,R,O;if(!N){if(this._pendingBlurTimers[U]){this._pendingBlurTimers[U].cancel();delete this._pendingBlurTimers[U];}return;}O=N.getDOMWindow();if(!O||!O.document||!O.document.body){return;}T=B.one(O.document.body);Q=T.hasAttribute("data-focused");if(Q!==S){if(!S){if(!this._pendingBlurTimers[U]){this._pendingBlurTimers[U]=B.later(2000,this,function(){this._setWindowFocus(U,false);});return;}else{delete this._pendingBlurTimers[U];T.removeAttribute("data-focused");}}else{if(N.get("disabled")&&this._openModalWindows.length){R=this.getWindow(this._openModalWindows[this._openModalWindows.length-1]);R.bringToFront();R.focus();}else{P=this.getWindowInFocus();T.setAttribute("data-focused",true);if(P&&P!=U){this._setWindowFocus(P,false);}}}B.Global.fire(L.WINDOW_FOCUS_CHANGE,U,S);}else{if(S&&this._pendingBlurTimers[U]){this._pendingBlurTimers[U].cancel();delete this._pendingBlurTimers[U];}}},isMessengerInFocus:function(){return this.getWindowInFocus()?true:false;},isWindowInFocus:function(P){var N=this.getWindow(P).getDOMWindow(),O;if(N&&N.document){O=B.one(N.document.body);return O.hasAttribute("data-focused");}return false;},getWindowInFocus:function(){var R=null,P,N,O,Q;for(P in this._openWindows){if(this._openWindows.hasOwnProperty(P)){N=this._openWindows[P];O=N.getDOMWindow();if(O&&O.document){Q=B.one(O.document.body);if(Q.hasAttribute("data-focused")){if(!N.get("visible")){Q.removeAttribute("data-focused");}else{R=P;break;}}}}}return R;}});return new M();})();}B.namespace("Messenger").WindowManager=H.WindowManager;},"@VERSION@",{requires:["oui-basewindow","om-window-api"]});YUI.add("mim-application",function(D){if(!YUI.namespace("Messenger").Application){var B=window.launchData,A=D.Messenger.Events;function C(E){C.superclass.constructor.apply(this,arguments);}C.ATTRS={};D.extend(C,D.Base,{initializer:function(E){YUI.namespace("Messenger").Metrics={appInit:B.bootInit};},startMim:function(){var I=D.Messenger.GlobalConfig,G=I.get("lastActive"),E=(new Date()).getTime(),H=30*24*60*60*1000;D.Messenger.DelayLoader.start();D.Messenger.SessionManager.start();D.Messenger.ContactsManager.start();log("Application start method invoked");if(B.MINTY_CL_WINDOW){this._createContactList();}else{B.clCreateCallback=D.bind(this._createContactList,this);}D.Global.on(A.AUDIO_ALERT_NEWMESSAGE,this.playAudioNotification,this);function F(){I.set("lastActive",(new Date()).getTime());}D.Global.on(A.MESSAGE_SENT,F);D.Global.on(A.EXPLICIT_LOGIN,F);if(G=="never"){F();}else{if((E-G)>H){D.Global.fire(A.PRESENCE_PREF_UPDATED,9999);}}},_createContactList:function(){D.Messenger.WindowManager.createWindow({windowType:"MintyMainWindow",domWin:B.MINTY_CL_WINDOW,callback:function(){log("Contact list creation callback invoked");D.later(1000,null,function(){D.Global.fire(A.APP_INIT_COMPLETE);});D.later(5000,null,function(){D.Global.fire(A.DELAY_LOAD_EVENT);});D.later(15000,null,function(){var E={},F=B.urlParams.ymsgrdelay||0;E.t1=B.timers.getParametersCallback-F;E.t2=B.timers.yuiLoaded-F;E.t3=B.timers.serversConnected-F;E.t4=B.timers.appCodeLoaded-F;E.t_done=B.timers.loadedEvent-F;callInternal("event.fire",{event:"mim.perfdata",args:{timers:E}});});}});},playAudioNotification:function(){var I=null,H=D.one("body"),F,N,E=D.Messenger.CommonUtils.getHtml5AudioSupport(),G,M={},O=B.phonehomeData.base_url,L='<audio id="messageReceivedAudioTag" hidden="hidden"><source src="{mp3Source}" type="audio/mp3"/><source src="{wavSource}" type="audio/wav"/></audio>';if(E.audioObjectSupported&&E.audioPlaySupported&&(E.wavSupported||E.mp3Supported)){I=D.one("#messageReceivedAudioTag");if(!I){I=D.Node.create(D.substitute(L,{mp3Source:O+"yimapp/build/assets/receiveim.mp3",wavSource:O+"yimapp/build/assets/receiveim.wav"}));H.append(I);}D.Node.getDOMNode(I).play();}else{if(!this._flashPlayer){if(window.openmail){var K=D.Messenger.WindowManager.getWindow("MintyMainWindow");F=D.one(K._win.document.body);}else{F=H;}N=F.one("#flashplayerContainer");if(!N){if(!D.SWF){D.use("swf",function(P){P.Global.fire(A.AUDIO_ALERT_NEWMESSAGE);});return;}N=D.Node.create("<div id='flashplayerContainer' style='height:0px;width:0px'></div>");F.append(N);G=O+"yimapp/build/assets/audionotifier.swf";M.version="9";M.useExpressInstall=false;M.fixedAttributes={allowFullScreen:"true",scale:"noscale",allowScriptAccess:"always",allowNetworking:"all"};M.flashVars={};M.flashVars.autoplay="messagereceived";try{this._flashPlayer=new D.SWF(D.Node.getDOMNode(F.one("#flashplayerContainer")),G,M);}catch(J){}}}else{this._playFlashAudioNotification();}}},_playFlashAudioNotification:function(E){E=E||0;if(E>10){return;}try{D.Node.getDOMNode(bodyNode.one("#"+this._flashPlayer._id)).playNotificationMessageSound();}catch(F){D.later(250,this,this._playFlashAudioNotification,[++E]);}}});YUI.Messenger.Application=new C();}D.namespace("Messenger").Application=YUI.Messenger.Application;},"@VERSION@",{requires:["base-base","windowmanager","omapi"]});YUI.add('lang/mintymainwindow_en-US', function(Y){Y.namespace('Messenger.Templates').mintymainwindow={baseTemplate: "<div id=\"IowaWindowDiv\">	<!-- CONTENT DIV --></div><div id=\"bottomMarker\"></div>  <!-- Used for resizing -->"};}, '@VERSION@' ,{requires:[]});/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-base",function(e,t){function R(e){var t=this,n,r,i=t.constructor;t._strs={},t._cssPrefix=i.CSS_PREFIX||s(i.NAME.toLowerCase()),e=e||{},R.superclass.constructor.call(t,e),r=t.get(T),r&&(r!==P&&(n=r),t.render(n))}var n=e.Lang,r=e.Node,i=e.ClassNameManager,s=i.getClassName,o,u=e.cached(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),a="content",f="visible",l="hidden",c="disabled",h="focused",p="width",d="height",v="boundingBox",m="contentBox",g="parentNode",y="ownerDocument",b="auto",w="srcNode",E="body",S="tabIndex",x="id",T="render",N="rendered",C="destroyed",k="strings",L="<div></div>",A="Change",O="loading",M="_uiSet",_="",D=function(){},P=!0,H=!1,B,j={},F=[f,c,d,p,h,S],I=e.UA.webkit,q={};R.NAME="widget",B=R.UI_SRC="ui",R.ATTRS=j,j[x]={valueFn:"_guid",writeOnce:P},j[N]={value:H,readOnly:P},j[v]={value:null,setter:"_setBB",writeOnce:P},j[m]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:P},j[S]={value:null,validator:"_validTabIndex"},j[h]={value:H,readOnly:P},j[c]={value:H},j[f]={value:P},j[d]={value:_},j[p]={value:_},j[k]={value:{},setter:"_strSetter",getter:"_strGetter"},j[T]={value:H,writeOnce:P},R.CSS_PREFIX=s(R.NAME.toLowerCase()),R.getClassName=function(){return s.apply(i,[R.CSS_PREFIX].concat(e.Array(arguments),!0))},o=R.getClassName,R.getByNode=function(t){var n,i=o();return t=r.one(t),t&&(t=t.ancestor("."+i,!0),t&&(n=q[e.stamp(t,!0)])),n||null},e.extend(R,e.Base,{getClassName:function(){return s.apply(i,[this._cssPrefix].concat(e.Array(arguments),!0))},initializer:function(t){var n=this.get(v);n instanceof r&&this._mapInstance(e.stamp(n)),this._applyParser&&this._applyParser(t)},_mapInstance:function(e){q[e]=this},destructor:function(){var t=this.get(v),n;t instanceof r&&(n=e.stamp(t,!0),n in q&&delete q[n],this._destroyBox())},destroy:function(e){return this._destroyAllNodes=e,R.superclass.destroy.apply(this)},_destroyBox:function(){var e=this.get(v),t=this.get(m),n=this._destroyAllNodes,r;r=e&&e.compareTo(t),this.UI_EVENTS&&this._destroyUIEvents(),this._unbindUI(e),n?(e.empty(),e.remove(P)):(t&&t.remove(P),r||e.remove(P))},render:function(e){return!this.get(C)&&!this.get(N)&&(this.publish(T,{queuable:H,fireOnce:P,defaultTargetOnly:P,defaultFn:this._defRenderFn}),this.fire(T,{parentNode:e?r.one(e):null})),this},_defRenderFn:function(e){this._parentNode=e.parentNode,this.renderer(),this._set(N,P),this._removeLoadingClassNames()},renderer:function(){var e=this;e._renderUI(),e.renderUI(),e._bindUI(),e.bindUI(),e._syncUI(),e.syncUI()},bindUI:D,renderUI:D,syncUI:D,hide:function(){return this.set(f,H)},show:function(){return this.set(f,P)},focus:function(){return this._set(h,P)},blur:function(){return this._set(h,H)},enable:function(){return this.set(c,H)},disable:function(){return this.set(c,P)},_uiSizeCB:function(e){this.get(m).toggleClass(o(a,"expanded"),e)},_renderBox:function(e){var t=this,n=t.get(m),i=t.get(v),s=t.get(w),o=t.DEF_PARENT_NODE,u=s&&s.get(y)||i.get(y)||n.get(y);s&&!s.compareTo(n)&&!n.inDoc(u)&&s.replace(n),!i.compareTo(n.get(g))&&!i.compareTo(n)&&(n.inDoc(u)&&n.replace(i),i.appendChild(n)),e=e||o&&r.one(o),e?e.appendChild(i):i.inDoc(u)||r.one(E).insert(i,0)},_setBB:function(e){return this._setBox(this.get(x),e,this.BOUNDING_TEMPLATE,!0)},_setCB:function(e){return this.CONTENT_TEMPLATE===null?this.get(v):this._setBox(null,e,this.CONTENT_TEMPLATE,!1)},_defaultCB:function(e){return this.get(w)||null},_setBox:function(t,n,i,s){return n=r.one(n),n||(n=r.create(i),s?this._bbFromTemplate=!0:this._cbFromTemplate=!0),n.get(x)||n.set(x,t||e.guid()),n},_renderUI:function(){this._renderBoxClassNames(),this._renderBox(this._parentNode)},_renderBoxClassNames:function(){var e=this._getClasses(),t,n=this.get(v),r;n.addClass(o());for(r=e.length-3;r>=0;r--)t=e[r],n.addClass(t.CSS_PREFIX||s(t.NAME.toLowerCase()));this.get(m).addClass(this.getClassName(a))},_removeLoadingClassNames:function(){var e=this.get(v),t=this.get(m),n=this.getClassName(O),r=o(O);e.removeClass(r).removeClass(n),t.removeClass(r).removeClass(n)},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND),this._bindDOM()},_unbindUI:function(e){this._unbindDOM(e)},_bindDOM:function(){var t=this.get(v).get(y),n=R._hDocFocus;n||(n=R._hDocFocus=t.on("focus",this._onDocFocus,this),n.listeners={count:0}),n.listeners[e.stamp(this,!0)]=!0,n.listeners.count++,I&&(this._hDocMouseDown=t.on("mousedown",this._onDocMouseDown,this))},_unbindDOM:function(t){var n=R._hDocFocus,r=e.stamp(this,!0),i,s=this._hDocMouseDown;n&&(i=n.listeners,i[r]&&(delete i[r],i.count--),i.count===0&&(n.detach(),R._hDocFocus=null)),I&&s&&s.detach()},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC)},_uiSetHeight:function(e){this._uiSetDim(d,e),this._uiSizeCB(e!==_&&e!==b)},_uiSetWidth:function(e){this._uiSetDim(p,e)},_uiSetDim:function(e,t){this.get(v).setStyle(e,n.isNumber(t)?t+this.DEF_UNIT:t)},_uiSetVisible:function(e){this.get(v).toggleClass(this.getClassName(l),!e)},_uiSetDisabled:function(e){this.get(v).toggleClass(this.getClassName(c),e)},_uiSetFocused:function(e,t){var n=this.get(v);n.toggleClass(this.getClassName(h),e),t!==B&&(e?n.focus():n.blur())},_uiSetTabIndex:function(e){var t=this.get(v);n.isNumber(e)?t.set(S,e):t.removeAttribute(S)},_onDocMouseDown:function(e){this._domFocus&&this._onDocFocus(e)},_onDocFocus:function(e){var t=R.getByNode(e.target),n=R._active;n&&n!==t&&(n._domFocus=!1,n._set(h,!1,{src:B}),R._active=null),t&&(t._domFocus=!0,t._set(h,!0,{src:B}),R._active=t)},toString:function(){return this.name+"["+this.get(x)+"]"},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:L,BOUNDING_TEMPLATE:L,_guid:function(){return e.guid()},_validTabIndex:function(e){return n.isNumber(e)||n.isNull(e)},_bindAttrUI:function(e){var t,n=e.length;for(t=0;t<n;t++)this.after(e[t]+A,this._setAttrUI)},_syncAttrUI:function(e){var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],this[M+u(r)](this.get(r))},_setAttrUI:function(e){e.target===this&&this[M+u(e.attrName)](e.newVal,e.src)},_strSetter:function(t){return e.merge(this.get(k),t)},getString:function(e){return this.get(k)[e]},getStrings:function(){return this.get(k)},_UI_ATTRS:{BIND:F,SYNC:F}}),e.Widget=R},"3.7.2",{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:!0});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-htmlparser",function(e,t){var n=e.Widget,r=e.Node,i=e.Lang,s="srcNode",o="contentBox";n.HTML_PARSER={},n._buildCfg={aggregates:["HTML_PARSER"]},n.ATTRS[s]={value:null,setter:r.one,getter:"_getSrcNode",writeOnce:!0},e.mix(n.prototype,{_getSrcNode:function(e){return e||this.get(o)},_applyParsedConfig:function(t,n,r){return r?e.mix(n,r,!1):n},_applyParser:function(t){var n=this,r=this._getNodeToParse(),s=n._getHtmlParser(),o,u;s&&r&&e.Object.each(s,function(e,t,s){u=null,i.isFunction(e)?u=e.call(n,r):i.isArray(e)?(u=r.all(e[0]),u.isEmpty()&&(u=null)):u=r.one(e),u!==null&&u!==undefined&&(o=o||{},o[t]=u)}),t=n._applyParsedConfig(r,t,o)},_getNodeToParse:function(){var e=this.get("srcNode");return this._cbFromTemplate?null:e},_getHtmlParser:function(){var t=this._getClasses(),n={},r,i;for(r=t.length-1;r>=0;r--)i=t[r].HTML_PARSER,i&&e.mix(n,i,!0);return n}})},"3.7.2",{requires:["widget-base"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-skin",function(e,t){var n="boundingBox",r="contentBox",i="skin",s=e.ClassNameManager.getClassName;e.Widget.prototype.getSkinName=function(){var e=this.get(r)||this.get(n),t=new RegExp("\\b"+s(i)+"-(\\S+)"),o;return e&&e.ancestor(function(e){return o=e.get("className").match(t),o}),o?o[1]:null}},"3.7.2",{requires:["widget-base"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-uievents",function(e,t){var n="boundingBox",r=e.Widget,i="render",s=e.Lang,o=":",u=e.Widget._uievts=e.Widget._uievts||{};e.mix(r.prototype,{_destroyUIEvents:function(){var t=e.stamp(this,!0);e.each(u,function(n,r){n.instances[t]&&(delete n.instances[t],e.Object.isEmpty(n.instances)&&(n.handle.detach(),u[r]&&delete u[r]))})},UI_EVENTS:e.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get(n)},_createUIEvent:function(t){var n=this._getUIEventNode(),i=e.stamp(n)+t,s=u[i],o;s||(o=n.delegate(t,function(e){var t=r.getByNode(this);t&&t._filterUIEvent(e)&&t.fire(e.type,{domEvent:e})},"."+e.Widget.getClassName()),u[i]=s={instances:{},handle:o}),s.instances[e.stamp(this)]=1},_filterUIEvent:function(e){return e.currentTarget.compareTo(e.container)||e.container.compareTo(this._getUIEventNode())},_getUIEvent:function(e){if(s.isString(e)){var t=this.parseType(e)[1],n,r;return t&&(n=t.indexOf(o),n>-1&&(t=t.substring(n+o.length)),this.UI_EVENTS[t]&&(r=t)),r}},_initUIEvent:function(e){var t=this._getUIEvent(e),n=this._uiEvtsInitQueue||{};t&&!n[t]&&(this._uiEvtsInitQueue=n[t]=1,this.after(i,function(){this._createUIEvent(t),delete this._uiEvtsInitQueue[t]}))},on:function(e){return this._initUIEvent(e),r.superclass.on.apply(this,arguments)},publish:function(e,t){var n=this._getUIEvent(e);return n&&t&&t.defaultFn&&this._initUIEvent(n),r.superclass.publish.apply(this,arguments)}},!0)},"3.7.2",{requires:["node-event-delegate","widget-base"]});
YUI.add("keyhandler",function(A){var I=YUI.namespace("Messenger"),J=YUI.Messenger.Events;if(!I.KeyHandler){var E=false;function B(K){openmail.Mail.sendKeyEvent(K);}function H(K){if(K.halt){K.halt();}else{if(K.stopPropagation){K.stopPropagation();K.preventDefault();}else{K.returnCode=false;K.cancelBubble=true;}}}function C(K){switch(A.UA.os){case"macintosh":if(A.UA.gecko>0){if(K.altKey&&(K.keyCode==37||K.keyCode==39)){return;}}else{if((K.ctrlKey||K.metaKey||K.altKey)&&(K.keyCode==37||K.keyCode==39)){return;}}break;case"windows":if(K.ctrlKey&&(K.keyCode==37||K.keyCode==39)){return;}break;}if((K.ctrlKey||K.metaKey||K.altKey)&&(K.keyCode==219||K.keyCode==221||K.keyCode==37||K.keyCode==39)){H(K);}}function F(){E=false;}function D(){E=true;}function G(O){var M,P,N,L=true,K={BACKBUTTON:8,I:73,T:84};if(E){return;}M=O.target;P=M.tagName||M.get("tagName");N=(P=="INPUT")?M.type||M.get("type"):"";if(P=="TEXTAREA"||P=="IFRAME"||(P=="INPUT"&&(N=="text"||N=="passwd"))){return true;}if(O.ctrlKey||O.metaKey||O.altKey||O.shiftKey){if(O.shiftKey||!((O.ctrlKey||O.metaKey)&&(O.keyCode==65||O.keyCode==67||O.keyCode==86))){B(O);}C(O);}else{switch(O.keyCode){case K.BACKBUTTON:L=false;H(O);break;case K.I:L=false;A.Global.fire(J.OPEN_CONV_PICKER);H(O);break;case K.T:L=false;if(A.Messenger.GlobalConfig.get("smsEnabled")){A.Global.fire(J.OPEN_SMS_CONV_PICKER);}H(O);break;}if(L){B(O);}}}I.KeyHandler={handleKeyEvent:G,disable:D,enable:F,blockNavigationKeys:C};}A.namespace("Messenger").KeyHandler=I.KeyHandler;},"@VERSION@",{requires:["event"]});YUI.add("basewindow",function(C){var H=C.Node,A=C.Messenger.Intl,L=C.Messenger.Events,G=C.Messenger.SessionManager,E=C.Messenger.GlobalConfig,B=C.Messenger.WindowManager,I,F,K=window.launchData,J=C.Messenger.CommonUtils,D=YUI.namespace("Messenger.Metrics");function M(N){M.superclass.constructor.apply(this,arguments);}M.NAME="yimapp-basewindow";M.ATTRS={windowName:{value:""},templateName:{},bringToFrontOnFocus:{value:true},makePrimaryOnClick:{value:true},disableRightClick:{value:true},hideOnLogout:{value:true},autosize:{value:false},visible:{value:true},disabled:{value:false},waiting:{value:false},minimized:{value:false},replacementParms:{value:null},isDialog:{value:false},focusNode:{},newBrowserWindow:{value:false},bodyClass:{value:null}};C.extend(M,C.Base,{initializer:function(){this._evtListeners=[];this.set("windowName",C.config.win.windowName);this._evtListeners.push(E.on("themeInfoChange",C.bind(this.onWindowThemeChange,this)));this._evtListeners.push(C.Global.on(L.MPOP_STATE_CHANGE,this.onMpopStateChange,this));this._evtListeners.push(C.Global.on(L.CONNECTION_UPDATE,this.onConnectionUpdated,this));this._evtListeners.push(C.Global.on(L.WINDOW_FOCUS_CHANGE,function(Q,R){var P=this.get("windowName"),O=B.getWindow(P);if(R&&Q===P&&this.get("bringToFrontOnFocus")){O.bringToFront();}},this));F=C.config.win;I=F.document;var N=this.get("bodyClass");if(N){I.body.className+=" "+N;}},destructor:function(){C.each(this._evtListeners,function(N){N.detach();});this._firstFocusableElement=null;this._lastFocusableElement=null;},render:function(O,S){var X=C.Messenger.Templates,W=this.get("templateName")||this.get("windowName").toLowerCase(),T=X[W]&&X[W].baseTemplate?X[W].baseTemplate:null;if(this._rendered){return;}this._rendered=true;if(T){var Q=this.get("replacementParms")||{},R;Q.str_cfg_branding_messenger=E.getGenericAppName();Q.str_cfg_branding=E.getAppName();R=C.Node.create(J.substitute(T,Q));O.append(R);}var P=C.one("#closeButton");if(P){P.setAttribute("title",A.get("str_close"));P.setAttribute("aria-label",A.get("str_close"));P.setAttribute("role","button");}var N=C.one("#popOutButton");if(N){N.setAttribute("title",A.get("str_window_btn_popout"));N.setAttribute("aria-label",A.get("str_window_btn_popout"));N.setAttribute("role","button");}var U=C.one("#popInButton");if(U){var V=J.substitute(A.get("str_window_btn_popin"),{str_cfg_branding_messenger:E.getGenericAppName()});U.setAttribute("title",V);U.setAttribute("aria-label",V);U.setAttribute("role","button");}this.initializeWindow(R,S);},initializeWindow:function(R,N){var O=this.get("windowName"),Q=B.getWindow(O),P=C.one(I.body);if(Q.get("windowType")=="browserWindow"){this.set("newBrowserWindow",true);}this._evtListeners.push(C.on("focus",function(S){C.Global.fire(L.WINDOW_FOCUSED,O);},C.config.win,this));this._evtListeners.push(C.on("blur",function(S){C.Global.fire(L.WINDOW_BLURRED,O);},C.config.win,this));this._evtListeners.push(C.on("click",function(S){if(S.shiftKey&&(S.ctrlKey||S.metaKey)){if(K){var U={"AppVersion":K.phonehomeData.ver_curr,"themeData":K.themeinfo,"supportedLang":K.langSupported,"smsSupported":K.smsSupported},T={};T.config=U;T.startupLog=K.startupLog;T.perfLog=K.rollingLog;B.alert("<textarea rows=15 cols=70>"+C.JSON.stringify(T)+"</textarea>",null,"Yahoo! Messenger Config",null);}S.halt();}},C.config.doc,this));if(window.openmail){if(C.UA.ie>0){this._evtListeners.push(C.one("body").on("keydown",function(S){C.Messenger.KeyHandler.handleKeyEvent(S);}));}else{this._evtListeners.push(C.on("keydown",function(S){C.Messenger.KeyHandler.handleKeyEvent(S);}));}}if(this.get("disableRightClick")){P.on("contextmenu",C.bind(this._disableRightClick,this));}this._evtListeners.push(C.on("mousedown",this.onMouseDown,C.config.doc,this));if(C.UA.ie>0){P.addClass("IE");if(C.UA.ie==7&&navigator.userAgent.indexOf("Trident/")>0){P.addClass("IE8");P.addClass("IE8Compat");}else{P.addClass("IE"+C.UA.ie);}}else{if(C.UA.gecko>0){P.addClass("FF");}else{if(C.UA.webkit>0){P.addClass("Webkit");}}}if(A.isCJK()){P.addClass("CJK");}if(A.isRTL()){P.addClass("RTL");}if(K){P.addClass(K.intl);}if(K&&K.cobrand&&K.cobrand!=="null"){P.addClass(K.cobrand);}P.addClass("ymessenger");this.set("minimized",Q.get("minimized"));this.set("visible",Q.get("visible"));this.onInit(R,N);if(this.get("isDialog")){this._evtListeners.push(C.on("keydown",function(S){if(S.keyCode==27){B.getWindow(this.get("windowName")).hide();S.halt();}},C.config.doc,this));this._findFocusableElements();if(this._firstFocusableElement&&this._lastFocusableElement){this._evtListeners.push(this._firstFocusableElement.on("keydown",function(S){if(S.keyCode===9&&S.shiftKey){this._lastFocusableElement.focus();S.halt();}},this));this._evtListeners.push(this._lastFocusableElement.on("keydown",function(S){if(S.keyCode===9&&!S.shiftKey){this._firstFocusableElement.focus();S.halt();}},this));}}if(this.get("visible")){this.onShow(N);if(!this.get("minimized")){C.later(0,this,this.focus);}}if(this.get("minimized")){this.onMinimize();this.setMinimizeButtonLabel(true);}else{this.onRestore();this.setMinimizeButtonLabel(false);}if(this.get("autosize")){C.Global.fire(L.SYNC_WINDOW_SIZE,O);}},onWindowThemeChange:function(O){var N=O.prevVal.css,P=O.newVal.css,Q;if(N===P){return;}this.getOuiWindow().loadFiles([P],"css",function(){Q=C.one("head").all("link");C.some(Q,function(R){if(R.getAttribute("href")==N){R.remove();return true;}return false;});},F);},onConnectionUpdated:function(N){if(this.get("visible")&&this.get("hideOnLogout")&&!N.isOnline){B.getWindow(this.get("windowName")).hide();}},onWindowHide:function(){if(this.get("visible")){this.set("visible",false);this.onHide();}},onWindowShow:function(N){if(!this.get("visible")){this.set("visible",true);if(this.get("autosize")){C.Global.fire(L.SYNC_WINDOW_SIZE,this.get("windowName"));}if(this.getOuiWindow().get("windowType")=="iframe"&&!this.get("minimized")&&E.get("mpopEndPointState")=="primary"){C.later(0,this,this.focus);}}this.onShow(N);},onWindowMinimized:function(N){if(!this.get("minimized")){this.set("minimized",true);
this.onMinimize(N);this.setMinimizeButtonLabel(true);}},onWindowRestored:function(){if(this.get("minimized")){this.set("minimized",false);this.onRestore();this.setMinimizeButtonLabel(false);}},onWindowDisabled:function(){this.set("disabled",true);this.blur();},onWindowEnabled:function(){this.set("disabled",false);},onStartWaiting:function(){this.set("waiting",true);},onStopWaiting:function(){this.set("waiting",false);},focus:function(){var P=this.get("focusNode"),N;if(!P){return;}if(P._node){P=P._node;}else{if(typeof(P)=="string"){P=C.one(P);if(P&&P._node){P=P._node;this.set("focusNode",P);}}}N=P.ownerDocument;if(N.activeElement==P&&P.blur){P.blur();}if(!this._focusAttempts){this._focusAttempts=0;}if(this.get("visible")&&P.focus){try{if(C.UA.gecko){C.config.win.focus();}P.focus();}catch(O){}if(N.activeElement!=P){if(this._focusAttempts<10){C.later(100,this,this.focus);this._focusAttempts++;return;}else{}}this._focusAttempts=0;}},blur:function(){},closeOnDormant:function(){B.getWindow(this.get("windowName")).hide();},onMpopStateChange:function(N){if(!G.isPrimary()){this.closeOnDormant();}},getOuiWindow:function(){return B.getWindow(this.get("windowName"));},getDOMWindow:function(){return B.getWindow(this.get("windowName")).getDOMWindow();},setWindowTitle:function(N){B.getWindow(this.get("windowName")).set("title",N);},setMinimizeButtonLabel:function(P){var O,N=C.one("#minMaxButton");if(N){if(P){O=A.get("str_window_btn_restore")||"Restore";}else{O=A.get("str_window_btn_minimize")||"Minimize";}N.setAttribute("title",O);N.setAttribute("aria-label",O);N.setAttribute("role","button");}},_findFocusableElements:function(){var N=C.one("#titleBar"),S=C.one(".dialog-buttons"),Q,R,P,O;if(N){R=N.all("a");for(O=0;O<R.size();O++){P=R.item(O);if(P.getComputedStyle("visibility")=="visible"&&P.getComputedStyle("display")!="none"&&P.get("offsetHeight")>0){this._firstFocusableElement=P;break;}}}if(S){R=S.all("a");for(O=(R.size()-1);O>-1;O--){P=R.item(O);if(P.getComputedStyle("visibility")=="visible"&&P.getComputedStyle("display")!="none"&&P.get("offsetHeight")>0){this._lastFocusableElement=P;break;}}}if(!this._firstFocusableElement||!this._lastFocusableElement){Q=C.one("#iowaWindow-content");R=Q.all("input");if(!this._firstFocusableElement){for(O=0;O<R.size();O++){P=R.item(O);if(P.getComputedStyle("visibility")=="visible"&&P.getComputedStyle("display")!="none"&&P.get("offsetHeight")>0){this._firstFocusableElement=P;break;}}}if(!this._lastFocusableElement){for(O=(R.size()-1);O>-1;O--){P=R.item(O);if(P.getComputedStyle("visibility")=="visible"&&P.getComputedStyle("display")!="none"&&P.get("offsetHeight")>0){this._lastFocusableElement=P;break;}}}}},_disableRightClick:function(O){if(O.target){var Q=O.target.get("tagName"),N,P,S=C.config.win;if(S.getSelection){N=S.getSelection();P=N&&!N.isCollapsed;}else{if(S.document.getSelection){N=S.document.getSelection();P=N&&!N.isCollapsed;}else{if(S.document.selection){N=S.document.selection.createRange().text;P=N&&N!=="";}}}if(P){return;}switch(Q){case"TEXTAREA":case"IFRAME":case"INPUT":break;case"A":var R=O.target.getAttribute("href");if(!R||R==""||R=="#"||R.indexOf("javascript:")==0){O.halt();}break;default:O.halt();}}},onInit:function(O,N){},onMinimize:function(N){},onMouseDown:function(N){C.Messenger.WindowManager.hideWindow("ContactMenuWindow");if(this.get("makePrimaryOnClick")){C.Messenger.SessionManager.becomePrimary();}},onRestore:function(){},onShow:function(N){},onHide:function(){},onClose:function(){},onResize:function(){},onBeforeClose:function(){return false;}});C.namespace("Messenger").BaseWindow=M;},"@VERSION@",{skinnable:true,requires:["base","node","event","windowmanager","commonutils","keyhandler"]});YUI.add('lang/contactlist_en-US', function(Y){Y.namespace('Messenger.Templates').contactlist={topContactsButton: "<div id=\"tc_toggle\" class=\"{{tc_class}} hidden\"><a class=\"toTc\" title=\"Most frequent instant message contacts\">Show Top Contacts</a><a class=\"toRegular\" title=\"All online contacts\">Show Online Contacts</a></div>"};}, '@VERSION@' ,{requires:[]});YUI.add('lang/contactgroup_en-US', function(Y){Y.namespace('Messenger.Templates').contactgroup={buttonTemplate: "<span class=\"btn small left right {{btn_class}}\" title=\"{{btn_title}}\"><input id=\"{{btn_id}}\" class=\"{{css_class}}\" type=\"button\" value=\"{{input_value}}\" data-action=\"contact-new\"/></span>", baseTemplate: "<div class=\"items items-nav items-nav-msgr-contacts {{isCollapsed}} {{isExpanded}}\" data-action=\"collapsable\"><h2 role=\"toolbar\" id=\"{{id}}\" aria-label=\"{{title}}\" class=\"legend\"><span role=\"button\" tabindex=\"0\" aria-controls=\"{{list_id}}\" aria-expanded=\"{{aria_expanded}}\" class=\"label\" title=\"{{title_attr}}\">{{count}} {{title}}</span><span class=\"rht\">{{buttons}}</span></h2><ul id={{list_id}} role=\"listbox\" class=\"{{imageSize}}\">       {{contacts}}    </ul><span class=\"emptyGrpMsg hidden\"></span></div>"};}, '@VERSION@' ,{requires:[]});YUI.add('lang/contact_en-US', function(Y){Y.namespace('Messenger.Templates').contact={contactTemplate: "<li role=\"presentation\" id=\"{{contact_id}}\" class=\"ymsg-{{isMobile_else}}{{isMobile}} {{stealth_mode}} btn-contact {{isSelected}} {{fbclass}}\" data-user=\"{{user}}\" data-network=\"{{network}}\" data-action=\"contact-list\" title=\"{{yid_attr}}\">{{global_spearmint_view}} <div class=\"fb_img_logo {{isFB}}\"></div>    {{avatar}}<a role=\"option\" {{tab_index}} aria-describedby=\"{{vitality_id}}\" href=\"{{url}}\" title=\"{{yid_attr}}\" {{nameBIDIDirection}}>{{name}}<em>{{yid}}</em></a><span id=\"{{vitality_id}}\" class=\"vitality\" title=\"{{messageTitle}}\" {{messageBIDIDirection}}>{{message}}</span>{{score}}</li>"};}, '@VERSION@' ,{requires:[]});/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-base",function(e,t){var n="running",r="startTime",i="elapsedTime",s="start",o="tween",u="end",a="node",f="paused",l="reverse",c="iterationCount",h=Number,p={},d;e.Anim=function(){e.Anim.superclass.constructor.apply(this,arguments),e.Anim._instances[e.stamp(this)]=this},e.Anim.NAME="anim",e.Anim._instances={},e.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i,e.Anim.DEFAULT_UNIT="px",e.Anim.DEFAULT_EASING=function(e,t,n,r){return n*e/r+t},e.Anim._intervalTime=20,e.Anim.behaviors={left:{get:function(e,t){return e._getOffset(t)}}},e.Anim.behaviors.top=e.Anim.behaviors.left,e.Anim.DEFAULT_SETTER=function(t,n,r,i,s,o,u,a){var f=t._node,l=f._node,c=u(s,h(r),h(i)-h(r),o);l?"style"in l&&(n in l.style||n in e.DOM.CUSTOM_STYLES)?(a=a||"",f.setStyle(n,c+a)):"attributes"in l&&n in l.attributes?f.setAttribute(n,c):n in l&&(l[n]=c):f.set?f.set(n,c):n in f&&(f[n]=c)},e.Anim.DEFAULT_GETTER=function(t,n){var r=t._node,i=r._node,s="";return i?"style"in i&&(n in i.style||n in e.DOM.CUSTOM_STYLES)?s=r.getComputedStyle(n):"attributes"in i&&n in i.attributes?s=r.getAttribute(n):n in i&&(s=i[n]):r.get?s=r.get(n):n in r&&(s=r[n]),s},e.Anim.ATTRS={node:{setter:function(t){return t&&(typeof t=="string"||t.nodeType)&&(t=e.one(t)),this._node=t,!t,t}},duration:{value:1},easing:{value:e.Anim.DEFAULT_EASING,setter:function(t){if(typeof t=="string"&&e.Easing)return e.Easing[t]}},from:{},to:{},startTime:{value:0,readOnly:!0},elapsedTime:{value:0,readOnly:!0},running:{getter:function(){return!!p[e.stamp(this)]},value:!1,readOnly:!0},iterations:{value:1},iterationCount:{value:0,readOnly:!0},direction:{value:"normal"},paused:{readOnly:!0,value:!1},reverse:{value:!1}},e.Anim.run=function(){var t=e.Anim._instances;for(var n in t)t[n].run&&t[n].run()},e.Anim.pause=function(){for(var t in p)p[t].pause&&p[t].pause();e.Anim._stopTimer()},e.Anim.stop=function(){for(var t in p)p[t].stop&&p[t].stop();e.Anim._stopTimer()},e.Anim._startTimer=function(){d||(d=setInterval(e.Anim._runFrame,e.Anim._intervalTime))},e.Anim._stopTimer=function(){clearInterval(d),d=0},e.Anim._runFrame=function(){var t=!0;for(var n in p)p[n]._runFrame&&(t=!1,p[n]._runFrame());t&&e.Anim._stopTimer()},e.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var v={run:function(){return this.get(f)?this._resume():this.get(n)||this._start(),this},pause:function(){return this.get(n)&&this._pause(),this},stop:function(e){return(this.get(n)||this.get(f))&&this._end(e),this},_added:!1,_start:function(){this._set(r,new Date-this.get(i)),this._actualFrames=0,this.get(f)||this._initAnimAttr(),p[e.stamp(this)]=this,e.Anim._startTimer(),this.fire(s)},_pause:function(){this._set(r,null),this._set(f,!0),delete p[e.stamp(this)],this.fire("pause")},_resume:function(){this._set(f,!1),p[e.stamp(this)]=this,this._set(r,new Date-this.get(i)),e.Anim._startTimer(),this.fire("resume")},_end:function(t){var n=this.get("duration")*1e3;t&&this._runAttrs(n,n,this.get(l)),this._set(r,null),this._set(i,0),this._set(f,!1),delete p[e.stamp(this)],this.fire(u,{elapsed:this.get(i)})},_runFrame:function(){var e=this._runtimeAttr.duration,t=new Date-this.get(r),n=this.get(l),s=t>=e,u,a;this._runAttrs(t,e,n),this._actualFrames+=1,this._set(i,t),this.fire(o),s&&this._lastFrame()},_runAttrs:function(t,n,r){var i=this._runtimeAttr,s=e.Anim.behaviors,o=i.easing,u=n,a=!1,f,l,c;t>=n&&(a=!0),r&&(t=n-t,u=0);for(c in i)i[c].to&&(f=i[c],l=c in s&&"set"in s[c]?s[c].set:e.Anim.DEFAULT_SETTER,a?l(this,c,f.from,f.to,u,n,o,f.unit):l(this,c,f.from,f.to,t,n,o,f.unit))},_lastFrame:function(){var e=this.get("iterations"),t=this.get(c);t+=1,e==="infinite"||t<e?(this.get("direction")==="alternate"&&this.set(l,!this.get(l)),this.fire("iteration")):(t=0,this._end()),this._set(r,new Date),this._set(c,t)},_initAnimAttr:function(){var t=this.get("from")||{},n=this.get("to")||{},r={duration:this.get("duration")*1e3,easing:this.get("easing")},i=e.Anim.behaviors,s=this.get(a),o,u,f;e.each(n,function(n,a){typeof n=="function"&&(n=n.call(this,s)),u=t[a],u===undefined?u=a in i&&"get"in i[a]?i[a].get(this,a):e.Anim.DEFAULT_GETTER(this,a):typeof u=="function"&&(u=u.call(this,s));var l=e.Anim.RE_UNITS.exec(u),c=e.Anim.RE_UNITS.exec(n);u=l?l[1]:u,f=c?c[1]:n,o=c?c[2]:l?l[2]:"",!o&&e.Anim.RE_DEFAULT_UNIT.test(a)&&(o=e.Anim.DEFAULT_UNIT);if(!u||!f){e.error('invalid "from" or "to" for "'+a+'"',"Anim");return}r[a]={from:e.Lang.isObject(u)?e.clone(u):u,to:f,unit:o}},this),this._runtimeAttr=r},_getOffset:function(e){var t=this._node,n=t.getComputedStyle(e),r=e==="left"?"getX":"getY",i=e==="left"?"setX":"setY";if(n==="auto"){var s=t.getStyle("position");s==="absolute"||s==="fixed"?(n=t[r](),t[i](n)):n=0}return n},destructor:function(){delete e.Anim._instances[e.stamp(this)]}};e.extend(e.Anim,e.Base,v)},"3.7.2",{requires:["base-base","node-style"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-color",function(e,t){var n=Number;e.Anim.getUpdatedColorValue=function(t,r,i,s,o){return t=e.Color.re_RGB.exec(e.Color.toRGB(t)),r=e.Color.re_RGB.exec(e.Color.toRGB(r)),(!t||t.length<3||!r||r.length<3)&&e.error("invalid from or to passed to color behavior"),"rgb("+[Math.floor(o(i,n(t[1]),n(r[1])-n(t[1]),s)),Math.floor(o(i,n(t[2]),n(r[2])-n(t[2]),s)),Math.floor(o(i,n(t[3]),n(r[3])-n(t[3]),s))].join(", ")+")"},e.Anim.behaviors.color={set:function(t,n,r,i,s,o,u){t._node.setStyle(n,e.Anim.getUpdatedColorValue(r,i,s,o,u))},get:function(e,t){var n=e._node.getComputedStyle(t);return n=n==="transparent"?"rgb(255, 255, 255)":n,n}},e.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(t,n){e.Anim.behaviors[t]=e.Anim.behaviors.color})},"3.7.2",{requires:["anim-base"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-xy",function(e,t){var n=Number;e.Anim.behaviors.xy={set:function(e,t,r,i,s,o,u){e._node.setXY([u(s,n(r[0]),n(i[0])-n(r[0]),o),u(s,n(r[1]),n(i[1])-n(r[1]),o)])},get:function(e){return e._node.getXY()}}},"3.7.2",{requires:["anim-base","node-screen"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-curve",function(e,t){e.Anim.behaviors.curve={set:function(t,n,r,i,s,o,u){r=r.slice.call(r),i=i.slice.call(i);var a=u(s,0,100,o)/100;i.unshift(r),t._node.setXY(e.Anim.getBezier(i,a))},get:function(e,t){return e._node.getXY()}},e.Anim.getBezier=function(e,t){var n=e.length,r=[];for(var i=0;i<n;++i)r[i]=[e[i][0],e[i][1]];for(var s=1;s<n;++s)for(i=0;i<n-s;++i)r[i][0]=(1-t)*r[i][0]+t*r[parseInt(i+1,10)][0],r[i][1]=(1-t)*r[i][1]+t*r[parseInt(i+1,10)][1];return[r[0][0],r[0][1]]}},"3.7.2",{requires:["anim-xy"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-easing",function(e,t){var n={easeNone:function(e,t,n,r){return n*e/r+t},easeIn:function(e,t,n,r){return n*(e/=r)*e+t},easeOut:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeBoth:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInStrong:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutStrong:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeBothStrong:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},elasticIn:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},elasticOut:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},elasticBoth:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r/2)===2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)*.5+n+t)},backIn:function(e,t,n,r,i){return i===undefined&&(i=1.70158),e===r&&(e-=.001),n*(e/=r)*e*((i+1)*e-i)+t},backOut:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},backBoth:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},bounceIn:function(t,n,r,i){return r-e.Easing.bounceOut(i-t,0,r,i)+n},bounceOut:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},bounceBoth:function(t,n,r,i){return t<i/2?e.Easing.bounceIn(t*2,0,r,i)*.5+n:e.Easing.bounceOut(t*2-i,0,r,i)*.5+r*.5+n}};e.Easing=n},"3.7.2",{requires:["anim-base"]});
