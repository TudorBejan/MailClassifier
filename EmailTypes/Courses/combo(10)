YUI.add("comms-intl-bidihighlight",function(A){A.mix(A.namespace("comms.Intl"),{_needPrevChar:/[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA]/,_needNextChar:/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA]/,_highlightJoiner:"\u200d",_highlightStartTag:"<b>",_highlightEndTag:"</b>",_initializeBidiHighlightJoiner:function(){if(A.UA.webkit){this._highlightJoiner="\u0640";}},highlightString:function(I,J,G){var K,F,M,D,B,L,C,E,H;E=function(N){return N==""?"":N.charAt(N.length-1);};H=function(N){return N==""?"":N.charAt(0);};if(I.length===0){return"";}L=E(J);C=H(G);K=I.charAt(0);M=I.charAt(I.length-1);F=K.charCodeAt(0);D=M.charCodeAt(0);if(L===""||L.charCodeAt(0)<1568||F<1568){B=this._highlightStartTag+I;}else{if(this._needNextChar.test(L)&&this._needPrevChar.test(K)){B=this._highlightJoiner+this._highlightStartTag+this._highlightJoiner+I;}else{B=this._highlightStartTag+I;}}if(C===""||C.charCodeAt(0)<1568||D<1568){B=B+this._highlightEndTag;}else{if(this._needPrevChar.test(C)&&this._needNextChar.test(M)){B=B+this._highlightJoiner+this._highlightEndTag+this._highlightJoiner;}else{B=B+this._highlightEndTag;}}return B;}});A.comms.Intl._initializeBidiHighlightJoiner();},"1.0.0");/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("io-base",function(e,t){function o(t){var n=this;n._uid="io:"+s++,n._init(t),e.io._map[n._uid]=n}var n=["start","complete","end","success","failure","progress"],r=["status","statusText","responseText","responseXML"],i=e.config.win,s=0;o.prototype={_id:0,_headers:{"X-Requested-With":"XMLHttpRequest"},_timeout:{},_init:function(t){var r=this,i,s;r.cfg=t||{},e.augment(r,e.EventTarget);for(i=0,s=n.length;i<s;++i)r.publish("io:"+n[i],e.merge({broadcast:1},t)),r.publish("io-trn:"+n[i],t)},_create:function(t,n){var r=this,s={id:e.Lang.isNumber(n)?n:r._id++,uid:r._uid},o=t.xdr?t.xdr.use:null,u=t.form&&t.form.upload?"iframe":null,a;return o==="native"&&(o=e.UA.ie?"xdr":null,r.setHeader("X-Requested-With")),a=o||u,s=a?e.merge(e.IO.customTransport(a),s):e.merge(e.IO.defaultTransport(),s),s.notify&&(t.notify=function(e,t,n){r.notify(e,t,n)}),a||i&&i.FormData&&t.data instanceof i.FormData&&(s.c.upload.onprogress=function(e){r.progress(s,e,t)},s.c.onload=function(e){r.load(s,e,t)},s.c.onerror=function(e){r.error(s,e,t)},s.upload=!0),s},_destroy:function(t){i&&!t.notify&&!t.xdr&&(u&&!t.upload?t.c.onreadystatechange=null:t.upload?(t.c.upload.onprogress=null,t.c.onload=null,t.c.onerror=null):e.UA.ie&&!t.e&&t.c.abort()),t=t.c=null},_evt:function(t,r,i){var s=this,o,u=i.arguments,a=s.cfg.emitFacade,f="io:"+t,l="io-trn:"+t;this.detach(l),r.e&&(r.c={status:0,statusText:r.e}),o=[a?{id:r.id,data:r.c,cfg:i,arguments:u}:r.id],a||(t===n[0]||t===n[2]?u&&o.push(u):(r.evt?o.push(r.evt):o.push(r.c),u&&o.push(u))),o.unshift(f),s.fire.apply(s,o),i.on&&(o[0]=l,s.once(l,i.on[t],i.context||e),s.fire.apply(s,o))},start:function(e,t){this._evt(n[0],e,t)},complete:function(e,t){this._evt(n[1],e,t)},end:function(e,t){this._evt(n[2],e,t),this._destroy(e)},success:function(e,t){this._evt(n[3],e,t),this.end(e,t)},failure:function(e,t){this._evt(n[4],e,t),this.end(e,t)},progress:function(e,t,r){e.evt=t,this._evt(n[5],e,r)},load:function(e,t,r){e.evt=t.target,this._evt(n[1],e,r)},error:function(e,t,r){e.evt=t,this._evt(n[4],e,r)},_retry:function(e,t,n){return this._destroy(e),n.xdr.use="flash",this.send(t,n,e.id)},_concat:function(e,t){return e+=(e.indexOf("?")===-1?"?":"&")+t,e},setHeader:function(e,t){t?this._headers[e]=t:delete this._headers[e]},_setHeaders:function(t,n){n=e.merge(this._headers,n),e.Object.each(n,function(e,r){e!=="disable"&&t.setRequestHeader(r,n[r])})},_startTimeout:function(e,t){var n=this;n._timeout[e.id]=setTimeout(function(){n._abort(e,"timeout")},t)},_clearTimeout:function(e){clearTimeout(this._timeout[e]),delete this._timeout[e]},_result:function(e,t){var n;try{n=e.c.status}catch(r){n=0}n>=200&&n<300||n===304||n===1223?this.success(e,t):this.failure(e,t)},_rS:function(e,t){var n=this;e.c.readyState===4&&(t.timeout&&n._clearTimeout(e.id),setTimeout(function(){n.complete(e,t),n._result(e,t)},0))},_abort:function(e,t){e&&e.c&&(e.e=t,e.c.abort())},send:function(t,n,i){var s,o,u,a,f,l,c=this,h=t,p={};n=n?e.Object(n):{},s=c._create(n,i),o=n.method?n.method.toUpperCase():"GET",f=n.sync,l=n.data,e.Lang.isObject(l)&&!l.nodeType&&!s.upload&&(l=e.QueryString.stringify(l));if(n.form){if(n.form.upload)return c.upload(s,t,n);l=c._serialize(n.form,l)}if(l)switch(o){case"GET":case"HEAD":case"DELETE":h=c._concat(h,l),l="";break;case"POST":case"PUT":n.headers=e.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},n.headers)}if(s.xdr)return c.xdr(h,s,n);if(s.notify)return s.c.send(s,t,n);!f&&!s.upload&&(s.c.onreadystatechange=function(){c._rS(s,n)});try{s.c.open(o,h,!f,n.username||null,n.password||null),c._setHeaders(s.c,n.headers||{}),c.start(s,n),n.xdr&&n.xdr.credentials&&(e.UA.ie||(s.c.withCredentials=!0)),s.c.send(l);if(f){for(u=0,a=r.length;u<a;++u)p[r[u]]=s.c[r[u]];return p.getAllResponseHeaders=function(){return s.c.getAllResponseHeaders()},p.getResponseHeader=function(e){return s.c.getResponseHeader(e)},c.complete(s,n),c._result(s,n),p}}catch(d){if(s.xdr)return c._retry(s,t,n);c.complete(s,n),c._result(s,n)}return n.timeout&&c._startTimeout(s,n.timeout),{id:s.id,abort:function(){return s.c?c._abort(s,"abort"):!1},isInProgress:function(){return s.c?s.c.readyState%4:!1},io:c}}},e.io=function(t,n){var r=e.io._map["io:0"]||new o;return r.send.apply(r,[t,n])},e.io.header=function(t,n){var r=e.io._map["io:0"]||new o;r.setHeader(t,n)},e.IO=o,e.io._map={};var u=i&&i.XMLHttpRequest,a=i&&i.XDomainRequest,f=i&&i.ActiveXObject;e.mix(e.IO,{_default:"xhr",defaultTransport:function(t){if(!t){var n={c:e.IO.transports[e.IO._default](),notify:e.IO._default==="xhr"?!1:!0};return n}e.IO._default=t},transports:{xhr:function(){return u?new XMLHttpRequest:f?new ActiveXObject("Microsoft.XMLHTTP"):null},xdr:function(){return a?new XDomainRequest:null},iframe:function(){return{}},flash:null,nodejs:null},customTransport:function(t){var n={c:e.IO.transports[t]()};return n[t==="xdr"||t==="flash"?"xdr":"notify"]=!0,n}}),e.mix(e.IO.prototype,{notify:function(e,t,n){var r=this;switch(e){case"timeout":case"abort":case"transport error":t.c={status:0,statusText:e},e="failure";default:r[e].apply(r,[t,n])}}})},"3.7.2",{requires:["event-custom-base","querystring-stringify-simple"]});
YUI.add("contacts-smartcontacts-api",function(B){var A={deleteSmartContacts:function(H,G,F){G=G||NeoConfig.socdirProxyPath;F=F||B.io;if(B.Lang.isArray(H)&&H.length>0){var D=H.length,E={ydht:{fields:{}}},C=E.ydht.fields;while(D--){C[H[D]]={"value":[0,null,-65536,1,1]};}F(G+"?/setSmartContacts?",{method:"POST",data:B.JSON.stringify(E)});}}};B.namespace("contacts.smartcontacts");B.contacts.smartcontacts.api=A;},"1.0.0",{requires:["io-base"]});YUI.add('search_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_srch_no_results":"No messages found","str_srch_enter_search_terms":"Please enter one or more search terms","str_srch_find_by_person":"Find messages from a specific person. Type in a name, Yahoo! ID, or email address.","str_srch_type_name":"Type name or email address","str_srch_person_btn_attr":"Search","str_srch_person_btn":"Search","str_srch_find_by_file":"Find messages with attachments such as photos, videos, Word docs, and more.","str_file_all_types":"All attachment types","str_file_pdf":"PDF","str_file_ppt":"PowerPoint","str_file_xls":"Excel","str_file_doc":"Word","str_file_img":"Image","str_file_video":"Video","str_file_audio":"Music","str_srch_find_by_date":"Find messages you received recently:","str_srch_date_today":"Today","str_srch_date_last_week":"Last Week","str_srch_date_last_month":"Last Month","str_srch_undo_attachtype_attr":"Showing emails with {{refineattachcat}} attachments","str_srch_undo_folder_attr":"Showing messages only from {{folder}}","str_srch_undo_sender_attr":"Showing messages sent only from {{recipient}}","str_srch_undo_date_attr":"Showing messages only from {{refinedate}}","str_srch_undo_flag_attr":"Showing only {{refineflag}} messages","str_srch_sender_attr":"Only show messages sent from {{recipient}}","str_srch_attachtype_attr":"Only show emails with {{refineattachcat}} attachments","str_srch_date_attr":"Only show messages from {{refinedate}}","str_srch_flag_attr":"Only show {{refineflag}} messages","str_mail_dateformat_AM_l10n":"AM","str_mail_dateformat_PM_l10n":"PM","str_mail_day":"Day","str_mail_month":"Month","str_mail_month_abbr_april":"Apr","str_mail_month_abbr_august":"Aug","str_mail_month_abbr_december":"Dec","str_mail_month_abbr_february":"Feb","str_mail_month_abbr_january":"Jan","str_mail_month_abbr_july":"Jul","str_mail_month_abbr_june":"Jun","str_mail_month_abbr_march":"Mar","str_mail_month_abbr_may":"May","str_mail_month_abbr_november":"Nov","str_mail_month_abbr_october":"Oct","str_mail_month_abbr_september":"Sep","str_mail_month_april":"April","str_mail_month_august":"August","str_mail_month_december":"December","str_mail_month_february":"February","str_mail_month_january":"January","str_mail_month_july":"July","str_mail_month_june":"June","str_mail_month_march":"March","str_mail_month_may":"May","str_mail_month_november":"November","str_mail_month_october":"October","str_mail_month_september":"September","str_mail_plus_in_product_link_text":"Lose the ads!  Try Mail Plus.","str_mail_today":"Today","str_mail_weekday_abbr_friday":"Fri","str_mail_weekday_abbr_monday":"Mon","str_mail_weekday_abbr_saturday":"Sat","str_mail_weekday_abbr_sunday":"Sun","str_mail_weekday_abbr_thursday":"Thu","str_mail_weekday_abbr_tuesday":"Tue","str_mail_weekday_abbr_wednesday":"Wed","str_mail_weekday_friday":"Friday","str_mail_weekday_monday":"Monday","str_mail_weekday_saturday":"Saturday","str_mail_weekday_sunday":"Sunday","str_mail_weekday_thursday":"Thursday","str_mail_weekday_tuesday":"Tuesday","str_mail_weekday_wednesday":"Wednesday","str_mail_year":"Year","str_mail_yesterday":"Yesterday","str_srch_add_filters":"Add More Filters","str_srch_also_try":"Also try:","str_srch_bmp":"BMP","str_srch_doc":"DOC","str_srch_docx":"DOCX","str_srch_dot":"DOT","str_srch_dotx":"DOTX","str_srch_enter_search_terms_title":"No search terms entered","str_srch_flagged":"Starred","str_srch_forwarded":"Forwarded","str_srch_from":"From:","str_srch_htm":"HTM","str_srch_jpeg":"JPEG","str_srch_jpg":"JPG","str_srch_mp3":"MP3","str_srch_mpeg":"MPEG","str_srch_mpg":"MPG","str_srch_msword":"Word","str_srch_notrefined":"To show results faster, we did not create filters for this search.","str_srch_pagination_footer":"Page {{current}} of {{total}}","str_srch_png":"PNG","str_srch_pot":"POT","str_srch_potx":"POTX","str_srch_ppt":"PPT","str_srch_pptx":"PPTX","str_srch_read":"Read","str_srch_refineby_attachment":"Attachments","str_srch_refineby_date":"Date","str_srch_refineby_event":"Events \/ ToDos","str_srch_refineby_folder":"Folder","str_srch_refineby_sender":"Sender","str_srch_refineby_sender_details":"Sender Details","str_srch_refineby_status":"Status","str_srch_refineby_type":"Message Type","str_srch_refined_by":"Results Narrowed By:","str_srch_refinements":"Narrow Results By:","str_srch_related_res":"Related Web Searches","str_srch_replied":"Replied","str_srch_rtf":"RTF","str_srch_showrefinements":"Show Filters","str_srch_sponsored_res":"Sponsored Results","str_srch_tif":"TIF","str_srch_tiff":"TIFF","str_srch_title_remove_refinement_attr":"Remove Filter","str_srch_unflagged":"Unstarred","str_srch_unread":"Unread","str_srch_view_all":"View All","str_srch_view_all_attachment_attr":"View All Attachments","str_srch_view_all_date_attr":"View All Dates","str_srch_view_all_folder_attr":"View All Folders","str_srch_view_all_sender_attr":"View All Senders","str_srch_view_all_type_attr":"View All Types","str_srch_view_less":"View Less","str_srch_view_less_attachment_attr":"View Less Attachments","str_srch_view_less_sender_attr":"View Less Senders","str_srch_xls":"XLS","str_srch_xlsb":"XSLB","str_srch_xlsm":"XSLM","str_srch_xlsx":"XLSX","str_srch_xlt":"XLT","str_srch_xltx":"XLTX","str_dm_title":"Mail Search Tips","str_dm_description":"Start you search with \"subject:\" to search within subject lines","str_dm_pretty_url":"More Tips","str_dm_note":"Advertisement"});
}, '1.0.0');YUI.add("ac-widget",function(F){var D=F.Lang,A=F.contacts,H=A.api,E=A.utils,G=F.comms;function C(J){var K=D.isUndefined,M=this,L,I;J.ac=M._getEventPlugin(J);L='<li role="option" ><span class="ac-value">{{hilite}}</span><span title="{{str_ac_remove_item}}" data-action="ac-remove-item" data-ac-sc={{isSmartContact}} data-ac-email-field-id="{{emailFieldId}}" data-ac-id="{{id}}" data-ac-email="{{email}}" class="ac-remove-item">X{{str_ac_remove_item}}</span></li>';I='<li role="option" ><span class="ac-value">{{hilite}}</span></li>';if(J.ac){C.superclass.constructor.apply(M,[J]);}M.set("itemTplNoDelete",I);M.set("itemTplWithDelete",NeoConfig.enableContactDelete?L:I);}C.NAME="ACWidget";function B(){var I=arguments;F.use("rocket-stats",function(){F.common.Utils.rocketstats.stat.apply(0,I);});}F.extend(C,G.ui.AutoComplete,{bind:function(I){C.superclass.bind.apply(this,arguments);},bindUI:function(I){C.superclass.bindUI.apply(this,arguments);},_getEventPlugin:function(I){var J=false,K=D.isUndefined;if(!K(I.acNode)&&!K(I.acTarget)){J=I.acTarget.plug(G.ui.AutoCompleteEventsPlugin,{alignNode:I.acNode}).ac;}return J;},refresh:function(I){var K=this,J=false;J=K._getEventPlugin(I);if(J){I.ac=J;return K.setAttrs(I);}return K;},getItemMarkup:function(L){var I=this,K=I.updateHighlighting(L),J;if(L.isCategory){J=F.common.Utils.substitute(I.get("itemTplNoDelete"),{hilite:K},0,0,0,0,strings);}else{J=F.common.Utils.substitute(I.get("itemTplWithDelete"),{hilite:K,id:L.id,email:L.email,emailFieldId:L.emailField.id,isSmartContact:L.isSmartContact||0},0,0,0,0,strings);}return J;},buildName:function(M,K,L,I){if(M||K||L){var J=F.common.Utils.substitute(strings["str_name_format"],{given_name:M?M:"",middle_name:K?K:"",family_name:L?L:""});J=J.replace(/ +(?= )/g,"");if(I&&NeoConfig.intl==="jp"){J=J+" ("+strings.str_form_lbl_nickname+I+")";}}else{if(I){J=I;}else{J="";}}return J;},updateHighlighting:function(U){var K=U.matches,b=this;if(K&&(K.nickname||K.user||K.firstname||K.lastname||K.mobileno||K.homeno||K.workno||K.email)){var i=F.Lang.isArray(K.nickname)&&K.nickname.length>0?true:false,S=F.Lang.isArray(K.firstname)&&K.firstname.length>0?true:false,L=F.Lang.isArray(K.lastname)&&K.lastname.length>0?true:false,V=F.Lang.isArray(K.mobileno)&&K.mobileno.length>0?true:false,g=F.Lang.isArray(K.homeno)&&K.homeno.length>0?true:false,M=F.Lang.isArray(K.workno)&&K.workno.length>0?true:false,N=F.Lang.isArray(K.email)&&K.email.length>0?true:false;var m=U.user||null,d=U.nickname||null,h=U.firstname||null,P=U.lastname||null,W=U.mobileno||null,R=U.homeno||null,Q=U.workno||null,Z=U.email||null,k=U.sc_score;var j=i?b._hlMatch(d,K.nickname):(d&&d.length>0?d:null),J=S?b._hlMatch(h,K.firstname):(h&&h.length>0?h:null),e=L?b._hlMatch(P,K.lastname):(P&&P.length>0?P:null),T=V?b._hlMatch(W,K.mobileno):null,c=g?b._hlMatch(R,K.homeno):null,I=M?b._hlMatch(Q,K.workno):null,f=N?b._hlMatch(Z,K.email):null;var a,l,X,Y;l="";l=b.buildName(J,"",e,j);j=i?j:null;J=S?J:null;e=L?e:null;X="";if(f){X+=f;}else{X+=Z;}a=l||"";a=F.Lang.trim(a);if(a!=""){if(NeoConfig.bidi){Y=F.Intl.detectDirection(a.replace(/<\/?b\>/,""));a="<span dir="+Y+">"+a+"</span>";}else{a="<span>"+a+"</span>";}}if(X.length>0){if(a.length>0){a+=" ";}if(a==""){a+="<em class='email no-name' dir='ltr'>"+X+"</em>";}else{a+="<em class='email' dir='ltr'>("+X+")</em>";}}}function O(r,q,o,p,n){switch(q){case"amp":if(o){return"&"+o+";";}else{return"&";}case"#39":return"'";case"quot":return'"';case"lt":return"<";case"gt":return">";case"#35":return"#";default:return"";}}a=a.replace(/&((?:[a-zA-Z]+)|(?:#[0-9]+));(?:([a-zA-Z]+|(?:#[0-9]+));)?|([;,])/gi,O);if(NeoConfig.smartcomplete_enabled=="debug"){if(F.UA["gecko"]){a+='<span style = "float:right; margin-top: -15px; color:red;">'+k.toFixed(6);+"</span>";}else{a+='<span style = "float:right; color:red;">'+k.toFixed(6);+"</span>";}}return a;},_hlMatch:function(I,N){var O=I;var K,M,J,P,L;N.sort(this._sortMatches);M=O.length;for(K=N.length-1;K>=0;K--){J=N[K];if(NeoConfig.bidi){P=O.substring(0,J.startIndex);L=O.substring(J.endIndex,M)+O.substring(M);O=P+F.comms.Intl.highlightString(O.substring(J.startIndex,J.endIndex),P,L)+L;}else{O=O.substring(0,J.startIndex)+this.hlFn(O.substring(J.startIndex,J.endIndex))+O.substring(J.endIndex,M)+O.substring(M);}M=J.startIndex;}O=O.substring(0,M)+O.substring(M);return O;},hlFn:function(I){return"<b>"+I+"</b>";},_sortMatches:function(J,I){if(typeof J==="object"&&typeof I==="object"&&typeof J.startIndex==="number"&&typeof I.startIndex==="number"){return +(J.startIndex-I.startIndex);}else{return 0;}},click:function(L){var P=this,O=P.get("ac");L.halt();if(L.target.hasClass("ac-remove-item")){var K=L.target,Q=parseInt(K.getAttribute("data-ac-sc"),10),I=K.getAttribute("data-ac-id"),N=K.getAttribute("data-ac-email-field-id"),M=K.getAttribute("data-ac-email");F.fire("mt:click",{action:"ac_del",append:{ltxt:P["_selectedIndex"]}});F.use("common-ui-dialog-helper","_shared_module_offscreen_bin_modal_btn_generic",function(V){var W=V.common.Utils.substitute(V.ui.Templates._shared_module_offscreen_bin_modal_btn_generic.base,0,0,0,{btnID:"ok",btnLabel:strings.str_delete}),S=V.common.Utils.substitute(V.ui.Templates._shared_module_offscreen_bin_modal_btn_generic.base,0,0,0,{btnID:"cancel","default":"default",btnLabel:strings.str_btn_cancel}),U={hd:strings.str_address_remove_hd,bd:V.common.Utils.substitute(Q?strings.str_sc_remove_bd:strings.str_contacts_remove_bd,{name:M}),ft:W+S},T={ok:{handler:function(){V.contacts.smartcontacts.api.deleteSmartContacts([M]);var X=new G.FilterContacts();V.contacts.api.removeEmail(I,parseInt(N),X.buildContactsIndex);O.set("queryValue","");B("autocomplete-delete",Q?"smartContact":"ABContact");U={hd:strings.str_address_removed_hd,bd:V.common.Utils.substitute(strings.str_address_removed_bd,{name:M}),ft:V.common.Utils.substitute(V.ui.Templates._shared_module_offscreen_bin_modal_btn_generic.base,0,0,0,{btnID:"ok","default":"default",btnLabel:strings.str_ok})};V.common.ui.DialogHelper.createCommon(U);}},cancel:{handler:function(){O.set("queryValue","");
}}},R=function(X){};V.common.ui.DialogHelper.createCommon(U,T,R);});}else{F.fire("mt:click",{action:"ac_select",append:{ltxt:P["_selectedIndex"]}});var J=L.currentTarget.one(".ac-value").get("text");O.set("queryValue",J);P["_selectedIndex"]=-1;O.get("host").simulate("keydown",{keyCode:13});P._currentValue=J;O.get("host").focus();}P.hide();},handleEnter:function(O,J){var M=J.get("ac"),I=J["_selectedIndex"],L,P;O.halt();var K=new G.FilterContacts();if(J.get("data").queryStr!=M.get("queryValue")){K.updateFilterItems(M.get("queryValue"));var N=K.filterContacts(E.getSortedFlatContacts(["firstname","lastname","email"]));J.setAttrs({query:M.get("queryValue"),data:N}).drawMarkUp().setAlign().show();}if(I!=-1){L=J.item(I);if(L){P=L.one(".ac-value").get("text");M.set("queryValue",P);}J["_selectedIndex"]=-1;M.get("host").focus();J.hide();}}});F.namespace("contacts.ui");F.contacts.ui.ACWidget=C;},"1.0.0",{requires:["overlay","node-event-simulate","comms-ui-autocomplete-plugin","comms-ui-autocomplete","contacts-api-utils","contacts-api","filter-contacts","common-utils","comms-intl-bidihighlight","contacts-smartcontacts-api"]});YUI.add("_shared_module_offscreen_bin_compose",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_compose={base:'<div id="ac-to-results" class="ac-results"></div><div id="ac-cc-results" class="ac-results"></div><div id="ac-bcc-results" class="ac-results"></div>'};},"1.0.0");YUI.add("comms-utils",function(E){E.namespace("comms");var B={},D=E.Object,C=E.Lang,A=C.trim,F=/{{([^{}]*)}}/g;E.mix(B,{substitute:function(M,L,I,H,G,K,J){if(typeof M!=="string"){return;}if(J){M=J.str||M;L=J.obj||L;I=J.formatters||I;H=J.args||H;G=J.strings||G;K=J.templates||K;}return M.replace(F,function(O,N){var Q,P,R=B.substitute;if(I&&(Q=(J&&J.formatters)?J.formatters[N]:I[N])){return(Q(L,H,J))||"";}else{if(L&&N in L){P=L[N];return typeof P==="string"&&P.match(F)?R(P,L,I,H,G,K,J):P;}else{if(G&&N in G){P=G[N];return P.match(F)?R(P,L,I,H,G,K,J):P;}else{if(K&&N in K){return R(K[N].base||K[N],L,I,H,G,K,J);}else{return"";}}}}});},escapeHtml:function(G){if(G===null){return null;}G=""+G;G=G.replace(/&(?!(amp|lt|gt|quot|#39|#92);)/g,"&amp;");G=G.replace(/</g,"&lt;");G=G.replace(/>/g,"&gt;");G=G.replace(/\"/g,"&quot;");G=G.replace(/\'/g,"&#39;");G=G.replace(/\\/g,"&#92;");return G;},unescapeHtml:function(G){if(G===null){return null;}G=""+G;G=G.replace(/&amp;/g,"&");G=G.replace(/&lt;/g,"<");G=G.replace(/&gt;/g,">");G=G.replace(/&quot;/g,'"');G=G.replace(/&#39;/g,"'");G=G.replace(/&#92;/g,"\\");return G;},createAddress:function(M){var G=false,I=null,H=null,K=/(<[^<>]+@[^<>]+\.[^<>]+>)|(\([^\(\)]+@[^\(\)]+\.[^\(\)]+\))|(\[[^\[\]]+@[^\[\]]+\.[^\[\]]+\])/,L,J=M.replace(/\".*\"/g,"");if(!A(J)||J.indexOf("@")<0){return{fail:true,email:M,name:B.escapeHtml(M)};}if(K.test(M)){L=M.match(K);H=L[0];I=A(M.replace(H,""));H=H.substring(1,H.length-1);}else{H=I=A(M);}if(!B.isValidEmail(H)){G=true;}return{fail:G,email:H,name:B.escapeHtml(I)};},isValidEmail:function(R){if(!R){return false;}var N=0,H=R,J=R.lastIndexOf("@"),S=R.substr(0,J),M=S.replace(/\\\\/g,""),I=S.length,L=R.substr(J+1),G=L.length,O=/^(\\.|[A-Za-z0-9!#%&`_=\/$'*+?^{}|~.-])+$/,K=/^"(\\"|[^"])+"$/,Q=/(^\..*)|(.*\.$)/,P=/^[A-Za-z0-9\-]+$/,T=/\.\./;if(!O.test(M)&&!K.test(M)){H=false;}L=L.split(".");G=L.length;if(G<2){H=false;}while(N<G){if(!P.test(L[N++])){H=false;}}return H;},splitName:function(M){var Q={},N,J,L=A(M),R,H,K=[],I=((strings.str_name_format).replace(/\{|\}/g,"")).split(" "),P=/^(?:\w[^\s@]*@[^\s@]+\.[^\s@]{2,})?$/,O=false,G=true;if(I[0]=="family_name"){O=true;}if(I.length<3){G=false;}while(L){R=L.match(/([^\u3000\s]*)[\u3000\s]+/);if(!R||R.length!==2||!R[0]){K.push(L);break;}K.push(R[1]);L=L.substring(R[0].length);}N=K.length;for(J=0;J<N;J+=1){H=K[J];switch(J){case 0:if(H){Q[(O?"familyName":"givenName")]=(N==1&&P.test(H))?"":H;}break;case 1:if(G&&2<N){Q.middleName=H;}else{Q[(O?"givenName":"familyName")]=H;}break;case 2:if(G){Q[(O?"givenName":"familyName")]=H;}else{Q[(O?"givenName":"familyName")]+=" "+H;}break;default:Q[(O?"givenName":"familyName")]+=" "+H;}}return Q;}});E.comms.Utils=B;},"1.0.0",{requires:[]});YUI.add("searchautocomplete",function(B){var C=NeoConfig.uh3Enabled,G=C?NeoConfig.searchField||B.one("#mnp-search_box"):B.one("#yuhead-search")||B.one("#search"),L=NeoConfig.searchField||G.one("input")||B.one("#mnp-search_box"),E=B.contacts,F=E.utils,I=B.common.Utils,H=I.substitute,K=5;B.on("contacts:api:loaded",function(M){A();});L.on("focus",function(M){if(F.areContactsLoaded()){A();}});L.on("keydown",function(M){var N=M.keyCode;M.stopPropagation();switch(N){case 13:if(M.ctrlKey||M.metaKey){return;}var V=this.get("value"),T,W=null,U=null,Q=null,R=false,P=false,S,O;if(C){T=B.ACWidgetInst.get("contentBox");W=T.one(".yui3-acwidget-selected");U=T.one(".ac-search-mail");Q=T.one(".ac-search-web");}if(W){if(U&&U.contains(W)){B.fire("fireSearch",V);B.fire("mt:click",{action:"ml_srch",spid:"search_results"});R=true;S=new B.EventTarget();S.publish("ucs:mailSearch",{broadcast:2,emitFacade:true});S.fire("ucs:mailSearch");}else{if(Q&&Q.contains(W)){S=new B.EventTarget();S.publish("ucs:webSearch",{broadcast:2,emitFacade:true});S.fire("ucs:webSearch",{query:V});B.fire("mt:click",{action:"wb_srch"});R=true;}else{P=true;}}}if(!R){if(B.ACWidgetInst&&B.ACWidgetInst.isVisible()&&B.ACWidgetInst.get("data").length>0&&B.ACWidgetInst.get("selectedIndex")>-1){B.ACWidgetInst.handleEnter(M,B.ACWidgetInst);}else{if(C){B.fire("mt:click",{action:P?"ml_srch_sugg":"ml_srch",spid:"search_results"});}B.fire("fireSearch",V);S=new B.EventTarget();O=P?"ucs:mailSearchSugg":"ucs:mailSearch";S.publish(O,{broadcast:2,emitFacade:true});S.fire(O);}}B.ACWidgetInst.hide();M.halt();break;}});function A(){if(NeoConfig.isCorpmail){B.use("ac-corp-widget",J);}else{J();}}function J(){if(!B.ACWidgetInst){var M=H(B.ui.Templates._shared_module_offscreen_bin_compose.base,{},null,null,strings,B.ui.Templates),N=NeoConfig.isCorpmail?E.ui.ACCorpWidget:E.ui.ACWidget;B.one(document.body).append(M);B.ACWidgetInst=new N({acNode:G,acTarget:L,contentBox:"#ac-to-results",selectFirst:false}).setAlign().render();}else{if(B.ACWidgetInst.get("ac").get("alignNode")!==G){B.ACWidgetInst.get("ac").destructor();B.ACWidgetInst.refresh({acNode:G,acTarget:L,width:G.getStyle("width"),selectFirst:false}).setAlign().render();}}B.ACWidgetInst.get("ac").detach("ac:query");B.ACWidgetInst.get("ac").on("ac:query",function(Q){var W=this,S=Q.value,U,R=this.get("badResult"),P,T,V;if(R){P=I.escapeRegexp(I.escapeHtml(R));T=new RegExp("^"+P,"gi");if(Q.value.match(T)){this.fire("ac:load",{results:[],query:Q.value});D(S);return;}}if(F.areContactsLoaded()){var O=new B.comms.FilterContacts();O.updateFilterItems(S);U=O.fastMatch();U.queryStr=S;if(U.length>K){U.length=K;}V=B.bind(W.reload,W,U);V(U);}D(S);});}function D(P){if(!C){return;}B.ACWidgetInst.setSize();var M=B.ACWidgetInst.get("contentBox"),O='<ul role="presentation" class="ac-search-mail"><li role="option">'+strings.str_uh_searchmail+'<span class="ac-value hidden">'+P+"</span></li></ul>",N='<ul role="presentation" class="ac-search-web"><li role="option">'+strings.str_uh_search_web_for.replace("{{query}}",P)+'<span class="ac-value hidden">'+P+"</span></li></ul>",Q=M.one(".ac-search-mail li");acSearchWeb=M.one(".ac-search-web li");if(NeoConfig&&!NeoConfig.has2ButtonSearch){if(!Q){M.insertBefore(O,M.get("firstChild"));}else{Q.setContent(O);}if(!acSearchWeb){M.appendChild(N);}else{acSearchWeb.setContent(N);}}M.all("span.ac-remove-item").remove();if(B.ACWidgetInst.get("data").length>0){B.fire("mt:view",{action:"hdr_ac_sugg"});}else{B.fire("mt:view",{action:"hdr_ac"});}M.setStyle("display","block");}},"1.0.0",{requires:["ac-widget","filter-contacts","forms_css","autocomplete_css","_shared_module_offscreen_bin_compose","common-utils","comms-utils","mail-ui-searchbar"]});if(!window.ucs){window.ucs={};}YUI.add("gallery-jsonp",function(b){var a=b.Lang.isObject,c=b.Lang.isFunction;function d(){this._init.apply(this,arguments);}d._pattern=/\bcallback=(.*?)(?=&|$)/i;d._template="callback={callback}";d.prototype={_init:function(f,e){this.url=f;e=e||{};if(c(e)){e={on:{success:e}};}e.on=e.on||{};if(!e.on.success){e.on.success=this._getCallbackFromUrl(f);}this._config=b.merge({on:{},context:this,args:[],format:this._format},e);},_getCallbackFromUrl:function(i){var j=i.match(d._pattern),e,g,f,h;if(j){g=b.config.win;f=j[1].split(/\./).reverse();e=f.shift();for(h=f.length-1;h>=0;--h){g=g[f[h]];if(!a(g)){return null;}}if(a(g)&&c(g[e])){return b.bind(g[e],g);}}return null;},send:function(e){if(!this._config.on.success){return this;}var g=b.guid().replace(/-/g,"_"),h=this._config,i=h.format.call(this,this.url,"YUI.Env.JSONP."+g);function f(j){return(c(j))?function(k){delete YUI.Env.JSONP[g];j.apply(h.context,[k].concat(h.args));}:null;}YUI.Env.JSONP[g]=f(h.on.success);b.Get.script(i,{onFailure:f(h.on.failure),onTimeout:f(h.on.timeout||h.on.failure),timeout:h.timeout});return this;},_format:function(h,f){var e=d._template.replace(/\{callback\}/,f),g;if(d._pattern.test(h)){return h.replace(d._pattern,e);}else{g=h.slice(-1);if(g!=="&"&&g!=="?"){h+=(h.indexOf("?")>-1)?"&":"?";}return h+e;}}};b.JSONPRequest=d;b.jsonp=function(f,e){return new b.JSONPRequest(f,e).send();};if(!YUI.Env.JSONP){YUI.Env.JSONP={};}},"gallery-2010.08.11-20-39",{requires:["get","oop"]});YUI.add("ucs-menu-utils",function(a){a.namespace("ucs");var c="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",i="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",j='<span class="separator" role="presentation"></span>',g="click",h="a",o="role",k="tabIndex",b="yucs-hide",d="iframe",l="ul",m="li",e="parentNode",n="http://l.yimg.com/a/lib/ush/icon.gif",f="https://s.yimg.com/lq/lib/ush/icon.gif";a.ucs.MenuUtils=function(q,p){var r=p&&p.panelSelector||l;this.menu=q;this.panel=this.menu.one(r);this.init();};a.ucs.MenuUtils.prototype={init:function(){this.keyedup=false;this.menu.delegate(g,this._handleMenuClick,">a",this);this.menu.delegate(g,this._handleMenuItemClick,"li a",this);this.menu.on("keyup",this._handleKeyup,this);this.menu.on("keydown",this._handleKeydown,this);this.menu.removeClass("yucs-activate");this._initAria();},_initAria:function(){this.menu.one(h).set(o,"button");this.panel.all(h).set(o,"menuitemradio");this.panel.set(o,"menu");this.panel.all("div,ul,li").set(o,"presentation");if(!a.UA.ipad&&!a.UA.mobile){this.panel.set(k,-1);}this.focusmanager=this.panel.plug(a.Plugin.NodeFocusManager,{descendants:h,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(p){return p.get(e);}},circular:true});},_destructAria:function(){this.panel.unplug(a.Plugin.NodeFocusManager);this.panel.one(h).set(k,0);},_handleMenuClick:function(p){p.halt();if(this.panel.hasClass(b)){this._accessShowMenu(p);}else{this._hideMenu();}},_handleKeyup:function(p){if(27===p.keyCode){this.menu.one(h).focus();this._hideMenu();}else{if(40===p.keyCode&&!this.keyedup){this.panel.one(h).focus();this.keyedup=true;}}},_handleKeydown:function(p){if(!this.panel.hasClass(b)){p.stopPropagation();}if(40===p.keyCode){p.preventDefault();}},_handleDocumentClick:function(p){if(this.panel.contains(p.target)||p.target._node===this.panel._node||this.panel.hasClass(b)||p.target===this.menu.one(">a")||p.target.get("parentNode")===this.menu.one(">a")){this.skipBlur=true;return;}this._hideMenu();},_accessShowMenu:function(q){var p=this;this._hideAllMenus();this._showMenu(q);this.panel.focus();a.Node.DOM_EVENTS.touchend=true;this.documentBlurHandle=a.on("blur",function(s){var r=this;if(!this.skipBlur){this.timeout=setTimeout(function(){r._hideMenu();},50);}this.skipBlur=false;},this.panel,this);this.documentFocusHandle=a.on("focus",function(r){if(this.timeout&&this.panel.hasChildNodes(r.target)){clearTimeout(this.timeout);this.timeout=null;}},this.panel,this);this.documentClickHandle=a.on(g,this._handleDocumentClick,document.body,this);this.documentMouseDownHandle=a.on("mousedown",this._handleDocumentClick,document.body,this);if(navigator.appName!=="Microsoft Internet Explorer"){this.documentWheelHandle=a.on("mousewheel",this._hideAllMenus,this);this.documentScrollHandle=a.one(window).on("scroll",this._hideAllMenus,this);}},_showMenu:function(q){this.panel.removeClass(b);this._addIframeShim();var p=this.menu.one(d);if(p){p.removeClass(b);}},_position:function(){var p=this.menu.get("region");if(!this.panel.hasClass("yucs-menu-right")&&!this.panel.hasClass("yucs-menu-left")){this.panel.setStyle("left",p[0]);}this.panel.setStyle("top",p[1]+13);},_hideMenu:function(){this.panel.addClass(b);var p=this.menu.one(d);if(p){p.addClass(b);}if(this.documentBlurHandle){this.documentBlurHandle.detach();}if(this.documentFocusHandle){this.documentFocusHandle.detach();}if(this.documentClickHandle){this.documentClickHandle.detach();}if(this.documentMouseDownHandle){this.documentMouseDownHandle.detach();}if(this.documentTouchEndHandle){this.documentTouchEndHandle.detach();}this.keyedup=false;},_hideAllMenus:function(){var p=a.all("yucs-menu iframe"),q=a.all(".yucs-notifications ul.ynotif-yahoo-panel");v2Notifications=a.all(".yucs-notifications div.yucs-notif-panel");this._hideMenu();p.addClass(b);q.addClass(b);v2Notifications.addClass(b);},_addIframeShim:function(){var p=a.all("select"),r=(a.UA.ie<=6),q;if(!r||(!p.size()>0)){return;}q=this.menu.one(d);if(!q){q=document.createElement(d);q=this.panel.get(e).insertBefore(q,this.panel);}q.className="yucs-shim";q.setStyle("position","absolute");q.setStyle("width",this.panel.getComputedStyle("width"));q.setStyle("height",this.panel.getComputedStyle("height"));q.setStyle("top",this.panel.getY()+"px");q.setStyle("border","0px none");},_addMenuGroups:function(s,x,w){var u=this.menu.one(l),p="",q=(u.get("children")._nodes.length)?true:false;for(var r=0,t=s.length;r<t;r++){var v=s[r].length;if(x==="bottom"){s[r][0].separatorTop=true;}else{if(r<(t-1)||q){s[r][v-1].separatorBottom=true;}}p+=this._addMenuGroup(s[r],w);}if(x==="bottom"){u.append(p);}else{u.prepend(p);}},_addMenuGroup:function(q,s){var t="";for(var r=0,p=q.length;r<p;r++){if(s){q[r].isDebugItem=true;q[r].menuClass="debug-item";}else{q[r].isDebugItem=false;q[r].menuClass="minty-item";}t+=this._addMenuItem(q[r]);}return t;},_addMenuItem:function(q){var p="";if(q.isActive){q.checkedAria='aria-checked="true"';}else{q.checkedAria="";}if(q.isDisabled){q.disabledAria='aria-disabled="true"';}else{q.disabledAria="";}switch(q.actionType){case"link":p=a.substitute(c,q,this._processTemplateValue);break;case"customEvent":p=a.substitute(i,q,this._processTemplateValue);break;default:break;}if(p){if(q.isDebugItem){p=p.replace(/separator/,"separator debug-item");}else{p=p.replace(/separator/,"separator minty-item");}}return p;},_clearMenuItem:function(p){this.menu.one(l).all("."+p).each(function(q){q.remove(true);});},_processTemplateValue:function(q,r,s){a.log("key = "+q+" value = "+r+" meta_data = "+s);var t="";var p=(document.location.protocol==="https:")?f:n;switch(q){case"icon":if(r!==undefined){if(r==="available"){t='<img src="'+p+'" class="yucs-opi available"/>';
}else{if(r==="offline"){t='<img src="'+p+'" class="yucs-opi offline"/>';}else{if(r==="invisible"){t='<img src="'+p+'" class="yucs-opi invisible"/>';}else{if(r==="busy"){t='<img src="'+p+'" class="yucs-opi busy"/>';}else{if(r==="idle"){t='<img src="'+p+'" class="yucs-opi idle"/>';}else{t='<img src="'+r+'" />';}}}}}}break;case"separatorTop":if(r){t=j;}break;case"separatorBottom":if(r){t=j;}break;case"actionData":if(r){t='data-mad="'+r+'"';}break;case"isDisabled":if(r){t="disabled";}break;case"isActive":if(r){t="sp active";}break;case"checkedAria":t=r;break;default:t=r;break;}return t;},_resetItemStatus:function(s){var r=s.ancestor(l).all(m),q=s.ancestor(l).all("li.disabled");r.removeClass("sp active");q.removeClass("disabled");if(s.getAttribute("data-dis")){var p=s.ancestor(m);p.addClass("disabled");}if(s.getAttribute("data-hs")){var p=s.ancestor(m);p.addClass("sp active");}},_handleMenuItemClick:function(q){var p=q.target;}};},"1.0",{requires:["node","event","event-mouseenter","event-custom","substitute","node-focusmanager"]});(function(){var b=document.getElementById("yucs"),a=(b&&b.getAttribute("data-property")==="srp")?Y:YUI();a.use("node","ucs-menu-utils",function(d){var c=d.one("#yucs").all("li.yucs-menu.yucs-activate");c.each(function(f){var e=new d.ucs.MenuUtils(f);});});})();YUI.add("ucs-timestamp-library",function(a){a.namespace("ucs.Timestamp");a.ucs.Timestamp={getTimeStamp:function(e){var n,r,u,o,g="AM",j,b=a.one("#yucs"),l=e.dateRef||new Date(),m=e.date,q=e.locale?e.locale:b.getAttribute("data-lang"),h=m.getTime(),s=m.getDate(),k=l.getDate(),v=l.getTime(),i=v-h,p=k-s,f=true,c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];q=a.Lang.isString(q)?q:"en-us";f=/^en-us$/i.test(q);i=parseInt(i/1000,10);r=m.getMonth();u=m.getHours();o=m.getMinutes();j=v-((l.getHours()*60*60*1000)+(l.getMinutes()*60*1000)+(l.getSeconds()*1000)+l.getMilliseconds());if(o<10){o="0"+o;}if(u>=12){g="PM";}if(u>12){u-=12;}if(!f){n=c[r]+" "+s+"&nbsp;&nbsp;"+u+":"+o+" "+g;}else{if(p===0){if(i<60){if(i>1){n=i+" secs ago";}else{n=i+" sec ago";}}else{if(i<3600){i=Math.ceil(i/60,10);if(i<2){n=i+" min ago";}else{n=i+" mins ago";}}else{if(i<86400){i=Math.ceil(i/3600);if(i>1){n=i+" hours ago";}else{n=i+" hour ago";}}}}}else{if(((j-h)<86400000)&&p!==0){n="Yesterday "+u+":"+o+" "+g;}else{n=c[r]+" "+s+"&nbsp;&nbsp;"+u+":"+o+" "+g;}}}return n;}};},"1.0",{requires:["node"]});YUI.add("ucs-menu-nav",function(d){d.namespace("ucs.MenuNav");var f="yucs",a="yucs-activate",t="yucs-menu",h="yucs-dock",m="yucs-menu_anchor",n="yucs-submenu-toggle",u="yucs-hide",g="yui3-menu-hidden",k="yui3-menu-label",l="yui3-menu-label-menuvisible",c="yui3-menu-label-active",o="yui3-menuitem-active",q="yucs-search",i="yucs-profile_inner",j="ucs:menuNavShow",r=5,s=500,b=0,p=500,e=750;d.ucs.MenuNav=function(A){var x,z=null,v=null,w=null,y=this;this.container=A;this.containerId=this.container.getAttribute("id");this.submenu=this.container.one("."+t);this.menuLabel=this.container.one("."+k);this.headerNode=d.one("#"+f);this.showMenuYlt=this.submenu.getAttribute("data-yltmenushown");v=function(B){d.log("MenuNav: overriding setXY on #"+y.submenu.getAttribute("id"));y._adjustPositionBeforeDisplay(B);};this.submenu.setXY=v;w=this.container.one("a."+k+", ."+k+" a");if(w&&w.getAttribute("href").indexOf("#")!==0){w.setAttribute("href","#"+this.submenu.getAttribute("id"));}x={mouseOutHideDelay:e,submenuHideDelay:p,subMenuShowDelay:b};this.container.plug(d.Plugin.NodeMenuNav,x);this._initEventHandlers();this._unHide();this.container.removeClass(a);};d.ucs.MenuNav.prototype={_unHide:function(){var v=this.container.all("."+u);if(v){v.removeClass(u);}},_broadcast:function(){d.augment(d.ucs.MenuNav,d.EventTarget,null,null,{});this.publish(j,{broadcast:2,emitFacade:true});},_initEventHandlers:function(){var v=this.headerNode.getAttribute("data-property");if("mail"===v&&this.container._plugins&&this.container._plugins.menuNav&&this.container._plugins.menuNav.prototype&&this.container._plugins.menuNav.prototype._onDocFocus){this.container._plugins.menuNav.prototype._onDocFocus=function(){};}this.container._plugins.menuNav.prototype._hideMenu=function(z,x){if(!x){return;}var y=this,A=z.previous(),w;A.removeClass(l);if(x){y._focusItem(A);y._setActiveItem(A);}w=z.one("."+o);if(w){w.removeClass(o);}z.setStyles({left:"",top:""});z.addClass("yui3-menu-hidden");if(y.get("useARIA")){z.set("aria-hidden",true);}};this._isOverLabel=false;this._isOverSubmenu=false;this.menuLabel.on("mouseover",this._handleMenuLabelEnter,this);this.menuLabel.on("mouseout",this._handleMenuLabelLeave,this);this.submenu.on("mouseover",this._handleSubmenuEnter,this);this.submenu.on("mouseout",this._handleSubmenuLeave,this);this.container.delegate("click",this._close,"."+t+" li a",this);},_handleMenuLabelLeave:function(w){var v=function(){if(false===this._isOverLabel&&false===this._isOverSubmenu){this._close();}};if(!w||!w.stopPropagation){return;}w.stopPropagation();this._isOverLabel=false;d.later(s,this,v);},_handleMenuLabelEnter:function(v){this._isOverLabel=true;},_handleSubmenuEnter:function(v){this._isOverSubmenu=true;},_handleSubmenuLeave:function(v){this._isOverSubmenu=false;this._handleMenuLabelLeave(v);},_closeOtherMenus:function(x,v){var w=x.one(".yucs-menu");if(x.getAttribute("id")!==this.containerId&&false===this._isHidden(w)){this._close("",x,w);}},_close:function(x,y,w,v){var z=function(A){A.handledMouseOut=true;A.handledMouseOver=false;};y=typeof y==="undefined"?this.container:y;w=typeof w==="undefined"?this.submenu:w;v=typeof v==="undefined"?this.menuLabel:v;w.addClass(g);v.removeClass(l).removeClass(c);w.all(".yui3-menuitem").each(function(A){z(A);A.removeClass("."+o);});z(v);z(y);z(w);},_isHidden:function(v){return v.hasClass(g)||v.hasClass(u);},_adjustPositionBeforeDisplay:function(x){var w=this.container.one("."+m),v;this.submenu.setY(x[1]);if(!w){this.submenu.setX(x[0]);d.Global.fire(j,{"menuid":this.containerId});d.later(10,this,function(){this.submenu.setStyles({"width":"auto","height":"auto"});});return;}v=function(){this.submenu.setStyles({"width":"auto","height":"auto"});var C=w.getX(),y=d.one("#"+f),F=y.getX(),G=y.get("offsetWidth"),A=this.submenu.get("offsetWidth"),z=Math.round(F+G-A-r),D=this.container.one("."+h),E=D&&D.get("offsetWidth"),B;if(C<z){z=C;this.container.setStyle("borderTopLeftRadius","0px");}if((this.submenu.getAttribute("id")===i)&&(d.one("#"+q).getStyle("direction")==="rtl")){z=C-(A/2);}if((this.submenu.getAttribute("id")==="yucs-prop_nav")&&(d.one("#"+q).getStyle("direction")==="rtl")){this.submenu.setX(C-(A*5));}this.submenu.setX(z);if(D){B=(w.get("offsetWidth")/2)-(E/2);D.setX(C+B);}this._sendBeacon(this.showMenuYlt);d.Global.fire(j,{"menuid":this.containerId});d.one("#"+f).all(".yucs-menu_nav").each(this._closeOtherMenus,this);};if(d.one("#"+q).getStyle("direction")!=="rtl"){if(document.compatMode!=="CSS1Compat"){this.submenu.setStyle("left","0px");}else{this.submenu.setStyle("left","-10000px");}}else{this.submenu.setStyle("left","0px");}d.later(10,this,v);},_sendBeacon:function(v){var w;if(!v){d.log("MenuNav: no ylt data in _sendBeacon for #"+this.submenu.getAttribute("id"));return;}w=new Image();w.height=0;w.width=0;w.src="https://geo.yahoo.com/t"+v;}};},"1.0",{requires:["node","event","event-custom","node-menunav"]});(function(){var b="yucs",c=document.getElementById(b),a=typeof window.Y!=="undefined"&&(c&&c.getAttribute("data-property")==="srp")?window.Y:YUI();a.use("ucs-menu-nav",function(e){var f=e.one("#"+b),d=f&&f.all(".yucs-menu_nav.yucs-activate")||false;if(d){d.each(function(i,g){var h=new e.ucs.MenuNav(i);});}});}());YUI.add("ucs-navigation",function(a){var h="yucs",b=3,c=172800000,g=3600000,i="yucs_eyc_nav_prop",d=a.Object,e=a.Array,f=a.Lang;a.namespace("ucs");a.ucs.Navigation=function(j,k){this.navigation=j;this.eventHandlers=[];this.jsonp=k&&k.jsonp?k.jsonp:a.jsonp;this.cache=k&&k.cache?k.cache:(typeof a.CacheOffline!=="undefined"?new a.CacheOffline({expires:c}):null);this.init();};a.ucs.Navigation.prototype={init:function(){this.header=a.one("#"+h);this.property=this.header.getAttribute("data-property");this.locale=this.header.getAttribute("data-lang");this.hasFetched=false;this.fetchInProgress=false;this.numNavQueriesMade=0;try{if(this.locale.toLowerCase().indexOf("-us")===-1){this.navigation.one(".yucs-menu").addClass("yucs-nonus");}}catch(j){}this._initEventHandlers();},destroy:function(){for(var j=0;j<this.eventHandlers.length;j++){this.eventHandlers[j].detatch();}},_parseUrl:function(o,k){var m=/^(?:([^:\/?#]+):)?(?:\/\/(?:(?:(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?(?:((?:(?:[^?#\/]*\/)*)(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,l=m.exec(o),n={"source":0,"scheme":1,"user":2,"pass":3,"host":4,"port":5,"path":6,"query":7,"fragment":8},j;if(k){j=n[k.toLowerCase()];return l[j];}else{return l;}},_initEventHandlers:function(){var j=this.navigation.one("#yucs-nav_button");if(!j){return;}this.eventHandlers.push(j.on("click",this._loadNavigation,this));this.eventHandlers.push(j.on("mouseover",this._loadNavigation,this));this.eventHandlers.push(j.on("focus",this._loadNavigation,this));},_loadNavigation:function(){var k=!this.header.getAttribute("data-disableyql"),j=this.cache?this.cache.retrieve(this._getCacheKey()):null;if(this.hasFetched===false&&this._isValidCacheData(j)){this._handleNewItems(j.response);}else{if(this.hasFetched===false&&this.fetchInProgress===false&&k){this._updateFromWs();}}},_isValidCacheData:function(j){return j!==null&&typeof j==="object"&&j.response!==null&&typeof j.response==="object"&&d.keys(j.response).length>0&&!document.location.search.match("ucs.invalidnavcache=1");},_getCacheKey:function(){return i+"_"+this.locale;},_updateFromWs:function(){var j='select * from ucs.navigation where property="'+this.property+'" and lang="'+this.locale+'"',n=a.QueryString.stringify({q:j,format:"json"}),m="https:"===document.location.protocol?"https://":"http://",l=m+"ucs.query.yahoo.com/v1/public/yql?"+n;a.log("nav: fetching navigation from "+l);this.fetchInProgress=true;this.numNavQueriesMade++;try{this.jsonp.call(this,l,{on:{success:this._handleResponse,error:this._handleFailure,failure:this._handleFailure,timeout:this._handleFailure},context:this,timeout:2000});}catch(k){this._handleFailure(k);}},_handleResponse:function(k){var j;if(k&&k.query&&k.query.results===null&&k.query.count===0){this._handleEmptyResponse();}else{if(!k||!k.query||!k.query.results||!k.query.results.result||!k.query.results.result.eyc){this._handleFailure(k);}else{j=this._normalizeYqlResponse(k.query.results.result.eyc);if(!j||d.keys(j).length===0){this._handleEmptyResponse();}else{this._handleNewItems(j);this._cache(j);}}}},_handleNewItems:function(j){this._updateNavItems(j);this.hasFetched=true;this._finishedLoading();},_cache:function(k,j){if(this.cache&&k&&d.keys(k).length>0){if(typeof j==="number"&&j>0){this.cache.set("expires",j);}this.cache.add(this._getCacheKey(),k);}},_normalizeYqlResponse:function(l){var k={},j=this;if(l&&l.PropertyName){l=[l];}e.each(l,function(m){var n=m&&m.PropertyName?m.PropertyName.toLowerCase():null;if(n&&n!==j.property){k[n]=j._createItem(m.DisplayName,m.URL);}});return k;},_createItem:function(k,j){return{name:k,url:j};},_updateNavItems:function(o){var n={"news":"yucs-site_news","finance":"yucs-site_finance","sports":"yucs-site_sports","my":"yucs-site_my","omg":"yucs-site_omg","shine":"yucs-site_shine","frontpage":"yucs-site_home"},k=d.keys(n),m,l,j,p;if(!o){return;}for(m=0;m<k.length;m++){l=k[m];j=o[l];p=n[l];this._updateNavItem(j,"."+p);}},_updateNavItem:function(m,l){var k=this.navigation.one(l),n=k&&k.one("a"),j,o;if(!m&&k){a.log("nav: removing "+l+" from navigation");k.remove();}else{if(m&&n){o=m.url;if(this._parseUrl(m.url,"path")===""){o+="/";}j=n.getAttribute("href").match(/_ylt=[^&;\/]+/gi);if(j){o+=";"+j;}n.setAttribute("href",o);n.set("text",m.name);}else{a.log("nav: could not find node for "+l+" in navigation");}}},_handleFailure:function(k){var j=true;this._handleEmptyResponse(j);if(this.numNavQueriesMade<b){this.hasFetched=false;}},_handleEmptyResponse:function(j){var m,n,l,k;a.log("nav: empty or bad data returned from eyc.");n=this.navigation.one(".yucs-site_home");l=n&&n.one("a").get("text")||"";l=f.trim(l)||"Yahoo!";k="http://www.yahoo.com/";m={"frontpage":this._createItem(l,k)};this._handleNewItems(m);if(!j){this._cache(m,g);}this._finishedLoading();},_finishedLoading:function(){var l=this.navigation.one("#yucs-prop_nav"),j=l.one("> div.yui3-menu-content"),k;this.fetchInProgress=false;j.removeClass("yucs-yql_loading");k=j.get("offsetHeight")+10;l.setStyles({"height":k,"width":"auto"});}};},"1.0",{requires:["node","event","event-custom","querystring-stringify","gallery-jsonp","cache"]});(function(){var b=document.getElementById("yucs"),a=typeof window.Y!=="undefined"&&(b&&b.getAttribute("data-property")==="srp")?window.Y:YUI();a.use("node","ucs-navigation",function(e){var c=e.one("#yucs-nav"),d;if(c){d=new e.ucs.Navigation(c);}});}());YUI.add("ucs-search",function(a){if(!ucs.Search){var h="value",m="click",i="suggest",n="touchstart",k="submit",g="innerHTML",l="tabindex",o="target",j=20,d=10,b=parseInt(a.one("#yucs").getStyle("paddingLeft"),d),f="yucs-qry",e="yucs-content-qry",c="#yucs-satray";ucs.Search=function(p){this.form=(p.getDOMNode().nodeName.toLowerCase()==="form")?p:p.one("form");this.searchWrapper=a.one("#yucs-search");this.buttons=this.form.all("button");this.stype=this.form.one("#yucs-search_type");this.form.set("onsubmit",null);this.loadedAssist=false;this.init();};ucs.Search.prototype={isWebSearch:false,init:function(){this._setTabIndex();this.is2Button=(this.buttons.size()===2);if(document.compatMode!=="CSS1Compat"){document.getElementById("mnp-search_box").style.width="100%";document.getElementById("mnp-search_box").style.height="31px";document.getElementById("mnp-search_box").style.background="#eaf1f5";document.getElementById("yucs-nav_outer").style.top="13px";if(document.getElementById("yucs-menu_link_profile_signed_out")){document.getElementById("yucs-menu_link_profile_signed_out").style.backgroundPositionX="-2px";document.getElementById("yucs-menu_link_profile_signed_out").style.backgroundPositionY="-2636px";}document.getElementById("yucs-home_link").style.backgroundPositionY="-2911px";document.getElementById("yucs-mail_link_id").style.backgroundPositionY="-3041px";document.getElementById("yucs-mail_link_id").style.marginTop="10px";document.getElementById("yucs-profile").style.marginTop="10px";document.getElementById("yucs-profile_text").style.marginTop="5px";document.getElementById("yucs-profile").style.width="100px";if(document.getElementById("yucs-web_search_button_wrapper")){document.getElementById("yucs-web_search_button_wrapper").style.background="#eaf1f5";document.getElementById("yucs-sprop_button").style.background="#FCC42E";document.getElementById("yucs-prop_search_button_wrapper").style.width="0%";document.getElementById("yucs-web_search_button_wrapper").style.width="0%";}if(document.getElementById("yucs-search_button_wrapper")){document.getElementById("yucs-search_button_wrapper").style.background="#FCC42E";}}if((a.one("#yucs").getAttribute("data-property")==="finance")&&!this.is2Button){document.getElementById("mnp-search_box").name="s";}this.input=this.form.one("input");this.vertSearchBtn=this.form.one("#yucs-sprop_button");this.webSearchBtn=this.form.one("#yucs-search_button");this.searchToggleBtn=this.form.one("#yucs-search_toggle_button");this.searchHint=this.input.getAttribute("data-sh");this.yltvsearch=this.input.getAttribute("data-yltvsearch");this.yltvsearchsugg=this.input.getAttribute("data-yltvsearchsugg");this.isRTL=/ar|he/gi.test(a.one("#yucs").getAttribute("data-lang").split("-")[0]);this.leftWrapperWidth=this._calcLeftWrapperWidth();this.leftMinWidthSet=false;this.defaultWidth=parseInt(this.searchWrapper.getComputedStyle("width"),d);if(a.one(".yucs-one_button")){a.all(".yucs-search-buttons").pop().remove(true);}this.IEOffset=0;if(a.UA.ie>0&&a.UA.ie<=7){this._calcIEOffset();}if((a.one("#yucs")&&a.one("#yucs").getAttribute("data-linktarget"))){this.linkTarget=a.one("#yucs").getAttribute("data-linktarget");}else{this.linkTarget=this.form.getAttribute("target")||"_top";}this._setFormTarget();this._resizeSearchContainer();this._initEventListeners();this.form.removeClass("yucs-activate");if(document.activeElement!==this.input._node&&this.input.get(h)===""){this._resetSearchInput();}},_initEventListeners:function(){this.form.on(k,this._handleSubmit,this);a.on("windowresize",a.bind(this._resizeSearchContainer,this));this.input.on("focus",this._handleInputFocus,this);this.input.on("blur",this._handleInputBlur,this);this.input.on("keyup",this._handleInputKeyup,this);if(this.stype){this._initSearchTypeMenu();}var p=a.one("#yucs").getAttribute("data-property");if(p==="mail"||this.is2Button){if(this.vertSearchBtn){this.vertSearchBtn.on(m,this._handleVertSearch,this);}this.publish("ucs:webSearch",{broadcast:2,emitFacade:true});a.Global.on("ucs:webSearch",this._handleWebSearchEvent,this);a.Global.on("ucs:mailSearch",this._trackMailSearch,this);a.Global.on("ucs:mailSearchSugg",this._trackMailSearchSugg,this);}},_initSearchTypeMenu:function(){this.stype.one(".yucs-stype_prop").setData("yucs-stype","propsearch");this.stype.one(".yucs-stype_web").setData("yucs-stype","web");this.stype.delegate("click",function(v){var r=this.stype.one(".yucs-active"),q=this.stype.one(".yucs-inactive"),t,p,s,u;v.preventDefault();if(parseFloat(YUI.version,10)>3.1){q.toggleView();}else{if(q.getStyle("display")=="none"){q.setStyle("display","block");}else{q.setStyle("display","none");}}if(v.target.hasClass("yucs-active")||v.target.hasClass("yucs-inactive")){s=r.getData("yucs-stype");u=v.target.getData("yucs-stype");if(s!=u){t=r.get("text");p=v.target.get("text");r.set("text",p);r.setData("yucs-stype",u);q.set("text",t);q.setData("yucs-stype",s);}}},"span",this);this.stype.one(".yucs-active").on("focus",function(p){if(inactiveElm.getStyle("display")=="none"){this.stype.one(".yucs-inactive").show();}},this);this.stype.one(".yucs-inactive").on("blur",function(p){this.stype.one(".yucs-inactive").hide();},this);},_calcLeftWrapperWidth:function(){var p=a.all(".yucs-fl-left > div"),q=b;p.each(function(r){if(r.get("id")!=="yucs-search"){q+=r.get("offsetWidth")+parseInt(r.getStyle("marginLeft"),d)+parseInt(r.getStyle("marginRight"),d);}else{q+=parseInt(r.getStyle("marginLeft"),d)+parseInt(r.getStyle("marginRight"),d);}});return q;},_calcIEOffset:function(){var q=a.all(".yucs-search-buttons").pop(),p=q.intersect(this.searchWrapper);if(a.one("body").getAttribute("dir")==="rtl"){this.IEOffset=p.left-this.searchWrapper.getX();}else{this.IEOffset=this.searchWrapper.getX()+parseInt(this.searchWrapper.getComputedStyle("width"),d)-p.right;}this.defaultWidth+=this.IEOffset;},_resizeSearchContainer:function(){var q=(parseInt(a.one("#yucs").getStyle("minWidth"),d)+(2*b))||0,t=Math.max(a.DOM.winWidth(),q),p=parseInt(this.searchWrapper.getStyle("width"),d),s=parseInt(a.one(".yucs-fl-right").getComputedStyle("width"),d)+b,r=t-(this.leftWrapperWidth+s+j)+this.IEOffset;
if(!this.leftMinWidthSet&&t===q){a.one(".yucs-fl-left").setStyle("minWidth",r+this.leftWrapperWidth);this.leftMinWidthSet=true;}if(r>this.defaultWidth){if(p===this.defaultWidth){return;}else{r=this.defaultWidth;}}if(this.IEOffset>0&&this.isRTL){this.searchWrapper.setStyle("visibility","hidden");}this.searchWrapper.setStyle("width",r+"px");if(this.IEOffset>0&&this.isRTL){a.later(50,this,function(){this.searchWrapper.setStyle("visibility","visible");});}},_getInputValTrimmed:function(){var p=this.input.get(h);p=a.Lang.trim(p);return p;},_inputIsEmpty:function(){return this._getInputValTrimmed()==="";},_inputIsDefaultTerm:function(){return this._getInputValTrimmed()===this.searchHint;},_handleInputKeyup:function(p){if(p.keyCode==13){console.log("enter pressed");}if(!this._inputIsEmpty()&&!this._inputIsDefaultTerm()){this._setTabIndex();}},_setTabIndex:function(){var p=(a.UA.ie>0&&a.UA.ie<=7);this.buttons.each(function(q){var r=q.getAttribute(l);if((p&&r===0)||(p&&r===65535)||(r&&!(p&&r===32768))){q.setAttribute(l,0);}else{q.setAttribute(l,-1);}});},_setFormTarget:function(){if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){this.form.setAttribute(o,"searchWin");}else{this.form.setAttribute(o,this.linkTarget);}},_initAssist:function(){var p=this.input.getAttribute("data-satype");if(6===a.UA.ie||7===a.UA.ie){p="";}switch(p){case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node);break;default:break;}},_buildAssistConfig:function(p){var q={searchbox:p,clid:"uh-yui3",align:true,shim:1,nresults:5};q.node=c;if(p.getAttribute("data-pubid")){q.pubid=p.getAttribute("data-pubid");}if(p.getAttribute("data-gosurl")){q.url=p.getAttribute("data-gosurl");}return q;},_initMiniAssist:function(r){var q=this,p={miniassist:{fullpath:"http://l.yimg.com/kx/yucs/uh3/search/js/61/mini-assist.js",requires:["base","get","node","event-focus","plugin","array-extras"]},"miniassist-skin":{fullpath:"http://l.yimg.com/kx/yucs/uh3/search/css/84/assist-min.css",type:"css"},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201009101433.js",requires:["miniassist"]},"tray-shim-plugin":{fullpath:"http://l.yimg.com/a/lib/s7/tray-shim-plugin-201009101433.js",requires:["miniassist"]}};YUI({modules:p}).use("miniassist","miniassist-skin","tray-align-plugin","tray-shim-plugin","event-move",function(w){var s=new w.Node(r),t=q._buildAssistConfig(s);q.sa=new w.Search.MiniAssist(t);q.sa.gossip.set("scrollSize",10);q.sa.gossip.set("linkStem",w.one(c).getAttribute("data-vsearch"));q.sa.gossip.set("linkParams",{fr:w.one(c).getAttribute("data-vfr")});if(!q.is2Button){q.sa.gossip.set("hideEmptyTray",false);}if(w.one("#yucs").getAttribute("data-property")==="finance"){var v=w.one(t.node),z=v.getAttribute("data-vstext"),u=v.getAttribute("data-vert_fin_search");q.sa.assist.on(i,function(B){if(B.query){var A=w.one("#"+e),C=q.sa.buildSearchUrl(s,B.query,u,{fr:w.one("#fr").getAttribute("value")});if(w.one("#yucs").getAttribute("data-property")==="finance"){C=C.replace("?s=","?p=");}if(!A){if(document.getElementById("hspart")){C+="&hspart="+document.getElementById("hspart").value;}if(document.getElementById("hsimp")){C+="&hsimp="+document.getElementById("hsimp").value;}if(document.getElementById("yucs-hstype")){C+="&type="+document.getElementById("yucs-hstype").value;}A=w.Node.create("<ul id='"+e+"'><li><a href='"+C+"' text='"+B.query+"'>"+z+"<q>"+B.query+"</q></a></li></ul>");w.one(".sa-panel").append(A);}else{A.one("li").setContent("<a href='"+C+"' text='"+B.query+"'>"+z+" <q>"+B.query+"</q></a>");}}});}var v=w.one(t.node),y=v.getAttribute("data-wstext"),x=v.getAttribute("data-wsearch");q.sa.assist.on(i,function(B){if(B.query){var C=w.one("#"+f),A=q.sa.buildSearchUrl(s,B.query,x,{fr:w.one("#fr").getAttribute("value")});if(w.one("#yucs").getAttribute("data-property")==="finance"){A=A.replace("?s=","?p=");}if(!C){if(document.getElementById("hspart")){A+="&hspart="+document.getElementById("hspart").value;}if(document.getElementById("hsimp")){A+="&hsimp="+document.getElementById("hsimp").value;}if(document.getElementById("yucs-hstype")){A+="&type="+document.getElementById("yucs-hstype").value;}C=w.Node.create("<ul id='"+f+"'><li><a href='"+A+"' text='"+B.query+"'>"+y+"<q>"+B.query+"</q></a></li></ul>");w.one(".sa-panel").append(C);}else{C.one("li").setContent("<a href='"+A+"' text='"+B.query+"'>"+y+" <q>"+B.query+"</q></a>");}}});w.one(".yucs-search").on("submit",function(B){if(w.one("#"+f+" a.sa-active")){var A=w.one("#"+f+" a.sa-active").getAttribute("href");B.preventDefault();if(q.linkTarget==="_blank"||q.form.hasClass("yucs-search-fh")){window.open(A,"searchWin");}else{window.location.href=A;}}});w.on("gesturemovestart",function(A){var B=A.target&&A.target.ancestor&&A.target.ancestor(".sa-tray");if(q.sa.tray.isOpen&&!B){q.sa.tray.close();}},document,q);});},_initRichAssist:function(r){var q=this,p={richassist:{fullpath:"http://a.l.yimg.com/a/lib/s7/richassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201009101433.js",requires:["richassist"]},"tray-shim-plugin":{fullpath:"http://l.yimg.com/a/lib/s7/tray-shim-plugin-201009101433.js",requires:["richassist"]}};YUI({modules:p}).use("richassist","tray-align-plugin","tray-shim-plugin",function(u){var s=new u.Node(r),t=q._buildAssistConfig(s);q.sa=new u.Search.RichAssist(t);});},_setInputBlank:function(){this.input.set(h,"");},_handleSearchToggle:function(p){p.preventDefault();this._toggleSearch();},_toggleSearch:function(){var p=this,q=function(r){p._handleBodyClick(r);};a.one("#yucs").toggleClass("yucs-show_search");if(!this.bodyClick){if(a.UA.mobile&&("createTouch" in document)&&("addEventListener" in document.body)){a.log("using touchstart in mobile browser","info","search");document.body.addEventListener(n,q,false);this.bodyClick={detach:function(){if("removeEventListener" in document.body){document.body.removeEventListener(n,q,false);
}}};}else{this.bodyClick=a.one("body").on(m,this._handleBodyClick,this);}this.bodyScroll=a.on("scroll",function(r){this._toggleSearch();},this);}else{this.bodyClick.detach();this.bodyScroll.detach();this.bodyClick=this.bodyScroll=null;}},_handleBodyClick:function(r){var q=r&&r.target||null,p;if(!q){return;}p=typeof q.ancestor==="function"?q:a.one(q);if(p&&!p.ancestor("#yucs")){this._toggleSearch();}},_handleSubmit:function(q){if(this.form.one("#yucs-sky-term")){this.form.one("#yucs-sky-term").set(h,this._getInputValTrimmed());}if(this._inputIsDefaultTerm()){this._setInputBlank();}if(q&&q.target){this.isWebSearch=a.one(q.target).hasClass("yucs-wsearch-button");}if(document.getElementById("yuhead-att-cat")){if(this.form.getAttribute(o)!=="searchWin"){q.preventDefault();}var p=a.Node.create("<img />");p.once("load",this._handleImageLoad,this);p.once("error",this._handleImageLoad,this);this._timer=window.setTimeout(a.bind(this._handleImageLoad,this),2000);p.set("src","http://attadworks.turn.com/r/dd/id/L21rdC8xMDAvY2lkLzE1OTE3NzExL3QvMg/qry/"+encodeURIComponent(this._getInputValTrimmed()));}},_handleImageLoad:function(p){if(this._timer!==null){clearTimeout(this._timer);this._timer=null;}if(this.form.getAttribute(o)!=="searchWin"){this.form.submit();}},_handleInputFocus:function(p){if(this._inputIsDefaultTerm()){this._setInputBlank();}this.input.removeClass("yucs-search-hint-color");if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}},_handleInputBlur:function(p){if(this._inputIsEmpty()){this.input.set(h,this.searchHint);this.input.addClass("yucs-search-hint-color");}},_handleVertSearch:function(s){a.log("handleVertSearch");if(this.isWebSearch||a.one("#"+f+" a.sa-active")){this.isWebSearch=false;return;}s.preventDefault();var r=s.target.getAttribute("data-vsearch"),q="1button",p=this.yltvsearch;if(this.is2Button){q="2button";}if(r){if(a.one("#yucs").getAttribute("data-property")==="mail"){r+="?fr="+this.form.one("#fr").get(h)+"&p="+this.input.get(h);}else{if(a.one("#yucs").getAttribute("data-property")==="finance"){r+="?fr="+s.target.getAttribute("data-vfr")+"&type="+q+"&s="+this.input.get(h);}else{if(a.one("#yucs").getAttribute("data-property")==="groups"){r+="?query="+this.input.get(h);}else{r+="?fr="+s.target.getAttribute("data-vfr")+"&type="+q+"&p="+this.input.get(h);}}}if(p){if(p.charAt(0)==="/"){p=p.substring(1);}r+=p;}if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){window.open(r,"searchWin");}else{window.location.href=r;}}else{this._fireVertSearchEvent(s);}},_fireVertSearchEvent:function(q){var p=this.input.get(h);this.publish("ucs:verticalSearchAction",{broadcast:2,emitFacade:true});this.fire("ucs:verticalSearchAction",{"query":p});},_handleWebSearchEvent:function(p){if(p.query){this.input.set("value",p.query);}this.form.submit();},_fireInterfaceReady:function(){this.publish("ucs:uhSearchInterfaceReady",{broadcast:2,emitFacade:true});this.fire("ucs:uhSearchInterfaceReady");},_getSearchInput:function(){return this.input;},_resetSearchInput:function(){this.input.set(h,this.searchHint);this.input.addClass("yucs-search-hint-color");},_setSearchInput:function(p){this.input.set(h,p);},_getVertSearchBtnContent:function(){return this.vertSearchBtn.get(g);},_setVertSearchBtnContent:function(p){this.vertSearchBtn.set(g,(p["text"])?p["text"]:p);},_trackMailSearch:function(){a.log("Mail search");this._sendBeacon(this.yltvsearch);},_trackMailSearchSugg:function(){a.log("Mail search sugg");this._sendBeacon(this.yltvsearchsugg);},_trackPropSearch:function(){a.log("Prop Search");this._sendBeacon(this.yltvsearch);},_sendBeacon:function(p){if("https:"!==window.location.protocol){var q=a.Node.create("<img />");if(!p){a.log("No beacon data");return;}a.log("Beacon data: "+p);q.set("src","https://geo.yahoo.com/t"+p);}}};a.augment(ucs.Search,a.EventTarget);}},"1.0",{requires:["node","event","event-custom","event-resize","dom-screen"]});YUI().use("node","ucs-search",function(b){var a=b.all("#yucs-search");a.each(function(f,c,e){if(f.ancestor(".yucs-fl-left")){b.log("instantiating uh search component");ucs.UhSearchInterface=new ucs.Search(f);ucs.UhSearchInterface.getInput=function(){return ucs.UhSearchInterface._getSearchInput();};ucs.UhSearchInterface.setInput=function(g){ucs.UhSearchInterface._setSearchInput(g);};ucs.UhSearchInterface.resetInput=function(){ucs.UhSearchInterface._resetSearchInput();};ucs.UhSearchInterface.getVertSearchBtnText=function(){return ucs.UhSearchInterface._getVertSearchBtnContent();};ucs.UhSearchInterface.setVertSearchBtnText=function(g){ucs.UhSearchInterface._setVertSearchBtnContent(g);};ucs.UhSearchInterface._fireInterfaceReady();}else{b.log("instantiating search components");var d=new ucs.Search(f);}});});YUI.add("ucs-profile-menu",function(d){var e="ucs:profileMenuShow",b="ucs:menuNavShow",a=d.Lang.trimRight,c;d.namespace("ucs.ProfileMenu");d.ucs.ProfileMenu=function(f){this.profile=f;this.name=this.profile.one(".yuhead-name");this.optimizedNameCache={};this.origName=this.name.get("text");this.menuId=this.profile.getAttribute("id");this.init();};d.ucs.ProfileMenu.prototype={init:function(){this.publishEvents();this.initEventHandlers();this.optimizeNameLength();},optimizeNameLength:function(){var g,h,f,i,k;h=this.optimizedNameCache[this.name.getStyle("maxWidth")];if(h){this.name.set("innerHTML",h);return;}this.name.setStyle("visibility","hidden");if(!c){this.name.set("text",this.origName.substring(0,1));c=this.name.get("scrollHeight");}this.name.set("text",this.origName);try{while(this.name.get("scrollHeight")>(c*2)){g=g||this.name.get("text");if(!g){break;}g=a(g.substring(0,g.length-2));this.name.set("text",g);}if(g){i=g.length;g=a(g);k=i-g.length>0?1:0;f=g.length-(2-k);g=a(g.substring(0,f))+"&hellip;";this.name.set("innerHTML",g);}}catch(j){this.name.set("text",this.origName);}this.optimizedNameCache[this.name.getStyle("maxWidth")]=g||this.origName;this.name.setStyle("visibility","visible");},publishEvents:function(){d.augment(d.ucs.ProfileMenu,d.EventTarget,null,null,{});this.publish(e,{broadcast:2,emitFacade:true});},initEventHandlers:function(){var f=this;d.Global.on(b,this.handleMenuNavShow,this);d.on("windowresize",function(g){f.optimizeNameLength();});},handleMenuNavShow:function(f){if(f&&f.menuid===this.menuId){if(d.UA.ie===8){this.profile.one("#yucs-profile-cont").setStyle("maxHeight","100%");}this.fire(e);}}};},"1.0",{requires:["node","event","event-custom","event-resize"]});(function(){var b=document.getElementById("yucs"),a=typeof window.Y!=="undefined"&&(b&&b.getAttribute("data-property")==="srp")?window.Y:YUI();a.use("ucs-profile-menu",function(e){var d=a.one("#yucs-profile"),c;if(d){c=new e.ucs.ProfileMenu(d);}});}());YUI.add("jsonp-super-cached",function(B){B.namespace("jsonpsupercached");if(!YUI.Env.JsonpSuperCached){YUI.Env.JsonpSuperCached={};}if(!YUI.Env.JsonpSuperCached.services){YUI.Env.JsonpSuperCached.services={};}var A=YUI.Env.JsonpSuperCached.services;B.jsonpsupercached.getData=function(F){var C={};var D=F.url||"";var J=F.serviceName||"service";var M=F.callbackName||"callback";var I=F.broadcast||false;var J="_"+J+"_"+M;var G=F.onSuccess||function(){};C.timeout=F.timeout;C.onTimeout=F.onTimeout||null;C.onFailure=F.onFailure||null;var L=(D.indexOf("?")===-1)?"?":"&";var H=D+L+M+"=YUI.Env.JsonpSuperCached."+J;var K=F.args||[];var E=F.context||null;B.jsonpsupercached.get=YUI.Env.JsonpSuperCached.get||B.Get;if(!A[H]){A[H]={dataAvailable:false,requestInProgress:false,callbacksQueue:[]};}var N=A[H];if(N.dataAvailable){G(N.data);}else{N.callbacksQueue.push(G);if(!N.requestInProgress){YUI.Env.JsonpSuperCached[J]=function(R){N.data=R;N.dataAvailable=true;scbs=N.callbacksQueue;for(var Q=0,O=scbs.length;Q<O;Q++){var P=scbs.pop();P.apply(E,[R].concat(K));}};N.requestInProgress=true;B.jsonpsupercached.get.script(H,C);}}};},"0.0.1");YUI.add("ucs-avatar",function(b){var a="http://l.yimg.com/dh/ap/social/profile/profile_b32.png";if(b.UA.secure){a="https://s.yimg.com/dh/ap/social/profile/profile_b32.png";}b.namespace("ucs");b.ucs.Avatar=function(c){this.container=c;this.crumb=this.container.getAttribute("data-crumb");this.guid=this.container.getAttribute("data-guid");this.profile=this.container.getAttribute("data-prof");this.username=this.container.getAttribute("data-user");this.init();};b.ucs.Avatar.prototype={init:function(){this.container.removeClass("yucs-av-activate");this.img=b.Node.create('<img width="28" height="28" alt="'+this.username+" "+this.profile+'">');this._fetchData();},_fetchData:function(){var c='select imageUrl from social.profile.image where guid = "'+this.guid+'" and size="32x32";',d=((b.UA.secure)?("https://"):("http://"))+"ucs.query.yahoo.com/v1/console/yql?"+b.QueryString.stringify({q:c,format:"json",crumb:this.crumb,_maxage:900});b.jsonpsupercached.getData({url:d,serviceName:"avatar",onSuccess:b.bind(this._buildMarkup,this)});},_buildMarkup:function(d){var c;if(!d.query||!d.query.results||d.query.results==="0"||!d.query.results.image||d.query.results.image.imageUrl.match(/profile_/)){c=a;}else{c=d.query.results.image.imageUrl;if(b.UA.secure){c=c.replace(/http/,"https");}}this.img.on("load",function(f){this.img.addClass("yucs-avatar");this.container.setContent(this.img);},this);this.img.setAttribute("src",c);}};},"1.0",{requires:["node","event","jsonp-super-cached","querystring-stringify"]});(function(){var b=document.getElementById("yucs"),a=(b&&b.getAttribute("data-property")==="srp")?Y:YUI();a.use("node","ucs-avatar",function(e){var d=e.one("#yucs").one("span.yucs-avatar.yucs-av-activate"),c;if(d){c=new e.ucs.Avatar(d);}});})();YUI.add("ucs-helpmenu",function(d){d.namespace("ucs.HelpMenu");var v="ucs:helpMenuShow",g="ucs:helpDebugMenuShow",n="ucs:helpMenuItemClick",m="ucs:helpDebugMenuItemClick",t="yucs-help_button",a="ucs:utilityMenuShow",r="ucs:utilityMenuItemClick",z="yucs-hide",j="yui3-menu-hidden";var q='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",y='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",p='<span class="yucs-separator" role="presentation"></span>',i="click",l="mouseover",w="focus",u="a",k="role",c="tabIndex",h="yucs-hide",b="iframe",o="ul",e="li",s="parentNode",x="http://l.yimg.com/a/lib/ush/icon.gif",f="https://s.yimg.com/lq/lib/ush/icon.gif";d.ucs.HelpMenu=function(A){this.menu=A;this.shown=false;this.helpLink=d.one("#"+t);this.helpLink.setAttribute("data-mad","true");this._initCustomEvents();A.removeClass("yucs-hm-activate");};d.ucs.HelpMenu.prototype={_initCustomEvents:function(){this.publish(v,{broadcast:2,emitFacade:true});this.publish(g,{broadcast:2,emitFacade:true});this.publish(n,{broadcast:2,emitFacade:true});this.publish(m,{broadcast:2,emitFacade:true});this.publish(a,{broadcast:2,emitFacade:true});this.publish(r,{broadcast:2,emitFacade:true});d.Global.on("ucs:utilityMenuItems",this._handleHelpMenuItems,this,{"location":"top","menuType":"minty-utility-item"});d.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this,{"location":"bottom","menuType":"minty-help-item"});d.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this,{"location":"bottom","menuType":"minty-debug-item"});this.helpLink.on([i,l,w],this._toggleHelpMenu,this);this.menu.delegate(i,this._handleMenuItemClick,"li a",this);if(d.one("#yucs-help_button").hasClass("yui3-menu-label-active")){this._showMenu();}},_toggleHelpMenu:function(A){this._showMenu(A);},_showMenu:function(A){this.menu.all("li").addClass("yucs-hide");if(A&&(A.ctrlKey||A.metaKey)&&A.shiftKey){this.fire(g);if(this.shown===false){d.later(4000,this,function(){this.fire(g);});}else{this._showDebugMenuItems();}}else{this.fire(v);this.fire(a);if(this.shown===false){d.later(4000,this,function(){this.fire(v);this.fire(a);});}else{this._showMenuItems();}}},_showDebugMenuItems:function(){this.shown=true;this.menu.all("li").addClass("yucs-hide");this.menu.all("span.minty-item").setStyle("display","none");this.menu.all("li.debug-item").removeClass("yucs-hide");this.menu.all("span.debug-item").setStyle("display","block");},_showMenuItems:function(){this.shown=true;this.menu.all("li").removeClass("yucs-hide");this.menu.all("span.minty-item").setStyle("display","block");this.menu.all("li.debug-item").addClass("yucs-hide");this.menu.all("span.debug-item").setStyle("display","none");},_handleHelpMenuItems:function(F,E){var B=E&&E.location||"top",D=E&&E.menuType||"minty-help-item",C,A;if(!F.menuGroups||!F.menuGroups.length){return;}C=F.menuGroups;A=this.menu.one(o);if(F.reset&&A){A.all("."+D).remove(true);}this._addMenuGroups(C,B,false,D);this._showMenuItems();},_handleHelpDebugMenuItems:function(B){var A;if(!B.menuGroups||!B.menuGroups.length){return;}A=B.menuGroups;itemList=this.menu.one(o);if(B.reset&&itemList){itemList.all(".minty-debug-item").remove(true);}this._addMenuGroups(A,"top",true,"minty-debug-item");this._showDebugMenuItems();},_handleMenuItemClick:function(G){var F,C,A,B;F=G.target;F=F.ancestor("a",true);C=F.getAttribute("data-mad");A=F.getAttribute("data-customevt");B=F.ancestor("li").hasClass("disabled");if(B){G.halt();return;}if(A){G.preventDefault();}if(!B){var E={actionData:C};var D=F.ancestor("li");if(D.hasClass("debug-item")){this.fire(m,E);}else{if(D.hasClass("minty-utility-item")){this.fire(r,E);}else{this.fire(n,E);}}}this.menu.addClass("yui3-menu-hidden");d.one("#yucs-help_button").removeClass("yui3-menu-label-menuvisible");},_addMenuGroups:function(D,J,H,I){var F=this.menu.one(o),A="",B,E=D.length,C,G;B=F.hasChildNodes();for(C=0;C<E;C++){G=D[C].length;if(J==="bottom"){if(C>0){D[C][0].separatorTop=true;}}else{if(C<(E-1)||B){D[C][G-1].separatorBottom=true;}}A+=this._addMenuGroup(D[C],H,I);}if(F.ancestor("div.yucs-yql_loading")){F.ancestor("div.yucs-yql_loading").removeClass("yucs-yql_loading");}if(J==="bottom"){F.append(A);}else{F.prepend(A);}},_addMenuGroup:function(B,E,D){var F="",A=B.length,C;for(C=0;C<A;C++){if(E){B[C].isDebugItem=true;B[C].menuClass=D+" debug-item";}else{B[C].isDebugItem=false;B[C].menuClass=D+" minty-item";}F+=this._addMenuItem(B[C],D);}return F;},_addMenuItem:function(C,B){var A="";if(C.isActive){C.checkedAria='aria-checked="true"';}else{C.checkedAria="";}if(C.isDisabled){C.disabledAria='aria-disabled="true"';}else{C.disabledAria="";}switch(C.actionType){case"link":A=d.substitute(q,C,this._processTemplateValue);break;case"customEvent":A=d.substitute(y,C,this._processTemplateValue);break;default:break;}if(A){if(C.isDebugItem){A=A.replace(/separator/,"separator debug-item "+B);}else{A=A.replace(/separator/,"separator minty-item "+B);}}return A;},_processTemplateValue:function(B,C,D){var E="";var A=(document.location.protocol==="https:")?f:x;switch(B){case"icon":if(C!==undefined){if(C==="available"){E='<img src="'+A+'" class="yucs-opi available"/>';}else{if(C==="offline"){E='<img src="'+A+'" class="yucs-opi offline"/>';}else{if(C==="invisible"){E='<img src="'+A+'" class="yucs-opi invisible"/>';}else{if(C==="busy"){E='<img src="'+A+'" class="yucs-opi busy"/>';}else{if(C==="idle"){E='<img src="'+A+'" class="yucs-opi idle"/>';}else{E='<img src="'+C+'" />';}}}}}}break;case"separatorTop":if(C){E=p;}break;case"separatorBottom":if(C){E=p;}break;case"actionData":if(C){E='data-mad="'+C+'"';}break;case"isDisabled":if(C){E="disabled";}break;case"isActive":if(C){E="sp active";}break;case"checkedAria":E=C;break;default:E=C;break;
}return E;}};d.augment(d.ucs.HelpMenu,d.EventTarget);},"1.0",{requires:["oop","node","event-custom","substitute"]});(function(){var b=document.getElementById("yucs"),a=(b&&b.getAttribute("data-property")==="srp")&&typeof window.Y!=="undefined"?window.Y:YUI();a.use("node","ucs-helpmenu",function(e){var d=e.one("#yucs").all(".yucs-hm-activate"),c;d.each(function(f){c=new e.ucs.HelpMenu(f);});});})();YUI.add("ucs-logodebug",function(a){a.namespace("ucs");a.ucs.LogoDebug=function(b){b.on("click",this._handleClick,this);this.publish("ucs:logoDebug",{broadcast:2,emitFacade:true});};a.ucs.LogoDebug.prototype={_handleClick:function(b){if(b.altKey){b.halt();this.fire("ucs:logoDebug");}}};a.augment(a.ucs.LogoDebug,a.EventTarget);},"1.0",{requires:["node"]});(function(){var b=document.getElementById("yucs"),a=(b&&b.getAttribute("data-property")==="srp")?Y:YUI();a.use("node","ucs-logodebug",function(e){var d=e.one("#yucs-logo_link");if(d){var c=new e.ucs.LogoDebug(d);}});})();YUI.add("ucs-usermenu",function(c){c.namespace("ucs.UserMenu");var n="ucs:userMenuShow",k="ucs:userMenuItemClick",s="yucs-hide",h="yui3-menu-hidden";var m='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",r='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",l='<span class="yucs-separator" role="presentation"></span>',g="click",p="a",i="role",a="tabIndex",f="yucs-hide",b="iframe",j="ul",d="li",o="parentNode",q="http://l.yimg.com/a/lib/ush/icon.gif",e="https://s.yimg.com/lq/lib/ush/icon.gif";c.ucs.UserMenu=function(t){this.menu=t;this._initCustomEvents();};c.ucs.UserMenu.prototype={_initCustomEvents:function(){this.publish(n,{broadcast:2,emitFacade:true});this.publish(k,{broadcast:2,emitFacade:true});c.Global.on("ucs:profileMenuShow",this._showMenu,this);c.Global.on("ucs:userMenuItems",this._handleUserMenuItems,this,{"location":"bottom","menuType":"minty-um-item"});this.menu.delegate(g,this._handleMenuItemClick,"li.minty-um-item a",this);},_showMenu:function(t){this.fire(n);this._showMenuItems();},_showMenuItems:function(){this.menu.all("li").removeClass("yucs-hide");this.menu.all("span.separator").setStyle("display","block");},_handleUserMenuItems:function(y,x){c.log("user menu items received");var u="bottom",w="minty-user-item";if(!y.menuGroups||!y.menuGroups.length){return;}if(x&&x.location){u=x.location;}if(x&&x.menuType){w=x.menuType;}var v=y.menuGroups,t=this.menu.one(j);if(y.reset&&t){t.all("."+w).each(function(z){z.remove(true);});}if(v.length>0){this._addMenuGroups(v,u,false,w);}},_handleMenuItemClick:function(y){c.log("user menu item click");var x,v,t,u;x=y.target;x=x.ancestor("a",true);v=x.getAttribute("data-mad");t=x.getAttribute("data-customevt");u=x.ancestor("li").hasClass("disabled");if(u){y.halt();return;}if(t){y.preventDefault();}if(!u){var w={actionData:v};this.fire(k,w);}},_hideMenu:function(){},_addMenuGroups:function(w,C,A,B){var y=this.menu.one(j),u,t="";u=(y.get("children")._nodes.length)?true:false;for(var v=0,x=w.length;v<x;v++){var z=w[v].length;if(C==="bottom"){w[v][0].separatorTop=true;}else{if(v<(x-1)||u){w[v][z-1].separatorBottom=true;}}t+=this._addMenuGroup(w[v],A,B);}if(C==="bottom"){y.append(t);}else{y.prepend(t);}y.setStyle("width",(y.get("offsetWidth")+10)+"px");},_addMenuGroup:function(u,x,w){var y="";for(var v=0,t=u.length;v<t;v++){if(u[v].actionData==="themes"){continue;}if(x){u[v].isDebugItem=true;u[v].menuClass=w+" debug-item";}else{u[v].isDebugItem=false;u[v].menuClass=w+" minty-item";}y+=this._addMenuItem(u[v],w);}return y;},_addMenuItem:function(v,u){var t="";if(v.isActive){v.checkedAria='aria-checked="true"';}else{v.checkedAria="";}if(v.isDisabled){v.disabledAria='aria-disabled="true"';}else{v.disabledAria="";}if(v.actionData&&v.actionData.match(/^om:/)){return t;}switch(v.actionType){case"link":t=c.substitute(m,v,this._processTemplateValue);break;case"customEvent":t=c.substitute(r,v,this._processTemplateValue);break;default:break;}if(t){if(v.isDebugItem){t=t.replace(/separator/,"separator debug-item "+u);}else{t=t.replace(/separator/,"separator minty-item "+u);}}return t;},_processTemplateValue:function(u,v,w){c.log("key = "+u+" value = "+v+" meta_data = "+w);var x="";var t=(document.location.protocol==="https:")?e:q;switch(u){case"icon":if(v!==undefined){if(v==="available"){x='<img src="'+t+'" class="yucs-opi available"/>';}else{if(v==="offline"){x='<img src="'+t+'" class="yucs-opi offline"/>';}else{if(v==="invisible"){x='<img src="'+t+'" class="yucs-opi invisible"/>';}else{if(v==="busy"){x='<img src="'+t+'" class="yucs-opi busy"/>';}else{if(v==="idle"){x='<img src="'+t+'" class="yucs-opi idle"/>';}else{x='<img src="'+v+'" />';}}}}}}break;case"separatorTop":if(v){x=l;}break;case"separatorBottom":if(v){x=l;}break;case"actionData":if(v){x='data-mad="'+v+'"';}break;case"isDisabled":if(v){x="disabled";}break;case"isActive":if(v){x="sp active";}break;case"checkedAria":x=v;break;default:x=v;break;}return x;}};c.augment(c.ucs.UserMenu,c.EventTarget);},"1.0",{requires:["oop","node","event-custom","substitute"]});(function(){var b=document.getElementById("yucs"),a=typeof window.Y!=="undefined"&&(b&&b.getAttribute("data-property")==="srp")?window.Y:YUI();a.use("node","ucs-usermenu",function(e){var c=a.one("#yucs-profile_inner"),d;if(c){d=new e.ucs.UserMenu(c);}});})();/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("substitute",function(e,t){var n=e.Lang,r="dump",i=" ",s="{",o="}",u=/(~-(\d+)-~)/g,a=/\{LBRACE\}/g,f=/\{RBRACE\}/g,l=function(t,l,c,h){var p,d,v,m,g,y,b=[],w,E,S=t.length;for(;;){p=t.lastIndexOf(s,S);if(p<0)break;d=t.indexOf(o,p);if(p+1>=d)break;w=t.substring(p+1,d),m=w,y=null,v=m.indexOf(i),v>-1&&(y=m.substring(v+1),m=m.substring(0,v)),g=l[m],c&&(g=c(m,g,y)),n.isObject(g)?e.dump?n.isArray(g)?g=e.dump(g,parseInt(y,10)):(y=y||"",E=y.indexOf(r),E>-1&&(y=y.substring(4)),g.toString===Object.prototype.toString||E>-1?g=e.dump(g,parseInt(y,10)):g=g.toString()):g=g.toString():n.isUndefined(g)&&(g="~-"+b.length+"-~",b.push(w)),t=t.substring(0,p)+g+t.substring(d+1),h||(S=p-1)}return t.replace(u,function(e,t,n){return s+b[parseInt(n,10)]+o}).replace(a,s).replace(f,o)};e.substitute=l,n.substitute=l},"3.7.2",{requires:["yui-base"],optional:["dump"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("node-focusmanager",function(e,t){var n="activeDescendant",r="id",i="disabled",s="tabIndex",o="focused",u="focusClass",a="circular",f="UI",l="key",c=n+"Change",h="host",p={37:!0,38:!0,39:!0,40:!0},d={a:!0,button:!0,input:!0,object:!0},v=e.Lang,m=e.UA,g=function(){g.superclass.constructor.apply(this,arguments)};g.ATTRS={focused:{value:!1,readOnly:!0},descendants:{getter:function(e){return this.get(h).all(e)}},activeDescendant:{setter:function(t){var n=v.isNumber,i=e.Attribute.INVALID_VALUE,s=this._descendantsMap,o=this._descendants,u,a,f;return n(t)?(u=t,a=u):t instanceof e.Node&&s?(u=s[t.get(r)],n(u)?a=u:a=i):a=i,o&&(f=o.item(u),f&&f.get("disabled")&&(a=i)),a}},keys:{value:{next:null,previous:null}},focusClass:{},circular:{value:!0}},e.extend(g,e.Plugin.Base,{_stopped:!0,_descendants:null,_descendantsMap:null,_focusedNode:null,_lastNodeIndex:0,_eventHandlers:null,_initDescendants:function(){var t=this.get("descendants"),o={},u=-1,a,f=this.get(n),l,c,h=0;v.isUndefined(f)&&(f=-1);if(t){a=t.size();for(h=0;h<a;h++)l=t.item(h),u===-1&&!l.get(i)&&(u=h),f<0&&parseInt(l.getAttribute(s,2),10)===0&&(f=h),l&&l.set(s,-1),c=l.get(r),c||(c=e.guid(),l.set(r,c)),o[c]=h;f<0&&(f=0),l=t.item(f);if(!l||l.get(i))l=t.item(u),f=u;this._lastNodeIndex=a-1,this._descendants=t,this._descendantsMap=o,this.set(n,f),l&&l.set(s,0)}},_isDescendant:function(e){return e.get(r)in this._descendantsMap},_removeFocusClass:function(){var e=this._focusedNode,t=this.get(u),n;t&&(n=v.isString(t)?t:t.className),e&&n&&e.removeClass(n)},_detachKeyHandler:function(){var e=this._prevKeyHandler,t=this._nextKeyHandler;e&&e.detach(),t&&t.detach()},_preventScroll:function(e){p[e.keyCode]&&this._isDescendant(e.target)&&e.preventDefault()},_fireClick:function(e){var t=e.target,n=t.get("nodeName").toLowerCase();e.keyCode===13&&(!d[n]||n==="a"&&!t.getAttribute("href"))&&t.simulate("click")},_attachKeyHandler:function(){this._detachKeyHandler();var t=this.get("keys.next"),n=this.get("keys.previous"),r=this.get(h),i=this._eventHandlers;n&&(this._prevKeyHandler=e.on(l,e.bind(this._focusPrevious,this),r,n)),t&&(this._nextKeyHandler=e.on(l,e.bind(this._focusNext,this),r,t)),m.opera&&i.push(r.on("keypress",this._preventScroll,this)),m.opera||i.push(r.on("keypress",this._fireClick,this))},_detachEventHandlers:function(){this._detachKeyHandler();var t=this._eventHandlers;t&&(e.Array.each(t,function(e){e.detach()}),this._eventHandlers=null)},_attachEventHandlers:function(){var t=this._descendants,n,r,i;t&&t.size()&&(n=this._eventHandlers||[],r=this.get(h).get("ownerDocument"),n.length===0&&(n.push(r.on("focus",this._onDocFocus,this)),n.push(r.on("mousedown",this._onDocMouseDown,this)),n.push(this.after("keysChange",this._attachKeyHandler)),n.push(this.after("descendantsChange",this._initDescendants)),n.push(this.after(c,this._afterActiveDescendantChange)),i=this.after("focusedChange",e.bind(function(e){e.newVal&&(this._attachKeyHandler(),i.detach())},this)),n.push(i)),this._eventHandlers=n)},_onDocMouseDown:function(e){var t=this.get(h),n=e.target,r=t.contains(n),i,s=function(e){var n=!1;return e.compareTo(t)||(n=this._isDescendant(e)?e:s.call(this,e.get("parentNode"))),n};r&&(i=s.call(this,n),i?n=i:!i&&this.get(o)&&(this._set(o,!1),this._onDocFocus(e))),r&&this._isDescendant(n)?this.focus(n):m.webkit&&this.get(o)&&(!r||r&&!this._isDescendant(n))&&(this._set(o,!1),this._onDocFocus(e))},_onDocFocus:function(e){var t=this._focusTarget||e.target,n=this.get(o),r=this.get(u),i=this._focusedNode,s;this._focusTarget&&(this._focusTarget=null),this.get(h).contains(t)?(s=this._isDescendant(t),!n&&s?n=!0:n&&!s&&(n=!1)):n=!1,r&&(i&&(!i.compareTo(t)||!n)&&this._removeFocusClass(),s&&n&&(r.fn?(t=r.fn(t),t.addClass(r.className)):t.addClass(r),this._focusedNode=t)),this._set(o,n)},_focusNext:function(e,t){var r=t||this.get(n),i;this._isDescendant(e.target)&&r<=this._lastNodeIndex&&(r+=1,r===this._lastNodeIndex+1&&this.get(a)&&(r=0),i=this._descendants.item(r),i&&(i.get("disabled")?this._focusNext(e,r):this.focus(r))),this._preventScroll(e)},_focusPrevious:function(e,t){var r=t||this.get(n),i;this._isDescendant(e.target)&&r>=0&&(r-=1,r===-1&&this.get(a)&&(r=this._lastNodeIndex),i=this._descendants.item(r),i&&(i.get("disabled")?this._focusPrevious(e,r):this.focus(r))),this._preventScroll(e)},_afterActiveDescendantChange:function(e){var t=this._descendants.item(e.prevVal);t&&t.set(s,-1),t=this._descendants.item(e.newVal),t&&t.set(s,0)},initializer:function(e){this.start()},destructor:function(){this.stop(),this.get(h).focusManager=null},focus:function(e){v.isUndefined(e)&&(e=this.get(n)),this.set(n,e,{src:f});var t=this._descendants.item(this.get(n));t&&(t.focus(),m.opera&&t.get("nodeName").toLowerCase()==="button"&&(this._focusTarget=t))},blur:function(){var e;this.get(o)&&(e=this._descendants.item(this.get(n)),e&&(e.blur(),this._removeFocusClass()),this._set(o,!1,{src:f}))},start:function(){this._stopped&&(this._initDescendants(),this._attachEventHandlers(),this._stopped=!1)},stop:function(){this._stopped||(this._detachEventHandlers(),this._descendants=null,this._focusedNode=null,this._lastNodeIndex=0,this._stopped=!0)},refresh:function(){this._initDescendants(),this._eventHandlers||this._attachEventHandlers()}}),g.NAME="nodeFocusManager",g.NS="focusManager",e.namespace("Plugin"),e.Plugin.NodeFocusManager=g},"3.7.2",{requires:["attribute","node","plugin","node-event-simulate","event-key","event-focus"]});
YUI.add("mail-common-precache-unread",function(C){C.namespace("mail.ui");var A=C.mail,E=A.ui.MessageList,D=A.model.DataStore.Messages,B="UnreadCG";C.common.Utils.rocketstats.stat("MsgCache","PreCacheAlgorithm:"+B);NeoConfig.preCacheAlgorithm=B;E.getNeighbors=function(J,P,V,H,O){if(!(J&&J.length&&P>=-1&&P<=J.length-1)){return;}var U=J[P],N=U?D.isCached(H,U.mid):false,R=O||((NeoConfig.prefetchMsgsCheckMail==1)?4:(N?4:2)),F=[],L=[],T=[],Q=1,I=0,G=0,M=O||2,K=1;if((NeoConfig.prefetchMsgsCheckMail==0)&&!N){C.common.Utils.rocketstats.stat("MsgCache","ExtraMsgPrefetchCount_2");}function S(W){var X;if((X=J[W])&&!D.isCached(H,X.mid)){if(X&&X.flags&&X.flags.isRead==0){F.push(X);}else{L.push(X);}return 1;}return 0;}while(Q){if(G<M&&!S(P-K)){G++;}if(I<M&&!S(P+K)){I++;}Q=((F.length+L.length)<R)&&!(G==M&&I==M);K++;if(K>100){break;}}T=F.concat(L);T=T.splice(0,T.length>=R?R:T.length);for(K=0;K<T.length;K++){V.push(T[K]);}};},"1.0.0",{requires:["mail-ui-messagelist-base"]});YUI.add("contacts-ui-contactsevents",function(B){B.namespace("contacts.ui");var A=function(){var E=this,D=[{name:"contacts:api:contactChanged",showContactsTab:false,contactsView:null},{name:"ct:add_contact",showContactsTab:true,contactsView:"create_update_contact"},{name:"ct:view_contact",showContactsTab:true,contactsView:"view_contact"},{name:"ct:manage_updates",showContactsTab:true,contactsView:"manage_updates"},{name:"ct:import_contacts",showContactsTab:true,contactsView:"contact_import_landing"},{name:"ct:view_connections",showContactsTab:true,contactsView:"view_connections"},{name:"themes:change",showContactsTab:false,contactsView:null}],C=[{name:"contacts:contactChanged"},{name:"newMessage"},{name:"iframe:loaded"},{name:"contacts:sendSms"},{name:"contacts:sendIM"},{name:"contacts:shortcut"}];B.mix(E,{eventsFromSab:C,eventsToSab:D});};B.contacts.ui.contactsEvents=new A();},"1.0.0");YUI.add("contacts-ui-contactsview",function(A){var B=function(E){var H=this,G,K=null,F,C="",I=E||{};H.contactsTabNode=null;function D(M){G=A.one(M);G.setContent(F);H.contactsTabNode=A.one("#abIframeTab");}function J(M){I=M||{};L();}function L(){var O,N,M,R,Q;var P=NeoConfig.theme?NeoConfig.theme.id:"";if(I){M=I.vpc?"&VPC="+I.vpc:"";R=I.params?"&id="+I.params:"";}if(NeoConfig.mintyAB){if(P){Q=(!NeoConfig.theme.build||NeoConfig.theme.build==="")?"dev":NeoConfig.theme.build;Q=Q.replace("_","");C+="/yab-fe/mu/MainView?.src=neo&themeName="+P+"&bn="+Q+"&s="+(NeoConfig.isFullSSL?1:0);}else{C+="/yab-fe/mu/MainView?.src=neo";}C+=R;}else{C="/yab-fe/?.src=neo"+M+R;}C+="&isFresh="+NeoConfig.isFresh+"&bucketId="+NeoConfig.expBucketId;if(window.location.href.search(".lang=")!==-1){C+="&.lang="+NeoConfig.lang;}C+="&stab="+(new Date()).getTime();F='<div class="content" style="width:100%;height:100%;position:relative;overflow:hidden">'+'<iframe  target="_blank" frameborder="0" vspace="0" hspace="0" style="background-color: white; width: 100%; height: 100%; " id="abIframeTab" src="'+C+'"/>'+"</div>";}L();B.superclass.constructor.call(H);A.mix(H,{NAME:"ContactsView",render:D,contactsTab:K,updateConfig:J},true);H.set("hideToolbar",1);H.set("hideNavbar",1);};A.extend(B,A.mail.ui.BaseWidget);A.namespace("contacts.ui");A.contacts.ui.ContactsView=null;A.contacts.ui.getContactsViewInstance=function(C){if(A.contacts.ui.ContactsView){return A.contacts.ui.ContactsView;}else{A.contacts.ui.ContactsView=new B(C);return A.contacts.ui.ContactsView;}};},"1.0.0",{requires:["mail-ui-basewidget","node-event-simulate"]});YUI.add("contacts-ui-contactseventstranslator",function(B){B.namespace("contacts.ui");var A=function(){var I=this;B.augment(I,B.EventTarget);function G(K,L){var J=K.contactsView,M,N=null;if(K.contactsView){if(L&&L.args&&L.args.ids){M=L.args.ids.join(",");}N={vpc:K.contactsView,params:M};}return N;}function E(J,K){if(B.contacts.ui.ContactsView&&B.contacts.ui.ContactsView.contactsTab){if(J.showContactsTab){if(B.contacts.ui.ContactsView.contactsTab.get("active")!==1){B.contacts.ui.ContactsView.contactsTab.set("active",1);}}}else{if(J.showContactsTab){B.fire("openContacts",G(J,K));}}}function F(J){B.Global.on(J.name,function(K){B.fire(J.name,K);});}function C(J){B.on(J.name,function(K){if(B.contacts.ui.ContactsView&&B.contacts.ui.ContactsView.contactsTab){if(K){B.mix(K,{type:J.name});}else{K={type:J.name};}if(NeoConfig.mintyAB){B.one("#abIframeTab").fire(J.name,K);}else{B.Global.fire(J.name,K);}}E(J,K);});}function H(){var J,K;J=B.contacts.ui.contactsEvents.eventsToSab;for(K in J){if(J.hasOwnProperty(K)){C(J[K]);}}J=B.contacts.ui.contactsEvents.eventsFromSab;for(K in J){if(J.hasOwnProperty(K)){F(J[K]);}}}function D(K){var J=B.contacts.ui.ContactsView,L=J?J.contactsTabNode:null;if(L){L.simulate("keydown",K.event);}}B.on("contacts:shortcut",D);H();};B.contacts.ui.contactsEventTranslator=new A();},"1.0.0",{requires:["contacts-ui-contactsevents","contacts-ui-contactsview"]});YUI.add("comms-ui-dialog-base",function(G){var E=G.Node,C=E.one,F,D;function A(H){var I=H.get("id");if(!I){I=G.stamp(H);H.set("id",I);}return I;}function B(Q){Q=Q||{};Q.visible=Q.visible||0;Q.zIndex=Q.zIndex||4000;var P=this,T=Q.contentBox||null,U=Q.template||null,J=Q.cssPrefix||null,H=Q.focusedNode||null,L=Q.clearMask||false,S=Q.hideMask||false,R=Q.restoreFocusNode,I=Q.suppressRestoreFocus||false,K=Q.suppressActive,N=Q.maskId||null,M=Q.noScroll||false,O=Q.disableEsc||false;this._evt=[];if(!T&&U){P.CONTENT_TEMPLATE=U;}B.superclass.constructor.apply(this,arguments);if(!D&&K){if(F){D=F;F.set("visible",false);}else{K=false;}}P.addAttrs({cssPrefix:{value:J,readOnly:true},focusedNode:{value:H},clearMask:{value:L},hideMask:{value:S},restoreFocusNode:{valueFn:function(){var V=R;if(!((V instanceof G.Node)||G.Lang.isNull(V))){V=document.activeElement;}return V;}},suppressRestoreFocus:{value:I},suppressActive:{value:K,readOnly:true},maskId:{value:N},noScroll:{value:M},disableEsc:{value:O}});}B.NAME="dialog";B.CSS_PREFIX="yui3-overlay";B.ATTRS={role:{value:"dialog"}};G.extend(B,G.Overlay,{maskEl:null,prevMaskElId:null,centerEl:null,_haltShow:false,initializer:function(){this.set("visible",false);this.on("render",this.onBeforeRender);},destructor:function(){var I,J=this.get("restoreFocusNode"),L=this.get("suppressRestoreFocus"),H=this.get("contentBox").get("id");this.get("boundingBox").purge(true);if(this.get("centered")){this.centerEl&&this.centerEl.remove(true);}else{this.get("boundingBox").remove(true);}if(this.get("noScroll")){G.one("body").setStyle("overflow","visible");}for(I in this._evt){G.detach(this._evt[I]);}if(!this._haltShow){if(D&&this.get("suppressActive")){D.set("visible",true);D=null;this.prevMaskElId&&this.maskEl&&this.maskEl.set("id",this.prevMaskElId);this.prevMaskElId=null;}else{if(this.get("maskId")){this.maskEl.remove(true);}else{this.maskEl&&this.maskEl.setStyle("display","none");}F=null;if(!L){try{if(!(G.Lang.isNull(J)||J.tagName=="IFRAME")){J.focus();}}catch(K){}}G.fire("dialog:hide",H);}}else{this._haltShow=false;}},renderUI:function(){var O=this.get("cssPrefix"),J=this.get("contentBox"),N=this.get("role"),H,M,L,I,K;J.set("role",N);if(O){H=["#"+J.get("id")," .",O].join("");L=G.one(H+"-hd");I=G.one(H+"-bd");K=G.one(H+"-ft");if(L){J.set("aria-labelledby",A(L));if((M=L.one(".close"))){M.set("role","presentation");}if(!L.hasClass("yui3-widget-hd")){L.addClass("yui3-widget-hd");}}if(I){if(N==="alertdialog"||N==="dialog"){J.set("aria-describedby",A(I));}if(!I.hasClass("yui3-widget-bd")){I.addClass("yui3-widget-bd");}}if(K){if(!K.hasClass("yui3-widget-ft")){K.addClass("yui3-widget-ft");}}}J.setStyle("display","block");J.set("tabIndex",0);J.all(".btn a").each(function(Q,P){Q.set("role","button");});},show:function(){if(!F){B.superclass.show.call(this);!this.get("suppressActive")&&G.fire("dialog:show",this);if(this.get("noScroll")){G.one("body").setStyle("overflow","hidden");}}else{this._haltShow=true;this.destroy();}},bindUI:function(){var M=G.all(".yui3-overlay-content .btn a"),H=M.size()-1,K=G.one(".yui3-overlay-content"),N=this.get("focusedNode"),J;if(this.get("centered")){this.after("renderedChange",this.center);}this._evt.push(this.after("visibleChange",function(){var P={display:"none"},O=this.get("contentBox");if(this.get("visible")){O&&O.setStyle("display","block");P.display=this.get("hideMask")?"none":"block";F=this;}else{O&&O.setStyle("display","none");F=null;}this.maskEl&&this.maskEl.setStyles(P);if(F){L(true);}}));function L(P){if(!F){return;}if(!(N instanceof G.Node)){P&&G.UA.gecko&&K.focus();N=K.one(N);}try{if(N){N.focus();}else{K.focus();}}catch(O){}}this._evt.push(K.on("blur",function(){J=true;}));this._evt.push(K.on("focus",function(P){var O="#"+K.get("id");if(J&&!P.target.ancestor(O,true)){L();}J=false;}));function I(Q){var O,P=Q.target;switch(Q.keyCode){case 8:case 46:return;break;case 9:if(H>-1){if(Q.shiftKey){if(K==P){Q.halt();M.item(H).focus();}}else{if(M.item(H)==P){Q.halt();K.focus();}}}break;case 27:if(!this.get("disableEsc")){this.fire("dialog:action",{dataAction:"cancel"});Q.preventDefault();}break;case 32:if(P.getAttribute("role")=="button"){Q.preventDefault();G.use("node-event-simulate",function(){P.simulate("click");});}break;case 37:case 39:if((H>0)&&(O=M.indexOf(P))>-1){if(Q.keyCode==37){M.item((O==0)?H:O-1).focus();}else{M.item((O==H)?0:O+1).focus();}}break;}Q.stopPropagation();}K.on("keydown",I,this);},onBeforeRender:function(N){var O=this.get("zIndex"),H=this.get("hideMask"),K=this.get("clearMask"),P=this.getClassName((K?"clearmask":"mask")),I="position:fixed;top:50%;left:50%;height:1px;",J,L=this.get("maskId"),M,Q;if(L){this.maskEl=C("#"+L);}if(!this.maskEl){if(!L){L=G.guid();}if(!(this.maskEl=G.one("."+P))&&!H){M=['<DIV id="',L,'" class="',P,'" style="z-index:',(O-2),'"></DIV>'].join(""),C("body").prepend(M);this.maskEl=C("#"+L);}else{if(this.maskEl){this.prevMaskElId=this.maskEl.get("id");this.maskEl.set("id",L);this.maskEl.setStyle("zIndex",O-2);}}}if(this.get("centered")){J=G.guid();Q=['<DIV id="',J,'" style="',I,"z-index:",(O-1),'"></DIV>'].join("");C("body").prepend(Q);this.centerEl=G.one("#"+J);N.parentNode=this.centerEl;this.get("boundingBox").setStyle("position","relative");}},center:function(){var I,J,H=this.get("boundingBox");I=-(H.get("offsetWidth")/2)+"px";J=-(H.get("offsetHeight")/2)+"px";H.setStyles({"marginLeft":I,"top":J,"left":0});}});G.namespace("comms.ui");G.comms.ui.Dialog=B;},"0.0.1",{requires:["overlay"]});YUI.add("_shared_module_offscreen_bin_modal_close_icon",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_close_icon={base:'<span class="close" data-action="cancel" title="{{str_btn_close}}"></span>'};},"1.0.0");YUI.add("_shared_module_offscreen_bin_modal",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal={base:'<div id="modalOverlay" class="modal {{modal_classes}}"> <h2 class="modal-hd"> {{modal_header}} {{_shared_module_offscreen_bin_modal_close_icon}} </h2> <div class="frontpanel"> <div class="modal-bd">{{modal_body}}</div> <div class="modal-ft">{{modal_ft}}</div> </div> {{modal_back_panel}}</div>',modal_back_panel:'<div class="backpanel back hidden"> <div class="modal-bd">{{modal_body_back}}</div> <div class="modal-ft">{{modal_ft_back}}</div> </div> '};},"1.0.0",{requires:["_shared_module_offscreen_bin_modal_close_icon"]});YUI.add("_shared_module_offscreen_bin_modal_btn_ok",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_btn_ok={base:'<span id="okayModalOverlay" class="btn left right default"><a href="#" data-action="ok">{{str_ok}}</a></span> '};},"1.0.0");YUI.add("common-ui-dialog-helper",function(C){var A=C.common.Utils.substitute,B=C.ui.Templates,D="alertdialog";C.namespace("common.ui");C.common.ui.DialogHelper=new function(){var G={modal_header:function(L){return L.hd;},modal_body:function(L){return L.bd;},modal_ft:function(L){return A(L.ft,0,0,0,strings);},_shared_module_offscreen_bin_modal_btn_ok:function(L){return L.ok;},_shared_module_offscreen_bin_modal_btn_cancel:function(L){return L.cancel;},_shared_module_offscreen_bin_modal_close_icon:function(L){return(L.hideClose)?"":A(B._shared_module_offscreen_bin_modal_close_icon.base,0,0,0,strings);},global_path_img:function(){return NeoConfig.globalPathImg+"/u/assets/img";},antivirus_logo_path_img:function(){return NeoConfig.avLogoUrl;}};function K(M,N,L){M.ft=B._shared_module_offscreen_bin_modal_btn_ok.base||"";M.role=D;if(N&&N.ok&&N.ok.text){M.ft=A(M.ft,0,0,0,{str_ok:N.ok.text});}E(M,N,L);}function J(M,N,L){C.use("_shared_module_offscreen_bin_modal_btn_cancel",function(){var O={cancel:B._shared_module_offscreen_bin_modal_btn_cancel.base};M.ft=A(B._shared_module_offscreen_bin_modal_btn_cancel.base,O,G,0,strings);M.focusedNode='.modal-ft [data-action="cancel"]';M.role=D;E(M,N,L);});}function F(M,N,L){C.use("_shared_module_offscreen_bin_modal_btns_ok_cancel",function(){var O={ok:B._shared_module_offscreen_bin_modal_btn_ok.base,cancel:B._shared_module_offscreen_bin_modal_btn_cancel.base};if(N&&N.ok&&N.ok.text){O.ok=A(O.ok,0,0,0,{str_ok:N.ok.text});}M.ft=A(B._shared_module_offscreen_bin_modal_btns_ok_cancel.base,O,G,0,strings);M.role=D;E(M,N,L);});}function I(M,N,L){M.ft=A(M.ft,0,G,0,strings);E(M,N,L);}function E(M,N,L){M=M||{};if(!M.template){var P=M.rawTemplate||B._shared_module_offscreen_bin_modal.base;M.template=A(P,M,G,0,strings);}M.centered=true;M.cssPrefix="modal";M.focusedNode=M.focusedNode||".yui3-widget-ft span.default a";function O(Q){Q.get("contentBox").set("aria-live","polite");Q.show();if(L){L(Q);}}H(M,N,O);}function H(M,O,L){var N=new C.comms.ui.Dialog(M);O=O||{};N.render();N.get("contentBox").on("click",function(R){var S=C.common.Utils.getDataAction(R),Q=S.action,P=S.node;if(Q){if(!M.allowDefault){R.preventDefault();}if(NeoConfig.intl==="jp"){N.set("adAction",(Q=="ok"?"disableRetriggerOnOk":"disableRetriggerOnHide"));}N.fire("dialog:action",{dataAction:Q,item:P});}});N.after("dialog:action",function(S){var Q=S.dataAction,P;if(Q){P=O[Q];try{if(!P||!P.stopDestroy){N.destroy();}P&&P.handler&&P.handler.call(this,S,N);}catch(R){}}});if(L){L(N);}}C.mix(this,{alert:K,cancelDialog:J,confirm:F,create:H,custom:I,createCommon:E});};},"1.0.0",{requires:["common-utils","modal_css","comms-ui-dialog-base","_shared_module_offscreen_bin_modal","_shared_module_offscreen_bin_modal_btn_ok"]});YUI.add("mail-errormap",function(C){C.namespace("mail.Errormap");var R=C.common.Utils,M=C.Lang,I=C.common.net.Error,Q=R.substitute,J="_{{method}}",B="_{{status}}",P=J+B,S="{{subcode}}",L={"ComposeError":[14,"ComposeError"],"ComposeErrorMessage":[14,"ComposeError"],"ComposeErrorServiceError":[14,"ComposeError"],"ComposeErrorUnknown":[14,"ComposeError"],"ComposeErrorAttachment":[14,"ComposeAttachFailed"],"ComposeErrorBadMIME":[14,"BadMime"],"ComposeErrorBadRecipient":[0,"BadRecipient"],"ComposeErrorBadFrom":[0,"BadFrom"],"ExceededMaxTo":[0,"MaxToAddressesExceeded"],"ExceededMaxCc":[0,"MaxCCAddressesExceeded"],"ExceededMaxBcc":[0,"MaxBCCAddressesExceeded"],"ExceededMaxRecipients":[0,"MaxTotalAddressesExceeded"],"ExceededMaxHourlyMessages":[0,"HourlyLimitExceeded"],"ExceededMaxDailyMessages":[0,"DailyLimitExceeded"],"InvalidFromAddress":[0,"BadFrom"],"InvalidRecipientAddress":[0,"BadRecipient"],"NicknameExpansionFailed":[0,"NicknameExpansionFailed"],"EmptyFolderFailed":[14,"EmptyFolderFailed"],"FolderEmptyFailed":[14,"EmptyFolderFailed"],"FolderCreateFailed":[14,"FolderCreateFailed"],"FolderFetchFailed":[14,"FolderFetchFailed"],"FolderIdDoesntExist":[14,"FolderIdDoesntExist"],"FolderIdIsSystemFolder":[0,"FolderIdIsSystemFolder"],"FolderListFetchFailed":[2,"FolderListFetchFailed"],"FolderNameExists":[0,"FolderAlreadyExists"],"FolderNameNotAllowed":[0,"folder_name_is_reserved"],"FolderNameIllegalCharacter":[0,"FolderNameIllegalCharacter"],"FolderNameIllegalCharset":[14,"FolderNameIllegalCharacter"],"FolderNameTooLong":[0,"folder_name_too_long"],"FolderRemoveFailed":[14,"FolderRemoveFailed"],"FolderRenameFailed":[14,"FolderRenameFailed"],"GetMessageFailed":[6,"GetMessageFailed"],"BadCharset":[6,"download_message_viewing_error"],"HumanVerificationRequired":[0,"HumanVerificationRequired"],"AccountVerificationRequired":[0,"AccountVerificationRequired"],"CannotSendThisMessage":[14,"CannotSendThisMessage"],"InputTooEarly":[14,"HumanVerificationFailed"],"InvalidYID":[14,"HumanVerificationFailed"],"MaxAttempts":[12,"HumanVerificationFailed"],"TimedOut":[14,"HumanVerificationFailed"],"WrongInput":[14,"HumanVerificationFailed"],"WrongUser":[14,"HumanVerificationFailed"],"ListMessagesFailed":[2,"ListMessagesFailed"],"MailboxOpenFailed.Busy":[5,"MailboxBusy"],"MailboxOpenFailed":[2,"MailboxOpenFailed"],"MessageDeleteFailed":[2,"MessageDeleteFailed"],"MessageFetchFailed":[4,"MessageFetchFailed"],"MessageIdsNotFound":[4,"MessageIdsNotFound"],"MessageNotFound":[4,"MessageNotFound"],"MessageSaveFailed":[2,"MessageSaveFailed"],"MessageSelectionNotFound":[4,"MessageSelectionNotFound"],"MissingApplicationID":[14,"MissingApplicationID"],"MissingCredentials":[14,"MissingCredentials",null,[]],"NoRecipientsSpecified":[0,"MissingRecipients"],"NoSenderSpecified":[0,"NoSenderSpecified"],"ResetSpamFilterFailed":[2,"ResetSpamFilterFailed"],"SaveMessageFailed":[2,"SaveMessageFailed"],"SendMessageFailed":[14,"SendMessageFailed"],"MetaDataFetchFailed":[2,"ServerError"],"MetaDataSaveFailed":[2,"ServerError"],"UserOpenFailed":[1,"ServerError"],"ServerError":[14,"ServerError"],"SetUserDataFailed":[1,"SetUserDataFailed"],"SpamReportingFailed":[14,"SpamReportingFailed"],"SpamTrainingFailed":[14,"SpamTrainingFailed"],"TooManyCallsBatched":[14,"TooManyCallsBatched"],"TooManyFolders":[0,"TooManyFolders"],"TooManyMessagesRequested":[14,"TooManyMessagesRequested"],"UserOverQuota":[19,strings["str_cfg_tog_hasUnlimitedStorage"]?"UserTempSuspended":"UserOverQuota"],"UserAbuseDetected":[19,"UserTempSuspended"],"UserPreferenceFetchFailed":[2,"UserPreferenceFetchFailed"],"UserSuspended":[19,"UserSuspended"],"MessageTooLarge":[0,"MessageToLarge"],"ParentalControlsNoAttachments":[0,"ypcUploadDisallowed"],"ExceededAttachmentLimit":[0,"uploadNumFiles"],"SendMessageAttachmentFailed":[14,"SendAttachmentFailed"],"MessageTooLargeSomeRecipients":[0,"MessageTooLargeForSomeRecipients"],"SendMessageFailedSomeRecipients":[14,"SendMessageFailedForSomeRecipients"],"UserDataFetchFailed":[1,"UserDataFetchFailed"],"FarmNameNotFound":[1,"FarmNameNotFound"],"GetMessageInvalidId":[4,"GetMessageInvalidId"],"GetDisplayMessageFailed":[6,"GetDisplayMessageFailed"],"GetPartContentFailed":[6,"GetDisplayMessageFailed"],"ComposeFailed":[14,"ComposeFailed"],"MetaDataMissingPath":[2,"MetaDataMissingPath"],"SetMetaData":[2,"BadRequest"],"MoveMessagesInvalidId":[4,"MoveMessagesInvalidId"],"MetaDataTooLarge":[2,"ServerError"],"InputInvalid":[8,"ServerError"],"InvalidRequest":[8,"BadRequest",null,["UE_ALERT_TAE8_{{code}}_{{method}}","UE_ALERT_TAE8_{{code}}_{{method}}_{{message}}"]],"FailedDependency":[14,"ServerError"],"SearchProgramFailed":[20,"error_searching_messages"],"ListMessagesFailed.SearchMessages":[2,"error_searching_messages"],"FeatureUnavailable":[11,"INTERNAL MESSAGE:\nThe underlying version of Cascade on this box doesn't support the API that was requested\nMethod : \n","ServerErrorFeatureUnavailable"+J],"999":[19],"BatchItemError":[],"OperationNotAllowedCurrently":[24,"OperationNotAllowedCurrently"],"ServiceTemporarilyUnavailable":[21]},D={"999":[19],"2":[18,"Offline","OfflineTitle",["E_HTTP"+B,"E_HTTP"+P]],"conn":[18,"Connect",null,["E_HTTPConnect","E_HTTPConnect"+P]],"Malformed-unk":[14,null,null,["E_RespParseUnk","E_RespParse"+P]],"Malformed-mail":[14,null,null,["E_RespParseMail","E_RespParse"+P]],"HTMLResponse-unk":[14,null,null,["E_RespHTMLUnk","E_RespHTML"+S+P]],"HTMLResponse-mail":[14,null,null,["E_RespHTMLMail","E_RespHTML"+S+P]],"NoResponse-unk":[14,null,null,["E_RespEmptyUnk","E_RespEmpty"+P]],"NoResponse-mail":[14,null,null,["E_RespEmptyMail","E_RespEmpty"+P]],"MalformedFault":[14,null,null,["E_RespFault","E_RespFault"+J]],"timeout":[18,"Timeout",null,["E_Timeout"+J]],"invalidwssid":[14,null,null,["E_InvalidWssid"]],"loginfail":[14]};function K(Y,W,T,b,U){var X,Z=Y.detail,d,c,V="E_ServerBatch_"+U.join("_"),a=F(Y,W,T,true,U);R.assert(Z);if(W==200){for(X=0;X<Z.length;X++){d=Z[X];c=d.detail.idx;a=a.concat(F(d,W,U[c],b));a.push([V,c,d.code].join("_"));}}return a;
}function F(f,l,Z,U,i){function a(r){var p,q,s,t=f.message||"";if(r){p=[];s={code:V,method:Z,status:l,subcode:f.subcode,message:t.replace(/\s/g,"").replace(/\./g,"")};for(q=0;q<r.length;q++){p[q]=Q(r[q],s,null,null,strings);}}return p;}var V=f.code,c=f&&f.code&&(f.code.indexOf("-unk")>0),e,k,o,W,h,b,Y,d,m,n,g=Z+(i?"_"+i.join("_"):"");V=/^[^-]+/.exec(V);V=V&&V[0];h=I.isHttp(V);b=!h&&N(f,null,L);Y=!b&&N(f,null,D);d=b||Y;m=a(d&&d[3])||[];if(l==500){o="E_Server500_"+g;m.push(o,o+"_"+V);}if(!d){if(h){o="E_HTTP";m.push(o,o+"_"+l,[o,g,l].join("_"));}else{o="E_ServerUnknown_"+g;m.push(o,o+"_"+V);}}if(!U){W=d&&d[0];W=W!==undefined?W:(h?18:14);o="UE_ALERT_TAE"+W;if(W==14&&c){m.push("INTERCEPT_UNK_"+V);m.push("INTERCEPT_UNK_"+Z);}else{m.push(o,o+"_"+(h?l:V));if(W==14){m.push(o+"_"+Z);}if(W==5&&NeoConfig.isCorpmail){m.push(o+"_corpmail");}}if(W==4){function j(p){if(p!="Inbox"&&p!="Sent"&&p!="Draft"&&p!="Trash"&&p!="%40S%40Search"&&p!="%40B%40Bulk"&&p!="%40C%40Chats"&&p!="@S@Search"&&p!="@B@Bulk"&&p!="@C@Chats"){return"userfid";}return p;}var T,X;if(f.detail&&f.detail.request&&(n=f.detail.request.postdata)){if(g=="MoveMessages"){k=n.match(/"sourceFid":"(.*?)"/);k=(k&&k[1])||"?";e=n.match(/"destinationFid":"(.*?)"/);e=(e&&e[1])||"?";T=j(k)+"-"+j(e);}else{T=n.match(/"fid":"(.*?)"/);if(T&&T[1]){T=j(T[1]);}else{T="?";}}}else{T="?";}m.push(o+"_"+(h?l:V)+"_"+g+"_"+T);}}m.push("E_"+g,"E_"+g+"_"+(h?l:V));return m;}function O(U){var T=U&&(U.match(/Client\.([\w\W]+)$/)||U.match(/Server\.([\w\W]+)$/));return(T&&T[1])||U;}function G(U){var V,T=new RegExp(I.base+"([\\w\\W]+)$");return((V=U.match(T))&&V[1])||U;}function E(V,U,T){return U&&(M.isNumber(T)?V[U]&&V[U][T]:V[U]);}function N(Y,a,Z){var X,W=Y.code,U,V,b,T=I.isHttp(W);V=(Z&&[Z])||(T?[D]:[L,D]);U=T?G(W):O(W);for(X=0;X<V.length;X++){if((b=E(V[X],U,a))!==undefined){return b;}}}function H(T){return T.code=="BatchItemError"&&T.detail;}function A(X){var V,W="",T,Y,U;if(U=H(X.fault)){V=[];for(T=0;T<U.length;T++){W=A({fault:U[T]},1);W&&V.push(W);}W=V.join("; ");}else{Y=N(X.fault,1);W=Y&&strings["str_error_"+Y];}return W;}C.mix(C.mail.Errormap,{getTAE:function(W){var V,T,U=W.fault;U=((V=H(U))&&V[0])||U;return((T=N(U,0))!==undefined)?T:(I.isHttp(U.code)?18:14);},getMessage:A,getTitle:function(V){var U,W,T=V.fault;T=((U=H(T))&&U[0])||T;W=N(T,2);return W&&strings["str_error_"+W];},getStats:function(W,U){var T=W.fault,V=H(T)?K:F;return V(T,W.status,W.callback.method,U,W.callback.batchopcbk);},getTAEStats:function(T,U){var V=["UE_ALERT_TAE"+T];U&&V.push(V[0]+"_"+U);return V;}});},"1.0.0",{requires:["json-stringify","common-net-error"]});YUI.add("_shared_module_offscreen_bin_modal_launch_error_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_launch_error_rollup={base:'<p>{{str_rough_errlaunch_message}}</p><ul> <li><a href="{{link_goto_latest}}" class="more">{{str_rough_try_again_now}}</a></li> <li><a href="{{link_goto_tae_help}}" class="more" target="_blank">{{str_rough_visit_help_page}}</a></li> </ul> <br/><span>{{str_rough_errlaunch_troubleshoot}}</span>'};},"1.0.0");YUI.add("mail-error",function(C){C.namespace("mail.Error");var K=C.common.net.Error,M=C.common.Utils,B=C.mail.Errormap,I=M.rocketstats,H=C.JSON.stringify,E="45";function G(S,P){function X(){var Z,a="";for(Z=0;Z<Q.length;Z++){a+=" "+[Q[Z].method,Q[Z].code].join(":");}return a;}function T(){var b,Z,a=S.request;if(/SaveMessage/.test(O)||/SendMessage/.test(O)){Z=a.postdata;a.postdata="<filtered>";b=H(a);a.postdata=Z;}return b||H(a);}var V=P.fault,R=V.code,W=P.callback||{},U=R=="BatchItemError",Q=U&&W.batchopcbk,O=W.method,Y={method:O,fault:U?X():R,tae:B.getTAE(P),message:B.getMessage(P)||V.message||"",request:T(),http:[P.status,P.statusText].join(" "),headers:P.allHeadersText||"",response:P.responseText||"",duration:S.end?(S.end-S.start):"X",yid:NeoConfig.loginId||""};return Y;}function F(R){var Q,O;if(strings["str_tog_TAESupported"]){if(R.tae===E&&strings["str_cfg_url_yahoo_mail_help_tae"+E]){O=strings["str_cfg_url_yahoo_mail_help_tae"+E];}else{O=strings["str_cfg_url_TAEHelpPages"]+"mltamtae"+R.tae+".html";}}else{O=strings["str_cfg_url_contact_customer_care"];}Q={link_goto_latest:"launch?reason=ignore&rs=1",launch_error_code:R.tae,link_goto_tae_help:O};var P=M.substitute(C.ui.Templates._shared_module_offscreen_bin_modal_launch_error_rollup.base,Q,null,null,strings);K.show(null,P,strings["str_error_MailErrorTitle"],{modal_classes:"lg"});}function D(O,Q){var P,S,R=Q?":background":"";if(O){S=O.length||0;for(P=0;P<S;P++){I.stat("mailnet"+R,O[P]);if((typeof navigator.onLine!="undefined")&&!navigator.onLine){I.stat("mailnet:offline"+R,O[P]);}}}return O;}function J(U,S,Q,P){function T(V){try{U.stats=V;U.detail=S.fault.message||"";M.netError(H(U));}catch(W){}}var O=!Q&&B.getStats(S,P),R=S.callback&&S.callback.backgroundLogs&&S.callback.backgroundLogs[0]=="*";D(O,R);if(P){I.stat("mailnet","TAE4:SUPPRESS:"+U.method);}T(O);}function N(O,P){O&&D(B.getTAEStats(O,P));}function A(p,Z,b){function f(e){return(O.search(e)!==-1)||((g+"")==e);}M.assert(b.fault);try{var W=b.fault,g=b.status,O=W.code,j=O=="BatchItemError",U,h,o=b.callback||{},P=o.method,d,Q=/xhrsend/.test(O),l,c=[401],X,R,V,S,T=b.callback,a=W&&W.message&&W.message.match("Content-Length:0"),Y={"Server.Malformed-mail":true};if(a){I.stat("mailnet","empty-post-body-"+(T.retry?"1":"0"));}if((Y[O]||a)&&!T.retry){R=b.request;S=C.common.net.SessionMgr;C.mix(T,{retry:true});if(O=="Server.Malformed-mail"){I.stat("mailnet","malformed-mail-retried");}if(a){I.stat("mailnet","empty-post-body-retried");}V=S.request(R.url,S.formatQueryParams(R.urlparams,R.enc),T,R.mthd,R.enc);if(R.mthd=="POST"){V.request.post=R.postdata;}V.send();return;}if(j){for(var k=0;k<W.detail.length;k++){A(p,Z,W.detail[k]);}return;}function m(e,q,i){p.callDefault(e,q,i);}d=G(Z,b);l=K.suppress(o.suppressCodes,c.concat(o.exceptCodes||[]),f),X=K.suppress(o.suppressLogs,o.exceptLogs,f);M.assert(o.service=="mail");if(d.method==="GetDisplayMessage"){if(d.fault==="Client.MessageIdsNotFound"){I.stat("mailnet","TAE4:MIDsNotFound:"+NeoConfig.permMsgDelOp1+":"+NeoConfig.permMsgDelOp2);}prime=(typeof Z.callbackData.primeMsg!="undefined")?"1":"0";I.stat("mailnet","TAE4:GDM:FAILURE:PRIME:"+prime+":"+d.fault);}if(g==500||j){if(/SessionIdReissue/.test(O)){m(402);}else{if(/Credentials/.test(O)){m(401,{stat:O+"_"+P});}else{if(/ClientRedirect/.test(O)){U=M.substitute(strings["str_error_reload_account_migrated"],null,null,strings);if(/HostCorrection/.test(O)){m(401,{msg:U,url:"http://mail.yahoo.com",stat:O+"_"+P});}else{m(310,{msg:U,stat:O+"_"+P});}}else{if(/999/.test(O)){m(999,W.detail&&W.detail.token);}else{if(/ServiceTemporarilyUnavailable/.test(O)&&W.detail&&W.detail.displayUrl){I.stat("redirect:outage:500","client");window.location=W.detail.displayUrl;return;}if(!l){F(d);}}}}}}else{if(O.indexOf("-unk")>-1){h={};h.message=strings.str_error_Unk;h.title=strings.str_error_Unk_title;m(null,h,Q);}else{if(!l){h={};h.message=d.message;h.title=B.getTitle(b);m(null,h,Q);}}}if(!p.retry){J(d,b,Q||X,l);}}catch(n){M.assert(0,"mail:controller:error - "+n.message);}if(!p.isdone()){p.done();}}function L(R){var P,Q="",O="";I.stat("mailnet","FetchExternalAccount"+O);M.netError("FetchExternalAccount Error"+H(R));for(P=0;P<R.length;P++){Q+=M.substitute(strings["str_error_extFetch_"+R[P].status],R[P]);Q+="<br/><br/>";}}C.mix(C.mail.Error,{handle:A,extFetchError:L,_showTae:F,statTAE:N});},"1.0.0",{requires:["common-net-error","mail-errormap","rocket-stats","json-stringify","_shared_module_offscreen_bin_modal_launch_error_rollup"]});