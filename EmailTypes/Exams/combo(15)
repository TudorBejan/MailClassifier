YUI.add("_shared_module_search_empty_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_search_empty_rollup={base:'<div class="content search"> <div class="inner {{hasMON_a}}"> <h2 class="welcome">{{search_no_results}}</h2> <ul class="services"> <li> <div class="icon-lg contact-card"></div> <p>{{str_srch_find_by_person}}</p> <div class="contact-search"> <label for="find-by-person-field" class="offscreen"></label> <div id="find-by-person" class="ac-input" data-action="autocomplete"> <ul> <li> <input id="find-by-person-field" name="find-by-person-field" placeholder="{{str_srch_type_name}}" tabIndex="0" maxlength="2048" /> </li> </ul> </div> </div> <span class="btn left right"><a href="#" title="{{str_srch_person_btn_attr}}">{{str_srch_person_btn}}</a></span></li> <li> <div class="icon-lg attachment"></div> <p>{{str_srch_find_by_file}}</p> <ul class="file-types"> <li><span class="btn left right "><a title="{{str_file_all_types}}" href="#"><i>{{str_file_all_types}}</i></a></span></li> <li><span class="btn left right "><a title="{{str_file_pdf}}" href="#" class="pdf"><i>{{str_file_pdf}}</i></a></span></li> <li><span class="btn left right "><a title="{{str_file_ppt}}" href="#" class="ppt"><i>{{str_file_ppt}}</i></a></span></li> <li><span class="btn left right "><a title="{{str_file_xls}}" href="#" class="xls"><i>{{str_file_xls}}</i></a></span></li> <li><span class="btn left right "><a title="{{str_file_doc}}" href="#" class="doc"><i>{{str_file_doc}}</i></a></span></li> <li><span class="btn left right "><a title="{{str_file_img}}" href="#" class="img"><i>{{str_file_img}}</i></a></span></li> <li><span class="btn left right "><a title="{{str_file_video}}" href="#" class="video"><i>{{str_file_video}}</i></a></span></li> <li><span class="btn left right "><a title="{{str_file_audio}}" href="#" class="audio"><i>{{str_file_audio}}</i></a></span></li> </ul></li> <li> <div class="icon-lg calendar"></div> <p>{{str_srch_find_by_date}}</p> <p class="date-range"> <span class="btn left right small"><a href="#" data-action="today">{{str_srch_date_today}}</a></span> <span class="btn left right small"><a href="#" data-action="week">{{str_srch_date_last_week}}</a></span> <span class="btn left right small"><a href="#" data-action="month">{{str_srch_date_last_month}}</a></span> </p></li> </ul> </div> {{jp_ads_emptysearch_mon}}</div>',jp_ads_emptysearch_mon:'<div class="{{hasMON_b}} "> <div id="slot_MON_emptysearch" class="ch_mod gxBoom boom"><div id="tgtMON_emptysearch" class="darla"></div></div>  </div> '};},"1.0.0");YUI.add("mail-ui-advancedSearchView",function(E){var C=E.common.Utils,A=C.substitute,B=[];var D=function(F){var H=this,G={rootNode:{writeOnce:true},template:{setter:function(I){H.TEMPLATE=E.ui.Templates._shared_module_search_empty_rollup;}},data:{},query:{}};E.augment(H,E.Attribute);H.addAttrs(G,F||{});E.augment(H,E.EventTarget);};D.prototype={TEMPLATE:E.ui.Templates._shared_module_search_empty_rollup,render:function(){var H=this,G=H.get("query.keyword"),F=H.get("data")||{};F.search_no_results=E.Lang.trim(G)||NeoConfig.intl!=="jp"?"{{str_srch_no_results}}":"{{str_srch_enter_search_terms}}";H.get("rootNode").appendChild(E.Node.create(A(H.TEMPLATE.base,H.get("data"),0,0,strings)));if(!(window.location.href.match(/&mswsDateSearch=1/)||window.location.href.match(/\?mswsDateSearch=1/))){H.get("rootNode").one("div.calendar").ancestor("li").remove();}H.bindUI();},bindUI:function(){var I=this,F=I.get("rootNode"),H=F.one("#find-by-person-field"),G;for(G in B){E.detach(B[G]);}B=[];B.push(F.one("div.contact-search").next("span").delegate("click",function(K){K.preventDefault();var J=F.one("div.ac-input input");if(J.get("value")){K.contactNode=J;I.fire("searchByContact",K);}},"a",I));B.push(F.one("ul.file-types").delegate("click",function(J){J.preventDefault();J.fileTypeNode=J.target;I.fire("searchByAttachmentType",J);},"span a",I));if(window.location.href.match(/&mswsDateSearch=1/)||window.location.href.match(/\?mswsDateSearch=1/)){B.push(F.one("p.date-range").delegate("click",function(J){J.preventDefault();J.dateNode=J.target;I.fire("searchByDateRange",J);},"span a",I));}B.push(H.on("focus",function(J){J.contactNode=J.target;I.fire("showAutoComplete",J);},I));B.push(H.on("keydown",function(J){J.contactNode=J.target;I.fire("autoCompleteQuery",J);},I));B.push(H.on("blur",function(J){J.contactNode=J.target;I.fire("hideAutoComplete",J);},I));if(NeoConfig.bidi&&!H.bidiTextEntry){E.use("comms-bidi-textentry",function(){H.plug(E.Plugin.BidiTextEntry);});}},close:function(){var H=this,G,F=H.get("rootNode").all("div.content.search");for(G in B){E.detach(B[G]);}B=[];F&&F.remove();}};E.namespace("mail.ui");E.mail.ui.AdvancedSearchView=D;},"1.0.0",{requires:["common-utils","_shared_module_search_empty_rollup","attribute-base","event-base"]});YUI.add("mail-ui-advancedSearchController",function(G){var E=G.common.Utils,A=E.substitute,C=[],B=G.contacts,H=B.api,D=B.utils;var F=function(I){var K=this,J={data:{},rootNode:{writeOnce:true,setter:function(){K.get("widget")&&K.get("widget").render();}},query:{},widget:{setter:function(L){K.get("rootNode")&&L.render();}}};G.augment(K,G.Attribute);K.addAttrs(J,I||{});G.augment(K,G.EventTarget);};F.prototype={process:function(){var J=this,I;J.set("widget",new G.mail.ui.AdvancedSearchView({rootNode:J.get("rootNode"),data:J.get("data"),query:J.get("query")}));I=J.get("widget");I.on("searchByContact",J.searchByContactHandler,J);I.on("searchByAttachmentType",J.searchByAttachmentTypeHandler,J);I.on("searchByDateRange",J.searchByDateRangeHandler,J);I.on("showAutoComplete",J.autoCompleteHandler,J);I.on("autoCompleteQuery",J.keyDownHandler,J);I.on("hideAutoComplete",J.hideACHandler,J);},searchByContactHandler:function(K){var L=this,I=G.comms.Utils.createAddress(K.contactNode.get("value")),J={keyword:" ",from:I.email};L.fire("doMailSearch",{query:J});},searchByAttachmentTypeHandler:function(I){var K=this,J={pdf:"pdf",ppt:"vnd.ms-powerpoint",xls:"excel",doc:"msword",img:"image",video:"video",audio:"audio"};className=I.fileTypeNode.get("className"),queryObj={keyword:" "};if(J[className]){queryObj.attachmenttypes=J[className];}else{queryObj.attachmentcount={min:1};}K.fire("doMailSearch",{query:queryObj});},searchByDateRangeHandler:function(M){var L=this,J=M.dateNode.getAttribute("data-action"),S=new Date(),O=S.getFullYear(),N=S.getMonth(),P=S.getDate(),Q=S.getDate()-S.getDay(),K,R,I={keyword:" "};switch(J){case"today":I.date={year:O,month:N+1,day:P};break;case"week":K=Date.UTC(O,N,Q-7)/1000;R=Date.UTC(O,N,Q-1)/1000;I.date={start:K,end:R};break;case"month":I.date={year:O,month:N};break;default:return;}L.fire("doMailSearch",{query:I});},autoCompleteHandler:function(L){if(L.contactNode.get("nodeName")=="INPUT"){var K=L.contactNode.get("id");if(K){L.contactNode.removeClass("whiteout");var J=L.contactNode.ancestor("#find-by-person");if(!G.ACWidgetInst){var I=A(G.ui.Templates._shared_module_offscreen_bin_compose.base,{},null,null,strings,G.ui.Templates);G.one(document.body).append(I);G.ACWidgetInst=new G.contacts.ui.ACWidget({acNode:J,acTarget:L.contactNode,contentBox:"#ac-to-results",selectFirst:true}).setAlign().render();}else{if(G.ACWidgetInst.get("ac").get("alignNode")!==J){G.ACWidgetInst.get("ac").destructor();G.ACWidgetInst.refresh({acNode:J,acTarget:L.contactNode,width:J.getStyle("width"),selectFirst:true}).setAlign().render();}}G.ACWidgetInst.get("ac").detach("ac:query");G.ACWidgetInst.get("ac").on("ac:query",function(P){var V=this,N=V.get("dataSource"),R=P.value,T,Q=this.get("badResult"),O,S,U;if(Q){O=E.escapeRegexp(E.escapeHtml(Q));S=new RegExp("^"+O,"gi");if(P.value.match(S)){this.fire("ac:load",{results:[],query:P.value});return;}}if(D.areContactsLoaded()){var M=new G.comms.FilterContacts();M.updateFilterItems(R);T=M.fastMatch();T.queryStr=R;U=G.bind(V.reload,V,T);U(T);}});G.detach("contacts:contactChanged");G.on("contacts:contactChanged",function(){G.ACWidgetInst.get("ac").set("badResult",false);});}}},keyDownHandler:function(J){var L=this,I=L.get("rootNode"),K=J.keyCode;J.stopPropagation();switch(K){case 13:if(J.ctrlKey||J.metaKey){return;}if(G.ACWidgetInst&&G.ACWidgetInst.isVisible()&&G.ACWidgetInst.get("data").length>0){G.ACWidgetInst.handleEnter(J,G.ACWidgetInst);}else{J.contactNode=I.one("div.ac-input input");if(J.contactNode.get("value")){L.get("widget").fire("searchByContact",J);}}J.halt();break;}},hideACHandler:function(I){I.preventDefault();if(G.ACWidgetInst&&!(G.one("div.ac-results:hover")||G.one("div.ac-results li.over"))){G.ACWidgetInst.hide();}},close:function(){var I=this;I.get("widget").close();}};G.namespace("mail.ui");G.mail.ui.AdvancedSearchController=F;},"1.0.0",{requires:["common-utils","mail-ui-advancedSearchView","plugin","ac-widget","filter-contacts","forms_css","autocomplete_css","_shared_module_offscreen_bin_compose","comms-utils"]});YUI.add("_shared_module_shell_navigation_search_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_shell_navigation_search_rollup={base:'<div class="search-nav {{global_refined_search}}"> {{folder_is_empty_else}} {{sender_refinements}} {{attachment_refinements}} {{date_refinements}} {{folder_refinements}} {{status_refinements}}</div>',global_refined_search:"search-narrowed",global_refined_search1:'<h2 class="search-title"><span>{{str_srch_refined_by}}</span></h2>',global_refined_search_else:'<h2 class="search-title"><span>{{str_srch_refinements}}</span></h2>',show_sender_profile:'<img src="{{refined_img_url}}" alt="{{refined_val}}"/> ',is_user:"{{show_sender_profile}} ",global_refined_by:'<div class="items-nav"><ul class="{{refined_type}} med"> <li class="{{refined_subtype}}"> <span class="btn lozenge left"><a href="#" title="{{title}}"><i> {{is_user}}{{refined_val}}</i><b></b></a></span><span class="btn lozenge lozengeremove right"><a href="{{url}}" title="{{str_srch_title_remove_refinement_attr}}" data-action="cancel-refinement">&nbsp;<b data-action="cancel-refinement"></b></a></span> </li></ul></div> ',global_refined_search2:'</div><div class="search-nav"> <h2 class="search-title"><span>{{str_srch_add_filters}}</span></h2> ',folder_is_empty_else:"{{global_refined_search1}} {{global_refined_search_else}} {{global_refined_by}} {{global_refined_search2}} ",global_refined_search_else1:"{{str_srch_refineby_sender}}",global_refined_search3:"{{str_srch_refineby_sender_details}}",show_sender_profile1:'<img src="{{url_img}}" alt="{{detail_attr}}" /> ',sender_details:'<li><a href="{{url}}" data-action="search-refine" title="{{detail_attr}}"><i> {{show_sender_profile1}} {{detail}}</i><span class="rht">{{count}}</span></a></li> ',has_sender_refinements:'<ul class="users med"> {{sender_details}} </ul> ',show_sender_profile2:'<img src="{{url_img}}" alt="{{detail_attr}}" /> ',sender_details_extra:'<li><a href="{{url}}" data-action="search-refine" title="{{detail_attr}}"><i> {{show_sender_profile2}} {{detail}}</i><span class="rht">{{count}}</span></a></li> ',has_sender_refinements_extra:'<div><span class="btn small left right"><a data-action="show-refinements" href="#" title="{{str_srch_view_all_sender_attr}}">{{str_srch_view_all}}</a></span></div> <ul class="users med hidden"> {{sender_details_extra}} </ul> <div class="hidden"><span class="btn small left right"><a data-action="hide-refinements" href="#" title="{{str_srch_view_less_sender_attr}}">{{str_srch_view_less}}</a></span></div> ',sender_refinements:'<div class="items items-nav expanded refine" data-action="collapsable"> <h2 class="legend"> <span class="label"> {{global_refined_search_else1}} {{global_refined_search3}} </span> </h2> {{has_sender_refinements}} {{has_sender_refinements_extra}}</div>',attachment_details:'<li class="{{file_type}}"><a href="{{url}}" data-action="search-refine" title="{{detail_attr}}"><i>{{detail}}</i><span class="rht">{{count}}</span></a></li> ',has_attachment_refinements:'<ul class="attachments"> {{attachment_details}} </ul> ',attachment_details_extra:'<li class="{{file_type}}"><a href="{{url}}" data-action="search-refine" title="{{detail_attr}}"><i>{{detail}}</i><span class="rht">{{count}}</span></a></li> ',has_attachment_refinements_extra:'<div><span class="btn small left right"><a data-action="show-refinements" href="#" title="{{str_srch_view_all_attachment_attr}}">{{str_srch_view_all}}</a></span></div> <ul class="hidden attachments"> {{attachment_details_extra}} </ul> <div class="hidden"><span class="btn small left right"><a data-action="hide-refinements" href="#" title="{{str_srch_view_less_attachment_attr}}">{{str_srch_view_less}}</a></span></div> ',attachment_refinements:'<div class="items items-nav expanded refine" data-action="collapsable"> <h2 class="legend"><span class="label">{{str_srch_refineby_attachment}}</span></h2> {{has_attachment_refinements}} {{has_attachment_refinements_extra}}</div>',date_details:'<li><a href="{{url}}" data-action="search-refine" title="{{detail_attr}}"><i>{{detail}}</i><span class="rht">{{count}}</span></a></li> ',has_date_refinements:'<h3 class="offscreen">{{str_srch_refineby_date}}</h3> <ul class="calendars"> {{date_details}} </ul> ',date_details_extra:'<li><a href="{{url}}" data-action="search-refine" title="{{detail_attr}}"><i>{{detail}}</i><span class="rht">{{count}}</span></a></li> ',has_date_refinements_extra:'<div><span class="btn small left right"><a data-action="show-refinements" href="#" title="{{str_srch_view_all_date_attr}}">{{str_srch_view_all}}</a></span></div> <ul class="calendars hidden"> {{date_details_extra}} </ul> <div class="hidden"><span class="btn small left right"><a data-action="hide-refinements" href="#" title="{{str_srch_view_less}}">{{str_srch_view_less}}</a></span></div> ',date_refinements:'<div class="items items-nav refine expanded" data-action="collapsable"> <h2 class="legend"><span class="label">{{str_srch_refineby_date}}</span></h2> {{has_date_refinements}} {{has_date_refinements_extra}} </div>',is_in:"in",is_chats:"chats",is_drafts:"drafts",is_folder:"folder",is_sent:"sent",is_trash:"trash",folder_details:'<li class="{{is_in}}{{is_chats}}{{is_drafts}}{{is_folder}}{{is_sent}}{{is_trash}}"> <a href="{{url}}" data-action="search-refine" title="{{detail_attr}}"><i>{{detail}}</i><span class="rht">{{count}}</span></a> </li> ',folder_refinements:'<div class="items items-nav expanded refine" data-action="collapsable"> <h2 class="legend"><span class="label">{{str_srch_refineby_folder}}</span></h2> <ul class="folders"> {{folder_details}} </ul></div>',is_flagged:"flagged",is_unread:"unread",is_replied:"replied",is_forwarded:"forwarded",status_details:'<li class="{{is_flagged}}{{is_unread}}{{is_replied}}{{is_forwarded}}"><a href="{{url}}" data-action="search-refine" title="{{detail_attr}}"><i>{{detail}}</i><span class="rht">{{count}}</span></a></li> ',status_refinements:'<div class="items items-nav expanded refine" data-action="collapsable"> <h2 class="legend"><span class="label">{{str_srch_refineby_status}}</span></h2> <ul class="status"> {{status_details}} </ul></div>'};
},"1.0.0");YUI.add("mail-ui-searchGroupsView",function(B){var H=B.common.Utils,K=B.mail.ui.common.StringUtils,D=H.escapeHtml,C=H.unescapeHtml,E=H.substitute,G=["month_abbr_january","month_abbr_february","month_abbr_march","month_abbr_april","month_abbr_may","month_abbr_june","month_abbr_july","month_abbr_august","month_abbr_september","month_abbr_october","month_abbr_november","month_abbr_december"],F=((NeoConfig.isFullSSL)?"https://s.yimg.com":"http://mail.yimg.com")+"/ok/u/assets/img/display-img/",I=["profile_16a.png","profile_16b.png","profile_16c.png","profile_16d.png","profile_16e.png"],J=[];var A=function(L){var N=this,M={rootNode:{writeOnce:true},template:{setter:function(O){N.TEMPLATE=B.ui.Templates._shared_module_shell_navigation_search_rollup;}},data:{}};B.augment(N,B.Attribute);N.addAttrs(M,L||{});B.augment(N,B.EventTarget);};A.prototype={TEMPLATE:B.ui.Templates._shared_module_shell_navigation_search_rollup,formatters:{global_refined_search:function(N,L,M){var O=M;return B.Object.size(N.refinedby)?E(O.TEMPLATE.global_refined_search,0):"";},folder_is_empty_else:function(O,L,M){var P=M,N={};if(B.Object.size(O.refinedby)){N.global_refined_search1=E(P.TEMPLATE.global_refined_search1,O,P.formatters,O,strings,null,P);N.global_refined_search2=E(P.TEMPLATE.global_refined_search2,O,P.formatters,O,strings,null,P);}else{N.global_refined_search_else=E(P.TEMPLATE.global_refined_search_else,O,P.formatters,O,strings,null,P);}return E(P.TEMPLATE.folder_is_empty_else,N,P.formatters,O,strings,null,P);},global_refined_by:function(P,L,N){var Q=N,P=L,M=[],O;if(!B.Object.size(P.refinedby)){return;}for(O in P.refinedby){if(Q.formatters["undo_"+O]){M.push(Q.formatters["undo_"+O].call(Q,L,L,Q));}}return M.join("");},count:function(N,L,M){return N.count;},undo_attachmenttype:function(P,M,N){var Q=N,L=D(C(P.refinedby.attachmenttype.type)),O={refined_type:"attachments",refined_subtype:P.refinedby.attachmenttype.icon,refined_val:L,title:E(strings["str_srch_undo_attachtype_attr"],{refineattachcat:L}),url:"#refiner=attachmenttype"};return E(Q.TEMPLATE.global_refined_by,O,Q.formatters,P,strings,null,Q);},undo_fnums:function(Q,N,O){var R=O,L={"Inbox":"in","Sent":"sent","@C@Chats":"chats","Trash":"trash","Draft":"drafts"},M=K.getSystemFolderName(encodeURIComponent(Q.refinedby.fnums[0]),D(C(Q.refinedby.fnums[0]))),P={refined_type:"folders",refined_subtype:L[Q.refinedby.fnums[0]]||"folder",refined_val:M,title:E(strings["str_srch_undo_folder_attr"],{folder:M}),url:"#refiner=folder"};return E(R.TEMPLATE.global_refined_by,P,R.formatters,Q,strings,null,R);},undo_from:function(P,M,N){var Q=N,L=D(C(P.refinedby.from)),O={refined_type:"users",refined_val:L,title:E(strings["str_srch_undo_sender_attr"],{recipient:L}),is_user:E(Q.TEMPLATE.is_user,{refined_img_url:F+I[Math.floor(Math.random()*5)]}),url:"#refiner=from"};return E(Q.TEMPLATE.global_refined_by,O,Q.formatters,P,strings,null,Q);},undo_date:function(Q,N,O){var R=O,M=Q.refinedby.date.month?"-"+strings["str_mail_"+G[Q.refinedby.date.month-1]]:"",L=D(Q.refinedby.date.year+M),P={refined_type:"calendars",refined_val:L,title:E(strings["str_srch_undo_date_attr"],{refinedate:L}),url:"#refiner=date"};return E(R.TEMPLATE.global_refined_by,P,R.formatters,Q,strings,null,R);},undo_flags:function(R,N,P){var S=P,M=R.refinedby.flags,Q,O=[];for(var L in M){Q={refined_type:"status",refined_subtype:L,refined_val:strings["str_srch_"+L],title:E(strings["str_srch_undo_flag_attr"],{refineflag:strings["str_srch_"+L]}),url:"#refiner=status&flags="+L};O.push(E(S.TEMPLATE.global_refined_by,Q,S.formatters,R,strings,null,S));}return O.join("");},sender_refinements:function(O,L,M){var P=M,N={};if(!O.grouplist.from||!O.grouplist.from.length||O.refinedby.from){return"";}if(O.query.from){N.global_refined_search3=E(P.TEMPLATE.global_refined_search3,O,P.formatters,O,strings,null,P);}else{N.global_refined_search_else1=E(P.TEMPLATE.global_refined_search_else1,O,P.formatters,O,strings,null,P);}N.has_sender_refinements=E(P.TEMPLATE.has_sender_refinements,O,P.formatters,O,strings,null,P);if(O.grouplist.from.length>5){N.has_sender_refinements_extra=E(P.TEMPLATE.has_sender_refinements_extra,O,P.formatters,O,strings,null,P);}return E(P.TEMPLATE.sender_refinements,N,P.formatters,O,strings,null,P);},sender_detail_utils:function(N,U,L){var S=L,Q,T=N.length,V=U.startIdx,W=U.template,P,O,R=[],X,M="";for(Q=0;Q<T;Q++){O=V?I[Math.floor(Math.random()*5)]:I[Q];X=D(C(N[Q].id));if(NeoConfig.isFresh){M="("+N[Q].count+")";}else{M=N[Q].count;}P={count:M,detail:X,detail_attr:E(strings["str_srch_sender_attr"],{recipient:X},0,0,0),url:"#refiner=from&index="+(Q+V),url_img:F+O};R.push(E(W,P,S.formatters,N,strings,null,S));}return R.join("");},sender_details:function(N,L,M){var O=M;return O.formatters.sender_detail_utils(N.grouplist.from.slice(0,5),{startIdx:0,template:O.TEMPLATE.sender_details},O);},sender_details_extra:function(N,L,M){var O=M;return O.formatters.sender_detail_utils(N.grouplist.from.slice(5),{startIdx:5,template:O.TEMPLATE.sender_details_extra},O);},show_sender_profile:function(N,L,M){var O=M;return NeoConfig.isFresh?"":E(O.TEMPLATE.show_sender_profile,N,O.formatters,N,strings,null,O);},show_sender_profile1:function(N,L,M){var O=M;return NeoConfig.isFresh?"":E(O.TEMPLATE.show_sender_profile2,N,O.formatters,N,strings,null,O);},show_sender_profile2:function(N,L,M){var O=M;return NeoConfig.isFresh?"":E(O.TEMPLATE.show_sender_profile2,N,O.formatters,N,strings,null,O);},attachment_refinements:function(O,L,M){var P=M,N={};if(!O.grouplist.attachmenttype||!O.grouplist.attachmenttype.length||O.refinedby.attachmenttype){return"";}N.has_attachment_refinements=E(P.TEMPLATE.has_attachment_refinements,O,P.formatters,O,strings,null,P);if(O.grouplist.attachmenttype.length>5){N.has_attachment_refinements_extra=E(P.TEMPLATE.has_attachment_refinements_extra,O,P.formatters,O,strings,null,P);}return E(P.TEMPLATE.attachment_refinements,N,P.formatters,O,strings,null,P);},attachment_detail_utils:function(N,U,L){var R=L,P,S=N.length,V=U.startIdx,W=U.template,O,Q=[],T,M="";
for(P=0;P<S;P++){T=D(C(N[P].type));if(NeoConfig.isFresh){M="("+N[P].count+")";}else{M=N[P].count;}O={count:M,detail:T,detail_attr:E(strings["str_srch_attachtype_attr"],{refineattachcat:T},0,0,0),url:"#refiner=attachmenttype&index="+(P+V),file_type:N[P].icon};Q.push(E(W,O,R.formatters,N,strings,null,R));}return Q.join("");},attachment_details:function(N,L,M){var O=M;return O.formatters.attachment_detail_utils(N.grouplist.attachmenttype.slice(0,5),{startIdx:0,template:O.TEMPLATE.attachment_details},O);},attachment_details_extra:function(N,L,M){var O=M;return O.formatters.attachment_detail_utils(N.grouplist.attachmenttype.slice(5),{startIdx:5,template:O.TEMPLATE.attachment_details_extra},O);},date_refinements:function(O,L,M){var P=M,N={};if(!O.grouplist.date||!O.grouplist.date.length||(O.refinedby.date&&O.refinedby.date.month)){return"";}N.has_date_refinements=E(P.TEMPLATE.has_date_refinements,O,P.formatters,O,strings,null,P);if(O.grouplist.date.length>5){N.has_date_refinements_extra=E(P.TEMPLATE.has_date_refinements_extra,O,P.formatters,O,strings,null,P);}N.expanded=E(P.TEMPLATE.expanded,0,0,0,strings);return E(P.TEMPLATE.date_refinements,N,P.formatters,O,strings,null,P);},date_detail_utils:function(N,T,L){var R=L,P,S=N.length,U=T.startIdx,W=T.template,O,Q=[],V,M="";for(P=0;P<S;P++){V=D(T.refinedby.date&&T.refinedby.date.year?strings["str_mail_"+G[N[P].id-1]]:N[P].id);if(NeoConfig.isFresh){M="("+N[P].count+")";}else{M=N[P].count;}O={count:M,detail:V,detail_attr:E(strings["str_srch_date_attr"],{refinedate:V},0,0,0),url:"#refiner=date&index="+(P+U)};Q.push(E(W,O,R.formatters,N,strings,null,R));}return Q.join("");},date_details:function(N,L,M){var O=M;return O.formatters.date_detail_utils(N.grouplist.date.slice(0,5),{startIdx:0,template:O.TEMPLATE.date_details,refinedby:N.refinedby},O);},date_details_extra:function(N,L,M){var O=M;return O.formatters.date_detail_utils(N.grouplist.date.slice(5),{startIdx:5,template:O.TEMPLATE.date_details_extra,refinedby:N.refinedby},O);},folder_refinements:function(N,L,M){var O=M;if(!N.grouplist.folder||!N.grouplist.folder.length||N.refinedby.fnums){return"";}return E(O.TEMPLATE.folder_refinements,N.grouplist.folder,O.formatters,N.grouplist.folder,strings,null,O);},folder_details:function(U,T,L){var R=L,P,S=U.length,O,Q=[],N,M="";for(P=0;P<S;P++){N=K.getSystemFolderName(encodeURIComponent(U[P].folder),D(C(U[P].folder)));if(NeoConfig.isFresh){M="("+U[P].count+")";}else{M=U[P].count;}O={count:M,detail:N,detail_attr:E(strings["str_srch_folder_attr"],{folder:N},0,0,0),url:"#refiner=folder&index="+P};switch(U[P].folder){case"Inbox":O["is_in"]="in";break;case"Sent":O["is_sent"]="sent";break;case"@C@Chats":O["is_chats"]="chats";break;case"Draft":O["is_drafts"]="drafts";break;case"Trash":O["is_trash"]="trash";break;default:O["is_folder"]="folder";break;}Q.push(E(R.TEMPLATE.folder_details,O,R.formatters,U,strings,null,R));}return Q.join("");},status_refinements:function(N,L,M){var O=M;if(!N.grouplist.flags||!N.grouplist.flags.length){return"";}return E(O.TEMPLATE.status_refinements,N.grouplist.flags,O.formatters,N.grouplist.flags,strings,null,O);},status_details:function(M,V,N){var T=N,R,U=M.length,Q,L,S=[],P,O="";for(R=0;R<U;R++){P=D(strings["str_srch_"+M[R].id]);if(NeoConfig.isFresh){O="("+M[R].count+")";}else{O=M[R].count;}Q={count:O,detail:P,detail_attr:E(strings["str_srch_flag_attr"],{refineflag:P},0,0,0),url:"#refiner=status&index="+R};switch(M[R].id){case"flagged":Q["is_flagged"]=E(T.TEMPLATE.is_flagged,0,0,0,strings);break;case"unread":Q["is_unread"]=E(T.TEMPLATE.is_unread,0,0,0,strings);break;case"replied":Q["is_replied"]=E(T.TEMPLATE.is_replied,0,0,0,strings);break;case"forwarded":Q["is_forwarded"]=E(T.TEMPLATE.is_forwarded,0,0,0,strings);break;}S.push(E(T.TEMPLATE.status_details,Q,T.formatters,M,strings,null,T));}return S.join("");}},render:function(){var O=this,M,L=O.get("rootNode"),N=O.get("data");if(NeoConfig.backButton&&(typeof window.history.state==="object")){if(!window.history.state||!window.history.state.id){window.history.pushState({id:"1"},document.title,window.location.pathname+window.location.search);}if(!window.location.hash.length){window.history.replaceState({id:"1"},document.title,"#mail");}}M=B.Node.create(E(O.TEMPLATE.base,N,O.formatters,N,strings,O.TEMPLATE,O));if(M.one(".search-nav")){M.all(".search-nav").each(function(P){P.addClass(NeoConfig.isFresh?"fresh":"nofresh");});}else{M.addClass(NeoConfig.isFresh?"fresh":"nofresh");}L.appendChild(M);if(NeoConfig.fullPage){B.Lang.later(0,null,function(){var P=L.one("div.search-nav").get("offsetHeight");if(P>L.get("offsetHeight")){L.setStyle("height",P);}});}O.bindUI();},bindUI:function(){var O=this,L=O.get("rootNode"),N=O.get("data"),M;for(M in J){B.detach(J[M]);}J=[];J.push(L.delegate("click",function(P){P.preventDefault();P.refinementNode=P.target;O.fire("toggleRefinement",P);},"div.search-nav h2.legend span",O));J.push(L.delegate("click",function(P){P.viewAllNode=P.target;P.preventDefault();O.fire("viewAllRefinement",P);},"div.search-nav span a",O));J.push(L.delegate("click",function(P){P.preventDefault();P.refineByNode=P.currentTarget;O.fire("refineBy",P);},"div.search-nav div.refine li a",O));J.push(L.delegate("click",function(P){P.preventDefault();P.undoRefinementNode=P.currentTarget;O.fire("undoRefinement",P);},"div.search-narrowed li a",O));},toggleRefinement:function(N){var L=N.refinementNode.ancestor("div.refine"),M="";if(L){M=L.one("ul");}N.preventDefault();N.stopPropagation();if(L&&M){L.toggleClass("collapsed");L.toggleClass("expanded");}},viewAllRefinement:function(N){var P=this,M=N.viewAllNode.ancestor("div.refine"),L=N.viewAllNode.get("parentNode"),O=N.viewAllNode.getAttribute("data-action");if(O=="show-refinements"){M.all(".hidden").replaceClass("hidden","_hide");L.get("parentNode").addClass("hidden _x");}if(O=="hide-refinements"){M.all("._hide").replaceClass("_hide","hidden");M.all(".hidden._x").removeClass("hidden _x");P.get("rootNode").set("scrollTop","0");}},show:function(){var M=this,L=M.get("rootNode");
L.all(".items").addClass("hidden");L.all("div.search-nav").removeClass("hidden");L.all("div.search-nav div.items").removeClass("hidden");},hide:function(){var M=this,L=M.get("rootNode");L.all(".items").removeClass("hidden");L.all("div.search-nav").addClass("hidden");},close:function(){var M=this,L=M.get("rootNode").all("div.search-nav");L&&L.remove();}};B.namespace("mail.ui");B.mail.ui.SearchGroupsView=A;},"1.0.0",{requires:["common-utils","_shared_module_shell_navigation_search_rollup","mail-ui-common-string-utils"]});YUI.add("mail-ui-searchGroupsController",function(D){var B=D.common.Utils,A=[];var C=function(E){var G=this,F={data:{},query:{},rootNode:{writeOnce:true,setter:function(){G.get("widget")&&G.get("widget").render();}},widget:{setter:function(H){G.get("rootNode")&&H.render();}}};D.augment(G,D.Attribute);G.addAttrs(F,E||{});D.augment(G,D.EventTarget);G.after("activeChange",G.afterActiveChangeHandler,G);};C.prototype={process:function(){var F=this,E;F.set("widget",new D.mail.ui.SearchGroupsView({rootNode:F.get("rootNode"),data:F.get("data")}));E=F.get("widget");E.on("toggleRefinement",F.toggleRefinementHandler,F);E.on("viewAllRefinement",F.viewAllRefinementHandler,F);E.on("refineBy",F.refineByHandler,F);E.on("undoRefinement",F.undoRefinementHandler,F);},toggleRefinementHandler:function(E){var F=this;F.get("widget").toggleRefinement(E);D.fire("mt:click",{action:"srch_tgl"});},viewAllRefinementHandler:function(E){var F=this;F.get("widget").viewAllRefinement(E);},refineByHandler:function(J){var K=this,G=B.parseQueryString(J.refineByNode.get("hash").substring(1)),H=K.get("data"),I=K.get("query"),E,F;switch(G.refiner){case"from":I.from=H.grouplist.from[G.index].id;break;case"attachmenttype":I.attachmenttypes=H.grouplist.attachmenttype[G.index].refineBy;break;case"date":F=parseInt(H.grouplist.date[G.index].id);if(F>0&&F<13&&I.date&&I.date.year){I.date.month=F;}else{I.date={year:F};}break;case"folder":I.fnums=[parseInt(H.grouplist.folder[G.index].id)];break;case"status":I.flags=I.flags||{};E=H.grouplist.flags[G.index].id;if(E=="unread"){I.flags.read=0;}else{I.flags[E]=1;}break;default:return;}D.fire("mt:click",{action:"srch_flt",append:{ltxt:G.refiner+":add"}});K.fire("doMailSearch",{query:I});},undoRefinementHandler:function(H){var I=this,E=B.parseQueryString(H.undoRefinementNode.get("hash").substring(1)),F=I.get("data"),G=I.get("query");switch(E.refiner){case"from":delete G.from;break;case"attachmenttype":delete G.attachmenttypes;break;case"date":if(G.date.month){delete G.date.month;delete G.date.day;}else{delete G.date;}break;case"folder":delete G.fnums;break;case"status":delete G.flags[(E.flags=="unread")?"read":E.flags];if(!D.Object.size(G.flags)){delete G.flags;}break;default:return;}D.fire("mt:click",{action:"srch_flt",append:{ltxt:E.refiner+":remove"}});I.fire("doMailSearch",{query:G});},afterActiveChangeHandler:function(E){var F=this;(E.newVal)?F.get("widget").show():F.get("widget").hide();},close:function(){var E=this;E.get("widget").close();}};D.namespace("mail.ui");D.mail.ui.SearchGroupsController=C;},"1.0.0",{requires:["common-utils","mail-ui-searchGroupsView"]});/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("lang/datatype-date-format_en-US",function(e){e.Intl.add("datatype-date-format","en-US",{a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a, %b %d, %Y %l:%M:%S %p %Z",p:["AM","PM"],P:["am","pm"],x:"%m/%d/%y",X:"%l:%M:%S %p"})},"3.7.2");
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("datatype-date-math",function(e,t){var n=e.Lang;e.mix(e.namespace("Date"),{isValidDate:function(e){return n.isDate(e)&&isFinite(e)&&e!="Invalid Date"&&!isNaN(e)&&e!=null?!0:!1},areEqual:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()==t.getTime()},isGreater:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()>t.getTime()},isGreaterOrEqual:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()>=t.getTime()},isInRange:function(e,t,n){return this.isGreaterOrEqual(e,t)&&this.isGreaterOrEqual(n,e)},addDays:function(e,t){return new Date(e.getTime()+864e5*t)},addMonths:function(e,t){var n=e.getFullYear(),r=e.getMonth()+t;n=Math.floor(n+r/12),r=(r%12+12)%12;var i=new Date(e.getTime());return i.setFullYear(n),i.setMonth(r),i},addYears:function(e,t){var n=e.getFullYear()+t,r=new Date(e.getTime());return r.setFullYear(n),r},listOfDatesInMonth:function(e){if(!this.isValidDate(e))return[];var t=this.daysInMonth(e),n=e.getFullYear(),r=e.getMonth(),i=[];for(var s=1;s<=t;s++)i.push(new Date(n,r,s,12,0,0));return i},daysInMonth:function(e){if(!this.isValidDate(e))return 0;var t=e.getMonth(),n=[31,28,31,30,31,30,31,31,30,31,30,31];if(t!=1)return n[t];var r=e.getFullYear();return r%400===0?29:r%100===0?28:r%4===0?29:28}}),e.namespace("DataType"),e.DataType.Date=e.Date},"3.7.2",{requires:["yui-base"]});
YUI.add("mail-ui-searchListView",function(C){var K=C.common.Utils,H=K.escapeHtml,E=K.unescapeHtml,I=K.substitute,D=C.common.persist.UserData,M=D.get("userUIPref.imageBlocking"),N=C.mail.ui.common.StringUtils,F=C.mail.ui.SearchBar,A=NeoConfig.bidi&&C.Intl.detectDirection,J=C.mail.ui.SearchUtils,G="userUIPref.msgListDensity",L;var B=function(O){var Q=this,P={rootNode:{writeOnce:true},fid:{setter:function(R){Q.fid=R||"%40S%40Search";}},template:{setter:function(R){Q.TEMPLATE=R;}},data:{},sortInfo:{getter:function(){return Q.get("controller").get("sortInfo");}},controller:{},page:{getter:function(){return Q.get("controller").get("page");}},pageCount:{getter:function(){return Q.get("controller").get("pageCount");}},view:{getter:function(){return Q.get("controller");}}};C.augment(Q,C.Attribute);Q.addAttrs(P,O||{});C.augment(Q,C.EventTarget);};B.prototype={NAME:"SearchList",TEMPLATE:C.ui.Templates._shared_module_search_rollup,highlightSearchTerm:function(O){var P=O.split("^_");if(strings.str_cfg_tog_snippet_highlight){for(j=1;j<P.length;j+=2){P[j]="<span class='found'>"+P[j]+"</span>";}}return P.join("");},formatters:{from:function(U,P,Q){var V=Q,T=strings.str_cfg_tog_show_contact_name&&C.contacts&&C.contacts.utils,R=U.from?U.from[0]:null,O=R?R.displayname:null,S;S=T?(R&&C.contacts.utils.getShownContactName({email:R.address}))||O:O;if(S&&A){S=(C.Intl.detectDirection(S)=="rtl"?"\u202B":"\u202A")+S+"\u202C";}return S?H(E(S)):"&nbsp;";},fromTitle:function(Q,O,P){return Q.from?(Q.from[0].address?Q.from[0].address:""):"";},from_header:function(Q,O,P){switch(P.fid){case"%40C%40Chats":return strings.str_msg_list_participant;case"Draft":case"Sent":return strings.str_msg_list_to;}return strings.str_msg_list_from;},with_me:function(Q,O,P){var R=P;if(!Q.to){return"";}return I(R.TEMPLATE.with_me_else,{recipient:H(E(Q.to[0].displayname||Q.to[0].address))},R.formatters,Q,strings,null,R);},folder:function(Q,O,P){var R=P;if(R.get("data").type=="search"){return N.getSystemFolderName(encodeURIComponent(Q.folder),H(E(Q.folder)));}},sender:function(Q,O,P){var R=P;return Q.from&&H(E(Q.from[0].displayname));},receivedDate:function(P){var O=P.date*1000;return C.common.Utils.dateFormatter(new Date(O),Neo.getDateFormat(O));},subject:function(Q,O,P){var R=P;if(Q.subject&&A){Q.subject=(C.Intl.detectDirection(Q.subject)=="rtl"?"\u202B":"\u202A")+Q.subject+"\u202C";}return Q.subject?R.highlightSearchTerm(H(E(Q.subject))):strings["str_msg-view_no_subject"];},size:function(O){return Math.ceil(O.size/1000);},flags1:function(P){var O="";if(!P.flags){return"";}if(P.flags.replied){O="replied";}else{if(P.flags.forwarded){O="forwarded";}else{if(!P.flags.read){O="unread";}}}return["info-",O].join("");},hasAttachment:function(Q,O,P){var R=P;return I((Q.attachments&&Q.attachments.length)?R.TEMPLATE.hasAttachment:R.TEMPLATE.hasAttachment_else,0,0,0,strings,null,R);},isFlagged2:function(Q,O,P){var R=P;return(Q.flags&&Q.flags.flagged)?"":I(R.TEMPLATE.isFlagged2,Q,R.formatters,Q,strings,null,R);},isFlagged_else1:function(Q,O,P){var R=P;return(Q.flags&&Q.flags.flagged)?I(R.TEMPLATE.isFlagged_else1,Q,R.formatters,Q,strings,null,R):"";},inboxservices:function(T,P,R){var U=R,S=T.srvmap,O,Q;if(!S){O=T.inboxservices||[];T.srvmap=S={};for(Q=O.length-1;Q>=0;Q--){S[O[Q].name]=O[Q].value;}}return(S.cg_siu||T.msgicon)?I(U.TEMPLATE.inboxservices,T,U.formatters,T,null,null,U):"";},msgicon:function(P){var O=P.srvmap;return O&&O.cg_siu?O.cg_siu:P.msgicon;},is_flagged:function(O){return O.flags?[(O.flags.read?"":" unread "),(O.flags.flagged?" flagged ":"")].join(""):"";},hellip:function(){return strings.str_tog_snippet_hellip?"&hellip;":"";},snippet:function(Q,O,P){var R=P;return(Q.snippet)?R.highlightSearchTerm(H(E(Q.snippet))):"";},is_selected:function(O){return(O.selected=="checked")?"selected":"";},is_deleted:function(Q,O,P){return(Q.fid==="Trash"&&P.get("data").type=="search")?"deleted":"";},is_flagged1:function(Q,O,P){var R=P;return(Q.flags&&Q.flags.flagged)?I(R.TEMPLATE.is_flagged1,Q,R.formatters,Q,strings,null,R):"";},is_flagged_else:function(Q,O,P){var R=P;return(Q.flags&&Q.flags.flagged)?"":I(R.TEMPLATE.is_flagged_else,Q,R.formatters,Q,strings,null,R);},attachment_previews:function(Q,W,P){var V=P,X=[],U,O,R;if(V.get("data").type=="list"){return"";}if(Q.attachments){for(var T=0,S=Q.attachments.length;T<S;T++){U="image";R=Q.attachments[T].thumbnailurl;if(M!=0){U="img";}if(/image/.test(Q.attachments[T].type)==false){O=Q.attachments[T].name;U=C.mail.ui.AttachFileType.getType(O);}if(NeoConfig.isFullSSL&&R){Q.attachments[T].thumbnailurl=R.replace("http:","https:");}X.push(I(V.TEMPLATE.attachment_previews,{image_url:Q.attachments[T].thumbnailurl,attachment_type:U},V.formatters,Q,null,null,V));}return X.join("");}},contains_attachment1:function(Q,O,P){var R=P;if(Q.attachments){return I(R.TEMPLATE.contains_attachment1,Q,R.formatters,Q,null,null,R);}},search_msg_list:function(Q,U,O){var T=O,W=Q.list||[],V=W.length,S=T.TEMPLATE.search_msg_list,R=0,P=[];for(;R<V;R++){W[R]&&P.push(I(T.TEMPLATE.search_msg_list,W[R],T.formatters,W[R],strings,null,T));}return P.join("");},single_search_result:function(Q,O,P){var R=P;if(Q.serverTotal>1){return"";}return I(R.TEMPLATE.single_search_result,{search_results_count:Q.serverTotal},0,0,strings,null,R);},searchView:function(Q,O,P){var R=P;if(R.get("data").type=="search"){return I(R.TEMPLATE.searchView,Q,R.formatters,Q,strings,null,R);}return"";},searchView1:function(Q,O,P){var R=P;if(R.get("data").type=="search"){return I(R.TEMPLATE.searchView1,Q,R.formatters,Q,strings,null,R);}return"";},multiple_search_result:function(Q,O,P){var R=P;if(Q.serverTotal===1){return"";}return I(R.TEMPLATE.multiple_search_result,{search_results_count:Q.serverTotal},0,0,strings,null,R);},has_pagination:function(Q,O,P){return J.getPaginationControls(Q,P.TEMPLATE);},message_list_density:function(Q,O,P){return["ml-regular","ml-compact","ml-open"][D.get(G)||0];},inbox:function(Q,O,P){if(P.get("data").type=="list"){return"inbox";}}},render:function(){var V=this,O=V.get("rootNode"),R=O.all(".content"),S=V.get("data"),T,U,P,Q;
if(!S.rendered){R&&R.remove();U=V.get("sortInfo").action.toUpperCase();switch(U){case"SUBJECT":S.sorted_by=strings.str_msg_list_subject;break;case"SENDER":S.sorted_by=strings.str_menu_sort_sender_up;break;case"ATTACHMENTS":S.sorted_by=strings.str_menu_sort_attachment_up;break;case"DATE":default:S.sorted_by=strings.str_msg_list_date;}O.appendChild(C.Node.create(I(V.TEMPLATE.base,S,V.formatters,S,strings,V.TEMPLATE,V)));R=O.one(".result.content");R.setStyle("overflow","hidden");}O.one(".alert")&&O.one(".alert").delegate("click",function(W){W.preventDefault();V.fire("toggleSearchViewClick",W);},"#btn-toggle-searchview",V);Q=O.one(".list-header");C.Array.each(["unRead","folder","flagged"],function(X){var W;W=Q.one('[data-action="'+X+'"]');if(W){W.setStyle("cursor","default");W.set("title","");}});Q.one("input").set("checked",S.selectAll);Q.delegate("click",function(W){W.listHeaderNode=W.currentTarget;V.fire("listHeaderClick",W);},"div.col-hd",V);Q.delegate("click",function(W){W.listHeaderSelectNode=W.currentTarget;V.fire("listHeaderSelectClick",W);W.stopPropagation();},".cbox input",V);P=O.one("div.list-view-items");P.set("unselectable","on");P.addClass("unselectable");if(NeoConfig.fullPage){R.addClass("inbox");}P.on("scroll",function(W){T&&T.cancel();T=C.Lang.later(500,V,function(){W.scrollNode=W.currentTarget;V.fire("scrollEnd",W);});});if(strings.str_cfg_tog_open_by_dblclick||V.get("data").type=="list"){P.delegate("dblclick",function(W){if(W.target.get("nodeName").toLowerCase()!=="a"){W.listItemsNode=W.currentTarget;W.listItemsTarget=W.target;V.fire("listItemsClick",W);}},"div.list-view-item",V);}P.delegate("click",function(X){var Y=X.target.get("nodeName");if(X.target.get("nodeName").toLowerCase()==="a"){X.preventDefault();X.listItemsMoreNode=X.currentTarget;X.listItemsMoreTarget=X.target;V.fire("listItemsMoreClick",X);}else{if(X.target.hasClass("cbox")||X.target.get("parentNode").hasClass("cbox")){var W=X.target.ancestor(".list-view-item").one("input");X.listItemsSelectNode=W;V.fire("listItemsSelect",X);X.stopPropagation();}else{X.listItemsNode=X.currentTarget;X.listItemsTarget=X.target;V.fire("listItemsClick",X);}}},"div.list-view-item",V);P.delegate("mousedown",function(X){var W=(X.target.getAttribute("class")=="flag"||X.target.getAttribute("class")=="icon delete-msg"||X.target.hasClass("cbox")||X.target.get("parentNode").hasClass("cbox"));if(W){X.halt();return;}if(!X.currentTarget.one("input").get("checked")){V.fire("unselectAllList");}X.currentTarget.one("input").set("checked",true);X.listItemsSelectNode=X.currentTarget.one("input");V.fire("listItemsSelect",X);},"div.list-view-item",V);P.delegate("keydown",function(W){if(W.keyCode==77){C.fire("checkmail:pressed",W.shiftKey);}},"div.list-view-item",V);P.delegate("contextmenu",function(W){W.preventDefault();W.listItemsNode=W.currentTarget;W.listItemsTarget=W.target;V.fire("listItemsContextMenu",W);},"div.list-view-item",V);if(NeoConfig.isFresh){Q.delegate("click",function(Z){var Y=Z.target,W=K.getDataAction(Z),a=C.mail.ui.ListViewControls,X=V.get("template");switch(W.action){case"menu":if(!V.sortMenu){V.sortMenu=new a(W.node,V,"sortoptions");}Z.preventDefault();V.sortMenu.setup(X);break;case"select-dd":if(!V.selectMenu){V.selectMenu=new a(W.node,V,"selectoptions");}Z.preventDefault();V.selectMenu.setup(X);break;}},'.sortby, span[data-action="select-dd"]',V);if(!V.paginationCntrls){V.paginationCntrls=new C.mail.ui.ListViewControls(O.one(".pagination"),V,"pagination");V.paginationCntrls.setup(V.get("template"));}if(NeoConfig.fullPage){if(!V.pageFooterCntrls){V.pageFooterCntrls=new C.mail.ui.ListViewControls(O.one(".pagination-footer"),V,"pageFooter");V.pageFooterCntrls.setup(V.get("template"));}}}V.fire("renderComplete");},updateSortLabel:function(O){var P=this;P.sortMenu.updateSortMenuLabel(O);},setFocus:function(){var Q=this,O=Q.get("rootNode"),P=O.one("#btn-toggle-searchview a");P&&P.focus();},setFocusNode:function(R,Q,S,V){var U=this,P=U.get("rootNode"),T=P.one('div.list-view-items div.list-view-item[data-key="'+R+'"]'),O=T.one("input[type=checkbox]");!S&&O.set("checked",true);T.addClass("selected");L&&L.cancel();L=C.Lang.later(70,null,function(){!V&&O.focus();});U.fire("itemFocus",{focus:1,node:T});},clearFocusNode:function(P){var R=this,O=R.get("rootNode"),Q=O.one('div.list-view-items div.list-view-item[data-key="'+P+'"]');Q.one("input[type=checkbox]").set("checked",false);Q.removeClass("selected");R.fire("itemFocus",{focus:0,node:Q});},appendItems:function(P){var Q=this,O=Q.get("rootNode");O.one("div.list-view-items").append(Q.formatters.search_msg_list(P,P,Q));},pruneItems:function(){var P=this,O=P.get("rootNode").one("div.list-view-items");if(O){O.set("innerHTML","");}},updateItemSubject:function(P,Q,R){var T=this,O=T.get("rootNode"),S=O.one('div.list-view-items div[data-key="'+P+'"] '+(R?".subj":".nssubj"));if(S){S.set("innerHTML",T.highlightSearchTerm(H(E(Q.subject))));}},updateItemFolder:function(P,Q){var S=this,O=S.get("rootNode"),R=O.one('div.list-view-items div[data-key="'+P+'"] a[data-action="refineby-folder"]');if(R){R.set("innerHTML",I(strings.str_srch_folder,{folder:S.formatters.folder(Q,null,S)},0,0,0));}else{R=O.one('div.list-view-items div[data-key="'+P+'"] div.'+(NeoConfig.isFresh?"fldr":"nsfldr")+" span");R&&R.set("innerHTML",S.formatters.folder(Q,null,S));}},updateTitle:function(Q){var R=this,O=R.get("rootNode"),P=O.one("div.alert p");P&&P.set("innerHTML",R.formatters.single_search_result(Q,Q,R)||R.formatters.multiple_search_result(Q,Q,R));},selectItem:function(P,Q){var S=this,O=S.get("rootNode"),R=O.one('div.list-view-items div[data-key="'+P+'"]');R.one("input[type=checkbox]").set("checked",Q);Q?R.addClass("selected"):R.removeClass("selected");},selectItems:function(P){var R=this,O=R.get("rootNode"),Q=O.one("div.list-header input");if(Q){Q.set("checked",P);O.all("div.list-view-items div.list-view-item").each(function(S){S.one("input[type=checkbox]").set("checked",P);P?S.addClass("selected"):S.removeClass("selected");
});}},getItem:function(P){var Q=this,O=Q.get("rootNode");return O.one('div.list-view-items div[data-key="'+P+'"]');},removeItem:function(Q){var R=this,P=R.get("rootNode"),O=P.one('div.list-view-items div[data-key="'+Q+'"]');O&&O.remove().destroy(true);},addItemClass:function(P,Q){var S=this,O=S.get("rootNode"),R=O.one('div.list-view-items div[data-key="'+P+'"]');R&&R.addClass(Q);(Q=="flagged")&&R&&R.one(".flag").set("title",strings.str_msg_list_flagged_attr);},removeItemClass:function(P,Q){var S=this,O=S.get("rootNode"),R=O.one('div.list-view-items div[data-key="'+P+'"]');R&&R.removeClass(Q);(Q=="flagged")&&R&&R.one(".flag").set("title",strings.str_msg_list_flag_attr);},setStatus:function(O){var R=this,P=R.get("rootNode"),Q=P.one("div.list-view-items");Q.addClass("loading");if(NeoConfig.fullPage){Q.setStyles({height:(parseInt(C.one("#shellnavigation").getStyle("height"),0)-parseInt(P.one("div.pagination").getStyle("height"),0)-parseInt(P.one("div.alert")?P.one("div.alert").getStyle("height"):0,0)-parseInt(P.one("div.list-header").getStyle("height"),0))+"px"});}},clearStatus:function(){var P=this,O=P.get("rootNode");itemsNode=O.one("div.list-view-items");itemsNode.removeClass("loading");itemsNode.setStyles({height:"auto"});},setLoadingStatus:function(){var Q=this,O=Q.get("rootNode"),P=O.one("div.list-view-items");!NeoConfig.pagedResults&&!P.one("div.items-loading")&&P.append(C.Node.create('<div class="items-loading" style="background-color:white;">  <h3 class="loading" style="margin:0 0 0 45%">'+strings["str_om_loading"]+"</h3> </div>"));},clearLoadingStatus:function(){var Q=this,P=Q.get("rootNode"),O=P.one("div.items-loading");O&&O.remove().destroy(true);},close:function(){var P=this,O=P.get("rootNode").all("div.content.result");O&&O.remove();}};C.namespace("mail.ui");C.mail.ui.SearchListView=B;},"1.0.0",{requires:["stylesheet","search_css","datatype-date","mail-controller-folders","mail-controller-messages","mail-ui-common-string-utils","attachments_css","mail-ui-attachment-filetype","mail-ui-searchutils"]});YUI.add("mail-ui-searchListController",function(E){var B=E.common.Utils,D=E.mail.ui.SearchUtils,A=[];var C=function(F){var H=this,G={fid:{setter:function(I){H.fid=I||"%40S%40Search";}},listMgr:{setter:function(I){H.listMgr=I;}},makeRequest:{setter:function(I){H.makeRequest=I;}},freezed:{setter:function(I){H.freezed=I;},getter:function(){return(H.freezed)?true:false;},validator:function(I){return(H.freezed!==I);}},rootNode:{writeOnce:true,setter:function(){H.get("widget")&&H.get("widget").render();}},widget:{setter:function(I){H.get("rootNode")&&I.render();}},isSnippet:{},focusNode:{},firstSelectedMid:{},data:{},query:{},sortInfo:{getter:function(){var I=H.listMgr.getSortInfo(),K={"from":"sender","attachmentcount":"attachment"},J=K[I.sortKey]||I.sortKey;return{action:J,sortOrder:I.sortOrder};}},page:{getter:function(){var I=H.listMgr.getCacheInfo().cacheIndex;return H.listMgr.getCacheInfo().cacheIndex;}},pageCount:{getter:function(){var I=H.listMgr.getCacheInfo();return Math.ceil(I.serverTotal/I.cacheSize);}}};E.augment(H,E.Attribute);H.addAttrs(G,F||{});E.augment(H,E.EventTarget);H.after("activeChange",H.afterActiveChangeHandler,H);};C.prototype={process:function(){var L=this,F=new Date(),N=F.getTime(),I=F.setHours(23,59,59,999),M=I-N+1,H=L.get("data"),G=L.get("isSnippet"),O=NeoConfig.isFresh?(G?"_shared_module_search_refresh_rollup":"_shared_module_search_non_snippet_refresh_rollup"):(G?"_shared_module_search_rollup":"_shared_module_search_non_snippet_rollup"),P=L.listMgr.getSortInfo(),K=L.listMgr.getSelectedItems(),J;E.mix(H,{selectAll:K.all&&K.allCacheSelected,sortby_sender:"",sortorder_sender_desc:"",sortby_subject:"",sortorder_subject_desc:"",sortby_fldr:"",sortorder_fldr_desc:"",sortby_date:"",sortorder_date_desc:"",sortby_flag:"",sortorder_flagged_desc:""},true);H["sortby_"+P.sortKey]="sortby";H["sortorder_"+P.sortKey+"_desc"]=(P.sortOrder==="down")?"desc":"asc";L.set("widget",new E.mail.ui.SearchListView({rootNode:L.get("rootNode"),template:E.ui.Templates[O],data:H,fid:L.get("fid"),controller:L}));J=L.get("widget");J.on("scrollEnd",L.scrollHandler,L);J.on("listHeaderClick",L.listHeaderClickHandler,L);J.on("listHeaderSelectClick",L.listHeaderSelectClickHandler,L);J.on("listItemsSelect",L.listItemsSelectHandler,L);J.on("listItemsClick",L.listItemsClickHandler,L);J.on("listItemsMoreClick",L.listItemsMoreClickHandler,L);J.on("listItemsContextMenu",L.listItemsContextMenuHandler,L);J.on("unselectAllList",L.unselectAllList,L);J.on("itemFocus",L.focusNodeHandler,L);J.on("pageAction",L.pageActionHandler,L);J.on("sortList",L.sortList,L);J.on("selectMessages",L.selectFilter,L);J.on("toggleSearchViewClick",function(Q){L.fire("toggleSearchView");},L);if(NeoConfig.pagedResults){J.on("paginationClick",L.actionHandler,L);}J.setFocus();if(!NeoConfig.pagedResults){L.appendPageData(L.listMgr.getNextPage());}if(NeoConfig.usingSearch){L.dateResetHandle=E.Lang.later(M,L,L.resetDates);}},resetDates:function(){var J=this,H=new Date(),I=H.getTime(),G=H.setHours(23,59,59,999),F=G-I+1;J.dateResetHandle.cancel();J.dateResetHandle=E.Lang.later(F,J,J.resetDates);J.refresh();},refresh:function(){var J=this,H=J.get("widget"),I,F,G=J.listMgr.getCurrentPage();H.pruneItems();H.setStatus(strings.str_msg_list_loading);I={query:J.get("query"),startMid:G.cacheIndex+1};F=function(M){var K=M.response,L;J.listMgr.store(K);L=J.listMgr.getCurrentPage();J.appendPageData(L);};if(typeof J.get("data").type=="undefined"){J.makeRequest("search",I,F);}else{J.makeRequest("list",I);}},appendPageData:function(G){var J=this,I,F,H;if(G.list.length===0&&G.cacheIndex*G.cacheSize<G.serverTotal){I={query:J.get("query"),startMid:G.serverIndex};F=function(L){var K=L.response;if(L.response){J.listMgr.store(K);J.appendItems(J.listMgr.getCurrentPage());}};if(J.get("data").type=="search"){J.makeRequest("search",I,F);}else{J.makeRequest("list",I);}}else{if(G.list.length){J.appendItems(G);}else{if(G.list.length===0&&G.serverTotal&&NeoConfig.pagedResults){J.appendItems(J.listMgr.getPrevPage());}}}},appendItems:function(I){var K=this,G=K.get("rootNode"),J=G.one(".list-view-items"),H=K.get("widget"),F=K.listMgr.getCacheInfo();H.clearStatus();H.clearLoadingStatus();K.get("widget").appendItems(I);if(NeoConfig.pagedResults){K.fire("updatePagination",{pageData:I});}else{((F.cacheIndex+1)*F.cacheSize<F.serverTotal)&&K.get("widget").setLoadingStatus();if(J.get("offsetHeight")*1.1>J.get("scrollHeight")){K.appendPageData(K.listMgr.getNextPage());}}K.set("freezed",false);},setFocusNode:function(G,F,H,J){var I=this;I.get("widget").setFocusNode(G,F,H,J);},selectItems:function(F){var G=this;G.get("widget").selectItems(F);},selectItem:function(F,G){var H=this;H.get("widget").selectItem(F,G);},selectItemRange:function(F,M){var K=this,J=K.get("widget"),O=K.listMgr.getSelectedItems(),H,N,I,G,L;if(O.total){for(N in O.hash){H=K.listMgr.getItemIndex(N);if((H<F&&H<M)||(H>F&&H>M)){K.selectItem(K.listMgr.generateKey(N),false);}}K.listMgr.selectAll(false);}if(F>M){for(I=F;I>=M;I--){G=K.listMgr.getItemFromIndex(I);if(!O.hash[K.listMgr.generateKey(G.mid)]){L=K.listMgr.select(G.mid,true);K.setFocusNode(K.listMgr.generateKey(G.mid));}}}else{if(F<M){for(I=F;I<=M;I++){G=K.listMgr.getItemFromIndex(I);if(!O.hash[K.listMgr.generateKey(G.mid)]){L=K.listMgr.select(G.mid,true);K.setFocusNode(K.listMgr.generateKey(G.mid));}}}else{G=K.listMgr.getItemFromIndex(M);L=K.listMgr.select(G.mid,true);K.setFocusNode(K.listMgr.generateKey(G.mid));}}},selectFilter:function(L){var M=this,N=M.listMgr,F=N.generateKey,O=N.select,H=N.getCurrentPage(),S=N.getSelectedItems(),G=L.action,I;var Q={"Read":"read","Flagged":"flagged","unRead":"read","unFlagged":"flagged"};switch(G){case"all":N.selectPage(true);M.selectItems(true);break;case"none":N.selectPage(false);M.selectItems(false);break;default:N.selectAll(false);M.selectItems(false);for(var K=0,J=H.list.length;K<J;K++){var R=H.list[K],P;if(R){P=R.mid;if(G=="Read"||G=="Flagged"){I=R.flags[Q[G]]==1?true:false;}else{if(G=="unRead"||G=="unFlagged"){I=R.flags[Q[G]]?false:true;
}}R&&O(F(P),I);M.selectItem(F(P),I);}}break;}},removeItem:function(G){var H=this,F=H.get("focusNode")&&H.get("focusNode").getAttribute("data-key");H.get("widget").removeItem(G);F==G&&H.set("focusNode",null);},pruneItems:function(F){var G=this;G.get("widget").pruneItems(F);},setStatus:function(F){var G=this;G.get("widget").setStatus(F);},clearLoadingStatus:function(){var F=this;F.get("widget").clearLoadingStatus();},updateTitle:function(F){var G=this;G.get("widget").updateTitle(F);},isChat:function(I){var H,F=this.listMgr.getSelectedItems().hash,G=["addcontact","delete","open","print","fullheader","flagged","unflagged","select-all","next-page","previous-page","previous","next","home","end"];if(E.Array.indexOf(G,I)>=0){return false;}for(H in F){if(F[H].fid=="%40C%40Chats"){return true;}}return false;},updateItemSubject:function(F,G){var H=this;H.get("widget").updateItemSubject(F,G,H.get("isSnippet"));},updateItemFolder:function(F,G){var H=this;H.get("widget").updateItemFolder(F,G);},updateItemClass:function(G,H){var I=this,F;switch(H){case"Trash-move":F="deleted";break;case"flagged":case"isFlagged-1":F="flagged";break;case"unread":case"isRead-0":F="unread";break;}if(F){I.get("widget").addItemClass(I.listMgr.generateKey(G),F);return;}switch(H){case"move":F="deleted";break;case"unflagged":case"isFlagged-0":F="flagged";break;case"read":case"isRead-1":F="unread";break;default:return;}I.get("widget").removeItemClass(I.listMgr.generateKey(G),F);},scrollHandler:function(H){var J=this,G=H.scrollNode||H.currentTarget,I=((G.get("scrollTop")+G.get("offsetHeight"))/G.get("scrollHeight"))*100,F;if(J.get("freezed")||NeoConfig.pagedResults){return;}if(I>65){J.set("freezed",true);F=J.listMgr.getNextPage();J.appendPageData(F);}},sortList:function(J){var L=this,Q=L.listMgr.getSortInfo(),F={},I=J.sortType,N=J.targetNode,O=J.currentSortedColumn,K=L.get("widget"),M=L.get("rootNode").one("div.list-header input"),H,P;if(L.get("data").type=="search"&&E.Array.indexOf(["unRead","folder","flagged"],I)!==-1){return;}I=(I==="sender")?"from":I;I=(I==="attachment")?"attachmentcount":I;L.set("freezed",true);L.set("focusNode",null);L.set("firstSelectedMid",null);L.listMgr.selectAll(false);M&&M.set("checked",false);K.pruneItems();K.setStatus(strings.str_msg_list_sorting);if(I!==Q.sortKey){O&&O.removeClass("sortby "+((Q.sortOrder==="down")?"desc":"asc"));if(I==="date"||I==="attachmentcount"){N.addClass("sortby desc");F.sortOrder="down";}else{N.addClass("sortby asc");F.sortOrder="up";}F.sortKey=I;}else{F.sortKey=I;if(Q.sortOrder==="down"){N.removeClass("desc");N.addClass("asc");F.sortOrder="up";}else{N.removeClass("asc");N.addClass("desc");F.sortOrder="down";}}if(NeoConfig.isFresh){L.get("widget").updateSortLabel(J.sortType);}if(!L.listMgr.sort(F)){H={query:L.get("query")};P=function(T){var R=T.response,S;L.listMgr.store(R);S=L.listMgr.getCurrentPage();L.appendPageData(S);};if(L.get("data").type=="search"){L.makeRequest("search",H,P);}else{L.makeRequest("list",H);}}else{var G=L.listMgr.getCurrentPage();L.appendPageData(G);}},listHeaderClickHandler:function(H){var J=this,G=H.listHeaderNode||H.currentTarget,I=G.getAttribute("data-action"),F=G.ancestor("div.list-header").one("div.sortby");J.sortList({sortType:I,targetNode:G,currentSortedColumn:F});},listHeaderSelectClickHandler:function(G){var H=this,F=G.listHeaderSelectNode.get("checked");NeoConfig.pagedResults?H.listMgr.selectPage(F):H.listMgr.selectAll(F);H.selectItems(F);},unselectAllList:function(){var F=this;NeoConfig.pagedResults?F.listMgr.selectPage(false):F.listMgr.selectAll(false);F.selectItems(false);},listItemsSelectHandler:function(L){var M=this,I,F=M.get("rootNode"),K=L.listItemsSelectNode||L.currentTarget,H=M.get("widget"),G=K.ancestor("div.list-view-item").getAttribute("data-key"),J=F.one("div.list-header input");I=M.listMgr.select(G,K.get("checked"));F.all("div.list-view-item.selected").each(function(N){if(!N.one("input[type=checkbox]").get("checked")){N.removeClass("selected");M.listMgr.select(N.getAttribute("data-key"),false);}});if(!L.shiftKey||!M.get("firstSelectedMid")){M.set("firstSelectedMid",(I.total)?G:null);}if(I.all&&I.allCacheSelected){J&&J.set("checked",true);M.setFocusNode(M.listMgr.generateKey(G));}else{if(!K.get("checked")){F.one("div.list-header input").set("checked",false);}else{M.setFocusNode(M.listMgr.generateKey(G));}}if(L.shiftKey&&M.get("firstSelectedMid")){M.selectItemRange(M.listMgr.getItemIndex(M.get("firstSelectedMid")),M.listMgr.getItemIndex(G));}},listItemsClickHandler:function(O){var N=this,I=N.get("rootNode"),P=I?I.one("div.list-header input"):null,H=O.listItemsNode||O.currentTarget,Q=O.listItemsTarget||O.target,G=Q.get("type"),J,F=H.getAttribute("data-key"),L,K;if(Q.hasClass("flag")||Q.hasClass("btn-flag")){L={fid:N.get("fid"),selectedItems:{hash:[N.listMgr.getItem(F)],total:1,singleOp:1}};K=H.hasClass("flagged")?"unflagged":"flagged";N.fire("messageAction",{action:K,params:L});N.ultFlag((K=="flagged"?"flag":"unflag"));return;}if(Q.hasClass("delete-msg")){L={fid:N.get("fid"),selectedItems:{hash:[N.listMgr.getItem(F)],total:1,singleOp:1}};N.fire("messageAction",{action:"delete",params:L});return;}N.set("focusNode",H);if(G==="checkbox"){H.removeClass("selected");if(Q.get("checked")){H.addClass("selected");N.listMgr.select(F,Q.get("checked"));var R=N.listMgr.getSelectedItems();if(R.allSelected&&R.allCacheSelected){P&&P.set("checked",true);}else{P&&P.set("checked",false);}}return;}if(!O.shiftKey&&(Q.hasClass("cbox")||Q.hasClass("info"))){var M=H.one("input[type=checkbox]");if(M.get("checked")){M.set("checked",false);H.removeClass("selected");N.listMgr.select(F,M.get("checked"));}else{M.set("checked",true);H.addClass("selected");N.listMgr.select(F,M.get("checked"));}return;}I.all("div.list-view-item.selected").each(function(T){T.removeClass("selected");if(T===H){return;}T.one("input[type=checkbox]").set("checked",false);N.get("rootNode").one("div.list-header input").set("checked",false);N.listMgr.select(F,false);});N.listMgr.selectAll(false);
!H.hasClass("selected")&&H.addClass("selected");N.listMgr.select(H.getAttribute("data-key"),true);J=N.listMgr.getItem(F);if(!O.shiftKey){N.set("firstSelectedMid",F);}if(O.shiftKey&&N.get("firstSelectedMid")){N.selectItemRange(N.listMgr.getItemIndex(N.get("firstSelectedMid")),N.listMgr.getItemIndex(F));}else{if(!O.ctrlKey){var S=H.one("input[type=checkbox]");if(S.get("checked")){S.set("checked",false);}if(!strings.str_cfg_tog_open_by_dblclick||O.type==="dblclick"){N.ultOpen();N.fire("messageAction",{action:(NeoConfig.pageMode==0&&O.type=="click"&&N.get("data").type=="list")?"openInPane":"open",params:{selectedItems:N.listMgr.getSelectedItems(),msg:J,fid:(J&&J.fid)||N.get("fid")}});}}}},listItemsMoreClickHandler:function(K){var J=this,G=J.get("rootNode"),L=K.listItemsMoreTarget||K.target,F=K.listItemsMoreNode||K.currentTarget,H={},I=J.get("widget"),N,M=E.mix({},J.get("query"));N=J.listMgr.getItem(F.getAttribute("data-key"));switch(L.getAttribute("data-action")){case"refineby-recipient":if(M.from||/ from:/.test(M.keyword)||/^from:/.test(M.keyword)){D.showAlert("MultiFromRefinement");return;}else{M.from=N.to[0].displayname||N.to[0].address;}break;case"refineby-sender":H.keyword=" ";H.from=N.from[0].displayname||N.from[0].address;break;case"refineby-folder":if(M.fnums||/ folder:/.test(M.keyword)||/^folder:/.test(M.keyword)){D.showAlert("MultiFolderRefinement");return;}else{M.fnums=[N.fnum];}break;default:break;}J.fire("doMailSearch",{query:(H.keyword)?H:M});},listItemsContextMenuHandler:function(L){var K=this,I=L.listItemsNode||L.currentTarget,G=I.getAttribute("data-key"),J=K.get("widget"),F=K.get("rootNode"),N=I.one("input[type=checkbox]"),M,H;if(!N.get("checked")){F.all("div.list-view-item.selected").each(function(O){O.one("input[type=checkbox]").set("checked",false);O.removeClass("selected");K.listMgr.select(O.getAttribute("data-key"),false);});K.listMgr.selectAll(false);K.set("firstSelectedMid",G);N.set("checked",true);}K.setFocusNode(K.listMgr.generateKey(G),false,true,true);M=K.listMgr.select(G,true);if(M.total==1){H=M.hash[G].sourceFolderInfo.fid;}else{H=K.fid;}E.use("mail-ui-inboxmenu-base","common-ui-menu-helper",function(O){O.mail.ui.InboxMenu.insert("menu-msglist",function(){var P=O.one("#menu-msglist");O.common.ui.MenuHelper.create(L.listItemsTarget,{menu:P,isContext:true,xy:[L.clientX,L.clientY],enterAccel:function(Q){Q(O.mail.ui.InboxMenu.getEnterAccel());},keys:function(Q){Q(O.mail.ui.InboxMenu.getValidKeys(P));}},function(){P.on("menuSelected",K.actionHandler,K);});K.setMenuContext();},H,{isContext:true,enableAddContact:function(P){P(D.isEnableAddToContacts(K.listMgr.getSelectedItems()));}});});L.halt();},setMenuContext:function(){var F=E.mail.ui.ContextButton;if(NeoConfig.grayoutEnabled&&F){F.setNodeMessageListMenu();}},focusNodeHandler:function(F){var G=this;(F.focus)&&G.set("focusNode",F.node);},keydownHandler:function(V){var R=this,J=V.keyCode,S,Y,Q,L,N=V.metaKey,T=V.shiftKey,K=V.ctrlKey,Z=V.altKey,P=V.metaKey||V.ctrlKey,U=false,I=R.get("focusNode"),M,W,H,a,O=E.UA,X=R.get("rootNode"),G=X?X.one("div.list-header input"):null;switch(J){case 13:S=V.target.ancestor("div .list-view")?"open":null;break;case 37:case 39:return;case 188:if(V.metaKey){return;}case 33:case 38:case 34:case 40:case 190:if(!I){M=E.one(".result .list-view-items .list-view-item");if(T){R.setFocusNode(M.getAttribute("data-key"));R.set("firstSelectedMid",M.getAttribute("data-key"));}else{R.setFocusNode(M.getAttribute("data-key"),true,true);R.listMgr.select(M.getAttribute("data-key"),true);}V.halt();break;}H=R.listMgr.getItemIndex(I.getAttribute("data-key"));if((J===188||J===190)&&!P){return;}if(J===188||J===33||J===38){M=R.listMgr.getPrevItem(I.getAttribute("data-key"));}else{M=R.listMgr.getNextItem(I.getAttribute("data-key"));}W=R.listMgr.getCurrentPage();H=R.listMgr.getItemIndex(M.mid);if(NeoConfig.pagedResults&&H>0&&((H+1===(W.cacheIndex*W.cacheSize))||H===((W.cacheIndex*W.cacheSize)+W.list.length))){return;}if(T){R.selectItemRange(R.listMgr.getItemIndex(R.get("firstSelectedMid")),R.listMgr.getItemIndex(M.mid));a=R.listMgr.getSelectedItems();if(a.allSelected&&a.allCacheSelected){G&&G.set("checked",true);}else{G&&G.set("checked",false);}}else{R.set("firstSelectedMid",M.mid);R.listMgr.selectAll(false);R.selectItems(false);R.listMgr.select(M.mid,true);R.setFocusNode(R.listMgr.generateKey(M.mid),true,true);if(R.get("data").type=="list"&&NeoConfig.pageMode==0){R.fire("openInPreviewPane",{message:R.listMgr.getSelectedItems(),mid:M.mid});}}V.halt();break;case 46:case 8:S="delete";break;case 75:S=T?"unread":"read";break;case 76:S=T?"unflagged":"flagged";break;case 65:if(T){S=D.isEnableAddToContacts(R.listMgr.getSelectedItems())?"addcontact":null;}else{if(K||N){var F=!R.listMgr.getSelectedItems().all;NeoConfig.pagedResults?R.listMgr.selectPage(F):R.listMgr.selectAll(F);R.selectItems(F);V.halt();}else{S="reply_all";}}break;case 82:if(!T){S="reply_sender";}break;case 70:if(!Z&&!T&&!P){S="forward";}else{if(T&&(Z||NeoConfig.intl=="jp")){U=true;S="forward";Z=false;}}if((!(O.gecko&&O.os=="macintosh")&&!T&&!N)&&(T||!P)){V.preventDefault();}break;case 80:S="print";break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if(N||K||Z||T){break;}E.mail.Controller.Folders.get(null,{success:function(e){var c,f=[],d,b;b=e?e.length:0;for(d=0;d<b;d++){if(!e[d].isSystem){f.push(e[d]);}}c=J===48?"Inbox":f[J-49];c=(E.Lang.isString(c))?c:(c?c.folderInfo.fid:0);if(R.get("fid")===c){return;}if(c){Y={fid:c,selectedItems:R.listMgr.getSelectedItems()};R.fire("messageAction",{action:"move",params:Y});}}});return true;default:break;}if(S&&!N&&!K&&!Z){L=R.listMgr.getSelectedItems();Y={fid:R.get("fid"),forwardAsAttachment:U};if(!L.total){I=R.get("focusNode");Q=I&&I.hasClass("selected");L={total:0};if(Q){R.listMgr.selectAll(false);L={hash:[R.listMgr.getItem(I.getAttribute("data-key"))],total:1};}}Y.selectedItems=L;R.fire("messageAction",{action:S,params:Y});return true;}return false;},switchSize:function(F){E.fire("update:density",{density:F});
},actionHandler:function(O,P){var N=this,L=O?(O.dataAction||B.getDataAction(O).action):0,S=O?O.item:0,I,M=N.get("widget"),K,H,F=false,G,Q,J;if(N.isChat(L)){D.showAlert("searchNoChat");return;}if(NeoConfig.pagedResults){if(L==="next-page"){L="next";}else{if(L==="previous-page"){L="previous";}}}switch(L){case"select-all":var R=!N.listMgr.getSelectedItems().all;N.listMgr.selectAll(R);N.selectItems(R);break;case"density-compact":case"density-regular":case"density-open":N.switchSize(L);break;case"menu":break;case"home":case"end":case"previous":case"next":case"goto":B.rocketstats&&B.rocketstats.stat("search","pagination:clicked");if(N.get("freezed")){return;}N.set("freezed",true);if(L==="home"){H=N.listMgr.getFirstPage();F=(H.cacheIndex<0);}else{if(L==="previous"){H=N.listMgr.getPrevPage();F=(H.cacheIndex<0);}else{if(L==="next"){H=N.listMgr.getNextPage();F=(H.cacheIndex>=H.serverTotal/H.cacheSize);}else{if(L==="end"){H=N.listMgr.getLastPage();F=(H.cacheIndex>=H.serverTotal/H.cacheSize);}else{if(L==="goto"){H=N.listMgr.getPage((O.page+1));}}}}}if(H&&!F){N.ultNav(S,L,O.position=="bottom");}if(F){N.set("freezed",false);return;}if(NeoConfig.fullPage){G=E.config.win||window;G.scrollTo(0,0);}N.set("focusNode",null);N.set("firstSelectedMid",null);N.listMgr.selectAll(false);N.selectItems(false);M.pruneItems();M.setStatus(strings.str_msg_list_loading);N.appendPageData(H);break;case"redirectmsg":Q={success:function(T){D.showAlert("redirectMsgSuccess");},failure:function(T){D.showAlert("redirectMsgFailure");}};D.showConfirm("redirectMsg",function(){J={fid:S&&S.getAttribute("data-fid")?S.getAttribute("data-fid"):N.fid,selectedItems:N.listMgr.getSelectedItems(),cbk:Q};N.fire("messageAction",{action:L,params:J});});break;case"folder-new":E.use("mail-ui-folderevents","mail-controller-folders",function(T){T.mail.ui.FolderEvents.createFolder(function(U){J={fid:U.fid,selectedItems:N.listMgr.getSelectedItems(),cbk:Q};N.fire("messageAction",{action:L,params:J});},"move");});break;case"fullheader":Q={success:function(T){D.showAlert("fullHeader",{bd:['<textarea readonly="true" style="width:100%;height:25em;" class="default">',T?E.common.Utils.escapeHtml(T.rawheaders[0]):strings.str_error_no_body_returned,"</textarea>"].join("")});},failure:function(T){D.showAlert("fullHeaderError");}};default:if(N.listMgr.getSelectedItems().total===0){K=N.get("focusNode");if(K&&K.hasClass("selected")){N.listMgr.select(K.getAttribute("data-key"),true);}}J={fid:S&&S.getAttribute("data-fid")?S.getAttribute("data-fid"):N.fid,selectedItems:N.listMgr.getSelectedItems(),cbk:Q};N.ultToolbar(S,L,J,O.position=="bottom");N.fire("messageAction",{action:L,params:J});break;}},ultOpen:function(){E.fire("mt:click",{action:"open_msg",append:{rspns:"new"}});},ultFlag:function(F){E.fire("mt:click",{action:(F==="flag"?"flag_message":"unflag_message")});},ultToolbar:function(H,I,K,L){if(!H){return;}if(-1==E.Array.indexOf(["delete","reply_sender","forward","spam"],I)){return;}var G={action:"tlbr_"+I},J=K.selectedItems.total,F=(I!=="delete"&&J!==1);if(I=="delete"&&K.numSelected==0){F=true;}if(L){G.action+="_btm";}if(F){G.append={rspns:"pop"};}else{if(I!=="delete"){G.append={rspns:"new"};}else{G.append={rspns:"upd"};}}E.fire("mt:click",G);},ultNav:function(G,H,I){if(!G||!H){return;}var F={action:"nav_"+H};if(I){F.action+="_btm";}F.append={rspns:"new",ltxt:H};E.fire("mt:click",F);},pageActionHandler:function(F){var G=this;if(F.args&&F.args.action){F.dataAction=F.args.action;if(F.dataAction==="page"){F.dataAction="goto";F.page=F.args.val;}G.actionHandler(F);}},afterActiveChangeHandler:function(F){var G=this;if(!F.newVal&&NeoConfig.pagedResults){G.listMgr.selectAll(false);G.set("focusNode",null);G.set("firstSelectedMid",null);G.get("widget").selectItems(false);}if(E.UA.ie&&!NeoConfig.fullPage&&G.get("focusNode")){G.get("focusNode").scrollIntoView(true);}},close:function(){var F=this;F.get("widget")&&F.get("widget").close();}};E.namespace("mail.ui");E.mail.ui.SearchListController=C;},"1.0.0",{requires:["common-utils","mail-ui-searchListView","mail-ui-listview-controls"]});YUI.add("mail-ui-toolbarController",function(F){var C=F.common.Utils,A=C.substitute,E=F.mail.ui.SearchUtils,B=[];var D=function(G){var I=this,H={data:{},rootNode:{},widget:{},listMgr:{},fid:{},template:{setter:function(J){I.TEMPLATE=J;}},position:{}};F.augment(I,F.Attribute);I.addAttrs(H,G||{});F.augment(I,F.EventTarget);};D.prototype={TEMPLATE:F.ui.Templates.minty_module_toolbar_inbox_search_rollup,process:function(){var K=this,H,J=K.get("data"),G=K.get("position"),I;K.set("widget",K.createToolbar());I=K.get("widget");I.on("itemSelected",function(L){L.position=G;K.fire("itemSelected",L);},K);K.get("rootNode")&&K.get("rootNode").detach("dblclick");K.get("rootNode").delegate("dblclick",function(L){K.setUpInlineEdit(L,this);},".pagination-count");},createToolbar:function(){var J=this,H,I=J.get("data"),G={folder_is_empty:function(N,K,L){var O=L,M=O.get("data");return(M.total)?"":"disabled";},new_search:function(){return"";},reply_group:function(N,L,M){var O=M,K={"Draft":true,"%40C%40Chats":true};if(O.get("data").type=="list"&&!K[O.get("fid")]){return A(O.TEMPLATE.reply_group,{},0,0,strings,null,O);}},show_spam:function(N,K,L){var M={"%40B%40Bulk":true,"Sent":true,"Draft":true,"%40C%40Chats":true};if(!M[L.get("fid")]){return A(J.TEMPLATE.show_spam,{},G,0,strings,null,J);}},show_not_spam:function(M,K,L){if(L.get("fid")==="%40B%40Bulk"){return A(J.TEMPLATE.show_not_spam,{},0,0,strings,null,J);}},show_move:function(M,K,L){if(L.get("fid")!=="%40C%40Chats"&&L.get("fid")!=="Draft"){return A(J.TEMPLATE.show_move,{},0,0,strings,null,J);}},edit_draft:function(M,K,L){if(L.get("fid")==="Draft"){return A(J.TEMPLATE.edit_draft,{},0,0,strings,null,J);}},reply_conv:function(M,K,L){if(L.get("fid")==="%40C%40Chats"){return A(J.TEMPLATE.reply_conv,{},0,0,strings,null,J);}},spam_menu:function(M,K,L){return NeoConfig.spamMenu?A(J.TEMPLATE.spam_menu,{},0,0,strings,null,J):"";},spam_menu_else:function(M,K,L){return NeoConfig.spamMenu?"":A(J.TEMPLATE.spam_menu_else,{},0,0,strings,null,J);},has_pagination:function(M,K,L){var N=L;return E.getPaginationControls(N.get("listMgr").getCacheInfo(),N.TEMPLATE);},has_switch_view:function(M,K,L){var N=L;if(N.get("data").type=="search"){return;}return A(N.TEMPLATE.has_switch_view,{},0,0,strings,null,N);},msgliststate:function(M,K,L){return NeoConfig.grayoutEnabled?"hasnomsg":"";}};H=new F.mail.ui.Toolbar({template:C.substitute(J.TEMPLATE.base,null,G,0,strings,J.TEMPLATE,J),menu:{template:function(L,K){F.use("mail-ui-inboxmenu-base",function(N,M){N.mail.ui.InboxMenu.insert(L,K,J.get("fid"),{enableAddContact:function(O){O(E.isEnableAddToContacts(J.get("listMgr").getSelectedItems()));}});});},keys:function(L,K){F.use("mail-ui-inboxmenu-base",function(N,M){K(N.mail.ui.InboxMenu.getValidKeys(L));});},enterAccel:function(K){F.use("mail-ui-inboxmenu-base",function(M,L){K(M.mail.ui.InboxMenu.getEnterAccel());});}}});return H;},setUpInlineEdit:function(H){var I=this,G=F.one("#toolbar .pagination");F.use("mail-common-inline-edit",function(K){var J=new K.mail.common.EditablePaginationControl(G,{setPage:function(L){I.fire("itemSelected",{dataAction:"goto",page:L});},getPageTotal:function(){var M=I.get("listMgr").getCacheInfo(),L=Math.ceil(M.serverTotal/M.cacheSize);return L;},getCurrentPage:function(){return I.get("listMgr").getCurrentPage();}});J.enableEditablePagination(H);});},updatePaginationStatus:function(H){var I=this,G=I.get("rootNode").one(".pagination");if(G){G.replace(E.getPaginationControls(H,I.TEMPLATE));}},close:function(){var G=this;G.fire("close");}};F.namespace("mail.ui");F.mail.ui.ToolbarController=D;},"1.0.0",{requires:["common-utils","contacts-api","contacts-api-utils"]});YUI.add("mail-controller-messages-ops",function(F){var K,d,j=F.mail,Q=j.model.DataStore,i=Q.Messages,a=F.common.Utils,C=j.Controller,I=C.Folders,X=F.Lang,f={passthru:{move:"MoveMessages",flag:"FlagMessages",remove:"DeleteMessages",fullHeader:"GetMessageRawHeader",redirectMsg:"RedirectMessage",addFilter:"AddFilters"},isdup:{FlagMessages:function(m,l){var k=m.setFlags,Y=l.setFlags;if(m.mid&&l.mid&&m.mid.length==1&&l.mid.length==1&&m.mid[0]==l.mid[0]&&k.read==Y.read&&k.flagged==Y.flagged){return true;}}}},N,W,E="%40C%40Chats",g="Trash",J="%40B%40Bulk",c={"replied":"isReplied","flagged":"isFlagged","read":"isRead","draft":"isDraft","forwarded":"isForwarded","ham":"isHam","spam":"isSpam"},M=strings.str_cfg_tog_set_spam_read_flag,Z={};f.batchable=f.passthru;N=C.extend("Messages",f);W=N.Error;d=f.order;function e(m,s,l){var k,n,q=s.parms,Y=s.reason,o=s.api,p=m.error,t;if(NeoConfig.scanMoveAction==true&&s.method==="MoveMessages"){for(var n=0;n<q.mid.length;n++){t=q.mid[n]&&U(q.mid[n]);if(t&&Z[t]){delete Z[t];}}}if(p){for(n=0;n<p.length;n++){if(p[n].code=="-1400"){a.rocketstats.stat("msgops","TAE4:-1400:"+s.method);}if(p[n].code=="WARN"){a.rocketstats.stat("msgops","TAE4:CODE:WARN:"+s.method);}}for(n=0;n<p.length;n++){if(p[n].code!="WARN"){l("failure");return N._error(m,W.invalidmid);}}}if(o=="move"){i.move(q.sourceFid,q.destinationFid,q.mid,m.mid,Y);}if((k=m.sourceFolder)&&s.custom.isSparse){Q.Folders.set(k,"ds:msg:",1);}if(k=m.destinationFolder){Q.Folders.set(k,"ds:msg:",1);}}function P(m,r){var o,n=m.destinationFid&&m.destinationFid==J,k,p=r.origParms,Y=p.destinationFid,l=p.sourceFid,q=r.origParms.mid;if(n){k={};if(Y==J){k[c["spam"]]=1;k[c["ham"]]=0;}if(l==J&&Y!=g){k[c["ham"]]=1;k[c["spam"]]=0;}i.update(m.sourceFid||m.fid,q,{flags:k},"flag");if(M){for(o=0;o<q.length;o++){q[o].flags.isRead=1;}}}i.remove(m.sourceFid||m.fid,q,!m.destinationFid,m.destinationFid);}function R(m,o,n){var l=o.origParms,k,Y=m.returnCodes;if(Y&&Y.length){for(k=0;k<Y.length;k++){if(Y[k].code!="WARN"){n("failure");return N._error(m,W.invalidmid);}}}else{if(!l.mid){I.refresh();}else{if(o.custom.isSparse&&T(l.setFlags,"read")){if(!o.noRefresh){I.refresh();}}}}}function T(k,Y){return k&&(Y in k);}function L(n,k){var m,Y,l=n.setFlags;Y={};for(m in l){Y[c[m]]=l[m];}if(Y[c["spam"]]){Y[c["ham"]]=0;}if(Y[c["ham"]]){Y[c["spam"]]=0;}if(X.isUndefined(l.spam)&&k.reason!=="move"){i.update(n.fid,k.origParms.mid||[],{flags:Y},k.reason);}}function S(l,Y){var n,k=0,m=Y.origParms.mid;while(n=m[k++]){if(!n.header){Y.custom.isSparse=1;}}}function V(Y,k){k("failure");a.rocketstats.stat("msgops","invalidparm_"+Y.api);return N._error({},W.invalidparams);}function O(k,m){var Y=0,l=k.mid;if(m){k.mid=X.isArray(l)?l[0].mid:l.mid;return 1;}if(!X.isArray(l)){l=(l?[l]:[]);}k.mid=[];for(;Y<l.length;Y++){k.mid[Y]=l[Y].mid||l[Y];}return Y||k.selection;}function H(n,s,AC){var AB=n.mid,v,u,q,l={},t,w,r,p,k,x,o,AA=[],y=10,z=n.sourceFid,Y=z||n.fid;n.enableRetry=true;for(u=0,v=AB.length;u<v;u++){w=AB[u].fid||Y;if(!l[w]){l[w]=[];}l[w].push(AB[u]);}if((p=a.size(l))==1&&w=="%40S%40Search"){return;}if(s.api=="remove"){if(Y=="%40S%40Search"){n.sourceFid=n.sourceFid||n.fid;delete n.fid;n.destinationFid=g;s.newApi("move","MoveMessages",n);AC("pre","move");AC(1,n);}return;}delete n.mids;for(u in l){o=F.clone(n);if(z){o.sourceFid=u;}else{o.fid=u;}o.mid=l[u];AA[AA.length]=o;}a.assert(p==AA.length);if(p>1){var m=AC(function(){s.cbk.abort();});x=Math.ceil(p/y);for(q=0;q<x;q++){r=C.batch().Messages;for(u=q*y;(u<p&&u<q*y+y);u++){if(u==p-1){r[s.api](AA[u],{success:function(AD){m(AD,"success",d.usercbk);},failure:function(AD){m(AD,"failure",d.usercbk);}});}else{r[s.api](AA[u]);}}r.execute();}}else{return AA[0];}}function h(l,Y,o){var n=l.mid,k=n.mid||n,m=l.fid;if(m=="%40S%40Search"){l.enableRetry=true;if(n.fid&&(n.fid!=m)){l.fid=n.fid;}O(l,Y.api==="fullHeader");}}function b(t,w,n){var l,Y,k,u,x,p,m=0,o=t.mid,q=t.setFlags,v=t.mid=[];if(a.isEmpty(q)){return V(w,n);}if(!X.isArray(o)){o=(o)?[o]:[];}if((q.spam&&(t.fid!=J))||(q.ham&&(t.fid==J))||(q.sendercompromised&&(t.fid!=J))||(q.phished&&(t.fid!=J))){k=1;}while(l=o[m++]){if(!a.isEmpty(l.flags)){l=i.get(t.fid,l.mid)||l;for(Y in q){if((l.flags[c[Y]]!=q[Y])||k){v.push(l);break;}}}else{v.push(l);w.custom.isSparse=1;}}if(o.length&&!v.length){n("success");return;}if(!O(t)){return V(w,n);}if(!t.spam&&((u=q.spam)||(x=q.sendercompromised)||(p=q.phished)||q.ham)){var r=w.getBatch(),s={sourceFid:t.fid,destinationFid:(u||x||p)?J:"Inbox",mid:o||w.origParms.mid,spam:1,enableRetry:t.enableRetry||false};w.noRefresh=1;if((u||x||p)&&M){q.read=1;}n(1,t);r.Messages.move(s);r.execute(w.cbk);}delete t.spam;}function A(p,q,k){var o,l,n=p.destinationFid,r=p.sourceFid,m={fid:r,mid:p.mid,spam:1,enableRetry:p.enableRetry||false},Y=function(){var u,s=p.mid.length;if(s>100){return;}for(var t=0;t<s;t++){u=p.mid[t]&&p.mid[t].mid&&U(p.mid[t].mid);if(u&&Z[u]){k("failure");}else{Z[u]=true;}}};if(!p.spam){if(n==J){l=m.setFlags={spam:1};if(M){l.read=1;}}if(r==J&&n!=g){l=m.setFlags={ham:1};}}!l&&NeoConfig.scanMoveAction&&Y();if(l){q.newApi("flag","FlagMessages",m);o=q.getBatch();q.noRefresh=1;k("pre","flag");k(1,m);p.spam=1;p.bidiDetection=NeoConfig.bidi;o.Messages.move(p);o.execute(q.cbk);}delete p.spam;if(!O(p)){return V(q,k);}}function U(Y){var k=Y.split("_");return k[k.length-1];}function D(k,Y,l){if((k.fid!=g)&&(k.fid!=J)&&(k.fid!=E)&&!k.force){k.sourceFid=k.fid;delete k.fid;k.destinationFid=g;Y.api=Y.reason="move";Y.method=f.passthru["move"];l("pre","move");return k;}delete k.force;if(!O(k)){return V(Y,l);}}function B(k,Y){var l=Y.parms.mid;if(NeoConfig.scanMoveAction==true&&Y.method=="MoveMessages"&&k.fault=="aborted"){Z=[];}if(k&&(k.reason==W.invalidparams)){return;}if(Y.parms.sourceFid){i.flush(0,1);}I.refresh();}function G(l,Y){if(l&&(l.reason==W.invalidparams)){return;}var k=Y.parms;if("read" in k.setFlags){I.refresh();}else{i.flush(k.fid);}}K={success:e,failure:B};N.hook({move:K,remove:K,flag:{success:R,failure:G}});K={pre:P};N.hook({move:K,remove:K},0,d.optimistic);
N.hook({move:{pre:H},remove:{pre:H},flag:{pre:H},fullHeader:{pre:h},redirectMsg:{pre:H}},0,d.fixParms);N.hook({move:{pre:A,aborted:B},remove:{pre:D,aborted:B},flag:{pre:b,aborted:G},redirectMsg:{pre:function(Y){O(Y);}}},0,d.fixParms);N.hook({move:{pre:S},flag:{pre:L}},0,d.optimistic);F.mix(W,{invalidmid:W._reservedIdx+1,invalidparams:W._reservedIdx+1,noitems:W._reservedIdx+2});},"3.0.0",{requires:["rocket-stats","mail-controller-base","mail-model-datastore","json-stringify"]});YUI.add("mail-ui-messageaction",function(B){B.namespace("mail.ui");var I=B.mail.Controller.Messages;function E(L,K,J){return I.remove({fid:L,mid:K},J);}function D(M,K,L,J){return I.move({sourceFid:M,destinationFid:K,mid:L},J);}function C(L,N,K,J){var M={};switch(L){case"unread":M["read"]=0;break;case"unflagged":M["flagged"]=0;break;case"notspam":M["ham"]=1;break;case"spam":M.spam=1;if(strings.str_cfg_tog_set_spam_read_flag){M.read=1;}B.fire("darlaEvent",{action:"mark_spam"});break;case"sendercompromised":M.sendercompromised=1;if(strings.str_cfg_tog_set_spam_read_flag){M.read=1;}B.fire("darlaEvent",{action:"mark_spam"});break;case"phished":M.phished=1;if(strings.str_cfg_tog_set_spam_read_flag){M.read=1;}B.fire("darlaEvent",{action:"mark_spam"});break;default:M[L]=1;break;}return I.flag({fid:N,mid:K,setFlags:M},J);}function H(L,K,J){return I.fullHeader({fid:L,mid:K},J);}function G(Q,O,P,J){var L=B.common.persist.UserData;var N=L.get("userSendPref");var K={name:"",email:""};if(N){K.name=N.defaultFromName;K.email=N.defaultFromAddress;}var M=[];M.push({email:P});I.redirectMsg({fid:Q,mid:O,resentFrom:K,resentTo:M},J);}function A(K,J){B.use("mail-ui-print",function(){B.mail.ui.print({fid:J,msg:K});});}function F(O,Q,N){var K,L=Q.fid,S=Q.msgs,M=Q.msgInfo[0],P=B.Array.indexOf(["open","forward","reply_sender","reply_all"],O)!==-1?false:true;function T(){Q.fid=(Q.oMsg&&Q.oMsg.fid)||Q.fid;B.fire("newMessage",Q);}Q["oMsg"]=M;switch(O){case"delete":K=E(L,S,N);break;case"open":B.fire("openMessage",B.mix({msg:M,fid:L},Q));N.success(O);break;case"forward":T();B.fire("darlaEvent",{action:"compose_fwd"});N.success(O);break;case"reply_sender":T();B.fire("darlaEvent",{action:"compose_reply"});N.success(O);break;case"reply_all":T();B.fire("darlaEvent",{action:"compose_reply_all"});N.success(O);break;case"edit":B.fire("editMessage",Q);N.success(O);break;case"spam":case"sendercompromised":case"phished":case"notspam":case"read":case"unread":case"flagged":case"unflagged":K=C(O,L,Q.msgInfo,N);break;case"trash":K=D(L,"Trash",S,N);break;case"inbox-move":K=D(L,"Inbox",S,N);break;case"folder-new":case"move":K=D(L,Q.destinationFid,S,N);break;case"fullheader":K=H(L,M,N);break;case"addcontact":if(M.from.name){B.fire("addContact",M.from.name,M.from.email);}else{B.fire("addContact",M.from[0].displayname||"",M.from[0].address||"");}break;case"set_encodings":B.use("mail-ui-message-encodings",function(U){U.mail.ui.MessageEncodings.setMessageEncoding(Q.msgInfo,M.fid||L);});break;case"redirectmsg":K=G(L,Q.msgInfo,Q.redirectToEmail,N);break;case"print":A(M,L);N.success(O);break;case"quick_filter":B.use("mail-ui-messagesview-quickfilter",function(U){if(S&&S[0]&&S[0].header){U.mail.ui.QuickFilter.createDialog({msgHeader:S[0].header});}});N.success(O);break;}if(-1!==B.Array.indexOf(["delete","reply_sender","forward","spam"]),O){var R={action:"tlbr_"+O};if(O!=="delete"){R.append={rspns:"new"};}B.fire("mt:click",R);}if(O=="menu"){B.fire("darlaEvent",{action:"inbox_action_menu"});}if(NeoConfig.fullPage&&!P){var J=B.config.win||window;J.scrollTo(0,0);}}B.mail.ui.MessageAction={handle:F};},"1.0.0",{requires:["mail-controller-messages","mail-controller-messages-ops","common-utils","mail-model-datastore"]});YUI.add("mail-ui-inboxmenu-base",function(G){var A=G.common.Utils.substitute,F=G.common.Utils,E=G.ui.Templates,H=NeoConfig.emptyFolders,D=G.mail.FoldersView,C=G.common.persist.UserData,B=NeoConfig.mnuTmplMap;G.namespace("mail.ui");G.mail.ui.InboxMenu=new function(){var Z;var K=NeoConfig.om&&strings.str_cfg_tog_hasSMS,g=strings.str_tog_use_num_accel,Q=null,N=(G.one("#rail-resize-vert"))?1:0,f={leftpane_pane_folders:function(i){return A(i.leftpane_pane_folders,0,0,0,strings);},fid:function(i){return i.fid;},folderName:function(i){return i.name;},accel_prefix:function(){if(g){return strings["str_menu_accel_d_number"]+" ";}return"";},is_inbox_folder_else:function(j){var i={};i.is_accel1=(g?j.is_accel1:"");return A(j.is_inbox_folder_else,i,0,0,strings);},NOT_V1:function(){return"";},NOT_V11:function(){return"";},has_IM:function(i){return(NeoConfig.isBizmail!="1")?A(i.has_IM,null,null,null,strings):"";},has_sms:function(i){return(K&&NeoConfig.isBizmail!="1")?A(i.has_sms,null,null,null,strings):"";},global_url_base:function(){return NeoConfig.global_url_base;},showRedirectMsg:function(i){return NeoConfig.isInternal&&NeoConfig.intl!=="jp"?A(i.showRedirectMsg,0,0,0,strings):"";},sender_not_in_contacts:function(i){return A(i.sender_not_in_contacts,0,0,0,strings);},fwd_as_attacht:function(i){return strings.str_cfg_tog_fwd_as_attacht?A(i.fwd_as_attacht,0,0,0,strings):"";},enable_fullpage:function(i){return NeoConfig.fullPageAvailable?A(i.enable_fullpage,0,0,0,strings):"";},show_empty_trash:function(i){return H?"":A(i.show_empty_trash,0,0,0,strings);},show_empty_spam:function(i){return H?"":A(i.show_empty_spam,0,0,0,strings);},show_empty_folder:function(i,j){return H?A(i.show_empty_folder,0,0,0,strings):"";},show_empty_folder_else:function(i){return H?"":A(i.show_empty_folder_else,0,0,0,strings);},quickFilter:function(i){return NeoConfig.quickFilter==1?A(i.quickFilter,0,0,0,strings):"";},delete_thread_in_menu:function(i){return(NeoConfig.hasConvView||NeoConfig.hasConv)?A(i.delete_thread_in_menu,0,0,0,strings):"";}};function I(i,o,l,j){var r,n=i.replace("btn-","menu-"),m=G.one("#"+n);if(!m){var p=B[n]||B["menu-inbox"];G.use(p,function(t){var s=E[p];r=A(s.base,s,f,0,strings);t.one("body").appendChild(t.Node.create(r));k();});}else{k();}function q(){if(o){o();}}function k(){switch(n){case"menu-actions":case"menu-conv-actions":case"menu-msg-actions":case"menu-msglist":case"menu-bubble-actions":case"menu-thread-list-actions":J(i,n,j);if(i=="menu-msglist"){c(l);}break;case"menu-msg-actions":this.fire("darlaEvent",{action:"inbox_action_menu"});break;case"menu-move":X(q,l);return;case"menu-new":break;case"menu-conv-reply":h(n);break;case"menu-ml-preview":W(i,n);break;default:break;}q();}}function W(m,l){var k=G.one("#"+l),i=G.one("#"+m),j;if(NeoConfig.fullPageAvailable&&k){j=(NeoConfig.expBucketId==="CMUSMFMIM01"||NeoConfig.farm==="f9323")?k.one("[data-action=scroll-view-noprev]"):k.one("[data-action=fullpage-view]");}if(NeoConfig.fullPageAvailable){j[(NeoConfig.fullPage?"add":"remove")+"Class"]("active");j.set("aria-checked",(NeoConfig.fullPage?"true":"false"));}k&&k.all("ul li").set("role","menuitemradio");T(l);i.before("mousedown",function(){T(l);});}G.on("verticalPreview",function(i){N=i;});function T(r){var n=NeoConfig.fullPage,i=C.get("userUIPref.msgPaneVisible"),k=G.one("#"+r),s=k&&k.one("[data-action=scroll-view-prev]"),j=k&&k.one("[data-action=scroll-view-prev-beside]"),l=k&&k.one("[data-action=scroll-view-noprev]"),o=s&&s.one("em"),q=l&&l.one("em"),p=document.getElementById("shellcontent"),m;if(NeoConfig.verticalPreview){p=p?p.offsetWidth:10000;m=p<900;if(m){j.addClass("disabled");j.setAttribute("title",strings["str_msg-view_scroll_pvw_too_narrow"]);}else{j.removeClass("disabled");j.removeAttribute("title");}j[((!n&&i&&N&&!m)?"add":"remove")+"Class"]("active");j.set("aria-checked",((!n&&i&&N&&!m)?"true":"false"));}else{j.setStyle("display","none");}s[((!n&&i&&!N)?"add":"remove")+"Class"]("active");s.set("aria-checked",((!n&&i&&!N)?"true":"false"));l[((!n&&!i)?"add":"remove")+"Class"]("active");l.set("aria-checked",(!n&&!i?"true":"false"));if(!n){o[(i?"add":"remove")+"Class"]("hidden");q[(!i?"add":"remove")+"Class"]("hidden");}else{o["addClass"]("hidden");q["addClass"]("hidden");}}function h(l){var k=G.one("#"+l),i=k&&k.one("[data-action=reply-im]"),j=k&&k.one("[data-action=reply-sms]");if(i){i[(NeoConfig.tog_hasIM?"remove":"add")+"Class"]("hidden");}if(j){j[(NeoConfig.tog_hasSMS?"remove":"add")+"Class"]("hidden");}}function J(j,p,l){var m=G.one("#"+p),n=G.all("#"+j),s=l?(l.enableAddContact||null):null,k,q,o,r;if(NeoConfig.isFresh){S(G.one("#menu-actions [data-action=none]"),false);b(p);n.each(function(t){t.before("mousedown",function(){b(p);});});r=m.one(".togglePreview");if(r&&NeoConfig.fullPage){r.setAttribute("data-action","scroll-view-prev");}else{if(r){a(true,r);if(Z&&Z.detach){Z.detach();Z=null;}Z=G.on("ws:previewChange",a,this,r);}}return;}if(s){s.call(this,function(t){Y(m,t);});if(!l.isContext){n.each(function(t){t.before("mousedown",function(){s.call(this,function(u){Y(m,u);});});});}}if(p=="menu-actions"){k=G.mail.Tabs.getActiveTab();q=k&&k.widget&&k.widget.type;var i=m&&m.one("[data-action=togglePrevDialog]");i=i&&i.get("parentNode");o=!NeoConfig.hoverPreview||!NeoConfig.fullPage||q!="messagelist";i&&i.setStyle("display",(o?"none":"block"));}if(p==="menu-conv-actions"){b(p);idNode.before("mousedown",function(){b(p);});}}function a(j,i){if(j&&C.get("userUIPref.msgPaneVisible")){if(NeoConfig.expBucketId==="CMUSMFMIM01"||NeoConfig.farm==="f9323"){i.addClass("checked").setAttribute("data-action","scroll-view-noprev");}else{i.addClass("checked").setAttribute("data-action","fullpage-view");}}else{i.removeClass("checked").setAttribute("data-action","scroll-view-prev");}}function b(q){var o,t,n,j=G.one("#"+q),r=j&&j.get("children"),p,u,m=r&&r.size()||0,k,s;if(NeoConfig.isFresh&&q==="menu-actions"){n=G.one("#msg-list");if(n.hasClass("ml-compact")){u=j.one("[data-action=density-compact]");}else{if(n.hasClass("ml-open")){u=j.one("[data-action=density-open]");
}else{u=j.one("[data-action=density-regular]");}}if(u){j.all("[data-action=density-compact], [data-action=density-regular], [data-action=density-open]").removeClass("checked");u.addClass("checked");}else{clearTimeout(b.timeout);b.timeout=setTimeout(function(){b(q);},100);}k=G.mail.Tabs.getActiveTab();s=k&&k.widget&&k.widget.type;if(s==="messagelist"){j.all(".msglistonly").show();R(j,true);}else{if(s==="searchlist"){j.all(".msglistonly").hide();R(j,false);}}}if(q==="menu-conv-actions"){o=NeoConfig.msgrData;t=o&&o.spam;for(p=0;p<m;p++){u=r.item(p).one("li");if(u&&(/yimapp:report_spam$/).test(u.getAttribute("data-action"))){if(p==m-1){j.insert(u.get("parentNode"),r.item(p-1));b.moved=true;}S(u,t&&t.spammerId);}}if(!b.moved){clearTimeout(b.timeout);b.timeout=setTimeout(function(){b(q);},100);}}}function R(k,i){var j=k.one("ul.om li[data-action$='toggleqr']");if(j){if(i){j.ancestor("ul").removeClass("hidden");}else{j.ancestor("ul").addClass("hidden");}}}function Y(j,i){var k=j.get("id"),l=j.one("[data-action='addcontact']");if(k==="menu-actions"||k==="menu-msg-actions"||k==="menu-conv-actions"){S(l,i);}else{d(l,i);}j.fire("menu:changed");}function d(j,i){if(!j){return;}if(i){j.removeClass("hidden");j.ancestor("ul").removeClass("hidden");}else{j.addClass("hidden");if(j.siblings().size()==0){j.ancestor("ul").addClass("hidden");}}}function P(i,j){i.setContent(j);}function S(k,j){if(!k){return;}var i=k.one("a");if(j){k.removeClass("disabled");i.removeAttribute("aria-disabled");}else{k.addClass("disabled");i.set("aria-disabled",true);}}function O(i){var j=[];i.all("li em").each(function(m){var k=m.get("text").replace(/^\s+|\s+$/g,"");var n=k.indexOf(strings["str_menu_accel_d_number"]);if(n!=-1){k=G.Lang.trim(k.replace(strings["str_menu_accel_d_number"],""));}k=k.split("+");for(var l=0;l<k.length;l++){if(k[l].length==1){k[l]=k[l].charCodeAt(0);}}k=(k.length==1)?k[0]:k.join("+");j.push(k);});return j;}function e(i){var j=[],k,l;for(l in i){k=i[l];if(!k.isSystem&&k.folderInfo){if(k.folderInfo.fid.indexOf("Sync%20Trap")==0){continue;}j.push(k);}}return j;}function U(j){var m=0,l=[],k,o=G.one("#menu-move-folder"),n=E[B["menu-inbox"]];if(o){for(;m<j.length;m++){k={fid:j[m].folderInfo.fid,name:j[m].folderInfo.name,name_dir:NeoConfig.bidi?j[m].folderInfo.dir:""};if(g&&m+1<=9){k.accel=strings["str_menu_accel_d_number"]+" "+(m+1);}else{k.is_accel="";}l.push(A(n.folders,k,f,0,strings,n));}o.setContent(l.join(""));if(NeoConfig.fullpage===0&&G.UA.ie>0){height=parseInt(o.getStyle("maxHeight"));winHeight=o.get("winHeight");height=Math.max(50,Math.min(height,parseInt(winHeight/4)));o.setStyle("maxHeight",height+"px");}}}function L(j){var i=null;switch(j){case"%40B%40Bulk":i=G.one("#menu-move [data-action='spam']");break;case"Trash":i=G.one("#menu-move [data-action='trash']");break;case"Inbox":i=G.one("#menu-move [data-action='inbox-move']");break;default:i=G.one("#menu-move-folder [data-fid='"+j+"']");}return i;}function M(k){G.all("#menu-move li").setStyle("display","block");var i=L(k),j;if(!i){return;}i.setStyle("display","none");j=G.one("#menu-move-folder");if(G.Array.indexOf(j.all("li").getStyle("display"),"block")!=-1){j.setStyle("display","block");}else{j.setStyle("display","none");}}function c(o){var n=G.one("#menu-msglist"),l,i,j,k,m={"%40B%40Bulk":1,"Draft":1,"Sent":1};if(n){l=n.one("[data-action='spam']");i=n.one("[data-action='notspam']");j=n.one("[data-action='reply_sender']");k=n.one("[data-action='fullheader']");n[(o=="%40C%40Chats"?"add":"remove")+"Class"]("hidden");}if(!l||!i){return;}d(l.ancestor("li"),m[o]!==1);d(i.ancestor("li"),o==="%40B%40Bulk");if(o=="Draft"){d(j);}else{d(j,true);}if(k){d(k,(o&&o!=="%40S%40Search"));}}function X(i,j){var k=j||D.get("fid").fid;if(G.one("#menu-move-folder li")){M(k);i();}else{G.mail.Controller.Folders.get(null,{success:function(m){var l=e(m);U(l);M(k);i();}});}}function V(){if(!Q){Q=A("{{str_menu_accel_enter}}",null,null,0,strings);}return Q;}G.mix(this,{insert:I,getValidKeys:O,getEnterAccel:V,updateAddContactsMenu:Y});D.on("fidChange",function(j){var i=j.newVal.fid;c(i);M(i);});G.on("ds:folder:change",function(k,j,l){if(!l){var i=e(j);U(i);}});};},"1.0.0",{requires:["common-utils","menus_css"]});YUI.add("mail-common-inline-edit",function(B){var A=function(C,K){var E=null,L="<input type='text' class='page-number'/>",O=this,P={when:"keydown",avoid:[37,39],esc:27,done:13},I=false,F=null,H=K;E=(H["getNodeClassName"])?H["getNodeClassName"]():"pagination-count";F=(C.hasClass(E)?C:C.one("."+E));var N=function(Q){if(I){return true;}if(Q){G(Q);}else{F.on("dblclick",G);}return true;};var G=function(V){V.stopPropagation();I=true;var U=V.target,W=U.get("parentNode"),S={border:"3px solid #954A8F",display:"none",fontSize:"11px",fontStyle:"normal",height:"12px",width:"35px",textAlign:"center"},R=U.get("text"),T=W.one("input"),Q=W.one("i");if(W.hasClass(E)&&B.Lang.isNull(T)){T=B.Node.create(L);T.set("title",W.get("title"));T.setStyles(S);W.appendChild(T);T.on(P.when,function(X){if(X.charCode==P.done){J(parseInt(T.get("value"),10));M(W,false);}else{if(X.charCode==P.esc){M(W,false);}else{if(P.avoid.toString().indexOf(X.charCode.toString())!=-1){X.stopPropagation();}}}});T.on("blur",function(X){M(W,false);});}T.set("value",R);M(W,true);};var D=function(){F.detach("dblclick");I=false;};var J=function(S){var R=H["getCurrentPage"](),Q=H["getPageTotal"]();if(B.Lang.isNumber(S)){if(S<=0){return false;}else{if(S>Q){S=Q;}}H["setPage"](S-1);}return true;};var M=function(T,Q){var S=T.one("input"),R=T.one("i");if(Q){S.setStyle("border","3px solid "+B.one("#dock").getStyle("backgroundColor"));S.setStyle("display","block");R.setStyle("display","none");S.focus();S.select();}else{S.setStyle("display","none");R.setStyle("display","block");}};O["disableEditablePagination"]=D;O["enableEditablePagination"]=N;};B.namespace("mail.common.EditablePaginationControl");B.mail.common.EditablePaginationControl=A;},"1.0.0");YUI.add("_shared_module_search_non_snippet_refresh_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_search_non_snippet_refresh_rollup={base:'<div id="msg-list" class="result content fresh {{message_list_density}} {{inbox}}"> {{searchView}} <div class="list-view"> <div class="list-header-wrapper"> <div role="row" class="list-header"> <div class="header-toolbar l-split-left"><span class="btn-hdr cbox" id="btn-ml-cbox" data-action="menu"><label><input title="{{str_msg_list_select_all_msgs_attr}}" type="checkbox" class="focusable neoFocusable enabled" tabindex="0" data-action="selectAll-message" title="{{str_msg_list_select_all_msgs_attr}}"><span></span></label><span data-action="select-dd"><a class="neoFocusable enabled" href="#" tabindex="-1"><b></b></a></span></span>{{has_sort}}</div> <div class="pagination l-split-right">{{pagination_inner}}</div> </div> </div> {{search_results}} <div role="presentation" class="list-header-wrapper"> <div role="row" class="list-header"> <div class="pagination-footer"> {{pagination_footer}} </div> </div> </div> </div> {{has_pagination}} </div> ',multiple_search_result:"{{str_srch_status}}",single_search_result:"{{str_srch_status_single}}",searchView:'<div class="alert"> <p class="num-results">{{multiple_search_result}} {{single_search_result}}</p> <div class="rht"><span class="btn left right" id="btn-toggle-searchview" data-action="toggle-search-view"><a href="#" title="{{str_msg-view_btn_toggle_search_view_attr}}">{{str_msg-view_btn_showsearchsnippet}}<b></b></a></span></div> </div> ',pagination_inner:'<span id="btn-firstpage" class="btn-hdr ufirst{{first_class_disabled}}" aria-disabled="{{first_aria_disabled}}"><a href="#" class="neoFocusable{{first_class_disabled}}" tabindex="-1" data-action="home" title="{{str_msg_list_first}}"><b></b></a></span><span id="btn-previous" class="btn-hdr uprev{{first_class_disabled}}" aria-disabled="{{first_aria_disabled}}"><a href="#" class="neoFocusable{{first_class_disabled}}" data-action="previous-page" title="{{str_msg_list_previous}}"><b></b></a></span><span id="btn-ml-count" class="btn-hdr"><span title="{{str_msg_list_page_info_noclick}}">{{current}}</span></span><span id="btn-next" class="btn-hdr unext{{last_class_disabled}}" aria-disabled="{{last_aria_disabled}}"><a href="#" class="neoFocusable{{last_class_disabled}}" data-action="next-page" title="{{str_msg_list_next}}" tabindex="-1"><b></b></a></span><span id="btn-lastpage" class="btn-hdr ulast{{last_class_disabled}}" aria-disabled="{{last_aria_disabled}}"><a href="#" class="neoFocusable{{last_class_disabled}}" tabindex="-1" data-action="end" title="{{str_msg_list_last}}"><b></b></a></span>',is_unread:"unread",is_flagged:"flagged",is_deleted:"deleted",is_selected:"selected",flags1:"info-{{status}}",searchView1:'<div class="fldr" role="gridcell"><span>{{folder}}</span></div> ',hasAttachment:'<div class="nsfile icon" title="{{str_msg_list_attachments}}" role="gridcell">&nbsp;</div> ',hasAttachment_else:'<div class="nsfile" role="gridcell">&nbsp;</div> ',is_flagged1:"{{str_msg_list_flagged_attr}}",is_flagged_else:"{{str_msg_list_flag_attr}}",match:"found",attachment_previews:'<li class="{{attachment_type}} {{match}}" id=""> <div class="file-container"> <div style="background-image: url(\'{{image_url}}\');"></div> </div> </li> ',contains_attachment:'<ul class="file-attach"> {{attachment_previews}} </ul> ',search_msg_list:'<div class="list-view-item {{is_unread}} {{is_flagged}} {{is_deleted}} {{is_selected}}" data-key="{{hashKey}}" data-mid="{{permMid}}" data-action="select-result"> <div class="fixed start"> <label class="cbox"> <input type="checkbox" data-action="selectable" title="{{str_srch_select_this_msg}}" {{selected}}/><span></span> </label> <div class="info {{flags1}}"><span></span></div> </div> <div class="flex"> <div class="from" role="gridcell" title="{{fromTitle}}" data-fromObj="{{fromObj}}" {{data-inboxServices}} {{data-size}}><span>{{from}}</span></div> <div class="subj" role="gridcell"><span>{{subject}}</span></div> <div class="date" role="gridcell" data-rawdate="{{rawDate}}"><span>{{receivedDate}}</span></div> {{searchView1}} {{hasAttachment}} {{hasAttachment_else}} <div class="flag" title="{{is_flagged1}}{{is_flagged_else}}"> <button type="button" class="btn-flag" role="checkbox" aria-checked="true">{{isFlagged2}} {{isFlagged_else1}}</button> </div> </div> <div class="fixed end"> <div class="fixed end" role="presentation"> <div class="icon delete-msg" data-action="delete"></div> </div> </div> {{contains_attachment}} </div> ',search_results:'<div class="list-view-items"> {{search_msg_list}} </div> ',pagination_footer:'<span id="btn-first-foot" class="btn-hdr l-split-left{{class_disabled_first}}"><a href="#" data-action="home" title="{{str_toolbar_first}}" aria-disabled="{{aria_disabled}}">{{str_msg_list_first}}</a></span> <span id="btn-next-foot" class="btn-hdr l-split-right{{class_disabled_next}}"><a href="#" data-action="next-page" title="{{str_toolbar_next}}" aria-disabled="{{aria_disabled}}">{{str_msg_list_next_up}}</a><a href="#" data-action="next-page" title="{{str_toolbar_next}}"><b></b></a></span> ',has_pagination:'<div class="list-view-footer fresh-toolbar hidden" role="toolbar"> <div class="commontasks shaded"></div> </div>  ',has_sort:'<span id="btn-ml-sortby" class="sortby btn-hdr neoFocusable enabled" data-action="menu"><a class="">{{str_msg_list_sort_by}}<b></b></a></span>'};},"1.0.0");