/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("overlay",function(e,t){e.Overlay=e.Base.create("overlay",e.Widget,[e.WidgetStdMod,e.WidgetPosition,e.WidgetStack,e.WidgetPositionAlign,e.WidgetPositionConstrain])},"3.7.2",{requires:["widget","widget-stdmod","widget-position","widget-position-align","widget-stack","widget-position-constrain"],skinnable:!0});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-simulate",function(e,t){(function(){function p(t,u,a,f,l,c,h,p,d,v,m){t||e.error("simulateKeyEvent(): Invalid target.");if(r(u)){u=u.toLowerCase();switch(u){case"textevent":u="keypress";break;case"keyup":case"keydown":case"keypress":break;default:e.error("simulateKeyEvent(): Event type '"+u+"' not supported.")}}else e.error("simulateKeyEvent(): Event type must be a string.");i(a)||(a=!0),i(f)||(f=!0),s(l)||(l=e.config.win),i(c)||(c=!1),i(h)||(h=!1),i(p)||(p=!1),i(d)||(d=!1),o(v)||(v=0),o(m)||(m=0);var g=null;if(n(e.config.doc.createEvent)){try{g=e.config.doc.createEvent("KeyEvents"),g.initKeyEvent(u,a,f,l,c,h,p,d,v,m)}catch(y){try{g=e.config.doc.createEvent("Events")}catch(b){g=e.config.doc.createEvent("UIEvents")}finally{g.initEvent(u,a,f),g.view=l,g.altKey=h,g.ctrlKey=c,g.shiftKey=p,g.metaKey=d,g.keyCode=v,g.charCode=m}}t.dispatchEvent(g)}else s(e.config.doc.createEventObject)?(g=e.config.doc.createEventObject(),g.bubbles=a,g.cancelable=f,g.view=l,g.ctrlKey=c,g.altKey=h,g.shiftKey=p,g.metaKey=d,g.keyCode=m>0?m:v,t.fireEvent("on"+u,g)):e.error("simulateKeyEvent(): No event simulation framework present.")}function d(t,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){t||e.error("simulateMouseEvent(): Invalid target."),r(a)?(a=a.toLowerCase(),u[a]||e.error("simulateMouseEvent(): Event type '"+a+"' not supported.")):e.error("simulateMouseEvent(): Event type must be a string."),i(f)||(f=!0),i(l)||(l=a!="mousemove"),s(c)||(c=e.config.win),o(h)||(h=1),o(p)||(p=0),o(d)||(d=0),o(v)||(v=0),o(m)||(m=0),i(g)||(g=!1),i(y)||(y=!1),i(b)||(b=!1),i(w)||(w=!1),o(E)||(E=0),S=S||null;var x=null;if(n(e.config.doc.createEvent))x=e.config.doc.createEvent("MouseEvents"),x.initMouseEvent?x.initMouseEvent(a,f,l,c,h,p,d,v,m,g,y,b,w,E,S):(x=e.config.doc.createEvent("UIEvents"),x.initEvent(a,f,l),x.view=c,x.detail=h,x.screenX=p,x.screenY=d,x.clientX=v,x.clientY=m,x.ctrlKey=g,x.altKey=y,x.metaKey=w,x.shiftKey=b,x.button=E,x.relatedTarget=S),S&&!x.relatedTarget&&(a=="mouseout"?x.toElement=S:a=="mouseover"&&(x.fromElement=S)),t.dispatchEvent(x);else if(s(e.config.doc.createEventObject)){x=e.config.doc.createEventObject(),x.bubbles=f,x.cancelable=l,x.view=c,x.detail=h,x.screenX=p,x.screenY=d,x.clientX=v,x.clientY=m,x.ctrlKey=g,x.altKey=y,x.metaKey=w,x.shiftKey=b;switch(E){case 0:x.button=1;break;case 1:x.button=4;break;case 2:break;default:x.button=0}x.relatedTarget=S,t.fireEvent("on"+a,x)}else e.error("simulateMouseEvent(): No event simulation framework present.")}function v(t,u,a,c,h,p){t||e.error("simulateUIEvent(): Invalid target."),r(u)?(u=u.toLowerCase(),f[u]||e.error("simulateUIEvent(): Event type '"+u+"' not supported.")):e.error("simulateUIEvent(): Event type must be a string.");var d=null;i(a)||(a=u in l),i(c)||(c=u=="submit"),s(h)||(h=e.config.win),o(p)||(p=1),n(e.config.doc.createEvent)?(d=e.config.doc.createEvent("UIEvents"),d.initUIEvent(u,a,c,h,p),t.dispatchEvent(d)):s(e.config.doc.createEventObject)?(d=e.config.doc.createEventObject(),d.bubbles=a,d.cancelable=c,d.view=h,d.detail=p,t.fireEvent("on"+u,d)):e.error("simulateUIEvent(): No event simulation framework present.")}function m(t,n,r,i,s,o,u,a,f,l,c,p,d,v,m,g){var y;(!e.UA.ios||e.UA.ios<2)&&e.error("simulateGestureEvent(): Native gesture DOM eventframe is not available in this platform."),t||e.error("simulateGestureEvent(): Invalid target."),e.Lang.isString(n)?(n=n.toLowerCase(),h[n]||e.error("simulateTouchEvent(): Event type '"+n+"' not supported.")):e.error("simulateGestureEvent(): Event type must be a string."),e.Lang.isBoolean(r)||(r=!0),e.Lang.isBoolean(i)||(i=!0),e.Lang.isObject(s)||(s=e.config.win),e.Lang.isNumber(o)||(o=2),e.Lang.isNumber(u)||(u=0),e.Lang.isNumber(a)||(a=0),e.Lang.isNumber(f)||(f=0),e.Lang.isNumber(l)||(l=0),e.Lang.isBoolean(c)||(c=!1),e.Lang.isBoolean(p)||(p=!1),e.Lang.isBoolean(d)||(d=!1),e.Lang.isBoolean(v)||(v=!1),e.Lang.isNumber(m)||(m=1),e.Lang.isNumber(g)||(g=0),y=e.config.doc.createEvent("GestureEvent"),y.initGestureEvent(n,r,i,s,o,u,a,f,l,c,p,d,v,t,m,g),t.dispatchEvent(y)}function g(t,n,r,i,s,o,u,a,f,l,h,p,d,v,m,g,y,b,w){var E;t||e.error("simulateTouchEvent(): Invalid target."),e.Lang.isString(n)?(n=n.toLowerCase(),c[n]||e.error("simulateTouchEvent(): Event type '"+n+"' not supported.")):e.error("simulateTouchEvent(): Event type must be a string."),n==="touchstart"||n==="touchmove"?m.length===0&&e.error("simulateTouchEvent(): No touch object in touches"):n==="touchend"&&y.length===0&&e.error("simulateTouchEvent(): No touch object in changedTouches"),e.Lang.isBoolean(r)||(r=!0),e.Lang.isBoolean(i)||(i=n!="touchcancel"),e.Lang.isObject(s)||(s=e.config.win),e.Lang.isNumber(o)||(o=1),e.Lang.isNumber(u)||(u=0),e.Lang.isNumber(a)||(a=0),e.Lang.isNumber(f)||(f=0),e.Lang.isNumber(l)||(l=0),e.Lang.isBoolean(h)||(h=!1),e.Lang.isBoolean(p)||(p=!1),e.Lang.isBoolean(d)||(d=!1),e.Lang.isBoolean(v)||(v=!1),e.Lang.isNumber(b)||(b=1),e.Lang.isNumber(w)||(w=0),e.Lang.isFunction(e.config.doc.createEvent)?(e.UA.android?e.UA.android<4?(E=e.config.doc.createEvent("MouseEvents"),E.initMouseEvent(n,r,i,s,o,u,a,f,l,h,p,d,v,0,t),E.touches=m,E.targetTouches=g,E.changedTouches=y):(E=e.config.doc.createEvent("TouchEvent"),E.initTouchEvent(m,g,y,n,s,u,a,f,l,h,p,d,v)):e.UA.ios?e.UA.ios>=2?(E=e.config.doc.createEvent("TouchEvent"),E.initTouchEvent(n,r,i,s,o,u,a,f,l,h,p,d,v,m,g,y,b,w)):e.error("simulateTouchEvent(): No touch event simulation framework present for iOS, "+e.UA.ios+"."):e.error("simulateTouchEvent(): Not supported agent yet, "+e.UA.userAgent),t.dispatchEvent(E)):e.error("simulateTouchEvent(): No event simulation framework present.")}var t=e.Lang,n=t.isFunction,r=t.isString,i=t.isBoolean,s=t.isObject,o=t.isNumber,u={click:1,dblclick:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,mousemove:1,contextmenu:1},a={keydown:1,keyup:1,keypress:1},f={submit:1,blur:1,change:1,focus:1,resize:1,scroll:1,select:1},l={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1},c={touchstart:1,touchmove:1,touchend:1,touchcancel:1},h={gesturestart:1,gesturechange:1,gestureend:1};e.mix(l,u),e.mix(l,a),e.mix(l,c),e.Event.simulate=function(t,n,r){r=r||{},u[n]?d(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget):a[n]?p(t,n,r.bubbles,r.cancelable,r.view,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode):f[n]?v(t,n,r.bubbles,r.cancelable,r.view,r.detail):c[n]?e.config.win&&"ontouchstart"in e.config.win&&!e.UA.phantomjs&&!(e.UA.chrome&&e.UA.chrome<6)?g(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.touches,r.targetTouches,r.changedTouches,r.scale,r.rotation):e.error("simulate(): Event '"+n+"' can't be simulated. Use gesture-simulate module instead."):e.UA.ios&&e.UA.ios>=2&&h[n]?m(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.scale,r.rotation):e.error("simulate(): Event '"+n+"' can't be simulated.")}})()},"3.7.2",{requires:["event-base"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("gesture-simulate",function(e,t){function T(n){n||e.error(t+": invalid target node"),this.node=n,this.target=e.Node.getDOMNode(n);var r=this.node.getXY(),i=this._getDims();a=r[0]+i[0]/2,f=r[1]+i[1]/2}var t="gesture-simulate",n=e.config.win&&"ontouchstart"in e.config.win&&!e.UA.phantomjs&&!(e.UA.chrome&&e.UA.chrome<6),r={tap:1,doubletap:1,press:1,move:1,flick:1,pinch:1,rotate:1},i={touchstart:1,touchmove:1,touchend:1,touchcancel:1},s=e.config.doc,o,u=20,a,f,l={HOLD_TAP:10,DELAY_TAP:10,HOLD_PRESS:3e3,MIN_HOLD_PRESS:1e3,MAX_HOLD_PRESS:6e4,DISTANCE_MOVE:200,DURATION_MOVE:1e3,MAX_DURATION_MOVE:5e3,MIN_VELOCITY_FLICK:1.3,DISTANCE_FLICK:200,DURATION_FLICK:1e3,MAX_DURATION_FLICK:5e3,DURATION_PINCH:1e3},c="touchstart",h="touchmove",p="touchend",d="gesturestart",v="gesturechange",m="gestureend",g="mouseup",y="mousemove",b="mousedown",w="click",E="dblclick",S="x",x="y";T.prototype={_toRadian:function(e){return e*(Math.PI/180)},_getDims:function(){var e,t,n;return this.target.getBoundingClientRect?(e=this.target.getBoundingClientRect(),"height"in e?n=e.height:n=Math.abs(e.bottom-e.top),"width"in e?t=e.width:t=Math.abs(e.right-e.left)):(e=this.node.get("region"),t=e.width,n=e.height),[t,n]},_calculateDefaultPoint:function(t){var n;return!e.Lang.isArray(t)||t.length===0?t=[a,f]:(t.length==1&&(n=this._getDims[1],t[1]=n/2),t[0]=this.node.getX()+t[0],t[1]=this.node.getY()+t[1]),t},rotate:function(n,r,i,s,o,u,a){var f,l=i,c=s;if(!e.Lang.isNumber(l)||!e.Lang.isNumber(c)||l<0||c<0)f=this.target.offsetWidth<this.target.offsetHeight?this.target.offsetWidth/4:this.target.offsetHeight/4,l=f,c=f;e.Lang.isNumber(a)||e.error(t+"Invalid rotation detected."),this.pinch(n,r,l,c,o,u,a)},pinch:function(n,r,i,s,o,a,f){var g,y,b=u,w,E=0,S=i,x=s,T,N,C,k,L,A,O,M,_,D={start:[],end:[]},P={start:[],end:[]},H,B;r=this._calculateDefaultPoint(r),(!e.Lang.isNumber(S)||!e.Lang.isNumber(x)||S<0||x<0)&&e.error(t+"Invalid startRadius and endRadius detected.");if(!e.Lang.isNumber(o)||o<=0)o=l.DURATION_PINCH;if(!e.Lang.isNumber(a))a=0;else{a%=360;while(a<0)a+=360}e.Lang.isNumber(f)||(f=0),e.AsyncQueue.defaults.timeout=b,g=new e.AsyncQueue,N=r[0],C=r[1],O=a,M=a+f,D.start=[N+S*Math.sin(this._toRadian(O)),C-S*Math.cos(this._toRadian(O))],D.end=[N+x*Math.sin(this._toRadian(M)),C-x*Math.cos(this._toRadian(M))],P.start=[N-S*Math.sin(this._toRadian(O)),C+S*Math.cos(this._toRadian(O))],P.end=[N-x*Math.sin(this._toRadian(M)),C+x*Math.cos(this._toRadian(M))],k=1,L=s/i,g.add({fn:function(){var t,n,r,i;t={pageX:D.start[0],pageY:D.start[1],clientX:D.start[0],clientY:D.start[1]},n={pageX:P.start[0],pageY:P.start[1],clientX:P.start[0],clientY:P.start[1]},i=this._createTouchList([e.merge({identifier:E++},t),e.merge({identifier:E++},n)]),r={pageX:(D.start[0]+P.start[0])/2,pageY:(D.start[0]+P.start[1])/2,clientX:(D.start[0]+P.start[0])/2,clientY:(D.start[0]+P.start[1])/2},this._simulateEvent(this.target,c,e.merge({touches:i,targetTouches:i,changedTouches:i,scale:k,rotation:O},r)),e.UA.ios>=2&&this._simulateEvent(this.target,d,e.merge({scale:k,rotation:O},r))},timeout:0,context:this}),H=Math.floor(o/b),T=(x-S)/H,A=(L-k)/H,_=(M-O)/H,B=function(t){var n=S+T*t,r=N+n*Math.sin(this._toRadian(O+_*t)),i=C-n*Math.cos(this._toRadian(O+_*t)),s=N-n*Math.sin(this._toRadian(O+_*t)),o=C+n*Math.cos(this._toRadian(O+_*t)),u=(r+s)/2,a=(i+o)/2,f,l,c,p;f={pageX:r,pageY:i,clientX:r,clientY:i},l={pageX:s,pageY:o,clientX:s,clientY:o},p=this._createTouchList([e.merge({identifier:E++},f),e.merge({identifier:E++},l)]),c={pageX:u,pageY:a,clientX:u,clientY:a},this._simulateEvent(this.target,h,e.merge({touches:p,targetTouches:p,changedTouches:p,scale:k+A*t,rotation:O+_*t},c)),e.UA.ios>=2&&this._simulateEvent(this.target,v,e.merge({scale:k+A*t,rotation:O+_*t},c))};for(y=0;y<H;y++)g.add({fn:B,args:[y],context:this});g.add({fn:function(){var t=this._getEmptyTouchList(),n,r,i,s;n={pageX:D.end[0],pageY:D.end[1],clientX:D.end[0],clientY:D.end[1]},r={pageX:P.end[0],pageY:P.end[1],clientX:P.end[0],clientY:P.end[1]},s=this._createTouchList([e.merge({identifier:E++},n),e.merge({identifier:E++},r)]),i={pageX:(D.end[0]+P.end[0])/2,pageY:(D.end[0]+P.end[1])/2,clientX:(D.end[0]+P.end[0])/2,clientY:(D.end[0]+P.end[1])/2},e.UA.ios>=2&&this._simulateEvent(this.target,m,e.merge({scale:L,rotation:M},i)),this._simulateEvent(this.target,p,e.merge({touches:t,targetTouches:t,changedTouches:s,scale:L,rotation:M},i))},context:this}),n&&e.Lang.isFunction(n)&&g.add({fn:n,context:this.node}),g.run()},tap:function(t,r,i,s,o){var u=new e.AsyncQueue,a=this._getEmptyTouchList(),f,h,d,v,m;r=this._calculateDefaultPoint(r);if(!e.Lang.isNumber(i)||i<1)i=1;e.Lang.isNumber(s)||(s=l.HOLD_TAP),e.Lang.isNumber(o)||(o=l.DELAY_TAP),h={pageX:r[0],pageY:r[1],clientX:r[0],clientY:r[1]},f=this._createTouchList([e.merge({identifier:0},h)]),v=function(){this._simulateEvent(this.target,c,e.merge({touches:f,targetTouches:f,changedTouches:f},h))},m=function(){this._simulateEvent(this.target,p,e.merge({touches:a,targetTouches:a,changedTouches:f},h))};for(d=0;d<i;d++)u.add({fn:v,context:this,timeout:d===0?0:o}),u.add({fn:m,context:this,timeout:s});i>1&&!n&&u.add({fn:function(){this._simulateEvent(this.target,E,h)},context:this}),t&&e.Lang.isFunction(t)&&u.add({fn:t,context:this.node}),u.run()},flick:function(n,r,i,s,o){var u;r=this._calculateDefaultPoint(r),e.Lang.isString(i)?(i=i.toLowerCase(),i!==S&&i!==x&&e.error(t+"(flick): Only x or y axis allowed")):i=S,e.Lang.isNumber(s)||(s=l.DISTANCE_FLICK),e.Lang.isNumber(o)?o>l.MAX_DURATION_FLICK&&(o=l.MAX_DURATION_FLICK):o=l.DURATION_FLICK,Math.abs(s)/o<l.MIN_VELOCITY_FLICK&&(o=Math.abs(s)/l.MIN_VELOCITY_FLICK),u={start:e.clone(r),end:[i===S?r[0]+s:r[0],i===x?r[1]+s:r[1]]},this._move(n,u,o)},move:function(t,n,r){var i;e.Lang.isObject(n)?(e.Lang.isArray(n.point)?n.point=this._calculateDefaultPoint(n.point):n.point=this._calculateDefaultPoint([]),e.Lang.isNumber(n.xdist)||(n.xdist=l.DISTANCE_MOVE),e.Lang.isNumber(n.ydist)||(n.ydist=0)):n={point:this._calculateDefaultPoint([]),xdist:l.DISTANCE_MOVE,ydist:0},e.Lang.isNumber(r)?r>l.MAX_DURATION_MOVE&&(r=l.MAX_DURATION_MOVE):r=l.DURATION_MOVE,i={start:e.clone(n.point),end:[n.point[0]+n.xdist,n.point[1]+n.ydist]},this._move(t,i,r)},_move:function(t,n,r){var i,s,o=u,d,v,m,g=0,y;e.Lang.isNumber(r)?r>l.MAX_DURATION_MOVE&&(r=l.MAX_DURATION_MOVE):r=l.DURATION_MOVE,e.Lang.isObject(n)?(e.Lang.isArray(n.start)||(n.start=[a,f]),e.Lang.isArray(n.end)||(n.end=[a+l.DISTANCE_MOVE,f])):n={start:[a,f],end:[a+l.DISTANCE_MOVE,f]},e.AsyncQueue.defaults.timeout=o,i=new e.AsyncQueue,i.add({fn:function(){var t={pageX:n.start[0],pageY:n.start[1],clientX:n.start[0],clientY:n.start[1]},r=this._createTouchList([e.merge({identifier:g++},t)]);this._simulateEvent(this.target,c,e.merge({touches:r,targetTouches:r,changedTouches:r},t))},timeout:0,context:this}),d=Math.floor(r/o),v=(n.end[0]-n.start[0])/d,m=(n.end[1]-n.start[1])/d,y=function(t){var r=n.start[0]+v*t,i=n.start[1]+m*t,s={pageX:r,pageY:i,clientX:r,clientY:i},o=this._createTouchList([e.merge({identifier:g++},s)]);this._simulateEvent(this.target,h,e.merge({touches:o,targetTouches:o,changedTouches:o},s))};for(s=0;s<d;s++)i.add({fn:y,args:[s],context:this});i.add({fn:function(){var t={pageX:n.end[0],pageY:n.end[1],clientX:n.end[0],clientY:n.end[1]},r=this._createTouchList([e.merge({identifier:g},t)]);this._simulateEvent(this.target,h,e.merge({touches:r,targetTouches:r,changedTouches:r},t))},timeout:0,context:this}),i.add({fn:function(){var t={pageX:n.end[0],pageY:n.end[1],clientX:n.end[0],clientY:n.end[1]},r=this._getEmptyTouchList(),i=this._createTouchList([e.merge({identifier:g},t)]);this._simulateEvent(this.target,p,e.merge({touches:r,targetTouches:r,changedTouches:i},t))},context:this}),t&&e.Lang.isFunction(t)&&i.add({fn:t,context:this.node}),i.run()},_getEmptyTouchList:function(){return o||(o=this._createTouchList([])),o},_createTouchList:function(n){var r=[],i,o=this;return!!n&&e.Lang.isArray(n)?e.UA.android&&e.UA.android>=4||e.UA.ios&&e.UA.ios>=2?(e.each(n,function(t){t.identifier||(t.identifier=0),t.pageX||(t.pageX=0),t.pageY||(t.pageY=0),t.screenX||(t.screenX=0),t.screenY||(t.screenY=0),r.push(s.createTouch(e.config.win,o.target,t.identifier,t.pageX,t.pageY,t.screenX,t.screenY))}),i=s.createTouchList.apply(s,r)):e.UA.ios&&e.UA.ios<2?e.error(t+": No touch event simulation framework present."):(i=[],e.each(n,function(e){e.identifier||(e.identifier=0),e.clientX||(e.clientX=0),e.clientY||(e.clientY=0),e.pageX||(e.pageX=0),e.pageY||(e.pageY=0),e.screenX||(e.screenX=0),e.screenY||(e.screenY=0),i.push({target:o.target,identifier:e.identifier,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}),i.item=function(e){return i[e]}):e.error(t+": Invalid touchPoints passed"),i},_simulateEvent:function(t,r,s){var o;i[r]?n?e.Event.simulate(t,r,s):this._isSingleTouch(s.touches,s.targetTouches,s.changedTouches)?(r={touchstart:b,touchmove:y,touchend:g}[r],s.button=0,s.relatedTarget=null,o=r===g?s.changedTouches:s.touches,s=e.mix(s,{screenX:o.item(0).screenX,screenY:o.item(0).screenY,clientX:o.item(0).clientX,clientY:o.item(0).clientY},!0),e.Event.simulate(t,r,s),r==g&&e.Event.simulate(t,w,s)):e.error("_simulateEvent(): Event '"+r+"' has multi touch objects that can't be simulated in your platform."):e.Event.simulate(t,r,s)},_isSingleTouch:function(e,t,n){return e&&e.length<=1&&t&&t.length<=1&&n&&n.length<=1}},e.GestureSimulation=T,e.GestureSimulation.defaults=l,e.GestureSimulation.GESTURES=r,e.Event.simulateGesture=function(n,i,s,o){n=e.one(n);var u=new e.GestureSimulation(n);i=i.toLowerCase(),!o&&e.Lang.isFunction(s)&&(o=s,s={}),s=s||{};if(r[i])switch(i){case"tap":u.tap(o,s.point,s.times,s.hold,s.delay);break;case"doubletap":u.tap(o,s.point,2);break;case"press":e.Lang.isNumber(s.hold)?s.hold<l.MIN_HOLD_PRESS?s.hold=l.MIN_HOLD_PRESS:s.hold>l.MAX_HOLD_PRESS&&(s.hold=l.MAX_HOLD_PRESS):s.hold=l.HOLD_PRESS,u.tap(o,s.point,1,s.hold);break;case"move":u.move(o,s.path,s.duration);break;case"flick":u.flick(o,s.point,s.axis,s.distance,s.duration);break;case"pinch":u.pinch(o,s.center,s.r1,s.r2,s.duration,s.start,s.rotation);break;case"rotate":u.rotate(o,s.center,s.r1,s.r2,s.duration,s.start,s.rotation)}else e.error(t+": Not a supported gesture simulation: "+i)}},"3.7.2",{requires:["async-queue","event-simulate","node-screen"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("node-event-simulate",function(e,t){e.Node.prototype.simulate=function(t,n){e.Event.simulate(e.Node.getDOMNode(this),t,n)},e.Node.prototype.simulateGesture=function(t,n,r){e.Event.simulateGesture(this,t,n,r)}},"3.7.2",{requires:["node-base","event-simulate","gesture-simulate"]});
YUI.add("comms-ui-autocomplete-plugin",function(C){var B="autocomplete",F=C.Lang,G=C.Array.each,L=C.Plugin,E=L.Base,I="ac",D=13;function J(O,Q){var R=this,N="down",P=C.stamp(this)+"|";if(C.UA.gecko>0&&C.UA.gecko<5){N="press";C.on(P+"key",O.raiseFlag,Q,"down",O);}C.on(P+"valueChange",H,Q,O);C.on(P+"key",O.next,Q,N+":40",O);C.on(P+"key",O.previous,Q,N+":38",O);C.on(P+"key",O.close,Q,"down:27",O);Q.on("keyup",function(S){if(S.keyCode===D){S.type="select";this.select.call(O,S);}},O,"select");}function H(O){var N=O.newVal;if(!N){this._cachedValue=false;return this.close();}if(N===this._cachedValue||N.length<this.get("minQueryLength")){return false;}this._cachedValue=N;this.fire("ac:query",{value:O.newVal});return true;}function A(N){return function(){if(N){N.setAttribute(B,"on");}N=null;};}function K(N){var P=C.Node.getDOMNode(N),Q=P.getAttribute(B);if((Q&&Q!=="off")||Q===null||Q===undefined){var O=A(P);C.on("beforeunload",O,window);C.on("unload",O,window);}P.setAttribute(B,"off");}function M(){M.superclass.constructor.apply(this,arguments);}C.extend(M,E,{_defaultEventFn:null,initializer:function(){var N=this,O=N.get("host"),P=(!F.isNull(N._defaultEventFn)?N._defaultEventFn:{});J(N,O);G(["query","load","show","hide","next","previous","select"],function(Q){N.publish("ac:"+Q,{broadcast:1,bubbles:1,context:N,preventable:true,prefix:I,defaultFn:P[Q]||null});},N);K(O);},destructor:function(){var N=this;C.detach(C.stamp(N)+"|");N.detachAll();},open:function(){this.fire("ac:show");},next:function(N){if(this.conflictingKeyFlag&&C.UA.gecko){return;}N.preventDefault();this.fire("ac:next");},previous:function(N){if(this.conflictingKeyFlag&&C.UA.gecko){return;}N.preventDefault();this.fire("ac:previous");},raiseFlag:function(O,N){if((O.keyCode===55)||(O.keyCode==57)){N.conflictingKeyFlag=true;}else{N.conflictingKeyFlag=false;}},select:function(N){this.fire("ac:select",N);},hide:function(){},close:function(){this.fire("ac:hide");},reload:function(N){if(N){if(N.length<1){this.set("badResult",this.get("queryValue"));}this.fire("ac:load",{results:N,query:this.get("queryValue")});}}},{NAME:"ACPlugin",NS:I,ATTRS:{queryValue:{getter:function(){return this.get("host").get("value");},setter:function(N){this.get("host").set("value",N);return(this._cachedValue=N);}},dataSource:{value:[]},minQueryLength:{value:0,validator:F.isNumber},queryTemplate:{value:encodeURIComponent,setter:function(N){return(F.isFunction(N)?N:function(O){return N.replace(/(^|[^\\])((\\{2})*)\{query\}/,"$1$2"+encodeURIComponent(O)).replace(/(^|[^\\])((\\{2})*)\\(\{query\})/,"$1$2$4");});}},alignNode:null,conflictingKeyFlag:false,badResult:{value:false,setter:function(N){return(C.Lang.isString(N))?N:false;}}}});C.namespace("comms.ui");C.comms.ui.AutoCompleteEventsPlugin=M;},"1.0.0",{requires:["node","plugin","event-valuechange","event-key"]});YUI.add("comms-ui-autocomplete",function(C){var H=C.Array.each,F=C.Lang,B=C.Overlay,G="selectedIndex",A="queryValue",J="ac",D="_BOUND",I="_"+G,K="_originalValue";function E(){E.superclass.constructor.apply(this,arguments);this.delegated=false;this.listeners=[];}C.extend(E,B,{initializer:function(){var L=this;L.after({queryChanged:L.drawMarkUp,dataChanged:L.drawMarkUp});L.hide();L.publish(J+":complete",{broadcast:1,bubbles:1,context:L,preventable:true,prefix:J});},renderUI:function(){var M=this.get("ac"),L={"display":"none","overflow":"auto","maxHeight":"300px"};if(!M){return false;}this.get("contentBox").setStyles(L);this.get("contentBox").set("role","listbox");this.setSize();this.set("align",{node:this.get("ac").get("alignNode"),points:[C.WidgetPositionAlign.TL,C.WidgetPositionAlign.BL]});this.get("contentBox").setStyle("display","block");return true;},bind:function(P){var Q=this,L=Q.get("contentBox"),O=Q.get("ac"),N=C.stamp(Q)+"|";if(P&&O!==P&&Q[D]){C.detach(N);Q[D]=0;}P=P||O;if(P&&!Q[D]){var M=[];Q[D]=1;if(!Q.delegated){Q.delegated=true;M.push(L.delegate("click",Q.click,"li",Q));M.push(L.delegate("mouseover",Q.mouseover,"li",Q));M.push(L.delegate("mousemove",function(R){R.halt();R.currentTarget.addClass("over");},"li",Q));M.push(L.delegate("mouseleave",function(R){R.halt();R.currentTarget.removeClass("over");},"li",Q));M.push(C.on("click",function(R){if(!Q.isVisible()){return;}if(Q.get("contentBox").contains(R.target)){Q.get("ac").get("host").simulate("keydown",{keyCode:13});}Q.hide();},document,this));}M.push(P.on(N+J+":load",function(R){Q.setAttrs({query:R.query,data:R.results}).drawMarkUp().show().setAlign();}));M.push(P.on(N+J+":query",function(R){Q.set("query",R.value).drawMarkUp();}));M.push(P.on(N+J+":next",Q.next,Q));M.push(P.on(N+J+":previous",Q.previous,Q));M.push(P.on(N+J+":hide",Q.hide,Q));P.select=function(R){Q.selected.call(Q,R,"enter");};Q.listeners=M;}return Q;},bindUI:function(L){return this.bind(L);},setSize:function(){if(!this.get("expandWidthToContents")){this.set("width",this.get("ac").get("alignNode").get("offsetWidth"));}},setAlign:function(){var O=this,M=O.get("ac").get("alignNode"),L=M.get("region"),N=[L.left,L.bottom];if(O.get("xy")[0]!=N[0]||O.get("xy")[1]!=N[1]){O.set("xy",N);}return O;},drawMarkUp:function(){var L=this,M=L.get("data");if(!M){return L;}L[I]=-1;L[K]="";L.get("contentBox").set("innerHTML",L.getListMarkup(M));if(M.length>0){if(L.get("selectFirst")){this.set(G,0);}L.get("contentBox").setStyle("display","block");}else{L.get("contentBox").setStyle("display","none");}return L;},getListMarkup:function(O){var N=this,L=N.get("listTpl"),M=[];H(O,function(P){M.push(N.getItemMarkup(P));});return L.replace(/\{list\}/g,M.join(""));},getItemMarkup:function(M){var L=this;if(!F.isString(M)){return false;}return L.get("itemTpl").replace(/\{hilite\}/g,M);},_fixView:function(O){var R=this,N=R.get(G),L=R.get("contentBox"),Q,M,M,P;if(N===-1){L.set("scrollTop",0);return true;}M=R.item(N);Q=L.get("scrollTop");M=R.item(N);P=M.get("offsetTop");if(O){if((P>Q)&&!(R.itemsCount()==(N+1))){return true;}L.set("scrollTop",P);document.body.scrollIntoView();return false;}else{if((P+M.get("clientHeight"))>(Q+L.get("clientHeight"))){L.set("scrollTop",L.get("scrollTop")+M.get("clientHeight"));if(C.UA.ie<=0){M.scrollIntoView();}document.body.scrollIntoView(false);}return true;}},next:function(){var L=this;if(L.get("selectFirst")&&L.itemsCount()==1){return false;}return(L.get("visible")?L.selectNext():L);},selectNext:function(){var L=this;L.set(G,this.get(G)+1);L._fixView(false);return L.get(G);},selectPrevious:function(){var L=this;L.set(G,this.get(G)-1);L._fixView(true);return L.get(G);},previous:function(){var L=this;if(L.itemsCount()==1){return false;}return L.get("visible")?L.selectPrevious():L;},isVisible:function(){return this.get("visible");},item:function(L){return this.get("contentBox").all(this.get("itemSelector")).item(L);},itemsCount:function(){return this.get("contentBox").all(this.get("allItemsSelector")).size();},click:function(L){this.selected(L,"click");},mouseover:function(O){var M,L,N=this;M=O.currentTarget;L=N.get("contentBox").all("li").indexOf(M);N.set("selectedIndex",L);},autoManageSelect:function(L){var M=this,N=M.get("ac");if(!L){L=false;}if(L){N.on(J+":select",M.handleEnter,M);}else{N.detachAll(J+":select");}},handleEnter:function(P,M){if(!M){M=this;}var O=M.get("ac"),L=M[I],N,Q;P.halt();M.fire(J+":complete",M);if(L!=-1){N=M.item(L);if(N){Q=N.get("text");O.set(A,Q);}M[I]=-1;O.get("host").focus();M.hide();}},selected:function(Q,O){if(!O){O="click";}var M=null,N=this,P=N.get("ac"),L;M=N.item(this.get(G));L=this.get(G);if(!M){return false;}Q.selectedItem=M;Q.selectedIndex=L;Q.type=O;Q.container=N.get("contentBox");P.fire("ac:select",Q);N[I]=-1;return true;},setHostValue:function(M){var L=this;L.get("ac").set(A,M);L.get("ac").get("host").focus();L.hide();},reload:function(L){return this.get("ac").reload(L);},close:function(){var L=this;L.get("ac").close();L.hide();},destroy:function(){var M=this.listeners;if(M){var N=M.length,L;for(L=0;L<N;L++){if(M[L]){M[L].detach();M[L]=null;}}this.listeners=null;}if(this.get("ac")){this.get("ac").destructor();}E.superclass.destroy.apply(this,arguments);}},{NAME:"AutoCompleteWidget",ATTRS:{ac:{setter:function(L){if(!this[D]){return;}this.bind(L);},validator:function(L){return true;}},data:{},query:{value:""},listTpl:{value:'<ul role="presentation">{list}</ul>'},itemTpl:{value:'<li role="option">{hilite}</li>'},itemSelector:{value:"ul li"},allItemsSelector:{value:"ul li"},expandWidthToContents:{value:false},selectFirst:{value:true}}});E.ATTRS[G]={value:-1,validator:function(L){var M=this.get("data");return M&&C.Lang.isNumber(L);},getter:function(){return this[I];},setter:function(O){var T=this,Q=T.get(G),R=T.get("data"),L=T.itemsCount(),S=T.get("ac"),M=this.getClassName("selected"),P,N;if(isNaN(Q)){Q=-1;}if(!R||!L){return false;}while(O<-1){O+=L+1;}O=(O+1)%(L+1)-1;Q=(Q+1)%(L+1)-1;T[I]=O;if(Q===-1){T[K]=S.get(A);}if(Q===O){return false;
}var U=T.get("contentBox").one("."+M);if(U){U.removeClass(M);}if(O===-1){}else{P=T.item(O);if(P&&P.hasClass("corpmail.label")){N=O+(Q<O?1:-1);T[I]=N;P=T.item(N);}if(P){P.addClass(M);}}return O;}};C.namespace("comms.ui");C.comms.ui.AutoComplete=E;},"1.0.0",{requires:["overlay","comms-ui-autocomplete-plugin","node-event-simulate"]});YUI.add("filter-contacts",function(C){var T=C.contacts,E=T.api,R=T.utils,K={},H=function(Y,d){if(Y.emailField&&Y.emailField.id){return Y.emailField.id;}return Y.id;},O=function(Y,e){for(var d=0;d<e.length;d++){Y.push(e[d]);}return Y;},S=function(){var d=new Date().getTime(),n=R.getSortedFlatContacts(),f=function(r,s){var t=[];r.user&&t.push(r.user.charAt(s).toLowerCase());r.firstname&&t.push(r.firstname.charAt(s).toLowerCase());r.lastname&&t.push(r.lastname.charAt(s).toLowerCase());r.nickname&&t.push(r.nickname.charAt(s).toLowerCase());r.mobileno&&O(t,r.mobileno.toLowerCase());r.homeno&&O(t,r.homeno.toLowerCase());r.workno&&O(t,r.workno.toLowerCase());r.isCategory||(r.email&&t.push(r.email.charAt(s).toLowerCase()));return t;};var j,m,k,o=R.getCategories();for(m in o){var l=o[m],q=0,e=0;for(j in l.contacts){var h=R.getContactById(l.contacts[j]),p=R.getFieldsByType(h,"email");if(p){q+=1;e+=p.sc_score?p.sc_score:0;}}n.push({firstname:l.name,email:[q,"<span style='display:none'>___AC_CAT_ID:",l.id,"</span>"].join(""),id:l.id,sc_score:Math.floor((e/q)*(2/3)),isCategory:true});}k={};K=[];for(j in n){var h=n[j];if((!h.email)||(!h.email.length)){continue;}var Y,i=f(h,0);for(Y in i){var g=i[Y];if(!K[g]){K[g]={};}K[g][H(h)]=h;}}},A=function(l){var f={},d={},k={},h,m;h=l.filterItems;for(var e=0;e<h.length;e++){var n=h[e];var g=n.value.charAt(0).toLowerCase();var Y=K[g];for(m in Y){d[m]=Y[m];}}for(m in d){var j=d[m];if(l.filterContact(j)&&!k[j.email]){k[j.email]=true;f[H(j)]=j;}}var o=[];for(m in f){o.push(f[m]);}R.sortFlatContacts(o);return o;};C.on("contacts:api:contactChanged",S);C.on("contacts:api:loaded",S);if(R.areContactsLoaded()){S();}else{E.load();}function F(){this.filterItems=[];this.matchType=1;this.init_temp_data=true;this.del_temp_data=true;this.match_limit=50;}var D=["mobileno","homeno","workno","firstname","lastname","user","email","nickname"];var a=new RegExp("[\\+\\*\\?\\^\\[\\]\\{\\}\\$\\\\/%#~:<>()]","g");var U=new RegExp("[^0-9]","g");var G=new RegExp("[ _\\.\\-@]","g");var Z=new RegExp("[ _\\.\\-@][^ _\\.\\-@]","g");F.prototype.fastMatch=function(){return A(this).slice(0,this.match_limit);};var P=/___AC_CAT_ID\:([0-9]+)/;F.prototype.decodeCategory=function(j){var f=P.exec(j);if(f&&f.length>1){var h=R.getCategoryById(f[1]),e=[];for(var d in h.contacts){var i=R.getBasicFlatContacts(R.getContactById(h.contacts[d]));for(var g in i){var Y=i[g];if(Y.isPrimary){e[H(Y)]=Y;break;}}}return e;}else{return false;}};function I(e){var Y,d,g;var f=e.value;if(e.numeric){d=f.length;if(d>1){g=f.charAt(0);Y=1;while(Y<d){g+="[ _\\.\\-()]*";g+=f.charAt(Y);Y+=1;}}else{g=f;}}else{g=f;}e.regExp=new RegExp(g,"gi");}function c(e,d){var Y={};Y.value=e;if(!U.test(e)){Y.numeric=true;}Y.group_id=d;Y.match_siIndex=-1;I(Y);return Y;}function N(j){var d,Y,k,g,e;var l,f=[];Y=j.length;if(Y===0){return f;}var h=new RegExp("[ ]","g");for(d=0;d<Y;d++){k=j[d];g=0;while(h.test(k)){e=h.lastIndex-1;if(g<e){l=c(k.substring(g,e),d);f.push(l);}g=h.lastIndex;}if(g<k.length){l=c(k.substring(g),d);f.push(l);}}return f;}function X(g){var Y=[];var e,f,d;if(g.length>0){d=new RegExp("[,;]","g");e=0;while(d.test(g)){f=d.lastIndex-1;if(f>e){Y.push(g.substring(e,f));}e=d.lastIndex;}if(e<g.length){Y.push(g.substring(e));}}return Y;}F.prototype.updateFilterItems=function(f){if(f.length>2048){f=f.substring(0,2048);}f=f.replace(a," ");var Y=X(f);var e,d=C.common.Utils;for(e in Y){if(Y.hasOwnProperty(e)){Y[e]=d.regexpEscape(d.escapeHtml(Y[e]));}}this.filterItems=N(Y);};F.fuzzyMatch=function(f,d,p,Y){var i=f.length;var w=d.length;var r=[];var s=[];var o=[];var e,t,g,l,j,n,k,q;var x,u,m,h;for(e=0;e<=i;e++){s[e]=e;}l=w-p;if(l>i+Y){l=i+Y;}g=0;n="";for(t=0;t<l;t++){q=n;n=d.charAt(t+p).toLowerCase();if(g<=0){x=t+1;o[0]=x;m=x;g=0;j="";}else{x=Y+1;o[g]=x;m=x;j=f.charAt(e-1).toLowerCase();}for(e=g,g=-1;e<i;e++){k=j;j=f.charAt(e).toLowerCase();if(j===n){x=s[e];}else{x=s[e]+1;u=o[e]+1;if(x>u){x=u;}u=s[e+1]+1;if(x>u){x=u;}if(j===q&&k===n){u=r[e-1]+1;if(x>u){x=u;}}}o[e+1]=x;if(m>x){m=x;}if(g===-1&&x<=Y){if(e===0&&o[0]<=Y){g=0;}else{g=e+1;}}if(x>o[e]&&x>Y){break;}}if(e===i){if(x===0){s=o;t+=1;break;}u=s[i];if(u!==undefined&&u<x){break;}}if(m>Y){return null;}r=s;s=o;o=[];}x=s[i];if(x===undefined||x>Y){return null;}else{h={};h.start=p;h.end=t+p;h.diff=x;return h;}};function V(Y,d,j,p){var o;var m,k,h,g,n;var f,e,l;f=p.fuzzy_match_idx+1;n=p.fuzzy_matches;if(f<n.length){g=n[f];p.fuzzy_match_idx=f;return g;}else{if(!p.fuzzy_complete){o=Z;m=-1;while(true){if(m===-1&&p.fuzzy_match_idx===-1){m=0;}else{if(m<=0){o.lastIndex=(p.fuzzy_match_idx===-1)?0:n[p.fuzzy_match_idx].start+1;}if(o.test(Y)){m=o.lastIndex-1;}else{break;}}h=p.matches;for(f=0,e=h.length;f<e;f++){k=h[f];if(m>k.start){break;}else{if(m===k.start){g={};g.start=k.start;g.end=k.end;g.diff=0;n.push(g);p.fuzzy_match_idx+=1;j.match_idx=g.end;return g;}}}e=j.value.length;if(e<=2){l=0;if(p.complete){continue;}}else{if(e<=5){l=1;}else{l=2;}}if((g=F.fuzzyMatch(j.value,Y,m,l))!==null){n.push(g);p.fuzzy_match_idx+=1;j.match_idx=g.end;return g;}}p.fuzzy_complete=true;}p.fuzzy_match_idx=-1;return null;}}function J(Y,e,j,l){var k;var f,d,m,h,g;f=l.match_idx+1;g=l.matches;if(f<g.length){h=g[f];l.match_idx=f;return h;}else{if(!l.complete){k=j.regExp;k.lastIndex=(l.match_idx===-1)?0:g[l.match_idx].start+1;d=k.lastIndex;while(k.exec(Y)){if(e){m=Y.substring(d,k.lastIndex);d+=m.search(k);h={};h.end=k.lastIndex;h.start=d;g.push(h);l.match_idx+=1;j.match_idx=h.end;return h;}else{d=k.lastIndex-j.value.replace(/\\/g,"").length;if(d===0||Y.charAt(d-1).search(G)===0){h={};h.end=k.lastIndex;h.start=d;g.push(h);l.match_idx+=1;j.match_idx=h.end;return h;}}}l.complete=true;}l.match_idx=-1;return null;}}function Q(e,Y,d,f,h,i,k){var g;var j=(d||e.matchType!==2)?J:V;while((g=j(Y,d,f,h))!==null){if(k){if(g.start>=f.start_idx){f.start_idx=g.start;return true;}}else{if(f.start_siIndex===i&&f.start_idx===g.start){continue;}else{return true;}}}return false;}function W(m,l){var j=l.matches;var Y,k;var g,e,d,f,h;if(m.match_idx!==-1){Y=m.match_idx;
k=m.matches;}else{if(m.fuzzy_match_idx!==-1){Y=m.fuzzy_match_idx;k=m.fuzzy_matches;}else{return false;}}d=k[Y].start;f=k[Y].end;for(g=0,e=j.length;g<e;g++){h=j[g];if(!(h.end<=d||f<=h.start)){return false;}}for(g=0,e=l.length;g<e;g++){if((l[g].match_idx!==-1||l[g].fuzzy_match_idx!==-1)&&l[g].group_id!==m.group_id){return false;}}h={};h.start=d;h.end=f;l.matches.push(h);return true;}function M(g,m,q,d,n,p,r){if(n.phoneno&&!m.numeric){return false;}var j,f,o;var e,h,l,k;for(j=0,f=n.length;j<f;j++){if(n[j].index===q){o=n[j];break;}}if(!o){o={};o.index=q;o.group_id=m.group_id;o.match_idx=-1;o.matches=[];o.fuzzy_match_idx=-1;o.fuzzy_matches=[];n.push(o);}var Y=o.match_idx;while(Q(g,d,n.phoneno,m,o,p,r)){if(W(o,n)){return true;}}if(Y!==-1){k=n.matches;e=o.matches[Y].start;h=o.matches[Y].end;for(j=0,f=k.length;j<f;j++){l=k[j];if(l.start===e&&l.end===h){k.splice(j,1);}}}m.match_idx=-1;return false;}function B(f,i,g,m){var l,h,j,d,k,e,Y,n;h=D.length;n=false;if(g.match_siIndex===-1){n=true;g.start_siIndex=-1;g.start_idx=-1;if(m>0){Y=f.filterItems[m-1];if(Y.group_id===g.group_id){g.start_siIndex=Y.match_siIndex;g.start_idx=Y.match_idx;}}}if(n&&g.start_siIndex!==-1){l=g.start_siIndex;e=(l<3);if(e&&!g.numeric){}else{j=D[l];d=i[j];if(d&&d.length>0){k=i._matches[j];if(!k){k=[];k.matches=[];if(e){k.phoneno=true;}i._matches[j]=k;}if(M(f,g,m,d,k,l,true)){g.match_siIndex=l;g.special_match=true;return true;}}}}if(g.match_siIndex===-1){l=0;}else{if(g.special_match){g.special_match=false;l=0;}else{l=g.match_siIndex;}}while(l<h){e=(l<3);if(e&&!g.numeric){l+=1;continue;}j=D[l];d=i[j];if(d&&d.length>0){k=i._matches[j];if(!k){k=[];k.matches=[];if(e){k.phoneno=true;}i._matches[j]=k;}if(M(f,g,m,d,k,l,false)){g.match_siIndex=l;return true;}}l+=1;}g.match_siIndex=-1;return false;}F.prototype.filterContact=function(k){delete k.matches;if(this.filterItems.length===0){return false;}if(this.init_temp_data){k._matches={};}var e,d;d=this.filterItems.length;e=0;while(e<d){if(!B(this,k,this.filterItems[e],e)){if(e>0){e-=1;continue;}else{if(this.del_temp_data){delete k._matches;}return false;}}e+=1;}k.matches={};var o,j,l,m;var n,g,Y,f,h;j=D.length;o=0;while(o<j){l=D[o];m=k._matches[l];if(m&&m.length>0){for(e=0,d=m.length;e<d;e++){n=m[e];if((Y=n.match_idx)!==-1){g=this.filterItems[n.index];h=n.matches[Y];f={};f.term=g.value;f.startIndex=h.start;f.endIndex=h.end;if(!k.matches[l]){k.matches[l]=[];}k.matches[l].push(f);n.match_idx=-1;}else{if((Y=n.fuzzy_match_idx)!==-1){g=this.filterItems[n.index];h=n.fuzzy_matches[Y];f={};f.term=g.value;f.startIndex=h.start;f.endIndex=h.end;f.diff=h.diff;if(!k.matches[l]){k.matches[l]=[];}k.matches[l].push(f);n.fuzzy_match_idx=-1;}}}if(!this.del_temp_data){m.matches=[];}}o+=1;}if(this.del_temp_data){delete k._matches;}for(e=0,d=this.filterItems.length;e<d;e++){this.filterItems[e].match_siIndex=-1;}return true;};F.prototype.setConfigValues=function(e,Y,d){this.matchType=e;this.init_temp_data=C.Lang.isBoolean(Y)?Y:true;this.del_temp_data=C.Lang.isBoolean(d)?d:true;};F.prototype.filterContacts=function(h){var f,g,Y,e=true,j=[];if(this.filterItems.length===0){}else{this.setConfigValues(1,true,!e);for(var d in h){if(typeof h[d].email!="undefined"){if(this.filterContact(h[d])){j.push(h[d]);}}}}return j;};F.prototype.buildContactsIndex=function(){S();};function b(e,Y){var d,f;for(d=0,f=e.filterItems.length;d<f;d++){if(e.filterItems[d].match_siIndex!==-1){return false;}}return true;}function L(h){var f,e,d,g;var k,Y,l,m;if(!h._matches){return true;}for(f=0,g=D.length;f<g;f++){k=D[f];Y=h[k];if(Y&&Y.length>0){l=h._matches[k];if(l){if(l.matches.length>0){return false;}for(e=0,d=l.length;e<d;e++){m=l[e];if(m.match_idx!==-1){return false;}if(m.fuzzy_match_idx!==-1){return false;}}}}}return true;}F._test={validateFilterItems:b,validateTempMatchData:L};C.namespace("comms").FilterContacts=F;},"1.0.0",{requires:["contacts-api-utils","contacts-api"]});YUI.add("comms-intl-bidihighlight",function(A){A.mix(A.namespace("comms.Intl"),{_needPrevChar:/[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA]/,_needNextChar:/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA]/,_highlightJoiner:"\u200d",_highlightStartTag:"<b>",_highlightEndTag:"</b>",_initializeBidiHighlightJoiner:function(){if(A.UA.webkit){this._highlightJoiner="\u0640";}},highlightString:function(I,J,G){var K,F,M,D,B,L,C,E,H;E=function(N){return N==""?"":N.charAt(N.length-1);};H=function(N){return N==""?"":N.charAt(0);};if(I.length===0){return"";}L=E(J);C=H(G);K=I.charAt(0);M=I.charAt(I.length-1);F=K.charCodeAt(0);D=M.charCodeAt(0);if(L===""||L.charCodeAt(0)<1568||F<1568){B=this._highlightStartTag+I;}else{if(this._needNextChar.test(L)&&this._needPrevChar.test(K)){B=this._highlightJoiner+this._highlightStartTag+this._highlightJoiner+I;}else{B=this._highlightStartTag+I;}}if(C===""||C.charCodeAt(0)<1568||D<1568){B=B+this._highlightEndTag;}else{if(this._needPrevChar.test(C)&&this._needNextChar.test(M)){B=B+this._highlightJoiner+this._highlightEndTag+this._highlightJoiner;}else{B=B+this._highlightEndTag;}}return B;}});A.comms.Intl._initializeBidiHighlightJoiner();},"1.0.0");/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("io-base",function(e,t){function o(t){var n=this;n._uid="io:"+s++,n._init(t),e.io._map[n._uid]=n}var n=["start","complete","end","success","failure","progress"],r=["status","statusText","responseText","responseXML"],i=e.config.win,s=0;o.prototype={_id:0,_headers:{"X-Requested-With":"XMLHttpRequest"},_timeout:{},_init:function(t){var r=this,i,s;r.cfg=t||{},e.augment(r,e.EventTarget);for(i=0,s=n.length;i<s;++i)r.publish("io:"+n[i],e.merge({broadcast:1},t)),r.publish("io-trn:"+n[i],t)},_create:function(t,n){var r=this,s={id:e.Lang.isNumber(n)?n:r._id++,uid:r._uid},o=t.xdr?t.xdr.use:null,u=t.form&&t.form.upload?"iframe":null,a;return o==="native"&&(o=e.UA.ie?"xdr":null,r.setHeader("X-Requested-With")),a=o||u,s=a?e.merge(e.IO.customTransport(a),s):e.merge(e.IO.defaultTransport(),s),s.notify&&(t.notify=function(e,t,n){r.notify(e,t,n)}),a||i&&i.FormData&&t.data instanceof i.FormData&&(s.c.upload.onprogress=function(e){r.progress(s,e,t)},s.c.onload=function(e){r.load(s,e,t)},s.c.onerror=function(e){r.error(s,e,t)},s.upload=!0),s},_destroy:function(t){i&&!t.notify&&!t.xdr&&(u&&!t.upload?t.c.onreadystatechange=null:t.upload?(t.c.upload.onprogress=null,t.c.onload=null,t.c.onerror=null):e.UA.ie&&!t.e&&t.c.abort()),t=t.c=null},_evt:function(t,r,i){var s=this,o,u=i.arguments,a=s.cfg.emitFacade,f="io:"+t,l="io-trn:"+t;this.detach(l),r.e&&(r.c={status:0,statusText:r.e}),o=[a?{id:r.id,data:r.c,cfg:i,arguments:u}:r.id],a||(t===n[0]||t===n[2]?u&&o.push(u):(r.evt?o.push(r.evt):o.push(r.c),u&&o.push(u))),o.unshift(f),s.fire.apply(s,o),i.on&&(o[0]=l,s.once(l,i.on[t],i.context||e),s.fire.apply(s,o))},start:function(e,t){this._evt(n[0],e,t)},complete:function(e,t){this._evt(n[1],e,t)},end:function(e,t){this._evt(n[2],e,t),this._destroy(e)},success:function(e,t){this._evt(n[3],e,t),this.end(e,t)},failure:function(e,t){this._evt(n[4],e,t),this.end(e,t)},progress:function(e,t,r){e.evt=t,this._evt(n[5],e,r)},load:function(e,t,r){e.evt=t.target,this._evt(n[1],e,r)},error:function(e,t,r){e.evt=t,this._evt(n[4],e,r)},_retry:function(e,t,n){return this._destroy(e),n.xdr.use="flash",this.send(t,n,e.id)},_concat:function(e,t){return e+=(e.indexOf("?")===-1?"?":"&")+t,e},setHeader:function(e,t){t?this._headers[e]=t:delete this._headers[e]},_setHeaders:function(t,n){n=e.merge(this._headers,n),e.Object.each(n,function(e,r){e!=="disable"&&t.setRequestHeader(r,n[r])})},_startTimeout:function(e,t){var n=this;n._timeout[e.id]=setTimeout(function(){n._abort(e,"timeout")},t)},_clearTimeout:function(e){clearTimeout(this._timeout[e]),delete this._timeout[e]},_result:function(e,t){var n;try{n=e.c.status}catch(r){n=0}n>=200&&n<300||n===304||n===1223?this.success(e,t):this.failure(e,t)},_rS:function(e,t){var n=this;e.c.readyState===4&&(t.timeout&&n._clearTimeout(e.id),setTimeout(function(){n.complete(e,t),n._result(e,t)},0))},_abort:function(e,t){e&&e.c&&(e.e=t,e.c.abort())},send:function(t,n,i){var s,o,u,a,f,l,c=this,h=t,p={};n=n?e.Object(n):{},s=c._create(n,i),o=n.method?n.method.toUpperCase():"GET",f=n.sync,l=n.data,e.Lang.isObject(l)&&!l.nodeType&&!s.upload&&(l=e.QueryString.stringify(l));if(n.form){if(n.form.upload)return c.upload(s,t,n);l=c._serialize(n.form,l)}if(l)switch(o){case"GET":case"HEAD":case"DELETE":h=c._concat(h,l),l="";break;case"POST":case"PUT":n.headers=e.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},n.headers)}if(s.xdr)return c.xdr(h,s,n);if(s.notify)return s.c.send(s,t,n);!f&&!s.upload&&(s.c.onreadystatechange=function(){c._rS(s,n)});try{s.c.open(o,h,!f,n.username||null,n.password||null),c._setHeaders(s.c,n.headers||{}),c.start(s,n),n.xdr&&n.xdr.credentials&&(e.UA.ie||(s.c.withCredentials=!0)),s.c.send(l);if(f){for(u=0,a=r.length;u<a;++u)p[r[u]]=s.c[r[u]];return p.getAllResponseHeaders=function(){return s.c.getAllResponseHeaders()},p.getResponseHeader=function(e){return s.c.getResponseHeader(e)},c.complete(s,n),c._result(s,n),p}}catch(d){if(s.xdr)return c._retry(s,t,n);c.complete(s,n),c._result(s,n)}return n.timeout&&c._startTimeout(s,n.timeout),{id:s.id,abort:function(){return s.c?c._abort(s,"abort"):!1},isInProgress:function(){return s.c?s.c.readyState%4:!1},io:c}}},e.io=function(t,n){var r=e.io._map["io:0"]||new o;return r.send.apply(r,[t,n])},e.io.header=function(t,n){var r=e.io._map["io:0"]||new o;r.setHeader(t,n)},e.IO=o,e.io._map={};var u=i&&i.XMLHttpRequest,a=i&&i.XDomainRequest,f=i&&i.ActiveXObject;e.mix(e.IO,{_default:"xhr",defaultTransport:function(t){if(!t){var n={c:e.IO.transports[e.IO._default](),notify:e.IO._default==="xhr"?!1:!0};return n}e.IO._default=t},transports:{xhr:function(){return u?new XMLHttpRequest:f?new ActiveXObject("Microsoft.XMLHTTP"):null},xdr:function(){return a?new XDomainRequest:null},iframe:function(){return{}},flash:null,nodejs:null},customTransport:function(t){var n={c:e.IO.transports[t]()};return n[t==="xdr"||t==="flash"?"xdr":"notify"]=!0,n}}),e.mix(e.IO.prototype,{notify:function(e,t,n){var r=this;switch(e){case"timeout":case"abort":case"transport error":t.c={status:0,statusText:e},e="failure";default:r[e].apply(r,[t,n])}}})},"3.7.2",{requires:["event-custom-base","querystring-stringify-simple"]});
YUI.add("contacts-smartcontacts-api",function(B){var A={deleteSmartContacts:function(H,G,F){G=G||NeoConfig.socdirProxyPath;F=F||B.io;if(B.Lang.isArray(H)&&H.length>0){var D=H.length,E={ydht:{fields:{}}},C=E.ydht.fields;while(D--){C[H[D]]={"value":[0,null,-65536,1,1]};}F(G+"?/setSmartContacts?",{method:"POST",data:B.JSON.stringify(E)});}}};B.namespace("contacts.smartcontacts");B.contacts.smartcontacts.api=A;},"1.0.0",{requires:["io-base"]});YUI.add('search_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_srch_no_results":"No messages found","str_srch_enter_search_terms":"Please enter one or more search terms","str_srch_find_by_person":"Find messages from a specific person. Type in a name, Yahoo! ID, or email address.","str_srch_type_name":"Type name or email address","str_srch_person_btn_attr":"Search","str_srch_person_btn":"Search","str_srch_find_by_file":"Find messages with attachments such as photos, videos, Word docs, and more.","str_file_all_types":"All attachment types","str_file_pdf":"PDF","str_file_ppt":"PowerPoint","str_file_xls":"Excel","str_file_doc":"Word","str_file_img":"Image","str_file_video":"Video","str_file_audio":"Music","str_srch_find_by_date":"Find messages you received recently:","str_srch_date_today":"Today","str_srch_date_last_week":"Last Week","str_srch_date_last_month":"Last Month","str_srch_undo_attachtype_attr":"Showing emails with {{refineattachcat}} attachments","str_srch_undo_folder_attr":"Showing messages only from {{folder}}","str_srch_undo_sender_attr":"Showing messages sent only from {{recipient}}","str_srch_undo_date_attr":"Showing messages only from {{refinedate}}","str_srch_undo_flag_attr":"Showing only {{refineflag}} messages","str_srch_sender_attr":"Only show messages sent from {{recipient}}","str_srch_attachtype_attr":"Only show emails with {{refineattachcat}} attachments","str_srch_date_attr":"Only show messages from {{refinedate}}","str_srch_flag_attr":"Only show {{refineflag}} messages","str_mail_dateformat_AM_l10n":"AM","str_mail_dateformat_PM_l10n":"PM","str_mail_day":"Day","str_mail_month":"Month","str_mail_month_abbr_april":"Apr","str_mail_month_abbr_august":"Aug","str_mail_month_abbr_december":"Dec","str_mail_month_abbr_february":"Feb","str_mail_month_abbr_january":"Jan","str_mail_month_abbr_july":"Jul","str_mail_month_abbr_june":"Jun","str_mail_month_abbr_march":"Mar","str_mail_month_abbr_may":"May","str_mail_month_abbr_november":"Nov","str_mail_month_abbr_october":"Oct","str_mail_month_abbr_september":"Sep","str_mail_month_april":"April","str_mail_month_august":"August","str_mail_month_december":"December","str_mail_month_february":"February","str_mail_month_january":"January","str_mail_month_july":"July","str_mail_month_june":"June","str_mail_month_march":"March","str_mail_month_may":"May","str_mail_month_november":"November","str_mail_month_october":"October","str_mail_month_september":"September","str_mail_plus_in_product_link_text":"Lose the ads!  Try Mail Plus.","str_mail_today":"Today","str_mail_weekday_abbr_friday":"Fri","str_mail_weekday_abbr_monday":"Mon","str_mail_weekday_abbr_saturday":"Sat","str_mail_weekday_abbr_sunday":"Sun","str_mail_weekday_abbr_thursday":"Thu","str_mail_weekday_abbr_tuesday":"Tue","str_mail_weekday_abbr_wednesday":"Wed","str_mail_weekday_friday":"Friday","str_mail_weekday_monday":"Monday","str_mail_weekday_saturday":"Saturday","str_mail_weekday_sunday":"Sunday","str_mail_weekday_thursday":"Thursday","str_mail_weekday_tuesday":"Tuesday","str_mail_weekday_wednesday":"Wednesday","str_mail_year":"Year","str_mail_yesterday":"Yesterday","str_srch_add_filters":"Add More Filters","str_srch_also_try":"Also try:","str_srch_bmp":"BMP","str_srch_doc":"DOC","str_srch_docx":"DOCX","str_srch_dot":"DOT","str_srch_dotx":"DOTX","str_srch_enter_search_terms_title":"No search terms entered","str_srch_flagged":"Starred","str_srch_forwarded":"Forwarded","str_srch_from":"From:","str_srch_htm":"HTM","str_srch_jpeg":"JPEG","str_srch_jpg":"JPG","str_srch_mp3":"MP3","str_srch_mpeg":"MPEG","str_srch_mpg":"MPG","str_srch_msword":"Word","str_srch_notrefined":"To show results faster, we did not create filters for this search.","str_srch_pagination_footer":"Page {{current}} of {{total}}","str_srch_png":"PNG","str_srch_pot":"POT","str_srch_potx":"POTX","str_srch_ppt":"PPT","str_srch_pptx":"PPTX","str_srch_read":"Read","str_srch_refineby_attachment":"Attachments","str_srch_refineby_date":"Date","str_srch_refineby_event":"Events \/ ToDos","str_srch_refineby_folder":"Folder","str_srch_refineby_sender":"Sender","str_srch_refineby_sender_details":"Sender Details","str_srch_refineby_status":"Status","str_srch_refineby_type":"Message Type","str_srch_refined_by":"Results Narrowed By:","str_srch_refinements":"Narrow Results By:","str_srch_related_res":"Related Web Searches","str_srch_replied":"Replied","str_srch_rtf":"RTF","str_srch_showrefinements":"Show Filters","str_srch_sponsored_res":"Sponsored Results","str_srch_tif":"TIF","str_srch_tiff":"TIFF","str_srch_title_remove_refinement_attr":"Remove Filter","str_srch_unflagged":"Unstarred","str_srch_unread":"Unread","str_srch_view_all":"View All","str_srch_view_all_attachment_attr":"View All Attachments","str_srch_view_all_date_attr":"View All Dates","str_srch_view_all_folder_attr":"View All Folders","str_srch_view_all_sender_attr":"View All Senders","str_srch_view_all_type_attr":"View All Types","str_srch_view_less":"View Less","str_srch_view_less_attachment_attr":"View Less Attachments","str_srch_view_less_sender_attr":"View Less Senders","str_srch_xls":"XLS","str_srch_xlsb":"XSLB","str_srch_xlsm":"XSLM","str_srch_xlsx":"XLSX","str_srch_xlt":"XLT","str_srch_xltx":"XLTX","str_dm_title":"Mail Search Tips","str_dm_description":"Start you search with \"subject:\" to search within subject lines","str_dm_pretty_url":"More Tips","str_dm_note":"Advertisement"});
}, '1.0.0');YUI.add("ac-widget",function(F){var D=F.Lang,A=F.contacts,H=A.api,E=A.utils,G=F.comms;function C(J){var K=D.isUndefined,M=this,L,I;J.ac=M._getEventPlugin(J);L='<li role="option" ><span class="ac-value">{{hilite}}</span><span title="{{str_ac_remove_item}}" data-action="ac-remove-item" data-ac-sc={{isSmartContact}} data-ac-email-field-id="{{emailFieldId}}" data-ac-id="{{id}}" data-ac-email="{{email}}" class="ac-remove-item">X{{str_ac_remove_item}}</span></li>';I='<li role="option" ><span class="ac-value">{{hilite}}</span></li>';if(J.ac){C.superclass.constructor.apply(M,[J]);}M.set("itemTplNoDelete",I);M.set("itemTplWithDelete",NeoConfig.enableContactDelete?L:I);}C.NAME="ACWidget";function B(){var I=arguments;F.use("rocket-stats",function(){F.common.Utils.rocketstats.stat.apply(0,I);});}F.extend(C,G.ui.AutoComplete,{bind:function(I){C.superclass.bind.apply(this,arguments);},bindUI:function(I){C.superclass.bindUI.apply(this,arguments);},_getEventPlugin:function(I){var J=false,K=D.isUndefined;if(!K(I.acNode)&&!K(I.acTarget)){J=I.acTarget.plug(G.ui.AutoCompleteEventsPlugin,{alignNode:I.acNode}).ac;}return J;},refresh:function(I){var K=this,J=false;J=K._getEventPlugin(I);if(J){I.ac=J;return K.setAttrs(I);}return K;},getItemMarkup:function(L){var I=this,K=I.updateHighlighting(L),J;if(L.isCategory){J=F.common.Utils.substitute(I.get("itemTplNoDelete"),{hilite:K},0,0,0,0,strings);}else{J=F.common.Utils.substitute(I.get("itemTplWithDelete"),{hilite:K,id:L.id,email:L.email,emailFieldId:L.emailField.id,isSmartContact:L.isSmartContact||0},0,0,0,0,strings);}return J;},buildName:function(M,K,L,I){if(M||K||L){var J=F.common.Utils.substitute(strings["str_name_format"],{given_name:M?M:"",middle_name:K?K:"",family_name:L?L:""});J=J.replace(/ +(?= )/g,"");if(I&&NeoConfig.intl==="jp"){J=J+" ("+strings.str_form_lbl_nickname+I+")";}}else{if(I){J=I;}else{J="";}}return J;},updateHighlighting:function(U){var K=U.matches,b=this;if(K&&(K.nickname||K.user||K.firstname||K.lastname||K.mobileno||K.homeno||K.workno||K.email)){var i=F.Lang.isArray(K.nickname)&&K.nickname.length>0?true:false,S=F.Lang.isArray(K.firstname)&&K.firstname.length>0?true:false,L=F.Lang.isArray(K.lastname)&&K.lastname.length>0?true:false,V=F.Lang.isArray(K.mobileno)&&K.mobileno.length>0?true:false,g=F.Lang.isArray(K.homeno)&&K.homeno.length>0?true:false,M=F.Lang.isArray(K.workno)&&K.workno.length>0?true:false,N=F.Lang.isArray(K.email)&&K.email.length>0?true:false;var m=U.user||null,d=U.nickname||null,h=U.firstname||null,P=U.lastname||null,W=U.mobileno||null,R=U.homeno||null,Q=U.workno||null,Z=U.email||null,k=U.sc_score;var j=i?b._hlMatch(d,K.nickname):(d&&d.length>0?d:null),J=S?b._hlMatch(h,K.firstname):(h&&h.length>0?h:null),e=L?b._hlMatch(P,K.lastname):(P&&P.length>0?P:null),T=V?b._hlMatch(W,K.mobileno):null,c=g?b._hlMatch(R,K.homeno):null,I=M?b._hlMatch(Q,K.workno):null,f=N?b._hlMatch(Z,K.email):null;var a,l,X,Y;l="";l=b.buildName(J,"",e,j);j=i?j:null;J=S?J:null;e=L?e:null;X="";if(f){X+=f;}else{X+=Z;}a=l||"";a=F.Lang.trim(a);if(a!=""){if(NeoConfig.bidi){Y=F.Intl.detectDirection(a.replace(/<\/?b\>/,""));a="<span dir="+Y+">"+a+"</span>";}else{a="<span>"+a+"</span>";}}if(X.length>0){if(a.length>0){a+=" ";}if(a==""){a+="<em class='email no-name' dir='ltr'>"+X+"</em>";}else{a+="<em class='email' dir='ltr'>("+X+")</em>";}}}function O(r,q,o,p,n){switch(q){case"amp":if(o){return"&"+o+";";}else{return"&";}case"#39":return"'";case"quot":return'"';case"lt":return"<";case"gt":return">";case"#35":return"#";default:return"";}}a=a.replace(/&((?:[a-zA-Z]+)|(?:#[0-9]+));(?:([a-zA-Z]+|(?:#[0-9]+));)?|([;,])/gi,O);if(NeoConfig.smartcomplete_enabled=="debug"){if(F.UA["gecko"]){a+='<span style = "float:right; margin-top: -15px; color:red;">'+k.toFixed(6);+"</span>";}else{a+='<span style = "float:right; color:red;">'+k.toFixed(6);+"</span>";}}return a;},_hlMatch:function(I,N){var O=I;var K,M,J,P,L;N.sort(this._sortMatches);M=O.length;for(K=N.length-1;K>=0;K--){J=N[K];if(NeoConfig.bidi){P=O.substring(0,J.startIndex);L=O.substring(J.endIndex,M)+O.substring(M);O=P+F.comms.Intl.highlightString(O.substring(J.startIndex,J.endIndex),P,L)+L;}else{O=O.substring(0,J.startIndex)+this.hlFn(O.substring(J.startIndex,J.endIndex))+O.substring(J.endIndex,M)+O.substring(M);}M=J.startIndex;}O=O.substring(0,M)+O.substring(M);return O;},hlFn:function(I){return"<b>"+I+"</b>";},_sortMatches:function(J,I){if(typeof J==="object"&&typeof I==="object"&&typeof J.startIndex==="number"&&typeof I.startIndex==="number"){return +(J.startIndex-I.startIndex);}else{return 0;}},click:function(L){var P=this,O=P.get("ac");L.halt();if(L.target.hasClass("ac-remove-item")){var K=L.target,Q=parseInt(K.getAttribute("data-ac-sc"),10),I=K.getAttribute("data-ac-id"),N=K.getAttribute("data-ac-email-field-id"),M=K.getAttribute("data-ac-email");F.fire("mt:click",{action:"ac_del",append:{ltxt:P["_selectedIndex"]}});F.use("common-ui-dialog-helper","_shared_module_offscreen_bin_modal_btn_generic",function(V){var W=V.common.Utils.substitute(V.ui.Templates._shared_module_offscreen_bin_modal_btn_generic.base,0,0,0,{btnID:"ok",btnLabel:strings.str_delete}),S=V.common.Utils.substitute(V.ui.Templates._shared_module_offscreen_bin_modal_btn_generic.base,0,0,0,{btnID:"cancel","default":"default",btnLabel:strings.str_btn_cancel}),U={hd:strings.str_address_remove_hd,bd:V.common.Utils.substitute(Q?strings.str_sc_remove_bd:strings.str_contacts_remove_bd,{name:M}),ft:W+S},T={ok:{handler:function(){V.contacts.smartcontacts.api.deleteSmartContacts([M]);var X=new G.FilterContacts();V.contacts.api.removeEmail(I,parseInt(N),X.buildContactsIndex);O.set("queryValue","");B("autocomplete-delete",Q?"smartContact":"ABContact");U={hd:strings.str_address_removed_hd,bd:V.common.Utils.substitute(strings.str_address_removed_bd,{name:M}),ft:V.common.Utils.substitute(V.ui.Templates._shared_module_offscreen_bin_modal_btn_generic.base,0,0,0,{btnID:"ok","default":"default",btnLabel:strings.str_ok})};V.common.ui.DialogHelper.createCommon(U);}},cancel:{handler:function(){O.set("queryValue","");
}}},R=function(X){};V.common.ui.DialogHelper.createCommon(U,T,R);});}else{F.fire("mt:click",{action:"ac_select",append:{ltxt:P["_selectedIndex"]}});var J=L.currentTarget.one(".ac-value").get("text");O.set("queryValue",J);P["_selectedIndex"]=-1;O.get("host").simulate("keydown",{keyCode:13});P._currentValue=J;O.get("host").focus();}P.hide();},handleEnter:function(O,J){var M=J.get("ac"),I=J["_selectedIndex"],L,P;O.halt();var K=new G.FilterContacts();if(J.get("data").queryStr!=M.get("queryValue")){K.updateFilterItems(M.get("queryValue"));var N=K.filterContacts(E.getSortedFlatContacts(["firstname","lastname","email"]));J.setAttrs({query:M.get("queryValue"),data:N}).drawMarkUp().setAlign().show();}if(I!=-1){L=J.item(I);if(L){P=L.one(".ac-value").get("text");M.set("queryValue",P);}J["_selectedIndex"]=-1;M.get("host").focus();J.hide();}}});F.namespace("contacts.ui");F.contacts.ui.ACWidget=C;},"1.0.0",{requires:["overlay","node-event-simulate","comms-ui-autocomplete-plugin","comms-ui-autocomplete","contacts-api-utils","contacts-api","filter-contacts","common-utils","comms-intl-bidihighlight","contacts-smartcontacts-api"]});YUI.add("_shared_module_offscreen_bin_compose",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_compose={base:'<div id="ac-to-results" class="ac-results"></div><div id="ac-cc-results" class="ac-results"></div><div id="ac-bcc-results" class="ac-results"></div>'};},"1.0.0");YUI.add("comms-utils",function(E){E.namespace("comms");var B={},D=E.Object,C=E.Lang,A=C.trim,F=/{{([^{}]*)}}/g;E.mix(B,{substitute:function(M,L,I,H,G,K,J){if(typeof M!=="string"){return;}if(J){M=J.str||M;L=J.obj||L;I=J.formatters||I;H=J.args||H;G=J.strings||G;K=J.templates||K;}return M.replace(F,function(O,N){var Q,P,R=B.substitute;if(I&&(Q=(J&&J.formatters)?J.formatters[N]:I[N])){return(Q(L,H,J))||"";}else{if(L&&N in L){P=L[N];return typeof P==="string"&&P.match(F)?R(P,L,I,H,G,K,J):P;}else{if(G&&N in G){P=G[N];return P.match(F)?R(P,L,I,H,G,K,J):P;}else{if(K&&N in K){return R(K[N].base||K[N],L,I,H,G,K,J);}else{return"";}}}}});},escapeHtml:function(G){if(G===null){return null;}G=""+G;G=G.replace(/&(?!(amp|lt|gt|quot|#39|#92);)/g,"&amp;");G=G.replace(/</g,"&lt;");G=G.replace(/>/g,"&gt;");G=G.replace(/\"/g,"&quot;");G=G.replace(/\'/g,"&#39;");G=G.replace(/\\/g,"&#92;");return G;},unescapeHtml:function(G){if(G===null){return null;}G=""+G;G=G.replace(/&amp;/g,"&");G=G.replace(/&lt;/g,"<");G=G.replace(/&gt;/g,">");G=G.replace(/&quot;/g,'"');G=G.replace(/&#39;/g,"'");G=G.replace(/&#92;/g,"\\");return G;},createAddress:function(M){var G=false,I=null,H=null,K=/(<[^<>]+@[^<>]+\.[^<>]+>)|(\([^\(\)]+@[^\(\)]+\.[^\(\)]+\))|(\[[^\[\]]+@[^\[\]]+\.[^\[\]]+\])/,L,J=M.replace(/\".*\"/g,"");if(!A(J)||J.indexOf("@")<0){return{fail:true,email:M,name:B.escapeHtml(M)};}if(K.test(M)){L=M.match(K);H=L[0];I=A(M.replace(H,""));H=H.substring(1,H.length-1);}else{H=I=A(M);}if(!B.isValidEmail(H)){G=true;}return{fail:G,email:H,name:B.escapeHtml(I)};},isValidEmail:function(R){if(!R){return false;}var N=0,H=R,J=R.lastIndexOf("@"),S=R.substr(0,J),M=S.replace(/\\\\/g,""),I=S.length,L=R.substr(J+1),G=L.length,O=/^(\\.|[A-Za-z0-9!#%&`_=\/$'*+?^{}|~.-])+$/,K=/^"(\\"|[^"])+"$/,Q=/(^\..*)|(.*\.$)/,P=/^[A-Za-z0-9\-]+$/,T=/\.\./;if(!O.test(M)&&!K.test(M)){H=false;}L=L.split(".");G=L.length;if(G<2){H=false;}while(N<G){if(!P.test(L[N++])){H=false;}}return H;},splitName:function(M){var Q={},N,J,L=A(M),R,H,K=[],I=((strings.str_name_format).replace(/\{|\}/g,"")).split(" "),P=/^(?:\w[^\s@]*@[^\s@]+\.[^\s@]{2,})?$/,O=false,G=true;if(I[0]=="family_name"){O=true;}if(I.length<3){G=false;}while(L){R=L.match(/([^\u3000\s]*)[\u3000\s]+/);if(!R||R.length!==2||!R[0]){K.push(L);break;}K.push(R[1]);L=L.substring(R[0].length);}N=K.length;for(J=0;J<N;J+=1){H=K[J];switch(J){case 0:if(H){Q[(O?"familyName":"givenName")]=(N==1&&P.test(H))?"":H;}break;case 1:if(G&&2<N){Q.middleName=H;}else{Q[(O?"givenName":"familyName")]=H;}break;case 2:if(G){Q[(O?"givenName":"familyName")]=H;}else{Q[(O?"givenName":"familyName")]+=" "+H;}break;default:Q[(O?"givenName":"familyName")]+=" "+H;}}return Q;}});E.comms.Utils=B;},"1.0.0",{requires:[]});YUI.add("searchautocomplete",function(B){var C=NeoConfig.uh3Enabled,G=C?NeoConfig.searchField||B.one("#mnp-search_box"):B.one("#yuhead-search")||B.one("#search"),L=NeoConfig.searchField||G.one("input")||B.one("#mnp-search_box"),E=B.contacts,F=E.utils,I=B.common.Utils,H=I.substitute,K=5;B.on("contacts:api:loaded",function(M){A();});L.on("focus",function(M){if(F.areContactsLoaded()){A();}});L.on("keydown",function(M){var N=M.keyCode;M.stopPropagation();switch(N){case 13:if(M.ctrlKey||M.metaKey){return;}var V=this.get("value"),T,W=null,U=null,Q=null,R=false,P=false,S,O;if(C){T=B.ACWidgetInst.get("contentBox");W=T.one(".yui3-acwidget-selected");U=T.one(".ac-search-mail");Q=T.one(".ac-search-web");}if(W){if(U&&U.contains(W)){B.fire("fireSearch",V);B.fire("mt:click",{action:"ml_srch",spid:"search_results"});R=true;S=new B.EventTarget();S.publish("ucs:mailSearch",{broadcast:2,emitFacade:true});S.fire("ucs:mailSearch");}else{if(Q&&Q.contains(W)){S=new B.EventTarget();S.publish("ucs:webSearch",{broadcast:2,emitFacade:true});S.fire("ucs:webSearch",{query:V});B.fire("mt:click",{action:"wb_srch"});R=true;}else{P=true;}}}if(!R){if(B.ACWidgetInst&&B.ACWidgetInst.isVisible()&&B.ACWidgetInst.get("data").length>0&&B.ACWidgetInst.get("selectedIndex")>-1){B.ACWidgetInst.handleEnter(M,B.ACWidgetInst);}else{if(C){B.fire("mt:click",{action:P?"ml_srch_sugg":"ml_srch",spid:"search_results"});}B.fire("fireSearch",V);S=new B.EventTarget();O=P?"ucs:mailSearchSugg":"ucs:mailSearch";S.publish(O,{broadcast:2,emitFacade:true});S.fire(O);}}B.ACWidgetInst.hide();M.halt();break;}});function A(){if(NeoConfig.isCorpmail){B.use("ac-corp-widget",J);}else{J();}}function J(){if(!B.ACWidgetInst){var M=H(B.ui.Templates._shared_module_offscreen_bin_compose.base,{},null,null,strings,B.ui.Templates),N=NeoConfig.isCorpmail?E.ui.ACCorpWidget:E.ui.ACWidget;B.one(document.body).append(M);B.ACWidgetInst=new N({acNode:G,acTarget:L,contentBox:"#ac-to-results",selectFirst:false}).setAlign().render();}else{if(B.ACWidgetInst.get("ac").get("alignNode")!==G){B.ACWidgetInst.get("ac").destructor();B.ACWidgetInst.refresh({acNode:G,acTarget:L,width:G.getStyle("width"),selectFirst:false}).setAlign().render();}}B.ACWidgetInst.get("ac").detach("ac:query");B.ACWidgetInst.get("ac").on("ac:query",function(Q){var W=this,S=Q.value,U,R=this.get("badResult"),P,T,V;if(R){P=I.escapeRegexp(I.escapeHtml(R));T=new RegExp("^"+P,"gi");if(Q.value.match(T)){this.fire("ac:load",{results:[],query:Q.value});D(S);return;}}if(F.areContactsLoaded()){var O=new B.comms.FilterContacts();O.updateFilterItems(S);U=O.fastMatch();U.queryStr=S;if(U.length>K){U.length=K;}V=B.bind(W.reload,W,U);V(U);}D(S);});}function D(P){if(!C){return;}B.ACWidgetInst.setSize();var M=B.ACWidgetInst.get("contentBox"),O='<ul role="presentation" class="ac-search-mail"><li role="option">'+strings.str_uh_searchmail+'<span class="ac-value hidden">'+P+"</span></li></ul>",N='<ul role="presentation" class="ac-search-web"><li role="option">'+strings.str_uh_search_web_for.replace("{{query}}",P)+'<span class="ac-value hidden">'+P+"</span></li></ul>",Q=M.one(".ac-search-mail li");acSearchWeb=M.one(".ac-search-web li");if(NeoConfig&&!NeoConfig.has2ButtonSearch){if(!Q){M.insertBefore(O,M.get("firstChild"));}else{Q.setContent(O);}if(!acSearchWeb){M.appendChild(N);}else{acSearchWeb.setContent(N);}}M.all("span.ac-remove-item").remove();if(B.ACWidgetInst.get("data").length>0){B.fire("mt:view",{action:"hdr_ac_sugg"});}else{B.fire("mt:view",{action:"hdr_ac"});}M.setStyle("display","block");}},"1.0.0",{requires:["ac-widget","filter-contacts","forms_css","autocomplete_css","_shared_module_offscreen_bin_compose","common-utils","comms-utils","mail-ui-searchbar"]});/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("node-focusmanager",function(e,t){var n="activeDescendant",r="id",i="disabled",s="tabIndex",o="focused",u="focusClass",a="circular",f="UI",l="key",c=n+"Change",h="host",p={37:!0,38:!0,39:!0,40:!0},d={a:!0,button:!0,input:!0,object:!0},v=e.Lang,m=e.UA,g=function(){g.superclass.constructor.apply(this,arguments)};g.ATTRS={focused:{value:!1,readOnly:!0},descendants:{getter:function(e){return this.get(h).all(e)}},activeDescendant:{setter:function(t){var n=v.isNumber,i=e.Attribute.INVALID_VALUE,s=this._descendantsMap,o=this._descendants,u,a,f;return n(t)?(u=t,a=u):t instanceof e.Node&&s?(u=s[t.get(r)],n(u)?a=u:a=i):a=i,o&&(f=o.item(u),f&&f.get("disabled")&&(a=i)),a}},keys:{value:{next:null,previous:null}},focusClass:{},circular:{value:!0}},e.extend(g,e.Plugin.Base,{_stopped:!0,_descendants:null,_descendantsMap:null,_focusedNode:null,_lastNodeIndex:0,_eventHandlers:null,_initDescendants:function(){var t=this.get("descendants"),o={},u=-1,a,f=this.get(n),l,c,h=0;v.isUndefined(f)&&(f=-1);if(t){a=t.size();for(h=0;h<a;h++)l=t.item(h),u===-1&&!l.get(i)&&(u=h),f<0&&parseInt(l.getAttribute(s,2),10)===0&&(f=h),l&&l.set(s,-1),c=l.get(r),c||(c=e.guid(),l.set(r,c)),o[c]=h;f<0&&(f=0),l=t.item(f);if(!l||l.get(i))l=t.item(u),f=u;this._lastNodeIndex=a-1,this._descendants=t,this._descendantsMap=o,this.set(n,f),l&&l.set(s,0)}},_isDescendant:function(e){return e.get(r)in this._descendantsMap},_removeFocusClass:function(){var e=this._focusedNode,t=this.get(u),n;t&&(n=v.isString(t)?t:t.className),e&&n&&e.removeClass(n)},_detachKeyHandler:function(){var e=this._prevKeyHandler,t=this._nextKeyHandler;e&&e.detach(),t&&t.detach()},_preventScroll:function(e){p[e.keyCode]&&this._isDescendant(e.target)&&e.preventDefault()},_fireClick:function(e){var t=e.target,n=t.get("nodeName").toLowerCase();e.keyCode===13&&(!d[n]||n==="a"&&!t.getAttribute("href"))&&t.simulate("click")},_attachKeyHandler:function(){this._detachKeyHandler();var t=this.get("keys.next"),n=this.get("keys.previous"),r=this.get(h),i=this._eventHandlers;n&&(this._prevKeyHandler=e.on(l,e.bind(this._focusPrevious,this),r,n)),t&&(this._nextKeyHandler=e.on(l,e.bind(this._focusNext,this),r,t)),m.opera&&i.push(r.on("keypress",this._preventScroll,this)),m.opera||i.push(r.on("keypress",this._fireClick,this))},_detachEventHandlers:function(){this._detachKeyHandler();var t=this._eventHandlers;t&&(e.Array.each(t,function(e){e.detach()}),this._eventHandlers=null)},_attachEventHandlers:function(){var t=this._descendants,n,r,i;t&&t.size()&&(n=this._eventHandlers||[],r=this.get(h).get("ownerDocument"),n.length===0&&(n.push(r.on("focus",this._onDocFocus,this)),n.push(r.on("mousedown",this._onDocMouseDown,this)),n.push(this.after("keysChange",this._attachKeyHandler)),n.push(this.after("descendantsChange",this._initDescendants)),n.push(this.after(c,this._afterActiveDescendantChange)),i=this.after("focusedChange",e.bind(function(e){e.newVal&&(this._attachKeyHandler(),i.detach())},this)),n.push(i)),this._eventHandlers=n)},_onDocMouseDown:function(e){var t=this.get(h),n=e.target,r=t.contains(n),i,s=function(e){var n=!1;return e.compareTo(t)||(n=this._isDescendant(e)?e:s.call(this,e.get("parentNode"))),n};r&&(i=s.call(this,n),i?n=i:!i&&this.get(o)&&(this._set(o,!1),this._onDocFocus(e))),r&&this._isDescendant(n)?this.focus(n):m.webkit&&this.get(o)&&(!r||r&&!this._isDescendant(n))&&(this._set(o,!1),this._onDocFocus(e))},_onDocFocus:function(e){var t=this._focusTarget||e.target,n=this.get(o),r=this.get(u),i=this._focusedNode,s;this._focusTarget&&(this._focusTarget=null),this.get(h).contains(t)?(s=this._isDescendant(t),!n&&s?n=!0:n&&!s&&(n=!1)):n=!1,r&&(i&&(!i.compareTo(t)||!n)&&this._removeFocusClass(),s&&n&&(r.fn?(t=r.fn(t),t.addClass(r.className)):t.addClass(r),this._focusedNode=t)),this._set(o,n)},_focusNext:function(e,t){var r=t||this.get(n),i;this._isDescendant(e.target)&&r<=this._lastNodeIndex&&(r+=1,r===this._lastNodeIndex+1&&this.get(a)&&(r=0),i=this._descendants.item(r),i&&(i.get("disabled")?this._focusNext(e,r):this.focus(r))),this._preventScroll(e)},_focusPrevious:function(e,t){var r=t||this.get(n),i;this._isDescendant(e.target)&&r>=0&&(r-=1,r===-1&&this.get(a)&&(r=this._lastNodeIndex),i=this._descendants.item(r),i&&(i.get("disabled")?this._focusPrevious(e,r):this.focus(r))),this._preventScroll(e)},_afterActiveDescendantChange:function(e){var t=this._descendants.item(e.prevVal);t&&t.set(s,-1),t=this._descendants.item(e.newVal),t&&t.set(s,0)},initializer:function(e){this.start()},destructor:function(){this.stop(),this.get(h).focusManager=null},focus:function(e){v.isUndefined(e)&&(e=this.get(n)),this.set(n,e,{src:f});var t=this._descendants.item(this.get(n));t&&(t.focus(),m.opera&&t.get("nodeName").toLowerCase()==="button"&&(this._focusTarget=t))},blur:function(){var e;this.get(o)&&(e=this._descendants.item(this.get(n)),e&&(e.blur(),this._removeFocusClass()),this._set(o,!1,{src:f}))},start:function(){this._stopped&&(this._initDescendants(),this._attachEventHandlers(),this._stopped=!1)},stop:function(){this._stopped||(this._detachEventHandlers(),this._descendants=null,this._focusedNode=null,this._lastNodeIndex=0,this._stopped=!0)},refresh:function(){this._initDescendants(),this._eventHandlers||this._attachEventHandlers()}}),g.NAME="nodeFocusManager",g.NS="focusManager",e.namespace("Plugin"),e.Plugin.NodeFocusManager=g},"3.7.2",{requires:["attribute","node","plugin","node-event-simulate","event-key","event-focus"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("node-menunav",function(e,t){var n=e.UA,r=e.later,i=e.ClassNameManager.getClassName,s="menu",o="menuitem",u="hidden",a="parentNode",f="children",l="offsetHeight",c="offsetWidth",h="px",p="id",d=".",v="handledMouseOut",m="handledMouseOver",g="active",y="label",b="a",w="mousedown",E="keydown",S="click",x="",T="first-of-type",N="role",C="presentation",k="descendants",L="UI",A="activeDescendant",O="useARIA",M="aria-hidden",_="content",D="host",P=A+"Change",H="autoSubmenuDisplay",B="mouseOutHideDelay",j=i(s),F=i(s,u),I=i(s,"horizontal"),q=i(s,y),R=i(s,y,g),U=i(s,y,s+"visible"),z=i(o),W=i(o,g),X=d+j,V=d+i(s,"toggle"),$=d+i(s,_),J=d+q,K=">"+$+">ul>li>a",Q=">"+$+">ul>li>"+J+">a:first-child",G=function(e){var t=e.previous(),n;return t||(n=e.get(a).get(f),t=n.item(n.size()-1)),t},Y=function(e){var t=e.next();return t||(t=e.get(a).get(f).item(0)),t},Z=function(e){var t=!1;return e&&(t=e.get("nodeName").toLowerCase()===b),t},et=function(e){return e.hasClass(z)},tt=function(e){return e.hasClass(q)},nt=function(e){return e.hasClass(I)},rt=function(e){return e.hasClass(U)},it=function(e){return Z(e)?e:e.one(b)},st=function(e,t,n){var r;return e&&(e.hasClass(t)&&(r=e),!r&&n&&(r=e.ancestor(d+t))),r},ot=function(e){return e.ancestor(X)},ut=function(e,t){return st(e,j,t)},at=function(e,t){var n;return e&&(n=st(e,z,t)),n},ft=function(e,t){var n;return e&&(t?n=st(e,q,t):n=st(e,q)||e.one(d+q)),n},lt=function(e,t){var n;return e&&(n=at(e,t)||ft(e,t)),n},ct=function(e){return lt(e.one("li"))},ht=function(e){return et(e)?W:R},pt=function(e,t){return e&&!e[m]&&(e.compareTo(t)||e.contains(t))},dt=function(e,t){return e&&!e[v]&&!e.compareTo(t)&&!e.contains(t)},vt=function(){vt.superclass.constructor.apply(this,arguments)};vt.NAME="nodeMenuNav",vt.NS="menuNav",vt.SHIM_TEMPLATE_TITLE="Menu Stacking Shim",vt.SHIM_TEMPLATE='<iframe frameborder="0" tabindex="-1" class="'+i("shim")+'" title="'+vt.SHIM_TEMPLATE_TITLE+'" src="javascript:false;"></iframe>',vt.ATTRS={useARIA:{value:!0,writeOnce:!0,lazyAdd:!1,setter:function(t){var n=this.get(D),r,u,a,f;t&&(n.set(N,s),n.all("ul,li,"+$).set(N,C),n.all(d+i(o,_)).set(N,o),n.all(d+q).each(function(t){r=t,u=t.one(V),u&&(u.set(N,C),r=u.previous()),r.set(N,o),r.set("aria-haspopup",!0),a=t.next(),a&&(a.set(N,s),r=a.previous(),u=r.one(V),u&&(r=u),f=e.stamp(r),r.get(p)||r.set(p,f),a.set("aria-labelledby",f),a.set(M,!0))}))}},autoSubmenuDisplay:{value:!0,writeOnce:!0},submenuShowDelay:{value:250,writeOnce:!0},submenuHideDelay:{value:250,writeOnce:!0},mouseOutHideDelay:{value:750,writeOnce:!0}},e.extend(vt,e.Plugin.Base,{_rootMenu:null,_activeItem:null,_activeMenu:null,_hasFocus:!1,_blockMouseEvent:!1,_currentMouseX:0,_movingToSubmenu:!1,_showSubmenuTimer:null,_hideSubmenuTimer:null,_hideAllSubmenusTimer:null,_firstItem:null,initializer:function(t){var n=this,r=this.get(D),i=[],s;r&&(n._rootMenu=r,r.all("ul:first-child").addClass(T),r.all(X).addClass(F),i.push(r.on("mouseover",n._onMouseOver,n)),i.push(r.on("mouseout",n._onMouseOut,n)),i.push(r.on("mousemove",n._onMouseMove,n)),i.push(r.on(w,n._toggleSubmenuDisplay,n)),i.push(e.on("key",n._toggleSubmenuDisplay,r,"down:13",n)),i.push(r.on(S,n._toggleSubmenuDisplay,n)),i.push(r.on("keypress",n._onKeyPress,n)),i.push(r.on(E,n._onKeyDown,n)),s=r.get("ownerDocument"),i.push(s.on(w,n._onDocMouseDown,n)),i.push(s.on("focus",n._onDocFocus,n)),this._eventHandlers=i,n._initFocusManager())},destructor:function(){var t=this._eventHandlers;t&&(e.Array.each(t,function(e){e.detach()}),this._eventHandlers=null),this.get(D).unplug("focusManager")},_isRoot:function(e){return this._rootMenu.compareTo(e)},_getTopmostSubmenu:function(e){var t=this,n=ot(e),r;return n?t._isRoot(n)?r=e:r=t._getTopmostSubmenu(n):r=e,r},_clearActiveItem:function(){var e=this,t=e._activeItem;t&&t.removeClass(ht(t)),e._activeItem=null},_setActiveItem:function(e){var t=this;e&&(t._clearActiveItem(),e.addClass(ht(e)),t._activeItem=e)},_focusItem:function(e){var t=this,n,r;e&&t._hasFocus&&(n=ot(e),r=it(e),n&&!n.compareTo(t._activeMenu)&&(t._activeMenu=n,t._initFocusManager()),t._focusManager.focus(r))},_showMenu:function(t){var r=ot(t),i=t.get(a),s=i.getXY();this.get(O)&&t.set(M,!1),nt(r)?s[1]=s[1]+i.get(l):s[0]=s[0]+i.get(c),t.setXY(s),n.ie<8&&(n.ie===6&&!t.hasIFrameShim&&(t.appendChild(e.Node.create(vt.SHIM_TEMPLATE)),t.hasIFrameShim=!0),t.setStyles({height:x,width:x}),t.setStyles({height:t.get(l)+h,width:t.get(c)+h})),t.previous().addClass(U),t.removeClass(F)},_hideMenu:function(e,t){var n=this,r=e.previous(),i;r.removeClass(U),t&&(n._focusItem(r),n._setActiveItem(r)),i=e.one(d+W),i&&i.removeClass(W),e.setStyles({left:x,top:x}),e.addClass(F),n.get(O)&&e.set(M,!0)},_hideAllSubmenus:function(t){var n=this;t.all(X).each(e.bind(function(e){n._hideMenu(e)},n))},_cancelShowSubmenuTimer:function(){var e=this,t=e._showSubmenuTimer;t&&(t.cancel(),e._showSubmenuTimer=null)},_cancelHideSubmenuTimer:function(){var e=this,t=e._hideSubmenuTimer;t&&(t.cancel(),e._hideSubmenuTimer=null)},_initFocusManager:function(){var t=this,n=t._rootMenu,r=t._activeMenu||n,i=t._isRoot(r)?x:"#"+r.get("id"),s=t._focusManager,o,u,a;nt(r)?(u=i+K+","+i+Q,o={next:"down:39",previous:"down:37"}):(u=i+K,o={next:"down:40",previous:"down:38"}),s?(s.set(A,-1),s.set(k,u),s.set("keys",o)):(n.plug(e.Plugin.NodeFocusManager,{descendants:u,keys:o,circular:!0}),s=n.focusManager,a="#"+n.get("id")+X+" a,"+V,n.all(a).set("tabIndex",-1),s.on(P,this._onActiveDescendantChange,s,this),s.after(P,this._afterActiveDescendantChange,s,this),t._focusManager=s)},_onActiveDescendantChange:function(e,t){e.src===L&&t._activeMenu&&!t._movingToSubmenu&&t._hideAllSubmenus(t._activeMenu)},_afterActiveDescendantChange:function(e,t){var n;e.src===L&&(n=lt(this.get(k).item(e.newVal),!0),t._setActiveItem(n))},_onDocFocus:function(e){var t=this,n=t._activeItem,r=e.target,i;t._rootMenu.contains(r)?t._hasFocus?(i=ot(r),t._activeMenu.compareTo(i)||(t._activeMenu=i,t._initFocusManager(),t._focusManager.set(A,r),t._setActiveItem(lt(r,!0)))):(t._hasFocus=!0,n=lt(r,!0),n&&t._setActiveItem(n)):(t._clearActiveItem(),t._cancelShowSubmenuTimer(),t._hideAllSubmenus(t._rootMenu),t._activeMenu=t._rootMenu,t._initFocusManager(),t._focusManager.set(A,0),t._hasFocus=!1)},_onMenuMouseOver:function(e,t){var n=this,r=n._hideAllSubmenusTimer;r&&(r.cancel(),n._hideAllSubmenusTimer=null),n._cancelHideSubmenuTimer(),e&&!e.compareTo(n._activeMenu)&&(n._activeMenu=e,n._hasFocus&&n._initFocusManager()),n._movingToSubmenu&&nt(e)&&(n._movingToSubmenu=!1)},_hideAndFocusLabel:function(){var e=this,t=e._activeMenu,n;e._hideAllSubmenus(e._rootMenu),t&&(n=e._getTopmostSubmenu(t),e._focusItem(n.previous()))},_onMenuMouseOut:function(e,t){var n=this,i=n._activeMenu,s=t.relatedTarget,o=n._activeItem,u,a;i&&!i.contains(s)&&(u=ot(i),u&&!u.contains(s)?n.get(B)>0&&(n._cancelShowSubmenuTimer(),n._hideAllSubmenusTimer=r(n.get(B),n,n._hideAndFocusLabel)):o&&(a=ot(o),n._isRoot(a)||n._focusItem(a.previous())))},_onMenuLabelMouseOver:function(e,t){var n=this,i=n._activeMenu,s=n._isRoot(i),o=n.get(H)&&s||!s,u=n.get("submenuShowDelay"),a,f=function(t){n._cancelHideSubmenuTimer(),n._cancelShowSubmenuTimer(),rt(e)||(a=e.next(),a&&(n._hideAllSubmenus(i),n._showSubmenuTimer=r(t,n,n._showMenu,a)))};n._focusItem(e),n._setActiveItem(e),o&&(n._movingToSubmenu?n._hoverTimer=r(u,n,function(){f(0)}):f(u))},_onMenuLabelMouseOut:function(e,t){var n=this,i=n._isRoot(n._activeMenu),s=n.get(H)&&i||!i,o=t.relatedTarget,u=e.next(),a=n._hoverTimer;a&&a.cancel(),n._clearActiveItem(),s&&(n._movingToSubmenu&&!n._showSubmenuTimer&&u?n._hideSubmenuTimer=r(n.get("submenuHideDelay"),n,n._hideMenu,u):!n._movingToSubmenu&&u&&(!o||o&&!u.contains(o)&&!o.compareTo(u))&&(n._cancelShowSubmenuTimer(),n._hideMenu(u)))},_onMenuItemMouseOver:function(e,t){var n=this,r=n._activeMenu,i=n._isRoot(r),s=n.get(H)&&i||!i;n._focusItem(e),n._setActiveItem(e),s&&!n._movingToSubmenu&&n._hideAllSubmenus(r)},_onMenuItemMouseOut:function(e,t){this._clearActiveItem()},_onVerticalMenuKeyDown:function(e){var t=this,n=t._activeMenu,r=t._rootMenu,i=e.target,s=!1,o=e.keyCode,u,f,l,c;switch(o){case 37:f=ot(n),f&&nt(f)?(t._hideMenu(n),l=G(n.get(a)),c=lt(l),c&&(tt(c)?(u=c.next(),u?(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):(t._focusItem(c),t._setActiveItem(c))):(t._focusItem(c),t._setActiveItem(c)))):t._isRoot(n)||t._hideMenu(n,!0),s=!0;break;case 39:tt(i)?(u=i.next(),u&&(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u)))):nt(r)&&(u=t._getTopmostSubmenu(n),l=Y(u.get(a)),c=lt(l),t._hideAllSubmenus(r),c&&(tt(c)?(u=c.next(),u?(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):(t._focusItem(c),t._setActiveItem(c))):(t._focusItem(c),t._setActiveItem(c)))),s=!0}s&&e.preventDefault()},_onHorizontalMenuKeyDown:function(e){var t=this,n=t._activeMenu,r=e.target,i=lt(r,!0),s=!1,o=e.keyCode,u;o===40&&(t._hideAllSubmenus(n),tt(i)&&(u=i.next(),u&&(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))),s=!0)),s&&e.preventDefault()},_onMouseMove:function(e){var t=this;r(10,t,function(){t._currentMouseX=e.pageX})},_onMouseOver:function(e){var t=this,n,r,i,s,o;t._blockMouseEvent?t._blockMouseEvent=!1:(n=e.target,r=ut(n,!0),i=ft(n,!0),o=at(n,!0),pt(r,n)&&(t._onMenuMouseOver(r,e),r[m]=!0,r[v]=!1,s=ot(r),s&&(s[v]=!0,s[m]=!1)),pt(i,n)&&(t._onMenuLabelMouseOver(i,e),i[m]=!0,i[v]=!1),pt(o,n)&&(t._onMenuItemMouseOver(o,e),o[m]=!0,o[v]=!1))},_onMouseOut:function(e){var t=this,n=t._activeMenu,r=!1,i,s,o,u,a,f;t._movingToSubmenu=n&&!nt(n)&&e.pageX-5>t._currentMouseX,i=e.target,s=e.relatedTarget,o=ut(i,!0),u=ft(i,!0),f=at(i,!0),dt(u,s)&&(t._onMenuLabelMouseOut(u,e),u[v]=!0,u[m]=!1),dt(f,s)&&(t._onMenuItemMouseOut(f,e),f[v]=!0,f[m]=!1),u&&(a=u.next(),a&&s&&(s.compareTo(a)||a.contains(s))&&(r=!0));if(dt(o,s)||r)t._onMenuMouseOut(o,e),o[v]=!0,o[m]=!1},_toggleSubmenuDisplay:function(e){var t=this,r=e.target,i=ft(r,!0),s=e.type,o,u,a,f,l,c;if(i){o=Z(r)?r:r.ancestor(Z);if(o){a=o.getAttribute("href",2),f=a.indexOf("#"),l=a.length;if(f===0&&l>1){c=a.substr(1,l),u=i.next();if(u&&u.get(p)===c){if(s===w||s===E)(n.opera||n.gecko||n.ie)&&s===E&&!t._preventClickHandle&&(t._preventClickHandle=t._rootMenu.on("click",function(e){e.preventDefault(),t._preventClickHandle.detach(),t._preventClickHandle=null})),s==w&&(e.preventDefault(),e.stopImmediatePropagation(),t._hasFocus=!0),t._isRoot(ot(r))?rt(i)?(t._hideMenu(u),t._focusItem(i),t._setActiveItem(i)):(t._hideAllSubmenus(t._rootMenu),t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):t._activeItem==i?(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):i._clickHandle||(i._clickHandle=i.on("click",function(){t._hideAllSubmenus(t._rootMenu),t._hasFocus=!1,t._clearActiveItem(),i._clickHandle.detach(),i._clickHandle=null}));s===S&&e.preventDefault()}}}}},_onKeyPress:function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:e.preventDefault()}},_onKeyDown:function(e){var t=this,i=t._activeItem,s=e.target,o=ot(s),u;o&&(t._activeMenu=o,nt(o)?t._onHorizontalMenuKeyDown(e):t._onVerticalMenuKeyDown(e),e.keyCode===27&&(t._isRoot(o)?i&&(tt(i)&&rt(i)?(u=i.next(),u&&t._hideMenu(u)):(t._focusManager.blur(),t._clearActiveItem(),t._hasFocus=!1)):(n.opera?r(0,t,function(){t._hideMenu(o,!0)}):t._hideMenu(o,!0),e.stopPropagation(),t._blockMouseEvent=n.gecko?!0:!1)))},_onDocMouseDown:function(e){var t=this,r=t._rootMenu,i=e.target;!r.compareTo(i)&&!r.contains(i)&&(t._hideAllSubmenus(r),n.webkit&&(t._hasFocus=!1,t._clearActiveItem()))}}),e.namespace("Plugin"),e.Plugin.NodeMenuNav=vt},"3.7.2",{requires:["node","classnamemanager","plugin","node-focusmanager"],skinnable:!0});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("substitute",function(e,t){var n=e.Lang,r="dump",i=" ",s="{",o="}",u=/(~-(\d+)-~)/g,a=/\{LBRACE\}/g,f=/\{RBRACE\}/g,l=function(t,l,c,h){var p,d,v,m,g,y,b=[],w,E,S=t.length;for(;;){p=t.lastIndexOf(s,S);if(p<0)break;d=t.indexOf(o,p);if(p+1>=d)break;w=t.substring(p+1,d),m=w,y=null,v=m.indexOf(i),v>-1&&(y=m.substring(v+1),m=m.substring(0,v)),g=l[m],c&&(g=c(m,g,y)),n.isObject(g)?e.dump?n.isArray(g)?g=e.dump(g,parseInt(y,10)):(y=y||"",E=y.indexOf(r),E>-1&&(y=y.substring(4)),g.toString===Object.prototype.toString||E>-1?g=e.dump(g,parseInt(y,10)):g=g.toString()):g=g.toString():n.isUndefined(g)&&(g="~-"+b.length+"-~",b.push(w)),t=t.substring(0,p)+g+t.substring(d+1),h||(S=p-1)}return t.replace(u,function(e,t,n){return s+b[parseInt(n,10)]+o}).replace(a,s).replace(f,o)};e.substitute=l,n.substitute=l},"3.7.2",{requires:["yui-base"],optional:["dump"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-tap",function(e,t){function l(t,n,r,i){n=r?n:[n.START,n.MOVE,n.END,n.CANCEL],e.Array.each(n,function(e,n,r){var i=t[e];i&&(i.detach(),t[e]=null)})}var n=e.config.doc,r=!!n&&!!n.createTouch,i=r?"touchstart":"mousedown",s=r?"touchmove":"mousemove",o=r?"touchend":"mouseup",u=r?"touchcancel":"mousecancel",a="tap",f={START:"Y_TAP_ON_START_HANDLE",MOVE:"Y_TAP_ON_MOVE_HANDLE",END:"Y_TAP_ON_END_HANDLE",CANCEL:"Y_TAP_ON_CANCEL_HANDLE"};e.Event.define(a,{on:function(e,t,n){t[f.START]=e.on(i,this.touchStart,this,e,t,n)},detach:function(e,t,n){l(t,f)},delegate:function(e,t,n,r){t[f.START]=e.delegate(i,function(r){this.touchStart(r,e,t,n,!0)},r,this)},detachDelegate:function(e,t,n){l(t,f)},touchStart:function(e,t,n,i,a){var l={canceled:!1};if(e.button&&e.button===3)return;if(e.touches&&e.touches.length!==1)return;l.node=a?e.currentTarget:t,r&&e.touches?l.startXY=[e.touches[0].pageX,e.touches[0].pageY]:l.startXY=[e.pageX,e.pageY],n[f.MOVE]=t.once(s,this.touchMove,this,t,n,i,a,l),n[f.END]=t.once(o,this.touchEnd,this,t,n,i,a,l),n[f.CANCEL]=t.once(u,this.touchMove,this,t,n,i,a,l)},touchMove:function(e,t,n,r,i,s){l(n,[f.MOVE,f.END,f.CANCEL],!0,s),s.cancelled=!0},touchEnd:function(e,t,n,i,s,o){var u=o.startXY,c,h;r&&e.changedTouches?(c=[e.changedTouches[0].pageX,e.changedTouches[0].pageY],h=[e.changedTouches[0].clientX,e.changedTouches[0].clientY]):(c=[e.pageX,e.pageY],h=[e.clientX,e.clientY]),l(n,[f.MOVE,f.END,f.CANCEL],!0,o),Math.abs(c[0]-u[0])===0&&Math.abs(c[1]-u[1])===0&&(e.type=a,e.pageX=c[0],e.pageY=c[1],e.clientX=h[0],e.clientY=h[1],e.currentTarget=o.node,i.fire(e))}})},"3.7.2",{requires:["node-base","event-base","event-touch","event-synthetic"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("querystring-stringify",function(e,t){var n=e.namespace("QueryString"),r=[],i=e.Lang;n.escape=encodeURIComponent,n.stringify=function(e,t,s){var o,u,a,f,l,c,h=t&&t.sep?t.sep:"&",p=t&&t.eq?t.eq:"=",d=t&&t.arrayKey?t.arrayKey:!1;if(i.isNull(e)||i.isUndefined(e)||i.isFunction(e))return s?n.escape(s)+p:"";if(i.isBoolean(e)||Object.prototype.toString.call(e)==="[object Boolean]")e=+e;if(i.isNumber(e)||i.isString(e))return n.escape(s)+p+n.escape(e);if(i.isArray(e)){c=[],s=d?s+"[]":s,f=e.length;for(a=0;a<f;a++)c.push(n.stringify(e[a],t,s));return c.join(h)}for(a=r.length-1;a>=0;--a)if(r[a]===e)throw new Error("QueryString.stringify. Cyclical reference");r.push(e),c=[],o=s?s+"[":"",u=s?"]":"";for(a in e)e.hasOwnProperty(a)&&(l=o+a+u,c.push(n.stringify(e[a],t,l)));return r.pop(),c=c.join(h),!c&&s?s+"=":c}},"3.7.2",{requires:["yui-base"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("cache-base",function(e,t){var n=e.Lang,r=e.Lang.isDate,i=function(){i.superclass.constructor.apply(this,arguments)};e.mix(i,{NAME:"cache",ATTRS:{max:{value:0,setter:"_setMax"},size:{readOnly:!0,getter:"_getSize"},uniqueKeys:{value:!1},expires:{value:0,validator:function(t){return e.Lang.isDate(t)||e.Lang.isNumber(t)&&t>=0}},entries:{readOnly:!0,getter:"_getEntries"}}}),e.extend(i,e.Base,{_entries:null,initializer:function(e){this.publish("add",{defaultFn:this._defAddFn}),this.publish("flush",{defaultFn:this._defFlushFn}),this._entries=[]},destructor:function(){this._entries=[]},_setMax:function(e){var t=this._entries;if(e>0){if(t)while(t.length>e)t.shift()}else e=0,this._entries=[];return e},_getSize:function(){return this._entries.length},_getEntries:function(){return this._entries},_defAddFn:function(e){var t=this._entries,r=e.entry,i=this.get("max"),s;this.get("uniqueKeys")&&(s=this._position(e.entry.request),n.isValue(s)&&t.splice(s,1));while(i&&t.length>=i)t.shift();t[t.length]=r},_defFlushFn:function(e){var t=this._entries,r=e.details[0],i;r&&n.isValue(r.request)?(i=this._position(r.request),n.isValue(i)&&t.splice(i,1)):this._entries=[]},_isMatch:function(e,t){return!t.expires||new Date<t.expires?e===t.request:!1},_position:function(e){var t=this._entries,n=t.length,r=n-1;if(this.get("max")===null||this.get("max")>0)for(;r>=0;r--)if(this._isMatch(e,t[r]))return r;return null},add:function(e,t){var i=this.get("expires");this.get("initialized")&&(this.get("max")===null||this.get("max")>0)&&(n.isValue(e)||n.isNull(e)||n.isUndefined(e))&&this.fire("add",{entry:{request:e,response:t,cached:new Date,expires:r(i)?i:i?new Date((new Date).getTime()+this.get("expires")):null}})},flush:function(e){this.fire("flush",{request:n.isValue(e)?e:null})},retrieve:function(e){var t=this._entries,r=t.length,i=null,s;if(r>0&&(this.get("max")===null||this.get("max")>0)){this.fire("request",{request:e}),s=this._position(e);if(n.isValue(s))return i=t[s],this.fire("retrieve",{entry:i}),s<r-1&&(t.splice(s,1),t[t.length]=i),i}return null}}),e.Cache=i},"3.7.2",{requires:["base"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("cache-offline",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}var r=null,i=e.JSON;try{r=e.config.win.localStorage}catch(s){}e.mix(n,{NAME:"cacheOffline",ATTRS:{sandbox:{value:"default",writeOnce:"initOnly"},expires:{value:864e5},max:{value:null,readOnly:!0},uniqueKeys:{value:!0,readOnly:!0,setter:function(){return!0}}},flushAll:function(){var e=r,t;if(e)if(e.clear)e.clear();else for(t in e)e.hasOwnProperty(t)&&(e.removeItem(t),delete e[t])}}),e.extend(n,e.Cache,r?{_setMax:function(e){return null},_getSize:function(){var e=0,t=0,n=r.length;for(;t<n;++t)r.key(t).indexOf(this.get("sandbox"))===0&&e++;return e},_getEntries:function(){var e=[],t=0,n=r.length,s=this.get("sandbox");for(;t<n;++t)r.key(t).indexOf(s)===0&&(e[t]=i.parse(r.key(t).substring(s.length)));return e},_defAddFn:function(e){var t=e.entry,n=t.request,s=t.cached,o=t.expires;t.cached=s.getTime(),t.expires=o?o.getTime():o;try{r.setItem(this.get("sandbox")+i.stringify({request:n}),i.stringify(t))}catch(u){this.fire("error",{error:u})}},_defFlushFn:function(e){var t,n=r.length-1;for(;n>-1;--n)t=r.key(n),t.indexOf(this.get("sandbox"))===0&&r.removeItem(t)},retrieve:function(e){this.fire("request",{request:e});var t,n,s;try{s=this.get("sandbox")+i.stringify({request:e});try{t=i.parse(r.getItem(s))}catch(o){}}catch(u){}if(t){t.cached=new Date(t.cached),n=t.expires,n=n?new Date(n):null,t.expires=n;if(this._isMatch(e,t))return this.fire("retrieve",{entry:t}),t}return null}}:{_setMax:function(e){return null}}),e.CacheOffline=n},"3.7.2",{requires:["cache-base","json"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("cache-plugin",function(e,t){function n(t){var n=t&&t.cache?t.cache:e.Cache,r=e.Base.create("dataSourceCache",n,[e.Plugin.Base]),i=new r(t);return r.NS="tmpClass",i}e.mix(n,{NS:"cache",NAME:"cachePlugin"}),e.namespace("Plugin").Cache=n},"3.7.2",{requires:["plugin","cache-base"]});
YUI.add("mail-common-precache-unread",function(C){C.namespace("mail.ui");var A=C.mail,E=A.ui.MessageList,D=A.model.DataStore.Messages,B="UnreadCG";C.common.Utils.rocketstats.stat("MsgCache","PreCacheAlgorithm:"+B);NeoConfig.preCacheAlgorithm=B;E.getNeighbors=function(J,P,V,H,O){if(!(J&&J.length&&P>=-1&&P<=J.length-1)){return;}var U=J[P],N=U?D.isCached(H,U.mid):false,R=O||((NeoConfig.prefetchMsgsCheckMail==1)?4:(N?4:2)),F=[],L=[],T=[],Q=1,I=0,G=0,M=O||2,K=1;if((NeoConfig.prefetchMsgsCheckMail==0)&&!N){C.common.Utils.rocketstats.stat("MsgCache","ExtraMsgPrefetchCount_2");}function S(W){var X;if((X=J[W])&&!D.isCached(H,X.mid)){if(X&&X.flags&&X.flags.isRead==0){F.push(X);}else{L.push(X);}return 1;}return 0;}while(Q){if(G<M&&!S(P-K)){G++;}if(I<M&&!S(P+K)){I++;}Q=((F.length+L.length)<R)&&!(G==M&&I==M);K++;if(K>100){break;}}T=F.concat(L);T=T.splice(0,T.length>=R?R:T.length);for(K=0;K<T.length;K++){V.push(T[K]);}};},"1.0.0",{requires:["mail-ui-messagelist-base"]});YUI.add("contacts-ui-contactsevents",function(B){B.namespace("contacts.ui");var A=function(){var E=this,D=[{name:"contacts:api:contactChanged",showContactsTab:false,contactsView:null},{name:"ct:add_contact",showContactsTab:true,contactsView:"create_update_contact"},{name:"ct:view_contact",showContactsTab:true,contactsView:"view_contact"},{name:"ct:manage_updates",showContactsTab:true,contactsView:"manage_updates"},{name:"ct:import_contacts",showContactsTab:true,contactsView:"contact_import_landing"},{name:"ct:view_connections",showContactsTab:true,contactsView:"view_connections"},{name:"themes:change",showContactsTab:false,contactsView:null}],C=[{name:"contacts:contactChanged"},{name:"newMessage"},{name:"iframe:loaded"},{name:"contacts:sendSms"},{name:"contacts:sendIM"},{name:"contacts:shortcut"}];B.mix(E,{eventsFromSab:C,eventsToSab:D});};B.contacts.ui.contactsEvents=new A();},"1.0.0");YUI.add("contacts-ui-contactsview",function(A){var B=function(E){var H=this,G,K=null,F,C="",I=E||{};H.contactsTabNode=null;function D(M){G=A.one(M);G.setContent(F);H.contactsTabNode=A.one("#abIframeTab");}function J(M){I=M||{};L();}function L(){var O,N,M,R,Q;var P=NeoConfig.theme?NeoConfig.theme.id:"";if(I){M=I.vpc?"&VPC="+I.vpc:"";R=I.params?"&id="+I.params:"";}if(NeoConfig.mintyAB){if(P){Q=(!NeoConfig.theme.build||NeoConfig.theme.build==="")?"dev":NeoConfig.theme.build;Q=Q.replace("_","");C+="/yab-fe/mu/MainView?.src=neo&themeName="+P+"&bn="+Q+"&s="+(NeoConfig.isFullSSL?1:0);}else{C+="/yab-fe/mu/MainView?.src=neo";}C+=R;}else{C="/yab-fe/?.src=neo"+M+R;}C+="&isFresh="+NeoConfig.isFresh+"&bucketId="+NeoConfig.expBucketId;if(window.location.href.search(".lang=")!==-1){C+="&.lang="+NeoConfig.lang;}C+="&stab="+(new Date()).getTime();F='<div class="content" style="width:100%;height:100%;position:relative;overflow:hidden">'+'<iframe  target="_blank" frameborder="0" vspace="0" hspace="0" style="background-color: white; width: 100%; height: 100%; " id="abIframeTab" src="'+C+'"/>'+"</div>";}L();B.superclass.constructor.call(H);A.mix(H,{NAME:"ContactsView",render:D,contactsTab:K,updateConfig:J},true);H.set("hideToolbar",1);H.set("hideNavbar",1);};A.extend(B,A.mail.ui.BaseWidget);A.namespace("contacts.ui");A.contacts.ui.ContactsView=null;A.contacts.ui.getContactsViewInstance=function(C){if(A.contacts.ui.ContactsView){return A.contacts.ui.ContactsView;}else{A.contacts.ui.ContactsView=new B(C);return A.contacts.ui.ContactsView;}};},"1.0.0",{requires:["mail-ui-basewidget","node-event-simulate"]});YUI.add("contacts-ui-contactseventstranslator",function(B){B.namespace("contacts.ui");var A=function(){var I=this;B.augment(I,B.EventTarget);function G(K,L){var J=K.contactsView,M,N=null;if(K.contactsView){if(L&&L.args&&L.args.ids){M=L.args.ids.join(",");}N={vpc:K.contactsView,params:M};}return N;}function E(J,K){if(B.contacts.ui.ContactsView&&B.contacts.ui.ContactsView.contactsTab){if(J.showContactsTab){if(B.contacts.ui.ContactsView.contactsTab.get("active")!==1){B.contacts.ui.ContactsView.contactsTab.set("active",1);}}}else{if(J.showContactsTab){B.fire("openContacts",G(J,K));}}}function F(J){B.Global.on(J.name,function(K){B.fire(J.name,K);});}function C(J){B.on(J.name,function(K){if(B.contacts.ui.ContactsView&&B.contacts.ui.ContactsView.contactsTab){if(K){B.mix(K,{type:J.name});}else{K={type:J.name};}if(NeoConfig.mintyAB){B.one("#abIframeTab").fire(J.name,K);}else{B.Global.fire(J.name,K);}}E(J,K);});}function H(){var J,K;J=B.contacts.ui.contactsEvents.eventsToSab;for(K in J){if(J.hasOwnProperty(K)){C(J[K]);}}J=B.contacts.ui.contactsEvents.eventsFromSab;for(K in J){if(J.hasOwnProperty(K)){F(J[K]);}}}function D(K){var J=B.contacts.ui.ContactsView,L=J?J.contactsTabNode:null;if(L){L.simulate("keydown",K.event);}}B.on("contacts:shortcut",D);H();};B.contacts.ui.contactsEventTranslator=new A();},"1.0.0",{requires:["contacts-ui-contactsevents","contacts-ui-contactsview"]});YUI.add("comms-ui-dialog-base",function(G){var E=G.Node,C=E.one,F,D;function A(H){var I=H.get("id");if(!I){I=G.stamp(H);H.set("id",I);}return I;}function B(Q){Q=Q||{};Q.visible=Q.visible||0;Q.zIndex=Q.zIndex||4000;var P=this,T=Q.contentBox||null,U=Q.template||null,J=Q.cssPrefix||null,H=Q.focusedNode||null,L=Q.clearMask||false,S=Q.hideMask||false,R=Q.restoreFocusNode,I=Q.suppressRestoreFocus||false,K=Q.suppressActive,N=Q.maskId||null,M=Q.noScroll||false,O=Q.disableEsc||false;this._evt=[];if(!T&&U){P.CONTENT_TEMPLATE=U;}B.superclass.constructor.apply(this,arguments);if(!D&&K){if(F){D=F;F.set("visible",false);}else{K=false;}}P.addAttrs({cssPrefix:{value:J,readOnly:true},focusedNode:{value:H},clearMask:{value:L},hideMask:{value:S},restoreFocusNode:{valueFn:function(){var V=R;if(!((V instanceof G.Node)||G.Lang.isNull(V))){V=document.activeElement;}return V;}},suppressRestoreFocus:{value:I},suppressActive:{value:K,readOnly:true},maskId:{value:N},noScroll:{value:M},disableEsc:{value:O}});}B.NAME="dialog";B.CSS_PREFIX="yui3-overlay";B.ATTRS={role:{value:"dialog"}};G.extend(B,G.Overlay,{maskEl:null,prevMaskElId:null,centerEl:null,_haltShow:false,initializer:function(){this.set("visible",false);this.on("render",this.onBeforeRender);},destructor:function(){var I,J=this.get("restoreFocusNode"),L=this.get("suppressRestoreFocus"),H=this.get("contentBox").get("id");this.get("boundingBox").purge(true);if(this.get("centered")){this.centerEl&&this.centerEl.remove(true);}else{this.get("boundingBox").remove(true);}if(this.get("noScroll")){G.one("body").setStyle("overflow","visible");}for(I in this._evt){G.detach(this._evt[I]);}if(!this._haltShow){if(D&&this.get("suppressActive")){D.set("visible",true);D=null;this.prevMaskElId&&this.maskEl&&this.maskEl.set("id",this.prevMaskElId);this.prevMaskElId=null;}else{if(this.get("maskId")){this.maskEl.remove(true);}else{this.maskEl&&this.maskEl.setStyle("display","none");}F=null;if(!L){try{if(!(G.Lang.isNull(J)||J.tagName=="IFRAME")){J.focus();}}catch(K){}}G.fire("dialog:hide",H);}}else{this._haltShow=false;}},renderUI:function(){var O=this.get("cssPrefix"),J=this.get("contentBox"),N=this.get("role"),H,M,L,I,K;J.set("role",N);if(O){H=["#"+J.get("id")," .",O].join("");L=G.one(H+"-hd");I=G.one(H+"-bd");K=G.one(H+"-ft");if(L){J.set("aria-labelledby",A(L));if((M=L.one(".close"))){M.set("role","presentation");}if(!L.hasClass("yui3-widget-hd")){L.addClass("yui3-widget-hd");}}if(I){if(N==="alertdialog"||N==="dialog"){J.set("aria-describedby",A(I));}if(!I.hasClass("yui3-widget-bd")){I.addClass("yui3-widget-bd");}}if(K){if(!K.hasClass("yui3-widget-ft")){K.addClass("yui3-widget-ft");}}}J.setStyle("display","block");J.set("tabIndex",0);J.all(".btn a").each(function(Q,P){Q.set("role","button");});},show:function(){if(!F){B.superclass.show.call(this);!this.get("suppressActive")&&G.fire("dialog:show",this);if(this.get("noScroll")){G.one("body").setStyle("overflow","hidden");}}else{this._haltShow=true;this.destroy();}},bindUI:function(){var M=G.all(".yui3-overlay-content .btn a"),H=M.size()-1,K=G.one(".yui3-overlay-content"),N=this.get("focusedNode"),J;if(this.get("centered")){this.after("renderedChange",this.center);}this._evt.push(this.after("visibleChange",function(){var P={display:"none"},O=this.get("contentBox");if(this.get("visible")){O&&O.setStyle("display","block");P.display=this.get("hideMask")?"none":"block";F=this;}else{O&&O.setStyle("display","none");F=null;}this.maskEl&&this.maskEl.setStyles(P);if(F){L(true);}}));function L(P){if(!F){return;}if(!(N instanceof G.Node)){P&&G.UA.gecko&&K.focus();N=K.one(N);}try{if(N){N.focus();}else{K.focus();}}catch(O){}}this._evt.push(K.on("blur",function(){J=true;}));this._evt.push(K.on("focus",function(P){var O="#"+K.get("id");if(J&&!P.target.ancestor(O,true)){L();}J=false;}));function I(Q){var O,P=Q.target;switch(Q.keyCode){case 8:case 46:return;break;case 9:if(H>-1){if(Q.shiftKey){if(K==P){Q.halt();M.item(H).focus();}}else{if(M.item(H)==P){Q.halt();K.focus();}}}break;case 27:if(!this.get("disableEsc")){this.fire("dialog:action",{dataAction:"cancel"});Q.preventDefault();}break;case 32:if(P.getAttribute("role")=="button"){Q.preventDefault();G.use("node-event-simulate",function(){P.simulate("click");});}break;case 37:case 39:if((H>0)&&(O=M.indexOf(P))>-1){if(Q.keyCode==37){M.item((O==0)?H:O-1).focus();}else{M.item((O==H)?0:O+1).focus();}}break;}Q.stopPropagation();}K.on("keydown",I,this);},onBeforeRender:function(N){var O=this.get("zIndex"),H=this.get("hideMask"),K=this.get("clearMask"),P=this.getClassName((K?"clearmask":"mask")),I="position:fixed;top:50%;left:50%;height:1px;",J,L=this.get("maskId"),M,Q;if(L){this.maskEl=C("#"+L);}if(!this.maskEl){if(!L){L=G.guid();}if(!(this.maskEl=G.one("."+P))&&!H){M=['<DIV id="',L,'" class="',P,'" style="z-index:',(O-2),'"></DIV>'].join(""),C("body").prepend(M);this.maskEl=C("#"+L);}else{if(this.maskEl){this.prevMaskElId=this.maskEl.get("id");this.maskEl.set("id",L);this.maskEl.setStyle("zIndex",O-2);}}}if(this.get("centered")){J=G.guid();Q=['<DIV id="',J,'" style="',I,"z-index:",(O-1),'"></DIV>'].join("");C("body").prepend(Q);this.centerEl=G.one("#"+J);N.parentNode=this.centerEl;this.get("boundingBox").setStyle("position","relative");}},center:function(){var I,J,H=this.get("boundingBox");I=-(H.get("offsetWidth")/2)+"px";J=-(H.get("offsetHeight")/2)+"px";H.setStyles({"marginLeft":I,"top":J,"left":0});}});G.namespace("comms.ui");G.comms.ui.Dialog=B;},"0.0.1",{requires:["overlay"]});YUI.add("_shared_module_offscreen_bin_modal_close_icon",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_close_icon={base:'<span class="close" data-action="cancel" title="{{str_btn_close}}"></span>'};},"1.0.0");YUI.add("_shared_module_offscreen_bin_modal",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal={base:'<div id="modalOverlay" class="modal {{modal_classes}}"> <h2 class="modal-hd"> {{modal_header}} {{_shared_module_offscreen_bin_modal_close_icon}} </h2> <div class="frontpanel"> <div class="modal-bd">{{modal_body}}</div> <div class="modal-ft">{{modal_ft}}</div> </div> {{modal_back_panel}}</div>',modal_back_panel:'<div class="backpanel back hidden"> <div class="modal-bd">{{modal_body_back}}</div> <div class="modal-ft">{{modal_ft_back}}</div> </div> '};},"1.0.0",{requires:["_shared_module_offscreen_bin_modal_close_icon"]});YUI.add("_shared_module_offscreen_bin_modal_btn_ok",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_btn_ok={base:'<span id="okayModalOverlay" class="btn left right default"><a href="#" data-action="ok">{{str_ok}}</a></span> '};},"1.0.0");YUI.add("common-ui-dialog-helper",function(C){var A=C.common.Utils.substitute,B=C.ui.Templates,D="alertdialog";C.namespace("common.ui");C.common.ui.DialogHelper=new function(){var G={modal_header:function(L){return L.hd;},modal_body:function(L){return L.bd;},modal_ft:function(L){return A(L.ft,0,0,0,strings);},_shared_module_offscreen_bin_modal_btn_ok:function(L){return L.ok;},_shared_module_offscreen_bin_modal_btn_cancel:function(L){return L.cancel;},_shared_module_offscreen_bin_modal_close_icon:function(L){return(L.hideClose)?"":A(B._shared_module_offscreen_bin_modal_close_icon.base,0,0,0,strings);},global_path_img:function(){return NeoConfig.globalPathImg+"/u/assets/img";},antivirus_logo_path_img:function(){return NeoConfig.avLogoUrl;}};function K(M,N,L){M.ft=B._shared_module_offscreen_bin_modal_btn_ok.base||"";M.role=D;if(N&&N.ok&&N.ok.text){M.ft=A(M.ft,0,0,0,{str_ok:N.ok.text});}E(M,N,L);}function J(M,N,L){C.use("_shared_module_offscreen_bin_modal_btn_cancel",function(){var O={cancel:B._shared_module_offscreen_bin_modal_btn_cancel.base};M.ft=A(B._shared_module_offscreen_bin_modal_btn_cancel.base,O,G,0,strings);M.focusedNode='.modal-ft [data-action="cancel"]';M.role=D;E(M,N,L);});}function F(M,N,L){C.use("_shared_module_offscreen_bin_modal_btns_ok_cancel",function(){var O={ok:B._shared_module_offscreen_bin_modal_btn_ok.base,cancel:B._shared_module_offscreen_bin_modal_btn_cancel.base};if(N&&N.ok&&N.ok.text){O.ok=A(O.ok,0,0,0,{str_ok:N.ok.text});}M.ft=A(B._shared_module_offscreen_bin_modal_btns_ok_cancel.base,O,G,0,strings);M.role=D;E(M,N,L);});}function I(M,N,L){M.ft=A(M.ft,0,G,0,strings);E(M,N,L);}function E(M,N,L){M=M||{};if(!M.template){var P=M.rawTemplate||B._shared_module_offscreen_bin_modal.base;M.template=A(P,M,G,0,strings);}M.centered=true;M.cssPrefix="modal";M.focusedNode=M.focusedNode||".yui3-widget-ft span.default a";function O(Q){Q.get("contentBox").set("aria-live","polite");Q.show();if(L){L(Q);}}H(M,N,O);}function H(M,O,L){var N=new C.comms.ui.Dialog(M);O=O||{};N.render();N.get("contentBox").on("click",function(R){var S=C.common.Utils.getDataAction(R),Q=S.action,P=S.node;if(Q){if(!M.allowDefault){R.preventDefault();}if(NeoConfig.intl==="jp"){N.set("adAction",(Q=="ok"?"disableRetriggerOnOk":"disableRetriggerOnHide"));}N.fire("dialog:action",{dataAction:Q,item:P});}});N.after("dialog:action",function(S){var Q=S.dataAction,P;if(Q){P=O[Q];try{if(!P||!P.stopDestroy){N.destroy();}P&&P.handler&&P.handler.call(this,S,N);}catch(R){}}});if(L){L(N);}}C.mix(this,{alert:K,cancelDialog:J,confirm:F,create:H,custom:I,createCommon:E});};},"1.0.0",{requires:["common-utils","modal_css","comms-ui-dialog-base","_shared_module_offscreen_bin_modal","_shared_module_offscreen_bin_modal_btn_ok"]});YUI.add("mail-errormap",function(C){C.namespace("mail.Errormap");var R=C.common.Utils,M=C.Lang,I=C.common.net.Error,Q=R.substitute,J="_{{method}}",B="_{{status}}",P=J+B,S="{{subcode}}",L={"ComposeError":[14,"ComposeError"],"ComposeErrorMessage":[14,"ComposeError"],"ComposeErrorServiceError":[14,"ComposeError"],"ComposeErrorUnknown":[14,"ComposeError"],"ComposeErrorAttachment":[14,"ComposeAttachFailed"],"ComposeErrorBadMIME":[14,"BadMime"],"ComposeErrorBadRecipient":[0,"BadRecipient"],"ComposeErrorBadFrom":[0,"BadFrom"],"ExceededMaxTo":[0,"MaxToAddressesExceeded"],"ExceededMaxCc":[0,"MaxCCAddressesExceeded"],"ExceededMaxBcc":[0,"MaxBCCAddressesExceeded"],"ExceededMaxRecipients":[0,"MaxTotalAddressesExceeded"],"ExceededMaxHourlyMessages":[0,"HourlyLimitExceeded"],"ExceededMaxDailyMessages":[0,"DailyLimitExceeded"],"InvalidFromAddress":[0,"BadFrom"],"InvalidRecipientAddress":[0,"BadRecipient"],"NicknameExpansionFailed":[0,"NicknameExpansionFailed"],"EmptyFolderFailed":[14,"EmptyFolderFailed"],"FolderEmptyFailed":[14,"EmptyFolderFailed"],"FolderCreateFailed":[14,"FolderCreateFailed"],"FolderFetchFailed":[14,"FolderFetchFailed"],"FolderIdDoesntExist":[14,"FolderIdDoesntExist"],"FolderIdIsSystemFolder":[0,"FolderIdIsSystemFolder"],"FolderListFetchFailed":[2,"FolderListFetchFailed"],"FolderNameExists":[0,"FolderAlreadyExists"],"FolderNameNotAllowed":[0,"folder_name_is_reserved"],"FolderNameIllegalCharacter":[0,"FolderNameIllegalCharacter"],"FolderNameIllegalCharset":[14,"FolderNameIllegalCharacter"],"FolderNameTooLong":[0,"folder_name_too_long"],"FolderRemoveFailed":[14,"FolderRemoveFailed"],"FolderRenameFailed":[14,"FolderRenameFailed"],"GetMessageFailed":[6,"GetMessageFailed"],"BadCharset":[6,"download_message_viewing_error"],"HumanVerificationRequired":[0,"HumanVerificationRequired"],"AccountVerificationRequired":[0,"AccountVerificationRequired"],"CannotSendThisMessage":[14,"CannotSendThisMessage"],"InputTooEarly":[14,"HumanVerificationFailed"],"InvalidYID":[14,"HumanVerificationFailed"],"MaxAttempts":[12,"HumanVerificationFailed"],"TimedOut":[14,"HumanVerificationFailed"],"WrongInput":[14,"HumanVerificationFailed"],"WrongUser":[14,"HumanVerificationFailed"],"ListMessagesFailed":[2,"ListMessagesFailed"],"MailboxOpenFailed.Busy":[5,"MailboxBusy"],"MailboxOpenFailed":[2,"MailboxOpenFailed"],"MessageDeleteFailed":[2,"MessageDeleteFailed"],"MessageFetchFailed":[4,"MessageFetchFailed"],"MessageIdsNotFound":[4,"MessageIdsNotFound"],"MessageNotFound":[4,"MessageNotFound"],"MessageSaveFailed":[2,"MessageSaveFailed"],"MessageSelectionNotFound":[4,"MessageSelectionNotFound"],"MissingApplicationID":[14,"MissingApplicationID"],"MissingCredentials":[14,"MissingCredentials",null,[]],"NoRecipientsSpecified":[0,"MissingRecipients"],"NoSenderSpecified":[0,"NoSenderSpecified"],"ResetSpamFilterFailed":[2,"ResetSpamFilterFailed"],"SaveMessageFailed":[2,"SaveMessageFailed"],"SendMessageFailed":[14,"SendMessageFailed"],"MetaDataFetchFailed":[2,"ServerError"],"MetaDataSaveFailed":[2,"ServerError"],"UserOpenFailed":[1,"ServerError"],"ServerError":[14,"ServerError"],"SetUserDataFailed":[1,"SetUserDataFailed"],"SpamReportingFailed":[14,"SpamReportingFailed"],"SpamTrainingFailed":[14,"SpamTrainingFailed"],"TooManyCallsBatched":[14,"TooManyCallsBatched"],"TooManyFolders":[0,"TooManyFolders"],"TooManyMessagesRequested":[14,"TooManyMessagesRequested"],"UserOverQuota":[19,strings["str_cfg_tog_hasUnlimitedStorage"]?"UserTempSuspended":"UserOverQuota"],"UserAbuseDetected":[19,"UserTempSuspended"],"UserPreferenceFetchFailed":[2,"UserPreferenceFetchFailed"],"UserSuspended":[19,"UserSuspended"],"MessageTooLarge":[0,"MessageToLarge"],"ParentalControlsNoAttachments":[0,"ypcUploadDisallowed"],"ExceededAttachmentLimit":[0,"uploadNumFiles"],"SendMessageAttachmentFailed":[14,"SendAttachmentFailed"],"MessageTooLargeSomeRecipients":[0,"MessageTooLargeForSomeRecipients"],"SendMessageFailedSomeRecipients":[14,"SendMessageFailedForSomeRecipients"],"UserDataFetchFailed":[1,"UserDataFetchFailed"],"FarmNameNotFound":[1,"FarmNameNotFound"],"GetMessageInvalidId":[4,"GetMessageInvalidId"],"GetDisplayMessageFailed":[6,"GetDisplayMessageFailed"],"GetPartContentFailed":[6,"GetDisplayMessageFailed"],"ComposeFailed":[14,"ComposeFailed"],"MetaDataMissingPath":[2,"MetaDataMissingPath"],"SetMetaData":[2,"BadRequest"],"MoveMessagesInvalidId":[4,"MoveMessagesInvalidId"],"MetaDataTooLarge":[2,"ServerError"],"InputInvalid":[8,"ServerError"],"InvalidRequest":[8,"BadRequest",null,["UE_ALERT_TAE8_{{code}}_{{method}}","UE_ALERT_TAE8_{{code}}_{{method}}_{{message}}"]],"FailedDependency":[14,"ServerError"],"SearchProgramFailed":[20,"error_searching_messages"],"ListMessagesFailed.SearchMessages":[2,"error_searching_messages"],"FeatureUnavailable":[11,"INTERNAL MESSAGE:\nThe underlying version of Cascade on this box doesn't support the API that was requested\nMethod : \n","ServerErrorFeatureUnavailable"+J],"999":[19],"BatchItemError":[],"OperationNotAllowedCurrently":[24,"OperationNotAllowedCurrently"],"ServiceTemporarilyUnavailable":[21]},D={"999":[19],"2":[18,"Offline","OfflineTitle",["E_HTTP"+B,"E_HTTP"+P]],"conn":[18,"Connect",null,["E_HTTPConnect","E_HTTPConnect"+P]],"Malformed-unk":[14,null,null,["E_RespParseUnk","E_RespParse"+P]],"Malformed-mail":[14,null,null,["E_RespParseMail","E_RespParse"+P]],"HTMLResponse-unk":[14,null,null,["E_RespHTMLUnk","E_RespHTML"+S+P]],"HTMLResponse-mail":[14,null,null,["E_RespHTMLMail","E_RespHTML"+S+P]],"NoResponse-unk":[14,null,null,["E_RespEmptyUnk","E_RespEmpty"+P]],"NoResponse-mail":[14,null,null,["E_RespEmptyMail","E_RespEmpty"+P]],"MalformedFault":[14,null,null,["E_RespFault","E_RespFault"+J]],"timeout":[18,"Timeout",null,["E_Timeout"+J]],"invalidwssid":[14,null,null,["E_InvalidWssid"]],"loginfail":[14]};function K(Y,W,T,b,U){var X,Z=Y.detail,d,c,V="E_ServerBatch_"+U.join("_"),a=F(Y,W,T,true,U);R.assert(Z);if(W==200){for(X=0;X<Z.length;X++){d=Z[X];c=d.detail.idx;a=a.concat(F(d,W,U[c],b));a.push([V,c,d.code].join("_"));}}return a;
}function F(f,l,Z,U,i){function a(r){var p,q,s,t=f.message||"";if(r){p=[];s={code:V,method:Z,status:l,subcode:f.subcode,message:t.replace(/\s/g,"").replace(/\./g,"")};for(q=0;q<r.length;q++){p[q]=Q(r[q],s,null,null,strings);}}return p;}var V=f.code,c=f&&f.code&&(f.code.indexOf("-unk")>0),e,k,o,W,h,b,Y,d,m,n,g=Z+(i?"_"+i.join("_"):"");V=/^[^-]+/.exec(V);V=V&&V[0];h=I.isHttp(V);b=!h&&N(f,null,L);Y=!b&&N(f,null,D);d=b||Y;m=a(d&&d[3])||[];if(l==500){o="E_Server500_"+g;m.push(o,o+"_"+V);}if(!d){if(h){o="E_HTTP";m.push(o,o+"_"+l,[o,g,l].join("_"));}else{o="E_ServerUnknown_"+g;m.push(o,o+"_"+V);}}if(!U){W=d&&d[0];W=W!==undefined?W:(h?18:14);o="UE_ALERT_TAE"+W;if(W==14&&c){m.push("INTERCEPT_UNK_"+V);m.push("INTERCEPT_UNK_"+Z);}else{m.push(o,o+"_"+(h?l:V));if(W==14){m.push(o+"_"+Z);}if(W==5&&NeoConfig.isCorpmail){m.push(o+"_corpmail");}}if(W==4){function j(p){if(p!="Inbox"&&p!="Sent"&&p!="Draft"&&p!="Trash"&&p!="%40S%40Search"&&p!="%40B%40Bulk"&&p!="%40C%40Chats"&&p!="@S@Search"&&p!="@B@Bulk"&&p!="@C@Chats"){return"userfid";}return p;}var T,X;if(f.detail&&f.detail.request&&(n=f.detail.request.postdata)){if(g=="MoveMessages"){k=n.match(/"sourceFid":"(.*?)"/);k=(k&&k[1])||"?";e=n.match(/"destinationFid":"(.*?)"/);e=(e&&e[1])||"?";T=j(k)+"-"+j(e);}else{T=n.match(/"fid":"(.*?)"/);if(T&&T[1]){T=j(T[1]);}else{T="?";}}}else{T="?";}m.push(o+"_"+(h?l:V)+"_"+g+"_"+T);}}m.push("E_"+g,"E_"+g+"_"+(h?l:V));return m;}function O(U){var T=U&&(U.match(/Client\.([\w\W]+)$/)||U.match(/Server\.([\w\W]+)$/));return(T&&T[1])||U;}function G(U){var V,T=new RegExp(I.base+"([\\w\\W]+)$");return((V=U.match(T))&&V[1])||U;}function E(V,U,T){return U&&(M.isNumber(T)?V[U]&&V[U][T]:V[U]);}function N(Y,a,Z){var X,W=Y.code,U,V,b,T=I.isHttp(W);V=(Z&&[Z])||(T?[D]:[L,D]);U=T?G(W):O(W);for(X=0;X<V.length;X++){if((b=E(V[X],U,a))!==undefined){return b;}}}function H(T){return T.code=="BatchItemError"&&T.detail;}function A(X){var V,W="",T,Y,U;if(U=H(X.fault)){V=[];for(T=0;T<U.length;T++){W=A({fault:U[T]},1);W&&V.push(W);}W=V.join("; ");}else{Y=N(X.fault,1);W=Y&&strings["str_error_"+Y];}return W;}C.mix(C.mail.Errormap,{getTAE:function(W){var V,T,U=W.fault;U=((V=H(U))&&V[0])||U;return((T=N(U,0))!==undefined)?T:(I.isHttp(U.code)?18:14);},getMessage:A,getTitle:function(V){var U,W,T=V.fault;T=((U=H(T))&&U[0])||T;W=N(T,2);return W&&strings["str_error_"+W];},getStats:function(W,U){var T=W.fault,V=H(T)?K:F;return V(T,W.status,W.callback.method,U,W.callback.batchopcbk);},getTAEStats:function(T,U){var V=["UE_ALERT_TAE"+T];U&&V.push(V[0]+"_"+U);return V;}});},"1.0.0",{requires:["json-stringify","common-net-error"]});YUI.add("_shared_module_offscreen_bin_modal_launch_error_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_launch_error_rollup={base:'<p>{{str_rough_errlaunch_message}}</p><ul> <li><a href="{{link_goto_latest}}" class="more">{{str_rough_try_again_now}}</a></li> <li><a href="{{link_goto_tae_help}}" class="more" target="_blank">{{str_rough_visit_help_page}}</a></li> </ul> <br/><span>{{str_rough_errlaunch_troubleshoot}}</span>'};},"1.0.0");YUI.add("mail-error",function(C){C.namespace("mail.Error");var K=C.common.net.Error,M=C.common.Utils,B=C.mail.Errormap,I=M.rocketstats,H=C.JSON.stringify,E="45";function G(S,P){function X(){var Z,a="";for(Z=0;Z<Q.length;Z++){a+=" "+[Q[Z].method,Q[Z].code].join(":");}return a;}function T(){var b,Z,a=S.request;if(/SaveMessage/.test(O)||/SendMessage/.test(O)){Z=a.postdata;a.postdata="<filtered>";b=H(a);a.postdata=Z;}return b||H(a);}var V=P.fault,R=V.code,W=P.callback||{},U=R=="BatchItemError",Q=U&&W.batchopcbk,O=W.method,Y={method:O,fault:U?X():R,tae:B.getTAE(P),message:B.getMessage(P)||V.message||"",request:T(),http:[P.status,P.statusText].join(" "),headers:P.allHeadersText||"",response:P.responseText||"",duration:S.end?(S.end-S.start):"X",yid:NeoConfig.loginId||""};return Y;}function F(R){var Q,O;if(strings["str_tog_TAESupported"]){if(R.tae===E&&strings["str_cfg_url_yahoo_mail_help_tae"+E]){O=strings["str_cfg_url_yahoo_mail_help_tae"+E];}else{O=strings["str_cfg_url_TAEHelpPages"]+"mltamtae"+R.tae+".html";}}else{O=strings["str_cfg_url_contact_customer_care"];}Q={link_goto_latest:"launch?reason=ignore&rs=1",launch_error_code:R.tae,link_goto_tae_help:O};var P=M.substitute(C.ui.Templates._shared_module_offscreen_bin_modal_launch_error_rollup.base,Q,null,null,strings);K.show(null,P,strings["str_error_MailErrorTitle"],{modal_classes:"lg"});}function D(O,Q){var P,S,R=Q?":background":"";if(O){S=O.length||0;for(P=0;P<S;P++){I.stat("mailnet"+R,O[P]);if((typeof navigator.onLine!="undefined")&&!navigator.onLine){I.stat("mailnet:offline"+R,O[P]);}}}return O;}function J(U,S,Q,P){function T(V){try{U.stats=V;U.detail=S.fault.message||"";M.netError(H(U));}catch(W){}}var O=!Q&&B.getStats(S,P),R=S.callback&&S.callback.backgroundLogs&&S.callback.backgroundLogs[0]=="*";D(O,R);if(P){I.stat("mailnet","TAE4:SUPPRESS:"+U.method);}T(O);}function N(O,P){O&&D(B.getTAEStats(O,P));}function A(p,Z,b){function f(e){return(O.search(e)!==-1)||((g+"")==e);}M.assert(b.fault);try{var W=b.fault,g=b.status,O=W.code,j=O=="BatchItemError",U,h,o=b.callback||{},P=o.method,d,Q=/xhrsend/.test(O),l,c=[401],X,R,V,S,T=b.callback,a=W&&W.message&&W.message.match("Content-Length:0"),Y={"Server.Malformed-mail":true};if(a){I.stat("mailnet","empty-post-body-"+(T.retry?"1":"0"));}if((Y[O]||a)&&!T.retry){R=b.request;S=C.common.net.SessionMgr;C.mix(T,{retry:true});if(O=="Server.Malformed-mail"){I.stat("mailnet","malformed-mail-retried");}if(a){I.stat("mailnet","empty-post-body-retried");}V=S.request(R.url,S.formatQueryParams(R.urlparams,R.enc),T,R.mthd,R.enc);if(R.mthd=="POST"){V.request.post=R.postdata;}V.send();return;}if(j){for(var k=0;k<W.detail.length;k++){A(p,Z,W.detail[k]);}return;}function m(e,q,i){p.callDefault(e,q,i);}d=G(Z,b);l=K.suppress(o.suppressCodes,c.concat(o.exceptCodes||[]),f),X=K.suppress(o.suppressLogs,o.exceptLogs,f);M.assert(o.service=="mail");if(d.method==="GetDisplayMessage"){if(d.fault==="Client.MessageIdsNotFound"){I.stat("mailnet","TAE4:MIDsNotFound:"+NeoConfig.permMsgDelOp1+":"+NeoConfig.permMsgDelOp2);}prime=(typeof Z.callbackData.primeMsg!="undefined")?"1":"0";I.stat("mailnet","TAE4:GDM:FAILURE:PRIME:"+prime+":"+d.fault);}if(g==500||j){if(/SessionIdReissue/.test(O)){m(402);}else{if(/Credentials/.test(O)){m(401,{stat:O+"_"+P});}else{if(/ClientRedirect/.test(O)){U=M.substitute(strings["str_error_reload_account_migrated"],null,null,strings);if(/HostCorrection/.test(O)){m(401,{msg:U,url:"http://mail.yahoo.com",stat:O+"_"+P});}else{m(310,{msg:U,stat:O+"_"+P});}}else{if(/999/.test(O)){m(999,W.detail&&W.detail.token);}else{if(/ServiceTemporarilyUnavailable/.test(O)&&W.detail&&W.detail.displayUrl){I.stat("redirect:outage:500","client");window.location=W.detail.displayUrl;return;}if(!l){F(d);}}}}}}else{if(O.indexOf("-unk")>-1){h={};h.message=strings.str_error_Unk;h.title=strings.str_error_Unk_title;m(null,h,Q);}else{if(!l){h={};h.message=d.message;h.title=B.getTitle(b);m(null,h,Q);}}}if(!p.retry){J(d,b,Q||X,l);}}catch(n){M.assert(0,"mail:controller:error - "+n.message);}if(!p.isdone()){p.done();}}function L(R){var P,Q="",O="";I.stat("mailnet","FetchExternalAccount"+O);M.netError("FetchExternalAccount Error"+H(R));for(P=0;P<R.length;P++){Q+=M.substitute(strings["str_error_extFetch_"+R[P].status],R[P]);Q+="<br/><br/>";}}C.mix(C.mail.Error,{handle:A,extFetchError:L,_showTae:F,statTAE:N});},"1.0.0",{requires:["common-net-error","mail-errormap","rocket-stats","json-stringify","_shared_module_offscreen_bin_modal_launch_error_rollup"]});