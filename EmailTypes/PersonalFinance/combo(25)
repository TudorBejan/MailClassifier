if(!window.ucs){window.ucs={};}YUI.add("gallery-jsonp",function(b){var a=b.Lang.isObject,c=b.Lang.isFunction;function d(){this._init.apply(this,arguments);}d._pattern=/\bcallback=(.*?)(?=&|$)/i;d._template="callback={callback}";d.prototype={_init:function(f,e){this.url=f;e=e||{};if(c(e)){e={on:{success:e}};}e.on=e.on||{};if(!e.on.success){e.on.success=this._getCallbackFromUrl(f);}this._config=b.merge({on:{},context:this,args:[],format:this._format},e);},_getCallbackFromUrl:function(i){var j=i.match(d._pattern),e,g,f,h;if(j){g=b.config.win;f=j[1].split(/\./).reverse();e=f.shift();for(h=f.length-1;h>=0;--h){g=g[f[h]];if(!a(g)){return null;}}if(a(g)&&c(g[e])){return b.bind(g[e],g);}}return null;},send:function(e){if(!this._config.on.success){return this;}var g=b.guid().replace(/-/g,"_"),h=this._config,i=h.format.call(this,this.url,"YUI.Env.JSONP."+g);function f(j){return(c(j))?function(k){delete YUI.Env.JSONP[g];j.apply(h.context,[k].concat(h.args));}:null;}YUI.Env.JSONP[g]=f(h.on.success);b.Get.script(i,{onFailure:f(h.on.failure),onTimeout:f(h.on.timeout||h.on.failure),timeout:h.timeout});return this;},_format:function(h,f){var e=d._template.replace(/\{callback\}/,f),g;if(d._pattern.test(h)){return h.replace(d._pattern,e);}else{g=h.slice(-1);if(g!=="&"&&g!=="?"){h+=(h.indexOf("?")>-1)?"&":"?";}return h+e;}}};b.JSONPRequest=d;b.jsonp=function(f,e){return new b.JSONPRequest(f,e).send();};if(!YUI.Env.JSONP){YUI.Env.JSONP={};}},"gallery-2010.08.11-20-39",{requires:["get","oop"]});YUI.add("ucs-menu-utils",function(a){a.namespace("ucs");if(a.ucs.MenuUtils){return;}var c="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",i="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",j='<span class="separator" role="presentation"></span>',g="click",h="a",o="role",k="tabIndex",b="yucs-hide",d="iframe",l="ul",m="li",e="parentNode",n="http://l.yimg.com/a/lib/ush/icon.gif",f="https://s.yimg.com/lq/lib/ush/icon.gif";a.ucs.MenuUtils=function(q,p){var r=p&&p.panelSelector||l;this.menu=q;this.panel=this.menu.one(r);this.init();};a.ucs.MenuUtils.prototype={init:function(){this.keyedup=false;this.menu.delegate(g,this._handleMenuClick,">a",this);this.menu.delegate(g,this._handleMenuItemClick,"li a",this);this.menu.on("keyup",this._handleKeyup,this);this.menu.on("keydown",this._handleKeydown,this);this.menu.removeClass("yucs-activate");this._initAria();},_initAria:function(){this.menu.one(h).set(o,"button");this.panel.all(h).set(o,"menuitemradio");this.panel.set(o,"menu");this.panel.all("div,ul,li").set(o,"presentation");if(!a.UA.ipad&&!a.UA.mobile){this.panel.set(k,-1);}this.focusmanager=this.panel.plug(a.Plugin.NodeFocusManager,{descendants:h,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(p){return p.get(e);}},circular:true});},_destructAria:function(){this.panel.unplug(a.Plugin.NodeFocusManager);this.panel.one(h).set(k,0);},_handleMenuClick:function(p){p.halt();if(this.panel.hasClass(b)){this._accessShowMenu(p);}else{this._hideMenu();}},_handleKeyup:function(p){if(27===p.keyCode){this.menu.one(h).focus();this._hideMenu();}else{if(40===p.keyCode&&!this.keyedup){this.panel.one(h).focus();this.keyedup=true;}}},_handleKeydown:function(p){if(!this.panel.hasClass(b)){p.stopPropagation();}if(40===p.keyCode){p.preventDefault();}},_handleDocumentClick:function(p){if(this.panel.contains(p.target)||p.target._node===this.panel._node||this.panel.hasClass(b)||p.target===this.menu.one(">a")||p.target.get("parentNode")===this.menu.one(">a")){this.skipBlur=true;return;}this._hideMenu();},_accessShowMenu:function(q){var p=this;this._hideAllMenus();this._showMenu(q);this.panel.focus();a.Node.DOM_EVENTS.touchend=true;this.documentBlurHandle=a.on("blur",function(s){var r=this;if(!this.skipBlur){this.timeout=setTimeout(function(){r._hideMenu();},50);}this.skipBlur=false;},this.panel,this);this.documentFocusHandle=a.on("focus",function(r){if(this.timeout&&this.panel.hasChildNodes(r.target)){clearTimeout(this.timeout);this.timeout=null;}},this.panel,this);this.documentClickHandle=a.on(g,this._handleDocumentClick,document.body,this);this.documentMouseDownHandle=a.on("mousedown",this._handleDocumentClick,document.body,this);if(navigator.appName!=="Microsoft Internet Explorer"){this.documentWheelHandle=a.on("mousewheel",this._hideAllMenus,this);this.documentScrollHandle=a.one(window).on("scroll",this._hideAllMenus,this);}},_showMenu:function(q){this.panel.removeClass(b);this._addIframeShim();var p=this.menu.one(d);if(p){p.removeClass(b);}},_position:function(){var p=this.menu.get("region");if(!this.panel.hasClass("yucs-menu-right")&&!this.panel.hasClass("yucs-menu-left")){this.panel.setStyle("left",p[0]);}this.panel.setStyle("top",p[1]+13);},_hideMenu:function(){this.panel.addClass(b);var p=this.menu.one(d);if(p){p.addClass(b);}if(this.documentBlurHandle){this.documentBlurHandle.detach();}if(this.documentFocusHandle){this.documentFocusHandle.detach();}if(this.documentClickHandle){this.documentClickHandle.detach();}if(this.documentMouseDownHandle){this.documentMouseDownHandle.detach();}if(this.documentTouchEndHandle){this.documentTouchEndHandle.detach();}this.keyedup=false;},_hideAllMenus:function(){var q=a.all("yucs-menu iframe"),r=a.all(".yucs-notifications ul.ynotif-yahoo-panel"),p=a.all(".yucs-notifications div.yucs-notif-panel");this._hideMenu();q.addClass(b);r.addClass(b);p.addClass(b);},_addIframeShim:function(){var p=a.all("select"),r=(a.UA.ie<=6),q;if(!r||(p.size()===0)){return;}q=this.menu.one(d);if(!q){q=document.createElement(d);q=this.panel.get(e).insertBefore(q,this.panel);}q.className="yucs-shim";q.setStyle("position","absolute");q.setStyle("width",this.panel.getComputedStyle("width"));q.setStyle("height",this.panel.getComputedStyle("height"));q.setStyle("top",this.panel.getY()+"px");q.setStyle("border","0px none");},_addMenuGroups:function(s,x,w){var u=this.menu.one(l),p="",q=(u.get("children")._nodes.length)?true:false;for(var r=0,t=s.length;r<t;r++){var v=s[r].length;if(x==="bottom"){s[r][0].separatorTop=true;}else{if(r<(t-1)||q){s[r][v-1].separatorBottom=true;}}p+=this._addMenuGroup(s[r],w);}if(x==="bottom"){u.append(p);}else{u.prepend(p);}},_addMenuGroup:function(q,s){var t="";for(var r=0,p=q.length;r<p;r++){if(s){q[r].isDebugItem=true;q[r].menuClass="debug-item";}else{q[r].isDebugItem=false;q[r].menuClass="minty-item";}t+=this._addMenuItem(q[r]);}return t;},_addMenuItem:function(q){var p="";if(q.isActive){q.checkedAria='aria-checked="true"';}else{q.checkedAria="";}if(q.isDisabled){q.disabledAria='aria-disabled="true"';}else{q.disabledAria="";}switch(q.actionType){case"link":p=a.substitute(c,q,this._processTemplateValue);break;case"customEvent":p=a.substitute(i,q,this._processTemplateValue);break;default:break;}if(p){if(q.isDebugItem){p=p.replace(/separator/,"separator debug-item");}else{p=p.replace(/separator/,"separator minty-item");}}return p;},_clearMenuItem:function(p){this.menu.one(l).all("."+p).each(function(q){q.remove(true);});},_processTemplateValue:function(q,r,s){a.log("key = "+q+" value = "+r+" meta_data = "+s);var t="";var p=(document.location.protocol==="https:")?f:n;switch(q){case"icon":if(r!==undefined){if(r==="available"){t='<img src="'+p+'" class="yucs-opi available"/>';
}else{if(r==="offline"){t='<img src="'+p+'" class="yucs-opi offline"/>';}else{if(r==="invisible"){t='<img src="'+p+'" class="yucs-opi invisible"/>';}else{if(r==="busy"){t='<img src="'+p+'" class="yucs-opi busy"/>';}else{if(r==="idle"){t='<img src="'+p+'" class="yucs-opi idle"/>';}else{t='<img src="'+r+'" />';}}}}}}break;case"separatorTop":if(r){t=j;}break;case"separatorBottom":if(r){t=j;}break;case"actionData":if(r){t='data-mad="'+r+'"';}break;case"isDisabled":if(r){t="disabled";}break;case"isActive":if(r){t="sp active";}break;case"checkedAria":t=r;break;default:t=r;break;}return t;},_resetItemStatus:function(s){var r=s.ancestor(l).all(m),q=s.ancestor(l).all("li.disabled"),p;r.removeClass("sp active");q.removeClass("disabled");if(s.getAttribute("data-dis")){p=s.ancestor(m);p.addClass("disabled");}if(s.getAttribute("data-hs")){p=s.ancestor(m);p.addClass("sp active");}},_handleMenuItemClick:function(q){var p=q.target;}};},"1.0",{requires:["node","event","event-mouseenter","event-custom","substitute","node-focusmanager"]});(function(){var b=document.getElementById("yucs"),a=typeof window.Y!=="undefined"&&(b&&b.getAttribute("data-property")==="srp")?window.Y:YUI();if(!b){return;}a.use("node","ucs-menu-utils",function(d){var c=d.one("#yucs").all("li.yucs-menu.yucs-activate");c.each(function(f){var e=new d.ucs.MenuUtils(f);});});})();(function(){var a=(function(){var b=document.getElementById("yucs").getAttribute("data-lang"),c;if(!b){return"en-US";}b=b.split("-");c=b.length;if(c==1){return b[0].toLowerCase();}else{if(c>2){b[1]=b[1].toLowerCase();b[1][0]=b[1][0].toUpperCase();}}c=c-1;b[c]=b[c].toUpperCase();return b.join("-");})();YUI.add("ucs-timestamp-library",function(b){b.namespace("ucs.Timestamp");b.Intl.setLang("datatype-date-format",a);b.ucs.Timestamp={getTimeStamp:function(f){var o,s,v,u,x,p,h="AM",k,c=b.one("#yucs"),m=f.dateRef||new Date(),n=f.date,r=f.locale?f.locale:c.getAttribute("data-lang"),j=n.getTime(),w=n.getDate(),l=m.getDate(),y=m.getTime(),i=y-j,q=l-w,g=true,e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r=b.Lang.isString(r)?r:"en-us";g=/^en-us$/i.test(r);i=parseInt(i/1000,10);s=n.getMonth();x=n.getHours();p=n.getMinutes();k=y-((m.getHours()*60*60*1000)+(m.getMinutes()*60*1000)+(m.getSeconds()*1000)+m.getMilliseconds());if(p<10){p="0"+p;}if(x>=12){h="PM";}if(x>12){x-=12;}if(f.type&&f.type==="short"&&b.DataType&&b.DataType.Date){if(q===0){o=x+":"+p+" "+h;}else{o=b.DataType.Date.format(n,{format:"%x",locale:a}).replace(/\b0(?=\d)/g,"");}}else{if(!g){o=e[s]+" "+w+"&nbsp;&nbsp;"+x+":"+p+" "+h;}else{if(q===0){if(i<60){if(i>1){o=i+" secs ago";}else{o=i+" sec ago";}}else{if(i<3600){i=Math.ceil(i/60,10);if(i<2){o=i+" min ago";}else{o=i+" mins ago";}}else{if(i<86400){i=Math.ceil(i/3600);if(i>1){o=i+" hours ago";}else{o=i+" hour ago";}}}}}else{if(((k-j)<86400000)&&q!==0){o="Yesterday "+x+":"+p+" "+h;}else{o=e[s]+" "+w+"&nbsp;&nbsp;"+x+":"+p+" "+h;}}}}return o;}};},"1.0",{requires:["node","lang/datatype-date-format_"+a,"datatype-date"]});})();YUI.add("ucs-menu-nav",function(d){d.namespace("ucs.MenuNav");var f="yucs",a="yucs-activate",t="yucs-menu",h="yucs-dock",m="yucs-menu_anchor",n="yucs-submenu-toggle",u="yucs-hide",g="yui3-menu-hidden",k="yui3-menu-label",l="yui3-menu-label-menuvisible",c="yui3-menu-label-active",o="yui3-menuitem-active",q="yucs-search",i="yucs-profile_inner",j="ucs:menuNavShow",r=5,s=500,b=0,p=500,e=350;d.ucs.MenuNav=function(A){var x,z=null,v=null,w=null,y=this;this.container=A;this.containerId=this.container.getAttribute("id");this.submenu=this.container.one("."+t);this.menuLabel=this.container.one("."+k);this.headerNode=d.one("#"+f);this.showMenuYlt=this.submenu.getAttribute("data-yltmenushown");v=function(B){d.log("MenuNav: overriding setXY on #"+y.submenu.getAttribute("id"));y._adjustPositionBeforeDisplay(B);};this.submenu.setXY=v;w=this.container.one("a."+k+", ."+k+" a");if(w&&w.getAttribute("href").indexOf("#")!==0){w.setAttribute("href","#"+this.submenu.getAttribute("id"));}x={mouseOutHideDelay:e,submenuHideDelay:p,subMenuShowDelay:b};this.container.plug(d.Plugin.NodeMenuNav,x);this._initEventHandlers();this._unHide();this.container.removeClass(a);};d.ucs.MenuNav.prototype={_unHide:function(){var v=this.container.all("."+u);if(v){v.removeClass(u);}},_broadcast:function(){d.augment(d.ucs.MenuNav,d.EventTarget,null,null,{});this.publish(j,{broadcast:2,emitFacade:true});},_initEventHandlers:function(){var v=this.headerNode.getAttribute("data-property");if("mail"===v&&this.container._plugins&&this.container._plugins.menuNav&&this.container._plugins.menuNav.prototype&&this.container._plugins.menuNav.prototype._onDocFocus){this.container._plugins.menuNav.prototype._onDocFocus=function(){};}this.container._plugins.menuNav.prototype._hideMenu=function(z,x){if(!x){return;}var y=this,A=z.previous(),w;A.removeClass(l);if(x){y._focusItem(A);y._setActiveItem(A);}w=z.one("."+o);if(w){w.removeClass(o);}z.setStyles({left:"",top:""});z.addClass("yui3-menu-hidden");if(y.get("useARIA")){z.set("aria-hidden",true);}};this._isOverLabel=false;this._isOverSubmenu=false;this.menuLabel.on("mouseover",this._handleMenuLabelEnter,this);this.menuLabel.on("mouseout",this._handleMenuLabelLeave,this);this.submenu.on("mouseover",this._handleSubmenuEnter,this);this.submenu.on("mouseout",this._handleSubmenuLeave,this);this.container.delegate("click",this._close,"."+t+" li a",this);},_handleMenuLabelLeave:function(w){var v=function(){if(false===this._isOverLabel&&false===this._isOverSubmenu){this._close();}};if(!w||!w.stopPropagation){return;}w.stopPropagation();this._isOverLabel=false;d.later(s,this,v);},_handleMenuLabelEnter:function(v){this._isOverLabel=true;},_handleSubmenuEnter:function(v){this._isOverSubmenu=true;},_handleSubmenuLeave:function(v){this._isOverSubmenu=false;this._handleMenuLabelLeave(v);},_closeOtherMenus:function(x,v){var w=x.one(".yucs-menu");if(x.getAttribute("id")!==this.containerId&&false===this._isHidden(w)){this._close("",x,w);}},_close:function(x,y,w,v){var z=function(A){A.handledMouseOut=true;A.handledMouseOver=false;};y=typeof y==="undefined"?this.container:y;w=typeof w==="undefined"?this.submenu:w;v=typeof v==="undefined"?this.menuLabel:v;w.addClass(g);v.removeClass(l).removeClass(c);w.all(".yui3-menuitem").each(function(A){z(A);A.removeClass("."+o);});z(v);z(y);z(w);},_isHidden:function(v){return v.hasClass(g)||v.hasClass(u);},_adjustPositionBeforeDisplay:function(x){var w=this.container.one("."+m),v;this.submenu.setY(x[1]);if(!w){this.submenu.setX(x[0]);d.Global.fire(j,{"menuid":this.containerId});d.later(10,this,function(){this.submenu.setStyles({"width":"auto","height":"auto"});});return;}v=function(){this.submenu.setStyles({"width":"auto","height":"auto"});var C=w.getX(),y=d.one("#"+f),F=y.getX(),G=y.get("offsetWidth"),A=this.submenu.get("offsetWidth"),z=Math.round(F+G-A-r),D=this.container.one("."+h),E=D&&D.get("offsetWidth"),B;if(C<z){z=C;this.container.setStyle("borderTopLeftRadius","0px");}if((this.submenu.getAttribute("id")===i)&&(d.one("#"+q).getStyle("direction")==="rtl")){z=C-(A/2);}if((this.submenu.getAttribute("id")==="yucs-prop_nav")&&(d.one("#"+q).getStyle("direction")==="rtl")){this.submenu.setX(C-(A*5));}this.submenu.setX(z);if(D){B=(w.get("offsetWidth")/2)-(E/2);D.setX(C+B);}this._sendBeacon(this.showMenuYlt);d.Global.fire(j,{"menuid":this.containerId});d.one("#"+f).all(".yucs-menu_nav").each(this._closeOtherMenus,this);};if(d.one("#"+q).getStyle("direction")!=="rtl"){if(document.compatMode!=="CSS1Compat"){this.submenu.setStyle("left","0px");}else{this.submenu.setStyle("left","-10000px");}}else{this.submenu.setStyle("left","0px");}d.later(10,this,v);},_sendBeacon:function(v){var w;if(!v){d.log("MenuNav: no ylt data in _sendBeacon for #"+this.submenu.getAttribute("id"));return;}w=new Image();w.height=0;w.width=0;w.src="https://geo.yahoo.com/t"+v;}};},"1.0",{requires:["node","event","event-custom","node-menunav"]});(function(){var b="yucs",c=document.getElementById(b),a=typeof window.Y!=="undefined"&&(c&&c.getAttribute("data-property")==="srp")?window.Y:YUI();a.use("ucs-menu-nav",function(e){var f=e.one("#"+b),d=f&&f.all(".yucs-menu_nav.yucs-activate")||false;if(d){d.each(function(i,g){var h=new e.ucs.MenuNav(i);});}});}());YUI.add("ucs-navigation",function(a){var h="yucs",b=3,c=172800000,g=3600000,i="yucs_eyc_nav_prop",d=a.Object,e=a.Array,f=a.Lang;a.namespace("ucs");a.ucs.Navigation=function(j,k){this.navigation=j;this.eventHandlers=[];this.jsonp=k&&k.jsonp?k.jsonp:a.jsonp;this.cache=k&&k.cache?k.cache:(typeof a.CacheOffline!=="undefined"?new a.CacheOffline({expires:c}):null);this.init();};a.ucs.Navigation.prototype={init:function(){this.header=a.one("#"+h);this.property=this.header.getAttribute("data-property");this.locale=this.header.getAttribute("data-lang");this.hasFetched=false;this.fetchInProgress=false;this.numNavQueriesMade=0;try{if(this.locale.toLowerCase().indexOf("-us")===-1){this.navigation.one(".yucs-menu").addClass("yucs-nonus");}}catch(j){}this._initEventHandlers();},destroy:function(){for(var j=0;j<this.eventHandlers.length;j++){this.eventHandlers[j].detatch();}},_parseUrl:function(o,k){var m=/^(?:([^:\/?#]+):)?(?:\/\/(?:(?:(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?(?:((?:(?:[^?#\/]*\/)*)(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,l=m.exec(o),n={"source":0,"scheme":1,"user":2,"pass":3,"host":4,"port":5,"path":6,"query":7,"fragment":8},j;if(k){j=n[k.toLowerCase()];return l[j];}else{return l;}},_initEventHandlers:function(){var j=this.navigation.one("#yucs-nav_button");if(!j){return;}this.eventHandlers.push(j.on("click",this._loadNavigation,this));this.eventHandlers.push(j.on("mouseover",this._loadNavigation,this));this.eventHandlers.push(j.on("focus",this._loadNavigation,this));},_loadNavigation:function(){var k=!this.header.getAttribute("data-disableyql"),j=this.cache?this.cache.retrieve(this._getCacheKey()):null;if(this.hasFetched===false&&this._isValidCacheData(j)){this._handleNewItems(j.response);}else{if(this.hasFetched===false&&this.fetchInProgress===false&&k){this._updateFromWs();}}},_isValidCacheData:function(j){return j!==null&&typeof j==="object"&&j.response!==null&&typeof j.response==="object"&&d.keys(j.response).length>0&&!document.location.search.match("ucs.invalidnavcache=1");},_getCacheKey:function(){return i+"_"+this.locale;},_updateFromWs:function(){var j='select * from ucs.navigation where property="'+this.property+'" and lang="'+this.locale+'"',n=a.QueryString.stringify({q:j,format:"json"}),m="https:"===document.location.protocol?"https://":"http://",l=m+"ucs.query.yahoo.com/v1/public/yql?"+n;a.log("nav: fetching navigation from "+l);this.fetchInProgress=true;this.numNavQueriesMade++;try{this.jsonp.call(this,l,{on:{success:this._handleResponse,error:this._handleFailure,failure:this._handleFailure,timeout:this._handleFailure},context:this,timeout:2000});}catch(k){this._handleFailure(k);}},_handleResponse:function(k){var j;if(k&&k.query&&k.query.results===null&&k.query.count===0){this._handleEmptyResponse();}else{if(!k||!k.query||!k.query.results||!k.query.results.result||!k.query.results.result.eyc){this._handleFailure(k);}else{j=this._normalizeYqlResponse(k.query.results.result.eyc);if(!j||d.keys(j).length===0){this._handleEmptyResponse();}else{this._handleNewItems(j);this._cache(j);}}}},_handleNewItems:function(j){this._updateNavItems(j);this.hasFetched=true;this._finishedLoading();},_cache:function(k,j){if(this.cache&&k&&d.keys(k).length>0){if(typeof j==="number"&&j>0){this.cache.set("expires",j);}this.cache.add(this._getCacheKey(),k);}},_normalizeYqlResponse:function(l){var k={},j=this;if(l&&l.PropertyName){l=[l];}e.each(l,function(m){var n=m&&m.PropertyName?m.PropertyName.toLowerCase():null;if(n&&n!==j.property){k[n]=j._createItem(m.DisplayName,m.URL);}});return k;},_createItem:function(k,j){return{name:k,url:j};},_updateNavItems:function(o){var n={"news":"yucs-site_news","finance":"yucs-site_finance","sports":"yucs-site_sports","my":"yucs-site_my","omg":"yucs-site_omg","shine":"yucs-site_shine","frontpage":"yucs-site_home"},k=d.keys(n),m,l,j,p;if(!o){return;}for(m=0;m<k.length;m++){l=k[m];j=o[l];p=n[l];this._updateNavItem(j,"."+p);}},_updateNavItem:function(m,l){var k=this.navigation.one(l),n=k&&k.one("a"),j,o;if(!m&&k){a.log("nav: removing "+l+" from navigation");k.remove();}else{if(m&&n){o=m.url;if(this._parseUrl(m.url,"path")===""){o+="/";}j=n.getAttribute("href").match(/_ylt=[^&;\/]+/gi);if(j){o+=";"+j;}n.setAttribute("href",o);n.set("text",m.name);}else{a.log("nav: could not find node for "+l+" in navigation");}}},_handleFailure:function(k){var j=true;this._handleEmptyResponse(j);if(this.numNavQueriesMade<b){this.hasFetched=false;}},_handleEmptyResponse:function(j){var m,n,l,k;a.log("nav: empty or bad data returned from eyc.");n=this.navigation.one(".yucs-site_home");l=n&&n.one("a").get("text")||"";l=f.trim(l)||"Yahoo!";k="http://www.yahoo.com/";m={"frontpage":this._createItem(l,k)};this._handleNewItems(m);if(!j){this._cache(m,g);}this._finishedLoading();},_finishedLoading:function(){var l=this.navigation.one("#yucs-prop_nav"),j=l.one("> div.yui3-menu-content"),k;this.fetchInProgress=false;j.removeClass("yucs-yql_loading");k=j.get("offsetHeight")+10;l.setStyles({"height":k,"width":"auto"});}};},"1.0",{requires:["node","event","event-custom","querystring-stringify","gallery-jsonp","cache"]});(function(){var b=document.getElementById("yucs"),a=typeof window.Y!=="undefined"&&(b&&b.getAttribute("data-property")==="srp")?window.Y:YUI();a.use("node","ucs-navigation",function(e){var c=e.one("#yucs-nav"),d;if(c){d=new e.ucs.Navigation(c);}});}());YUI.add("ucs-search",function(a){if(!ucs.Search){var h="value",m="click",i="suggest",n="touchstart",k="submit",g="innerHTML",l="tabindex",o="target",j=20,d=10,b=parseInt(a.one("#yucs").getStyle("paddingLeft"),d),f="yucs-qry",e="yucs-content-qry",c="#yucs-satray";ucs.Search=function(p){this.form=(p.getDOMNode().nodeName.toLowerCase()==="form")?p:p.one("form");this.searchWrapper=a.one("#yucs-search");this.buttons=this.form.all("button");this.stype=this.form.one("#yucs-search_type");this.form.set("onsubmit",null);this.loadedAssist=false;this.init();};ucs.Search.prototype={isWebSearch:false,init:function(){this._setTabIndex();this.is2Button=(this.buttons.size()===2);if(document.compatMode!=="CSS1Compat"){document.getElementById("mnp-search_box").style.width="100%";document.getElementById("mnp-search_box").style.height="31px";document.getElementById("mnp-search_box").style.background="#eaf1f5";document.getElementById("yucs-nav_outer").style.top="13px";if(document.getElementById("yucs-menu_link_profile_signed_out")){document.getElementById("yucs-menu_link_profile_signed_out").style.backgroundPositionX="-2px";document.getElementById("yucs-menu_link_profile_signed_out").style.backgroundPositionY="-2636px";}document.getElementById("yucs-home_link").style.backgroundPositionY="-2911px";document.getElementById("yucs-mail_link_id").style.backgroundPositionY="-3041px";document.getElementById("yucs-mail_link_id").style.marginTop="10px";document.getElementById("yucs-profile").style.marginTop="10px";document.getElementById("yucs-profile_text").style.marginTop="5px";document.getElementById("yucs-profile").style.width="100px";if(document.getElementById("yucs-web_search_button_wrapper")){document.getElementById("yucs-web_search_button_wrapper").style.background="#eaf1f5";document.getElementById("yucs-sprop_button").style.background="#FCC42E";document.getElementById("yucs-prop_search_button_wrapper").style.width="0%";document.getElementById("yucs-web_search_button_wrapper").style.width="0%";}if(document.getElementById("yucs-search_button_wrapper")){document.getElementById("yucs-search_button_wrapper").style.background="#FCC42E";}}if((a.one("#yucs").getAttribute("data-property")==="finance")&&!this.is2Button){document.getElementById("mnp-search_box").name="s";}this.input=this.form.one("input");this.vertSearchBtn=this.form.one("#yucs-sprop_button");this.webSearchBtn=this.form.one("#yucs-search_button");this.searchToggleBtn=this.form.one("#yucs-search_toggle_button");this.searchHint=this.input.getAttribute("data-sh");this.yltvsearch=this.input.getAttribute("data-yltvsearch");this.yltvsearchsugg=this.input.getAttribute("data-yltvsearchsugg");this.isRTL=/ar|he/gi.test(a.one("#yucs").getAttribute("data-lang").split("-")[0]);this.leftWrapperWidth=this._calcLeftWrapperWidth();this.leftMinWidthSet=false;this.defaultWidth=parseInt(this.searchWrapper.getComputedStyle("width"),d);if(a.one(".yucs-one_button")){a.all(".yucs-search-buttons").pop().remove(true);}this.IEOffset=0;if(a.UA.ie>0&&a.UA.ie<=7){this._calcIEOffset();}if((a.one("#yucs")&&a.one("#yucs").getAttribute("data-linktarget"))){this.linkTarget=a.one("#yucs").getAttribute("data-linktarget");}else{this.linkTarget=this.form.getAttribute("target")||"_top";}this._setFormTarget();this._resizeSearchContainer();this._initEventListeners();this.form.removeClass("yucs-activate");if(document.activeElement!==this.input._node&&this.input.get(h)===""){this._resetSearchInput();}},_initEventListeners:function(){this.form.on(k,this._handleSubmit,this);a.on("windowresize",a.bind(this._resizeSearchContainer,this));this.input.on("focus",this._handleInputFocus,this);this.input.on("blur",this._handleInputBlur,this);this.input.on("keyup",this._handleInputKeyup,this);if(this.stype){this._initSearchTypeMenu();}var p=a.one("#yucs").getAttribute("data-property");if(p==="mail"||this.is2Button){if(this.vertSearchBtn){this.vertSearchBtn.on(m,this._handleVertSearch,this);}this.publish("ucs:webSearch",{broadcast:2,emitFacade:true});a.Global.on("ucs:webSearch",this._handleWebSearchEvent,this);a.Global.on("ucs:mailSearch",this._trackMailSearch,this);a.Global.on("ucs:mailSearchSugg",this._trackMailSearchSugg,this);}},_initSearchTypeMenu:function(){this.stype.one(".yucs-stype_prop").setData("yucs-stype","propsearch");this.stype.one(".yucs-stype_web").setData("yucs-stype","web");this.stype.delegate("click",function(v){var r=this.stype.one(".yucs-active"),q=this.stype.one(".yucs-inactive"),t,p,s,u;v.preventDefault();if(parseFloat(YUI.version,10)>3.1){q.toggleView();}else{if(q.getStyle("display")=="none"){q.setStyle("display","block");}else{q.setStyle("display","none");}}if(v.target.hasClass("yucs-active")||v.target.hasClass("yucs-inactive")){s=r.getData("yucs-stype");u=v.target.getData("yucs-stype");if(s!=u){t=r.get("text");p=v.target.get("text");r.set("text",p);r.setData("yucs-stype",u);q.set("text",t);q.setData("yucs-stype",s);}}},"span",this);this.stype.one(".yucs-active").on("focus",function(p){if(inactiveElm.getStyle("display")=="none"){this.stype.one(".yucs-inactive").show();}},this);this.stype.one(".yucs-inactive").on("blur",function(p){this.stype.one(".yucs-inactive").hide();},this);},_calcLeftWrapperWidth:function(){var p=a.all(".yucs-fl-left > div"),q=b;p.each(function(r){if(r.get("id")!=="yucs-search"){q+=r.get("offsetWidth")+parseInt(r.getStyle("marginLeft"),d)+parseInt(r.getStyle("marginRight"),d);}else{q+=parseInt(r.getStyle("marginLeft"),d)+parseInt(r.getStyle("marginRight"),d);}});return q;},_calcIEOffset:function(){var q=a.all(".yucs-search-buttons").pop(),p=q.intersect(this.searchWrapper);if(a.one("body").getAttribute("dir")==="rtl"){this.IEOffset=p.left-this.searchWrapper.getX();}else{this.IEOffset=this.searchWrapper.getX()+parseInt(this.searchWrapper.getComputedStyle("width"),d)-p.right;}this.defaultWidth+=this.IEOffset;},_resizeSearchContainer:function(){var q=(parseInt(a.one("#yucs").getStyle("minWidth"),d)+(2*b))||0,t=Math.max(a.DOM.winWidth(),q),p=parseInt(this.searchWrapper.getStyle("width"),d),s=parseInt(a.one(".yucs-fl-right").getComputedStyle("width"),d)+b,r=t-(this.leftWrapperWidth+s+j)+this.IEOffset;
if(!this.leftMinWidthSet&&t===q){a.one(".yucs-fl-left").setStyle("minWidth",r+this.leftWrapperWidth);this.leftMinWidthSet=true;}if(r>this.defaultWidth){if(p===this.defaultWidth){return;}else{r=this.defaultWidth;}}if(this.IEOffset>0&&this.isRTL){this.searchWrapper.setStyle("visibility","hidden");}this.searchWrapper.setStyle("width",r+"px");if(this.IEOffset>0&&this.isRTL){a.later(50,this,function(){this.searchWrapper.setStyle("visibility","visible");});}},_getInputValTrimmed:function(){var p=this.input.get(h);p=a.Lang.trim(p);return p;},_inputIsEmpty:function(){return this._getInputValTrimmed()==="";},_inputIsDefaultTerm:function(){return this._getInputValTrimmed()===this.searchHint;},_handleInputKeyup:function(p){if(p.keyCode==13){console.log("enter pressed");}if(!this._inputIsEmpty()&&!this._inputIsDefaultTerm()){this._setTabIndex();}if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}},_setTabIndex:function(){var p=(a.UA.ie>0&&a.UA.ie<=7);this.buttons.each(function(q){var r=q.getAttribute(l);if((p&&r===0)||(p&&r===65535)||(r&&!(p&&r===32768))){q.setAttribute(l,0);}else{q.setAttribute(l,-1);}});},_setFormTarget:function(){if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){this.form.setAttribute(o,"searchWin");}else{this.form.setAttribute(o,this.linkTarget);}},_initAssist:function(){var p=this.input.getAttribute("data-satype");if(6===a.UA.ie||7===a.UA.ie){p="";}switch(p){case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node);break;default:break;}},_buildAssistConfig:function(p){var q={searchbox:p,clid:"uh-yui3",align:true,shim:1,nresults:5};q.node=c;if(p.getAttribute("data-pubid")){q.pubid=p.getAttribute("data-pubid");}if(p.getAttribute("data-gosurl")){q.url=p.getAttribute("data-gosurl");}return q;},_initMiniAssist:function(r){var q=this,p={miniassist:{fullpath:"http://l.yimg.com/kx/yucs/uh3/search/js/112/mini-assist.js",requires:["base","get","node","event-focus","plugin","array-extras"]},"miniassist-skin":{fullpath:"http://l.yimg.com/kx/yucs/uh3/search/css/84/assist-min.css",type:"css"},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201009101433.js",requires:["miniassist"]},"tray-shim-plugin":{fullpath:"http://l.yimg.com/a/lib/s7/tray-shim-plugin-201009101433.js",requires:["miniassist"]}};YUI({modules:p}).use("miniassist","miniassist-skin","tray-align-plugin","tray-shim-plugin","event-move",function(x){var s=new x.Node(r),t=q._buildAssistConfig(s);q.sa=new x.Search.MiniAssist(t);q.sa.gossip.set("scrollSize",13);q.sa.gossip.set("linkStem",x.one(c).getAttribute("data-vsearch"));q.sa.gossip.set("linkParams",{fr:x.one(c).getAttribute("data-vfr")});if(!q.is2Button){q.sa.gossip.set("hideEmptyTray",false);}if(x.one("#yucs").getAttribute("data-property")==="finance"){var w=x.one(t.node),y=w.getAttribute("data-vstext"),v=w.getAttribute("data-vert_fin_search"),u=w.getAttribute("data-vfr");q.sa.assist.on(i,function(A){if(A.query){var z=x.one("#"+e),B=q.sa.buildSearchUrl(s,A.query,v,{fr:u});if(x.one("#yucs").getAttribute("data-property")==="finance"){B=B.replace("?s=","?p=");}if(!z){if(document.getElementById("hspart")){B+="&hspart="+document.getElementById("hspart").value;}if(document.getElementById("hsimp")){B+="&hsimp="+document.getElementById("hsimp").value;}if(document.getElementById("yucs-hstype")){B+="&type="+document.getElementById("yucs-hstype").value;}z=x.Node.create("<ul id='"+e+"'><li><a href='"+B+"' text='"+A.query+"'>"+y+"<q>"+A.query+"</q></a></li></ul>");x.one(".sa-panel").append(z);}else{z.one("li").setContent("<a href='"+B+"' text='"+A.query+"'>"+y+" <q>"+A.query+"</q></a>");}}});}x.one(".yucs-search").on("submit",function(A){if(x.one("#"+f+" a.sa-active")){var z=x.one("#"+f+" a.sa-active").getAttribute("href");A.preventDefault();if(q.linkTarget==="_blank"||q.form.hasClass("yucs-search-fh")){window.open(z,"searchWin");}else{window.location.href=z;}}});x.on("gesturemovestart",function(z){var A=z.target&&z.target.ancestor&&z.target.ancestor(".sa-tray");if(q.sa.tray.isOpen&&!A){q.sa.tray.close();}},document,q);});},_initRichAssist:function(r){var q=this,p={richassist:{fullpath:"http://a.l.yimg.com/a/lib/s7/richassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201009101433.js",requires:["richassist"]},"tray-shim-plugin":{fullpath:"http://l.yimg.com/a/lib/s7/tray-shim-plugin-201009101433.js",requires:["richassist"]}};YUI({modules:p}).use("richassist","tray-align-plugin","tray-shim-plugin",function(u){var s=new u.Node(r),t=q._buildAssistConfig(s);q.sa=new u.Search.RichAssist(t);});},_setInputBlank:function(){this.input.set(h,"");},_handleSearchToggle:function(p){p.preventDefault();this._toggleSearch();},_toggleSearch:function(){var p=this,q=function(r){p._handleBodyClick(r);};a.one("#yucs").toggleClass("yucs-show_search");if(!this.bodyClick){if(a.UA.mobile&&("createTouch" in document)&&("addEventListener" in document.body)){a.log("using touchstart in mobile browser","info","search");document.body.addEventListener(n,q,false);this.bodyClick={detach:function(){if("removeEventListener" in document.body){document.body.removeEventListener(n,q,false);}}};}else{this.bodyClick=a.one("body").on(m,this._handleBodyClick,this);}this.bodyScroll=a.on("scroll",function(r){this._toggleSearch();},this);}else{this.bodyClick.detach();this.bodyScroll.detach();this.bodyClick=this.bodyScroll=null;}},_handleBodyClick:function(r){var q=r&&r.target||null,p;if(!q){return;}p=typeof q.ancestor==="function"?q:a.one(q);if(p&&!p.ancestor("#yucs")){this._toggleSearch();}},_handleSubmit:function(q){if(this.form.one("#yucs-sky-term")){this.form.one("#yucs-sky-term").set(h,this._getInputValTrimmed());}if(this._inputIsDefaultTerm()){this._setInputBlank();}if(q&&q.target){this.isWebSearch=a.one(q.target).hasClass("yucs-wsearch-button");}if(document.getElementById("yuhead-att-cat")){if(this.form.getAttribute(o)!=="searchWin"){q.preventDefault();
}var p=a.Node.create("<img />");p.once("load",this._handleImageLoad,this);p.once("error",this._handleImageLoad,this);this._timer=window.setTimeout(a.bind(this._handleImageLoad,this),2000);p.set("src","http://attadworks.turn.com/r/dd/id/L21rdC8xMDAvY2lkLzE1OTE3NzExL3QvMg/qry/"+encodeURIComponent(this._getInputValTrimmed()));}},_handleImageLoad:function(p){if(this._timer!==null){clearTimeout(this._timer);this._timer=null;}if(this.form.getAttribute(o)!=="searchWin"){this.form.submit();}},_handleInputFocus:function(p){if(this._inputIsDefaultTerm()){this._setInputBlank();}this.input.removeClass("yucs-search-hint-color");if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}},_handleInputBlur:function(p){if(this._inputIsEmpty()){this.input.set(h,this.searchHint);this.input.addClass("yucs-search-hint-color");}},_handleVertSearch:function(s){a.log("handleVertSearch");if(this.isWebSearch||a.one("#"+f+" a.sa-active")){this.isWebSearch=false;return;}s.preventDefault();var r=s.target.getAttribute("data-vsearch"),q="1button",p=this.yltvsearch;if(this.is2Button){q="2button";}if(r){if(a.one("#yucs").getAttribute("data-property")==="mail"){r+="?fr="+this.form.one("#fr").get(h)+"&p="+this.input.get(h);}else{if(a.one("#yucs").getAttribute("data-property")==="finance"){r+="?type="+q+"&s="+this.input.get(h);}else{if(a.one("#yucs").getAttribute("data-property")==="groups"){r+="?query="+this.input.get(h);}else{r+="?fr="+s.target.getAttribute("data-vfr")+"&type="+q+"&p="+this.input.get(h);}}}if(p){if(p.charAt(0)==="/"){p=p.substring(1);}r+=p;}if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){window.open(r,"searchWin");}else{window.location.href=r;}}else{this._fireVertSearchEvent(s);}},_fireVertSearchEvent:function(q){var p=this.input.get(h);this.publish("ucs:verticalSearchAction",{broadcast:2,emitFacade:true});this.fire("ucs:verticalSearchAction",{"query":p});},_handleWebSearchEvent:function(p){if(p.query){this.input.set("value",p.query);}this.form.submit();},_fireInterfaceReady:function(){this.publish("ucs:uhSearchInterfaceReady",{broadcast:2,emitFacade:true});this.fire("ucs:uhSearchInterfaceReady");},_getSearchInput:function(){return this.input;},_resetSearchInput:function(){this.input.set(h,this.searchHint);this.input.addClass("yucs-search-hint-color");},_setSearchInput:function(p){this.input.set(h,p);},_getVertSearchBtnContent:function(){return this.vertSearchBtn.get(g);},_setVertSearchBtnContent:function(p){this.vertSearchBtn.set(g,(p["text"])?p["text"]:p);},_trackMailSearch:function(){a.log("Mail search");this._sendBeacon(this.yltvsearch);},_trackMailSearchSugg:function(){a.log("Mail search sugg");this._sendBeacon(this.yltvsearchsugg);},_trackPropSearch:function(){a.log("Prop Search");this._sendBeacon(this.yltvsearch);},_sendBeacon:function(p){if("https:"!==window.location.protocol){var q=a.Node.create("<img />");if(!p){a.log("No beacon data");return;}a.log("Beacon data: "+p);q.set("src","https://geo.yahoo.com/t"+p);}}};a.augment(ucs.Search,a.EventTarget);}},"1.0",{requires:["node","event","event-custom","event-resize","dom-screen"]});YUI().use("node","ucs-search",function(b){var a=b.all("#yucs-search");a.each(function(f,c,e){if(f.ancestor(".yucs-fl-left")){b.log("instantiating uh search component");ucs.UhSearchInterface=new ucs.Search(f);ucs.UhSearchInterface.getInput=function(){return ucs.UhSearchInterface._getSearchInput();};ucs.UhSearchInterface.setInput=function(g){ucs.UhSearchInterface._setSearchInput(g);};ucs.UhSearchInterface.resetInput=function(){ucs.UhSearchInterface._resetSearchInput();};ucs.UhSearchInterface.getVertSearchBtnText=function(){return ucs.UhSearchInterface._getVertSearchBtnContent();};ucs.UhSearchInterface.setVertSearchBtnText=function(g){ucs.UhSearchInterface._setVertSearchBtnContent(g);};ucs.UhSearchInterface._fireInterfaceReady();}else{b.log("instantiating search components");var d=new ucs.Search(f);}});});YUI.add("ucs-profile-menu",function(d){var e="ucs:profileMenuShow",b="ucs:menuNavShow",a=d.Lang.trimRight,c;d.namespace("ucs.ProfileMenu");d.ucs.ProfileMenu=function(f){this.profile=f;this.name=this.profile.one(".yuhead-name");this.greeting=this.profile.one(".yuhead-name-greeting");this.optimizedNameCache={};this.origName=this.name.get("text");this.menuId=this.profile.getAttribute("id");this.init();};d.ucs.ProfileMenu.prototype={init:function(){this.publishEvents();this.initEventHandlers();this.optimizeNameLength();},optimizeNameLength:function(){var g=8,f=this.name?this.name.get("text").length:0,h=this.greeting?this.greeting.get("text").length:0;if(h<g&&f<g){this.greeting.setHTML(this.greeting.get("text")+"&nbsp;");this.name.get("parentNode").addClass("yucs-inline-greeting");}},publishEvents:function(){d.augment(d.ucs.ProfileMenu,d.EventTarget,null,null,{});this.publish(e,{broadcast:2,emitFacade:true});},initEventHandlers:function(){var f=this;d.Global.on(b,this.handleMenuNavShow,this);},handleMenuNavShow:function(f){if(f&&f.menuid===this.menuId){if(d.UA.ie===8){this.profile.one("#yucs-profile-cont").setStyle("maxHeight","100%");}this.fire(e);}}};},"1.0",{requires:["node","event","event-custom","event-resize"]});(function(){var b=document.getElementById("yucs"),a=typeof window.Y!=="undefined"&&(b&&b.getAttribute("data-property")==="srp")?window.Y:YUI();a.use("ucs-profile-menu",function(e){var d=a.one("#yucs-profile"),c;if(d){c=new e.ucs.ProfileMenu(d);}});}());YUI.add("jsonp-super-cached",function(B){B.namespace("jsonpsupercached");if(!YUI.Env.JsonpSuperCached){YUI.Env.JsonpSuperCached={};}if(!YUI.Env.JsonpSuperCached.services){YUI.Env.JsonpSuperCached.services={};}var A=YUI.Env.JsonpSuperCached.services;B.jsonpsupercached.getData=function(F){var C={};var D=F.url||"";var J=F.serviceName||"service";var M=F.callbackName||"callback";var I=F.broadcast||false;var J="_"+J+"_"+M;var G=F.onSuccess||function(){};C.timeout=F.timeout;C.onTimeout=F.onTimeout||null;C.onFailure=F.onFailure||null;var L=(D.indexOf("?")===-1)?"?":"&";var H=D+L+M+"=YUI.Env.JsonpSuperCached."+J;var K=F.args||[];var E=F.context||null;B.jsonpsupercached.get=YUI.Env.JsonpSuperCached.get||B.Get;if(!A[H]){A[H]={dataAvailable:false,requestInProgress:false,callbacksQueue:[]};}var N=A[H];if(N.dataAvailable){G(N.data);}else{N.callbacksQueue.push(G);if(!N.requestInProgress){YUI.Env.JsonpSuperCached[J]=function(R){N.data=R;N.dataAvailable=true;scbs=N.callbacksQueue;for(var Q=0,O=scbs.length;Q<O;Q++){var P=scbs.pop();P.apply(E,[R].concat(K));}};N.requestInProgress=true;B.jsonpsupercached.get.script(H,C);}}};},"0.0.1");YUI.add("ucs-avatar",function(b){var a="http://l.yimg.com/dh/ap/social/profile/profile_b32.png";if(b.UA.secure){a="https://s.yimg.com/dh/ap/social/profile/profile_b32.png";}b.namespace("ucs");b.ucs.Avatar=function(c){this.container=c;this.crumb=this.container.getAttribute("data-crumb");this.guid=this.container.getAttribute("data-guid");this.profile=this.container.getAttribute("data-prof");this.username=this.container.getAttribute("data-user");this.init();};b.ucs.Avatar.prototype={init:function(){this.container.removeClass("yucs-av-activate");this.img=b.Node.create('<img width="28" height="28" alt="'+this.username+" "+this.profile+'">');this._fetchData();},_fetchData:function(){var c='select imageUrl from social.profile.image where guid = "'+this.guid+'" and size="32x32";',d=((b.UA.secure)?("https://"):("http://"))+"ucs.query.yahoo.com/v1/console/yql?"+b.QueryString.stringify({q:c,format:"json",crumb:this.crumb,_maxage:900});b.jsonpsupercached.getData({url:d,serviceName:"avatar",onSuccess:b.bind(this._buildMarkup,this)});},_buildMarkup:function(d){var c;if(!d.query||!d.query.results||d.query.results==="0"||!d.query.results.image||d.query.results.image.imageUrl.match(/profile_/)){c=a;}else{c=d.query.results.image.imageUrl;if(b.UA.secure){c=c.replace(/http/,"https");}}this.img.on("load",function(f){this.img.addClass("yucs-avatar");this.container.setContent(this.img);},this);this.img.setAttribute("src",c);}};},"1.0",{requires:["node","event","jsonp-super-cached","querystring-stringify"]});(function(){var b=document.getElementById("yucs"),a=(b&&b.getAttribute("data-property")==="srp")?Y:YUI();a.use("node","ucs-avatar",function(e){var d=e.one("#yucs").one("span.yucs-avatar.yucs-av-activate"),c;if(d){c=new e.ucs.Avatar(d);}});})();YUI.add("ucs-helpmenu",function(d){d.namespace("ucs.HelpMenu");var v="ucs:helpMenuShow",g="ucs:helpDebugMenuShow",n="ucs:helpMenuItemClick",m="ucs:helpDebugMenuItemClick",t="yucs-help_button",a="ucs:utilityMenuShow",r="ucs:utilityMenuItemClick",z="yucs-hide",j="yui3-menu-hidden";var q='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",y='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",p='<span class="yucs-separator" role="presentation"></span>',i="click",l="mouseover",w="focus",u="a",k="role",c="tabIndex",h="yucs-hide",b="iframe",o="ul",e="li",s="parentNode",x="http://l.yimg.com/a/lib/ush/icon.gif",f="https://s.yimg.com/lq/lib/ush/icon.gif";d.ucs.HelpMenu=function(A){this.menu=A;this.shown=false;this.helpLink=d.one("#"+t);this.helpLink.setAttribute("data-mad","true");this._initCustomEvents();A.removeClass("yucs-hm-activate");};d.ucs.HelpMenu.prototype={_initCustomEvents:function(){this.publish(v,{broadcast:2,emitFacade:true});this.publish(g,{broadcast:2,emitFacade:true});this.publish(n,{broadcast:2,emitFacade:true});this.publish(m,{broadcast:2,emitFacade:true});this.publish(a,{broadcast:2,emitFacade:true});this.publish(r,{broadcast:2,emitFacade:true});d.Global.on("ucs:utilityMenuItems",this._handleHelpMenuItems,this,{"location":"top","menuType":"minty-utility-item"});d.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this,{"location":"bottom","menuType":"minty-help-item"});d.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this,{"location":"bottom","menuType":"minty-debug-item"});this.helpLink.on([i,l,w],this._toggleHelpMenu,this);this.menu.delegate(i,this._handleMenuItemClick,"li a",this);if(d.one("#yucs-help_button").hasClass("yui3-menu-label-active")){this._showMenu();}},_toggleHelpMenu:function(A){this._showMenu(A);},_showMenu:function(A){if(d.one("#yucs").getAttribute("data-property")==="mail"){this.menu.all("li").addClass("yucs-hide");}if(A&&(A.ctrlKey||A.metaKey)&&A.shiftKey){this.fire(g);if(this.shown===false){d.later(4000,this,function(){this.fire(g);});}else{this._showDebugMenuItems();}}else{this.fire(v);this.fire(a);if(this.shown===false){d.later(4000,this,function(){this.fire(v);this.fire(a);});}else{this._showMenuItems();}}},_showDebugMenuItems:function(){this.shown=true;this.menu.all("li").addClass("yucs-hide");this.menu.all("span.minty-item").setStyle("display","none");this.menu.all("li.debug-item").removeClass("yucs-hide");this.menu.all("span.debug-item").setStyle("display","block");},_showMenuItems:function(){this.shown=true;this.menu.all("li").removeClass("yucs-hide");this.menu.all("span.minty-item").setStyle("display","block");this.menu.all("li.debug-item").addClass("yucs-hide");this.menu.all("span.debug-item").setStyle("display","none");},_handleHelpMenuItems:function(F,E){var B=E&&E.location||"top",D=E&&E.menuType||"minty-help-item",C,A;if(!F.menuGroups||!F.menuGroups.length){return;}C=F.menuGroups;A=this.menu.one(o);if(F.reset&&A){A.all("."+D).remove(true);}this._addMenuGroups(C,B,false,D);this._showMenuItems();},_handleHelpDebugMenuItems:function(B){var A;if(!B.menuGroups||!B.menuGroups.length){return;}A=B.menuGroups;itemList=this.menu.one(o);if(B.reset&&itemList){itemList.all(".minty-debug-item").remove(true);}this._addMenuGroups(A,"top",true,"minty-debug-item");this._showDebugMenuItems();},_handleMenuItemClick:function(G){var F,C,A,B;F=G.target;F=F.ancestor("a",true);C=F.getAttribute("data-mad");A=F.getAttribute("data-customevt");B=F.ancestor("li").hasClass("disabled");if(B){G.halt();return;}if(A){G.preventDefault();}if(!B){var E={actionData:C};var D=F.ancestor("li");if(D.hasClass("debug-item")){this.fire(m,E);}else{if(D.hasClass("minty-utility-item")){this.fire(r,E);}else{this.fire(n,E);}}}this.menu.addClass("yui3-menu-hidden");d.one("#yucs-help_button").removeClass("yui3-menu-label-menuvisible");},_addMenuGroups:function(D,J,H,I){var F=this.menu.one(o),A="",B,E=D.length,C,G;B=F.hasChildNodes();for(C=0;C<E;C++){G=D[C].length;if(J==="bottom"){if(C>0){D[C][0].separatorTop=true;}}else{if(C<(E-1)||B){D[C][G-1].separatorBottom=true;}}A+=this._addMenuGroup(D[C],H,I);}if(F.ancestor("div.yucs-yql_loading")){F.ancestor("div.yucs-yql_loading").removeClass("yucs-yql_loading");}if(J==="bottom"){F.append(A);}else{F.prepend(A);}},_addMenuGroup:function(B,E,D){var F="",A=B.length,C;for(C=0;C<A;C++){if(E){B[C].isDebugItem=true;B[C].menuClass=D+" debug-item";}else{B[C].isDebugItem=false;B[C].menuClass=D+" minty-item";}F+=this._addMenuItem(B[C],D);}return F;},_addMenuItem:function(C,B){var A="";if(C.isActive){C.checkedAria='aria-checked="true"';}else{C.checkedAria="";}if(C.isDisabled){C.disabledAria='aria-disabled="true"';}else{C.disabledAria="";}switch(C.actionType){case"link":A=d.substitute(q,C,this._processTemplateValue);break;case"customEvent":A=d.substitute(y,C,this._processTemplateValue);break;default:break;}if(A){if(C.isDebugItem){A=A.replace(/separator/,"separator debug-item "+B);}else{A=A.replace(/separator/,"separator minty-item "+B);}}return A;},_processTemplateValue:function(B,C,D){var E="";var A=(document.location.protocol==="https:")?f:x;switch(B){case"icon":if(C!==undefined){if(C==="available"){E='<img src="'+A+'" class="yucs-opi available"/>';}else{if(C==="offline"){E='<img src="'+A+'" class="yucs-opi offline"/>';}else{if(C==="invisible"){E='<img src="'+A+'" class="yucs-opi invisible"/>';}else{if(C==="busy"){E='<img src="'+A+'" class="yucs-opi busy"/>';}else{if(C==="idle"){E='<img src="'+A+'" class="yucs-opi idle"/>';}else{E='<img src="'+C+'" />';}}}}}}break;case"separatorTop":if(C){E=p;}break;case"separatorBottom":if(C){E=p;}break;case"actionData":if(C){E='data-mad="'+C+'"';}break;case"isDisabled":if(C){E="disabled";}break;case"isActive":if(C){E="sp active";
}break;case"checkedAria":E=C;break;default:E=C;break;}return E;}};d.augment(d.ucs.HelpMenu,d.EventTarget);},"1.0",{requires:["oop","node","event-custom","substitute"]});(function(){var b=document.getElementById("yucs"),a=(b&&b.getAttribute("data-property")==="srp")&&typeof window.Y!=="undefined"?window.Y:YUI();a.use("node","ucs-helpmenu",function(e){var d=e.one("#yucs").all(".yucs-hm-activate"),c;d.each(function(f){c=new e.ucs.HelpMenu(f);});});})();YUI.add("ucs-logodebug",function(a){a.namespace("ucs");a.ucs.LogoDebug=function(b){b.on("click",this._handleClick,this);this.publish("ucs:logoDebug",{broadcast:2,emitFacade:true});};a.ucs.LogoDebug.prototype={_handleClick:function(b){if(b.altKey){b.halt();this.fire("ucs:logoDebug");}}};a.augment(a.ucs.LogoDebug,a.EventTarget);},"1.0",{requires:["node"]});(function(){var b=document.getElementById("yucs"),a=(b&&b.getAttribute("data-property")==="srp")?Y:YUI();a.use("node","ucs-logodebug",function(e){var d=e.one("#yucs-logo_link");if(d){var c=new e.ucs.LogoDebug(d);}});})();YUI.add("ucs-usermenu",function(c){c.namespace("ucs.UserMenu");var n="ucs:userMenuShow",k="ucs:userMenuItemClick",s="yucs-hide",h="yui3-menu-hidden";var m='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",r='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",l='<span class="yucs-separator" role="presentation"></span>',g="click",p="a",i="role",a="tabIndex",f="yucs-hide",b="iframe",j="ul",d="li",o="parentNode",q="http://l.yimg.com/a/lib/ush/icon.gif",e="https://s.yimg.com/lq/lib/ush/icon.gif";c.ucs.UserMenu=function(t){this.menu=t;this._initCustomEvents();};c.ucs.UserMenu.prototype={_initCustomEvents:function(){this.publish(n,{broadcast:2,emitFacade:true});this.publish(k,{broadcast:2,emitFacade:true});c.Global.on("ucs:profileMenuShow",this._showMenu,this);c.Global.on("ucs:userMenuItems",this._handleUserMenuItems,this,{"location":"bottom","menuType":"minty-um-item"});this.menu.delegate(g,this._handleMenuItemClick,"li.minty-um-item a",this);},_showMenu:function(t){this.fire(n);this._showMenuItems();},_showMenuItems:function(){this.menu.all("li").removeClass("yucs-hide");this.menu.all("span.separator").setStyle("display","block");},_handleUserMenuItems:function(y,x){c.log("user menu items received");var u="bottom",w="minty-user-item";if(!y.menuGroups||!y.menuGroups.length){return;}if(x&&x.location){u=x.location;}if(x&&x.menuType){w=x.menuType;}var v=y.menuGroups,t=this.menu.one(j);if(y.reset&&t){t.all("."+w).each(function(z){z.remove(true);});}if(v.length>0){this._addMenuGroups(v,u,false,w);}},_handleMenuItemClick:function(y){c.log("user menu item click");var x,v,t,u;x=y.target;x=x.ancestor("a",true);v=x.getAttribute("data-mad");t=x.getAttribute("data-customevt");u=x.ancestor("li").hasClass("disabled");if(u){y.halt();return;}if(t){y.preventDefault();}if(!u){var w={actionData:v};this.fire(k,w);}},_hideMenu:function(){},_addMenuGroups:function(w,C,A,B){var y=this.menu.one(j),u,t="";u=(y.get("children")._nodes.length)?true:false;for(var v=0,x=w.length;v<x;v++){var z=w[v].length;if(C==="bottom"){w[v][0].separatorTop=true;}else{if(v<(x-1)||u){w[v][z-1].separatorBottom=true;}}t+=this._addMenuGroup(w[v],A,B);}if(C==="bottom"){y.append(t);}else{y.prepend(t);}y.setStyle("width",(y.get("offsetWidth")+10)+"px");},_addMenuGroup:function(u,x,w){var y="";for(var v=0,t=u.length;v<t;v++){if(u[v].actionData==="themes"){continue;}if(x){u[v].isDebugItem=true;u[v].menuClass=w+" debug-item";}else{u[v].isDebugItem=false;u[v].menuClass=w+" minty-item";}y+=this._addMenuItem(u[v],w);}return y;},_addMenuItem:function(v,u){var t="";if(v.isActive){v.checkedAria='aria-checked="true"';}else{v.checkedAria="";}if(v.isDisabled){v.disabledAria='aria-disabled="true"';}else{v.disabledAria="";}if(v.actionData&&v.actionData.match(/^om:/)){return t;}switch(v.actionType){case"link":t=c.substitute(m,v,this._processTemplateValue);break;case"customEvent":t=c.substitute(r,v,this._processTemplateValue);break;default:break;}if(t){if(v.isDebugItem){t=t.replace(/separator/,"separator debug-item "+u);}else{t=t.replace(/separator/,"separator minty-item "+u);}}return t;},_processTemplateValue:function(u,v,w){c.log("key = "+u+" value = "+v+" meta_data = "+w);var x="";var t=(document.location.protocol==="https:")?e:q;switch(u){case"icon":if(v!==undefined){if(v==="available"){x='<img src="'+t+'" class="yucs-opi available"/>';}else{if(v==="offline"){x='<img src="'+t+'" class="yucs-opi offline"/>';}else{if(v==="invisible"){x='<img src="'+t+'" class="yucs-opi invisible"/>';}else{if(v==="busy"){x='<img src="'+t+'" class="yucs-opi busy"/>';}else{if(v==="idle"){x='<img src="'+t+'" class="yucs-opi idle"/>';}else{x='<img src="'+v+'" />';}}}}}}break;case"separatorTop":if(v){x=l;}break;case"separatorBottom":if(v){x=l;}break;case"actionData":if(v){x='data-mad="'+v+'"';}break;case"isDisabled":if(v){x="disabled";}break;case"isActive":if(v){x="sp active";}break;case"checkedAria":x=v;break;default:x=v;break;}return x;}};c.augment(c.ucs.UserMenu,c.EventTarget);},"1.0",{requires:["oop","node","event-custom","substitute"]});(function(){var b=document.getElementById("yucs"),a=typeof window.Y!=="undefined"&&(b&&b.getAttribute("data-property")==="srp")?window.Y:YUI();a.use("node","ucs-usermenu",function(e){var c=a.one("#yucs-profile_inner"),d;if(c){d=new e.ucs.UserMenu(c);}});})();