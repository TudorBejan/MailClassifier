YUI.add("_shared_module_compose_message_header",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_compose_message_header={base:'<div class="compose-header"> <div class="field label-left account-select hidden"> <label for="from-field">{{str_msg_hdr_label_from}}</label> <div class="from-selector"> <select id="from-field" class="cm-from-field from-select"> {{compose_from_address}} </select> </div> </div> <div class="field label-left contact-search"> <label for="to-field">{{str_comp_label_to}}</label> <div id="to" class="cm-to ac-input" data-action="autocomplete" tabindex="-1"> <ul role="presentation"> {{conversation_user}} <li role="presentation" class="recipient-input"> <input role="textbox" aria-autocomplete="list" aria-expanded="false" id="to-field" name="to-field" class="cm-to-field" value=""> </li> </ul> </div> <span class="btn left right user-search btn-kiosk-choosecontact" data-action="modal"><a role="button" id="to_add_contacts" class="icon add" tabindex="-1" title="{{str_comp_btn_to_add_attr}}"><i>{{str_comp_btn_to_add}}</i></a></span> {{make_reply_all}} </div> <div class="field label-left contact-search"> <label for="cc-field">{{str_comp_label_cc}}</label> <div id="cc" class="cm-cc ac-input" data-action="autocomplete" tabindex="-1"> <ul role="presentation"> <li role="presentation" class="recipient-input"> <input role="textbox" aria-autocomplete="list" aria-expanded="false" id="cc-field" name="cc-field" class="cm-cc-field"> </li> </ul> </div> <span class="btn left right user-search btn-kiosk-choosecontact" data-action="modal"><a role="button" id="cc_add_contacts" class="icon add" tabindex="-1" title="{{str_comp_btn_to_add_attr}}"><i>{{str_comp_btn_cc_add}}</i></a></span> <span id="btn-show-bcc" class="cm-btn-show-bcc bcc-btn btn left right small"><a role="button" href="bcc-group&amp;btn-show-bcc=0" id="bcc_show_btn" tabindex="-1" data-action="toggle-visibility">{{str_comp_btn_show_bcc}}</a></span> </div> <div id="bcc-group" class="cm-bcc-group field label-left contact-search hidden"> <label for="bcc-field">{{str_comp_label_bcc}}</label> <div id="bcc" class="cm-bcc ac-input" data-action="autocomplete" tabindex="-1"> <ul role="presentation"> <li role="presentation" class="recipient-input"> <input role="textbox" aria-autocomplete="list" aria-expanded="false" id="bcc-field" name="bcc-field" class="cm-bcc-field"> </li> </ul> </div> <span class="btn left right user-search btn-kiosk-choosecontact" data-action="modal"><a role="button" id="bcc_add_contacts" class="icon add" tabindex="-1" title="{{str_comp_btn_to_add_attr}}"><i>{{str_comp_btn_bcc_add}}</i></a></span> <span class="bcc-btn btn left right small"><a role="button" href="bcc-group&amp;btn-show-bcc=1" id="bcc_hide_btn" tabindex="-1" data-action="toggle-visibility">{{str_comp_btn_hide_bcc}}</a></span> </div> <div class="field label-left subject"> <label for="subject-field">{{str_comp_label_subject}}</label> <div id="subject" class="cm-subject"><span> <input id="subject-field" name="subject-field{{timestamp_id}}" class="cm-subject-field" data-action="compose-subject" value="{{conversation_user1}}" /> </span></div> </div> </div> ',compose_from_address:'<option value="{{fromAddress}}"{{fromSelected}}>{{fromAddress}}</option> ',conversation_user:'<li role="presentation" class="recipient"> <span class="small btn left right lozenge {{lozengeerror}}"><a>{{conversation_user}}</a></span> </li> ',make_reply_all:'<span class="btn left right small makereplyall-btn replyall-toggle-btn hidden" data-action="make-replyall"><a id="btn-switch-reply-mode" tabindex="-1" role="button">{{title}}</a></span>',conversation_user1:"Our conversation on {{timestamp}}"};},"1.0.0");YUI.add("_shared_module_rte_well_tabs_compose",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_tabs_compose={base:'<div class="rte"> <ul role="tablist" aria-describedby="tablist-instr"> <li role="presentation" class="active"> <a role="tab" data-action="rte-well" target="attachments" tabindex="0" href="#" title="{{str_comp_attachments_attr}}" draggable="false"> <b class="attachments"><i></i>{{str_comp_attachments}}</b> </a> </li> <li role="presentation"> <a role="tab" data-action="rte-well" target="emoticons" tabindex="-1" href="#"title="{{str_comp_emoticons_attr}}" draggable="false"> <b class="emoticons"><i></i>{{str_comp_emoticons}}</b> </a> </li> <li role="presentation" class="end-grp"> <a role="tab" data-action="rte-well" target="format" tabindex="-1" href="#" title="{{str_comp_format_attr}}" draggable="false"> <b class="rich-text"><i></i>{{str_comp_format}}</b> </a> </li> {{page_compose_email}} </ul></div>',page_compose_email:'<li role="presentation" class="last"> <a role="presentation" data-action="rte-well" target="plain-text" tabindex="-1" href="#" draggable="false"> <b role="presentation" class="plaintext">{{str_rte_plaintext}}</b> </a> </li> '};},"1.0.0");YUI.add("_shared_module_rte_well_tabs_conversation",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_tabs_conversation={base:'<div class="rte"> <ul> <li> <a data-action="rte-well" target="attachments" href="#" draggable="false"> <b class="attachments">{{str_comp_attachments}}</b> </a> <form method="post" enctype="multipart/form-data" class="attachment-button-form" target="" action=""> <input type="file" title="{{str_conv_file_transfer_attr}}" id="attachment-button-input" name="uploadfile" class="attachment-button-file" /> </form> </li> <li> <a data-action="rte-well" target="emoticons" href="#" title="{{str_conv_emoticon_attr}}" draggable="false"> <b class="emoticons">{{str_comp_emoticons}}</b> </a> </li> <li class="end-grp"> <a data-action="rte-well" target="format" href="#" title="{{str_conv_format_attr}}" draggable="false"> <b class="rich-text">{{str_comp_format}}</b> </a> </li> </ul></div>'};},"1.0.0");YUI.add("_shared_module_rte_well_tabs_sms",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_tabs_sms={base:'<div class="rte"> <div class="counter">{{str_max_sms_chars}}</div> <ul> <li> <a data-action="rte-well" target="emoticons" href="#"> <b class="emoticons">{{str_comp_emoticons}}</b> </a> </li> </ul></div>'};},"1.0.0");YUI.add("_shared_module_rte_well_content_emoticons",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_content_emoticons={base:'<div role="tabpanel" class="rte-pane emoticons-pane gwell shaded hidden" > <span role="presentation" class="icon close" data-action="rte-well" title="{{str_comp_close_emoticons_attr}}">{{str_comp_close_emoticons}}</span> <ul role="toolbar"> <li role="button" class="emoticon_1" title="{{str_emoticon_happy}}" tabindex="0"></li> <li role="button" class="emoticon_2" title="{{str_emoticon_sad}}"></li> <li role="button" class="emoticon_3" title="{{str_emoticon_winking}}"></li> <li role="button" class="emoticon_4" title="{{str_emoticon_confused}}"></li> <li role="button" class="emoticon_5" title="{{str_emoticon_lovestruck}}"></li> <li role="button" class="emoticon_6" title="{{str_emoticon_blushing}}"></li> <li role="button" class="emoticon_7" title="{{str_emoticon_tongue}}"></li> <li role="button" class="emoticon_8" title="{{str_emoticon_kiss}}"></li> <li role="button" class="emoticon_9" title="{{str_emoticon_broken_heart}}"></li> <li role="button" class="emoticon_10" title="{{str_emoticon_sigh}}"></li> <li role="button" class="emoticon_11" title="{{str_emoticon_wits_end}}"></li> <li role="button" class="emoticon_12" title="{{str_emoticon_surprise}}"></li> <li role="button" class="emoticon_13" title="{{str_emoticon_angry}}"></li> <li role="button" class="emoticon_14" title="{{str_emoticon_cool}}"></li> <li role="button" class="emoticon_15" title="{{str_emoticon_devil}}"></li> <li role="button" class="emoticon_16" title="{{str_emoticon_crying}}"></li> <li role="button" class="emoticon_17" title="{{str_emoticon_straight_face}}"></li> <li role="button" class="emoticon_18" title="{{str_emoticon_raised_eyebrows}}"></li> <li role="button" class="emoticon_19" title="{{str_emoticon_angel}}"></li> <li role="button" class="emoticon_20" title="{{str_emoticon_nerd}}"></li> <li role="button" class="emoticon_21" title="{{str_emoticon_phbbbbt}}"></li> <li role="button" class="emoticon_22" title="{{str_emoticon_wave}}"></li> <li role="button" class="emoticon_23" title="{{str_emoticon_rolling_eyes}}"></li> <li role="button" class="emoticon_24" title="{{str_emoticon_sick}}"></li> <li role="button" class="emoticon_25" title="{{str_emoticon_shh}}"></li> <li role="button" class="emoticon_26" title="{{str_emoticon_party}}"></li> <li role="button" class="emoticon_27" title="{{str_emoticon_yawn}}"></li> <li role="button" class="emoticon_28" title="{{str_emoticon_thinking}}"></li> <li role="button" class="emoticon_29" title="{{str_emoticon_laughing}}"></li> <li role="button" class="emoticon_30" title="{{str_emoticon_rofl}}"></li> <li role="button" class="emoticon_31" title="{{str_emoticon_big_grin}}"></li> <li role="button" class="emoticon_32" title="{{str_emoticon_cowboy}}"></li> <li role="button" class="emoticon_33" title="{{str_emoticon_wasnt_me}}"></li> <li role="button" class="emoticon_34" title="{{str_emoticon_batting_eyelashes}}"></li> <li role="button" class="emoticon_35" title="{{str_emoticon_big_hug}}"></li> <li role="button" class="emoticon_36" title="{{str_emoticon_smug}}"></li> <li role="button" class="emoticon_37" title="{{str_emoticon_worried}}"></li> <li role="button" class="emoticon_38" title="{{str_emoticon_whew}}"></li> <li role="button" class="emoticon_39" title="{{str_emoticon_talk_to_the_hand}}"></li> <li role="button" class="emoticon_40" title="{{str_emoticon_sleepy}}"></li> <li role="button" class="emoticon_41" title="{{str_emoticon_loser}}"></li> <li role="button" class="emoticon_42" title="{{str_emoticon_not_talking}}"></li> <li role="button" class="emoticon_43" title="{{str_emoticon_on_the_phone}}"></li> <li role="button" class="emoticon_44" title="{{str_emoticon_daydreaming}}"></li> <li role="button" class="emoticon_45" title="{{str_emoticon_clown}}"></li> <li role="button" class="emoticon_46" title="{{str_emoticon_silly}}"></li> <li role="button" class="emoticon_47" title="{{str_emoticon_drooling}}"></li> <li role="button" class="emoticon_48" title="{{str_emoticon_doh}}"></li> <li role="button" class="emoticon_49" title="{{str_emoticon_applause}}"></li> <li role="button" class="emoticon_50" title="{{str_emoticon_nail_biting}}"></li> <li role="button" class="emoticon_51" title="{{str_emoticon_hypnotized}}"></li> <li role="button" class="emoticon_52" title="{{str_emoticon_liar}}"></li> <li role="button" class="emoticon_53" title="{{str_emoticon_waiting}}"></li> <li role="button" class="emoticon_54" title="{{str_emoticon_call_me}}"></li> <li role="button" class="emoticon_57" title="{{str_emoticon_cheer}}"></li> <li role="button" class="emoticon_58" title="{{str_emoticon_dizzy}}"></li> <li role="button" class="emoticon_59" title="{{str_emoticon_cook}}"></li> <li role="button" class="emoticon_60" title="{{str_emoticon_eat}}"></li> <li role="button" class="emoticon_61" title="{{str_emoticon_give_up}}"></li> <li role="button" class="emoticon_62" title="{{str_emoticon_cold}}"></li> <li role="button" class="emoticon_63" title="{{str_emoticon_hot}}"></li> <li role="button" class="emoticon_64" title="{{str_emoticon_music}}"></li> <li role="button" class="emoticon_65" title="{{str_emoticon_puke}}"></li> <li role="button" class="emoticon_66" title="{{str_emoticon_sing}}"></li> <li role="button" class="emoticon_67" title="{{str_emoticon_catch}}"></li> <li role="button" class="emoticon_68" title="{{str_emoticon_exercise}}"></li> <li role="button" class="emoticon_69" title="{{str_emoticon_high_five}}"></li> <li role="button" class="emoticon_70" title="{{str_emoticon_play_game}}"></li> <li role="button" class="emoticon_71" title="{{str_emoticon_search_me}}"></li> <li role="button" class="emoticon_72" title="{{str_emoticon_spooky}}"></li> <li role="button" class="emoticon_73" title="{{str_emoticon_studying}}"></li> <li role="button" class="emoticon_74" title="{{str_emoticon_tv}}"></li> <li role="button" class="emoticon_75" title="{{str_emoticon_gift}}"></li> <li role="button" class="emoticon_76" title="{{str_emoticon_unlucky}}"></li> <li role="button" class="emoticon_77" title="{{str_emoticon_down_on_luck}}"></li> <li role="button" class="emoticon_78" title="{{str_emoticon_fight}}"></li> </ul> </div> '};
},"1.0.0");YUI.add("_shared_module_rte_well_content_format",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_content_format={base:'<div role="tabpanel" class="rte-pane format-pane gwell shaded {{options_signature_rich_else}}"> <span role="presentation" class="icon close" data-action="rte-well" title={{str_comp_close_format_attr}}> {{str_comp_close_format}}</span> <div role="toolbar" class="format-inner"> <span class="icon close" data-action="rte-well" title="{{str_comp_close_format_attr}}"> {{str_comp_close_format}}</span> <span class="showFontStyle" data-action="setfontstyle" title="{{str_comp_font_menu_attr}}"> <select aria-label="{{str_comp_font_menu_attr}}" tabindex="0"> {{intl_fonts}} <option value="{{str_rte_font_arial_attr}}" selected>{{str_rte_font_arial}}</option> <option value="{{str_rte_font_tahoma_attr}}">{{str_rte_font_tahoma}}</option> <option value="{{str_rte_font_verdana_attr}}">{{str_rte_font_verdana}}</option> <option value="{{str_rte_font_times_attr}}">{{str_rte_font_times}}</option> <option value="{{str_rte_font_bookman_attr}}">{{str_rte_font_bookman}}</option> <option value="{{str_rte_font_courier_attr}}">{{str_rte_font_courier}}</option> <option value="{{str_rte_font_garamond_attr}}">{{str_rte_font_garamond}}</option> <option value="{{str_rte_font_lucida_attr}}">{{str_rte_font_lucida}}</option> </select> </span> <span class="showFontSize" data-action="setfontsize" title="{{str_comp_font_size_attr}}"> <select aria-label="{{str_comp_font_size_attr}}" tabindex="0"> <option value="1">{{str_rte_font_size_8}}</option> <option value="2" selected>{{str_rte_font_size_10}}</option> <option value="3">{{str_rte_font_size_12}}</option> <option value="4">{{str_rte_font_size_14}}</option> <option value="5">{{str_rte_font_size_18}}</option> <option value="6">{{str_rte_font_size_24}}</option> <option value="7">{{str_rte_font_size_36}}</option> </select> </span> <span class="btn left" data-action="bold"><a role="button" tabindex="0" href="#" class="icon bold" title="{{str_rte_bold_attr}}" draggable="false"><i>{{str_rte_bold}}</i></a></span><span class="btn" data-action="italic"><a role="button" tabindex="-1" href="#" class="icon italic" title="{{str_rte_italic_attr}}" draggable="false"><i>{{str_rte_italic}}</i></a></span><span class="btn right" data-action="underline"><a role="button" tabindex="-1" href="#" class="icon underline" title="{{str_rte_underline_attr}}" draggable="false"><i>{{str_rte_underline}}</i></a></span> {{page_conversation_well}} {{page_compose_email}} {{options_only}} {{page_inoutdent_menu}} </div> </div> ',options_signature_rich_else:"hidden",intl_fonts:'<option value="{{font_value}}" {{font_selected}}>{{font_name}}</option> ',page_conversation_well:'<span id="btn-forecolor" class="btn left right menu" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" class="icon color-select" title="{{str_rte_color_attr}}" draggable="false"><i style="background-color:{{text_color}};">{{str_rte_color}}</i><b></b></a></span> ',is_rtl:'<span id="right_to_left" value="rtl" class="btn left" data-action="bidi"><a role="button" tabindex="-1" href="#" class="icon change_rtl" title="{{str_rte_right_to_left}}" draggable="false"><i>{{str_rte_right_to_left}}</i><b></b></a></span><span id="left-to-right" value="ltr" class="btn right" data-action="bidi"><a role="button" tabindex="-1" href="#" class="icon change_ltr" title="{{str_rte_left_to_right}}" draggable="false"><i>{{str_rte_left_to_right}}</i><b></b></a></span> ',is_rtl_else:'<span id="left-to-right" value="ltr" class="btn left" data-action="bidi"><a role="button" tabindex="-1" href="#" class="icon change_ltr" title="{{str_rte_left_to_right}}" draggable="false"><i>{{str_rte_left_to_right}}</i><b></b></a></span><span id="right_to_left" value="rtl" class="btn right" data-action="bidi"><a role="button" tabindex="-1" href="#" class="icon change_rtl" title="{{str_rte_right_to_left}}" draggable="false"><i>{{str_rte_right_to_left}}</i><b></b></a></span> ',bidi:"{{is_rtl}} {{is_rtl_else}} ",spellCheckEnabled:'<span id="spellCheck" class="btn left{{HiddenClassName}}" data-action="spellcheck"><a role="button" tabindex="-1" href="#" class="icon spell" title="{{str_rte_check_spelling_attr}}" draggable="false"><i>{{str_rte_check_spelling}}</i></a></span><span class="btn right menu{{HiddenClassName}}" id="btn-spell-langs" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" title="{{str_toolbar_spelling_menu_toggle_attr}}" draggable="false"><b>{{str_toolbar_spelling_menu_toggle}}</b></a></span> ',page_compose_email:'<span id="btn-forecolor" class="btn left lg menu" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" class="icon color-select" title="{{str_rte_color_attr}}" draggable="false"><i style="background-color:{{text_color}};">{{str_rte_color}}</i><b></b></a></span><span id="btn-backcolor" class="btn right lg menu" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" class="icon highlight" title="{{str_rte_hilite_color_attr}}" draggable="false"><i>{{str_rte_hilite_color}}</i><b></b></a></span> <span id="btn-text-align" class="btn left lg menu" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" class="icon align-l down" title="{{str_rte_text_alignment_attr}}" draggable="false"><i>{{str_rte_text_alignment}}</i><b></b></a></span><span id="btn-indent" class="btn lg menu" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" class="icon indent" title="{{str_rte_indentation_attr}}" draggable="false"><i>{{str_rte_indent}}</i><b></b></a></span><span id="btn-list" class="btn right lg menu" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" class="icon bulletlist" title="{{str_rte_list_attr}}" draggable="false"><i>{{str_rte_list}}</i><b></b></a></span> {{bidi}} <span id="links" class="btn left right" data-action="insertlink"><a role="button" tabindex="-1" href="#" class="icon link" title="{{str_rte_link_attr}}" draggable="false"><i>{{str_rte_link}}</i></a></span> {{spellCheckEnabled}} <span class="om-buttons"></span> ',options_only:'<span id="btn-forecolor" class="btn left lg menu" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" class="icon color-select" title="{{str_rte_color_attr}}" draggable="false"><i style="background-color:{{text_color}};">{{str_rte_color}}</i><b></b></a></span><span id="btn-backcolor" class="btn right lg menu" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" class="icon highlight" title="{{str_rte_hilite_color_attr}}" draggable="false"><i>{{str_rte_hilite_color}}</i><b></b></a></span> <span id="btn-text-align" class="btn left lg menu" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" class="icon align-l down" title="{{str_rte_text_alignment_attr}}" draggable="false"><i>{{str_rte_text_alignment}}</i><b></b></a></span><span id="btn-indent" class="btn lg menu" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" class="icon indent" title="{{str_rte_indentation_attr}}" draggable="false"><i>{{str_rte_indent}}</i><b></b></a></span><span id="btn-list" class="btn right lg menu" data-action="menu"><a role="button" aria-haspopup="true" tabindex="-1" href="#" class="icon bulletlist" title="{{str_rte_list_attr}}" draggable="false"><i>{{str_rte_list}}</i><b></b></a></span> <span id="links" class="btn left right" data-action="insertlink"><a role="button" tabindex="-1" href="#" class="icon link" title="{{str_rte_link_attr}}" draggable="false"><i>{{str_rte_link}}</i></a></span> ',page_inoutdent_menu:'<div id="menu-indent" class="optionMenu"><ul><li data-action="indent"><a tabindex="-1" href="#" draggable="false"><span>{{str_menu_indent}}</span></a></li><li data-action="outdent"><a tabindex="-1" href="#" draggable="false"><span>{{str_menu_outdent}}</span></a></li></ul></div> '};
},"1.0.0");YUI.add("_shared_module_rte_well_content_rich_text_switch",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_content_rich_text_switch={base:'<div role="tabpanel" class="rte-pane rich-text-switch-pane shaded hidden"> <span role="presentation" class="icon close" data-action="rte-well" title="{{str_close_attr}}">{{str_close}}</span> <span class="btn left right attachment-button-removeall" data-action="rich-text"> <a role="button" href="#" tabindex="0">{{str_comp_switch_rich_text}}</a> </span></div>'};},"1.0.0");YUI.add("_shared_module_rte_well_content_attach_item",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_content_attach_item={base:"{{browser_plus_attach}}{{browser_plus_attach_else}}",transfer_error:"transfer-error",waiting:"in-queue ",image:'<div style="background-image:url({{thumbnailurl}});"></div> ',in_progress:'<div class="prog-indicator"> <div class="progress" style="width:{{progress}}%"></div> </div> ',browser_plus_attach:'<li role="presentation" class="attachmentVisible {{transfer_error}} {{waiting}} {{type}}"> <div class="file-container"> {{image}} <b/></b> </div> <span class="fname">{{filename}}</span> {{in_progress}}</li>',waiting1:"in-queue ",in_progress1:"downloading ",transfer_error1:"lozengeerror",transfer_warn:"lozengewarn",retry:'<span role="presentation" class="btn lozenge lozengeretry small hidden"><a role="presentation" tabindex="-1" title="{{str_btn_retry_file_attr}}">&nbsp;<b></b></a></span>',transfer_error2:"lozengeerror-remove",browser_plus_attach_else:'<li role="presentation" class="attachmentVisible {{waiting1}} {{in_progress1}} {{type}}"><div tabindex="-1" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="lozengeProgress"></div> <span role="presentation" class="btn lozenge {{transfer_error1}} left small"><a role="option" title="{{filesize}}" tabindex="-1" class="{{transfer_warn}}">{{filename}}</a></span>{{retry}}<span role="presentation" class="btn lozenge lozengeremove {{transfer_error2}} right small"><a role="presentation" tabindex="-1" title="{{str_btn_remove_file_attr}}">&nbsp;<b></b></a></span></li>'};},"1.0.0");YUI.add("_shared_module_message_norton_logo",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_message_norton_logo={base:'<img src="//s.yimg.com/ok/u/assets/img/norton-horizlogo.png" data-action="av_sponsor" class="avLogo" title="{{str_comp_av_norton_attr}}" alt="{{str_comp_av_norton_attr}}"/>'};},"1.0.0");YUI.add("_shared_module_rte_well_content_file_count",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_content_file_count={base:'<div class="file-count"> <span class="attachments-count hidden">{{str_rte_attachments_num_files}}</span> <span class="attachments-size hidden">{{str_rte_attachments_sizes}}</span> {{display_av_logo}}</div>',display_av_logo:"{{_shared_module_message_norton_logo}}"};},"1.0.0",{requires:["_shared_module_message_norton_logo"]});YUI.add("_shared_module_rte_well_content_attachments",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_content_attachments={base:'<div role="tabpanel" class="attachments-pane gwell rte-pane shaded {{page_compose_email_else}}" > <div role="toolbar"> <span role="presentation" class="icon close" data-action="rte-well" title="{{str_comp_close_attachments_attr}}"> {{str_comp_close_attachments}}</span> <form method="post" enctype="multipart/form-data" class="attachment-button-form" target="" action=""> <span class="btn left right attachment-button-attach"> <a role="button" href="#" tabindex="-1" >{{str_comp_attach}}</a> <input type="file" id="attachment-button-input" name="uploadfile" class="attachment-button-file" tabindex="0" title="{{str_comp_attach_attr}}"/> </span><span id="upload_file_selection" class="hidden" title="{{str_comp_attach_attr}}"> <span id="uploader-v2"></span></span><span id="attach-btn-menu" class="btn right menu hidden attach-btn-menu" data-action="menu"><a href="#" title="{{str_comp_attach_menu_title}}"><b>{{str_comp_attach_menu_btn}}</b></a></span> </form> <span class="btn left right menu attachment-button-disabled hidden"> <a role="button" href="#" tabindex="-1" >{{str_comp_attach}}</a> </span> <span class="btn left right attachment-button-removeall hidden"> <a role="button" href="#" title="{{str_comp_attach_removeall}}">{{str_comp_attach_removeall}}</a> </span> <span role="alert" class="error transfer-error hidden"> <span class="attachmenterror"> {{attachments_error}} </span> <span class="btn left right"><a role="button" href="#">{{str_rte_attachments_try_again}}</a></span> </span> <span role="alert" class="switch-to-basic-link hidden"> {{str_rte_attachments_basic_message}} <a role="button" href="#">{{str_rte_attachments_basic_link_text}}</a>. </span> <span class="om-buttons"></span> {{browser_plus_attach}} {{_shared_module_rte_well_content_file_count}} </div> </div> <div class="attachments-well {{page_compose_email_else}} {{browser_plus_attach_else}}"> <div class="attachments-welcome"> {{browser_plus_attach1}} </div> <ul role="listbox" aria-live="polite" class="file-attach hidden"> {{file_attach_files}} </ul> </div> ',page_compose_email_else:"hidden",multiple_files_failed:"{{str_rte_attachments_error_mult}}",multiple_files_failed_else:"{{str_rte_attachments_error_single}}",attachments_error:"{{multiple_files_failed}} {{multiple_files_failed_else}} ",browser_plus_attach:'<div class="prog-indicator hidden"> <div class="progress" style="width:{{file_attach_progress_percent}}%"></div> <b>{{str_rte_attachments_progress}}</b> </div> ',attached_files_else:"hidden",browser_plus_attach_else:"simple-upload {{attached_files_else}} ",browser_plus_attach1:"<h2>{{str_rte_attachments_attach_files}}</h2> <h3>{{str_rte_attachments_drag_files}}</h3> ",file_attach_files:"{{_shared_module_rte_well_content_attach_item}} "};},"1.0.0",{requires:["_shared_module_rte_well_content_attach_item","_shared_module_rte_well_content_file_count"]});YUI.add("_shared_module_rte_well",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well={base:'<div class="rte-well-container">{{page_well_email}}{{page_well_conversation}}{{page_well_sms}}{{page_well_emoticons}}{{_shared_module_rte_well_content_format}}{{_shared_module_rte_well_content_rich_text_switch}}{{_shared_module_rte_well_content_attachments}}</div>',page_well_email:"{{_shared_module_rte_well_tabs_compose}}",page_well_conversation:"{{_shared_module_rte_well_tabs_conversation}}",page_well_sms:"{{_shared_module_rte_well_tabs_sms}}",page_well_emoticons:"{{_shared_module_rte_well_content_emoticons}}"};},"1.0.0",{requires:["_shared_module_rte_well_tabs_compose","_shared_module_rte_well_tabs_conversation","_shared_module_rte_well_tabs_sms","_shared_module_rte_well_content_emoticons","_shared_module_rte_well_content_format","_shared_module_rte_well_content_rich_text_switch","_shared_module_rte_well_content_attachments"]});YUI.add("_shared_module_message_loading_error",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_message_loading_error={base:'<div id="loadingpane" class="cm-loadingpane"> {{loading_error}} {{diff_folder_error}} {{loading_error_else}}</div>',is_perm:"{{str_comp_loading_error_perm}}",multi_retry:"{{str_comp_multi_retry}} ",multi_retry_else:"{{str_comp_loading_error}} ",is_perm_else:"{{multi_retry}} {{multi_retry_else}} ",can_retry:'<span class="btn left right small"><a role="button" href="#" title="{{str_comp_loading_retry_attr}}" data-action="retry-msg-load">{{str_retry}}</a> </span>',loading_error:"<h2>{{is_perm}} {{is_perm_else}} {{can_retry}} </h2> ",diff_folder_error:"<h2>{{str_error_msg_diff_folder_switch}}</h2> ",loading_slow_msg:"{{str_comp_loading_msg}}",loading_slow_conv:"{{str_comp_loading_conv}}",loading_slow_else:"<h2>{{loading_slow_msg}}{{loading_slow_conv}}</h2> ",loading_slow:'<h2>{{str_comp_slow_loading}} <span class="btn left right small"><a role="button" href="#" title="{{str_comp_loading_retry_attr}}" data-action="retry-msg-load">{{str_retry}}</a> </span> </h2> ',loading_error_else:"{{loading_slow_else}} {{loading_slow}} "};},"1.0.0");YUI.add("_shared_module_compose_message_body",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_compose_message_body={base:'<div class="inner" style="height:100%"> <label for="msg" class="offscreen">{{str_comp_messagebody}}</label> <div id="plaintext" class="cm-plaintext"> {{conversation_body_else}} </div> {{_shared_module_message_loading_error}} <div id="rtetext" class="cm-rtetext" style="visibility:hidden; height:100%"> {{conversation_body}} </div> </div>',conversation_body_else:'<textarea id="msg"></textarea>',conversation_body:'<div class="msg"> {{conversation_body}} </div> '};},"1.0.0",{requires:["_shared_module_message_loading_error"]});YUI.add("_shared_module_compose",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_compose={base:'<div class="compose content"> <table role="presentation" border="0" style="margin:0;width:100%;height:100%;border-spacing:0; border-collapse:collapse;"> <tbody role="presentation"> <tr role="presentation"> <td role="presentation" height="10"> {{global_spearmint_view_else}} {{_shared_module_compose_message_header}} </td> </tr> <tr role="presentation"> <td role="presentation" height="10">{{_shared_module_rte_well}}</td> </tr> <tr role="presentation" style="height:100%"> <td role="presentation"> <div style="height:100%" class="compose-message {{page_well_is_open}}">{{_shared_module_compose_message_body}}</div> </td> </tr> </tbody> </table> </div> ',global_spearmint_view_else:" ",page_well_is_open:"rich-text "};},"1.0.0",{requires:["_shared_module_compose_message_header","_shared_module_rte_well","_shared_module_compose_message_body"]});YUI.add("_shared_module_toolbar_compose",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_toolbar_compose={base:'<div id="pagetoolbar" class="{{msgliststate}}" > <span class="btn left" data-action="send"><a href="{{global_url_base}}/minty/page/send-confirm" title="{{str_comp_send_attr}}" draggable="false">{{str_comp_send}}</a></span><span class="btn"><a href="#" data-action="cancelcompose" class="btn-cancel-compose" title="{{str_comp_cancel_attr}}" draggable="false">{{str_comp_cancel}}</a></span><span class="savedraft btn right {{isDirty}}" data-action="savedraft"><a href="#" title="{{str_comp_savedraft_attr}}" draggable="false">{{str_comp_savedraft}}</a></span> {{global_spearmint_view_else}} <span class="lastsave">{{lastsaved}}</span></div>',isDirty:"disabled",global_spearmint_view_else:" ",lastsaved:"{{str_comp_autosave}}"};},"1.0.0");YUI.add("_shared_module_offscreen_bin_compose_menu_color_picker",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_compose_menu_color_picker={base:'<div class="optionMenu color-picker" id="menu-color-picker"> <span class="white"><a href="#" data-action="color-select">White</a></span> <span class="gray-01"><a href="#" data-action="color-select">Gray 01</a></span> <span class="gray-02"><a href="#" data-action="color-select">Gray 02</a></span> <span class="gray-03"><a href="#" data-action="color-select">Gray 03</a></span> <span class="gray-04"><a href="#" data-action="color-select">Gray 04</a></span> <span class="gray-05"><a href="#" data-action="color-select">Gray 05</a></span> <span class="black"><a href="#" data-action="color-select">Black</a></span> <span class="burgundy"><a href="#" data-action="color-select">Burgundy</a></span> <span class="brick-red"><a href="#" data-action="color-select">Brick Red</a></span> <span class="red"><a href="#" data-action="color-select">Red</a></span> <span class="orange"><a href="#" data-action="color-select">Orange</a></span> <span class="peach"><a href="#" data-action="color-select">Peach</a></span> <span class="yellow"><a href="#" data-action="color-select">Yellow</a></span> <span class="tan"><a href="#" data-action="color-select">Tan</a></span> <span class="ochre"><a href="#" data-action="color-select">Ochre</a></span> <span class="olive-green"><a href="#" data-action="color-select">Ospanve Green</a></span> <span class="dark-green"><a href="#" data-action="color-select">Dark Green</a></span> <span class="grass-green"><a href="#" data-action="color-select">Grass Green</a></span> <span class="green"><a href="#" data-action="color-select">Green</a></span> <span class="cyan"><a href="#" data-action="color-select">Cyan</a></span> <span class="teal"><a href="#" data-action="color-select">Teal</a></span> <span class="dark-blue"><a href="#" data-action="color-select">Dark Blue</a></span> <span class="blue"><a href="#" data-action="color-select">Blue</a></span> <span class="lavander"><a href="#" data-action="color-select">Lavander</a></span> <span class="magenta"><a href="#" data-action="color-select">Magenta</a></span> <span class="violet"><a href="#" data-action="color-select">Violet</a></span> <span class="pink"><a href="#" data-action="color-select">Pink</a></span> <span class="light-pink"><a href="#" data-action="color-select">light-pink</a></span></div>'};},"1.0.0");YUI.add("_shared_module_offscreen_bin_compose_menu_spellcheck",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_compose_menu_spellcheck={base:'<div id="menu-spellcheck" class="optionMenu"> <ul> {{word_suggestions}} </ul> <ul> <li><a href="#" data-action="spellcheck-ignore" title="{{str_comp_ignore_attr}}"><span>{{str_comp_ignore}}</span></a></li> <li><a href="#" data-action="spellcheck-ignore-all" title="{{str_comp_ignore_all_attr}}"><span>{{str_comp_ignore_all}}</span></a></li> </ul></div>',word_suggestions:'<li><a href="#" data-action="spellcheck-replace"><span>{{word_suggestion}}</span></a></li> '};},"1.0.0");YUI.add("_shared_module_offscreen_bin_compose_modal_cancel_compose",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_compose_modal_cancel_compose={base:'<div id="modal-cancel-compose" class="modal lg"> <h2 class="modal-hd"> {{str_comp_close}} {{_shared_module_offscreen_bin_modal_close_icon}} </h2> <div class="modal-bd"> <span>{{str_comp_close_confirm}}</span> </div> <div class="modal-ft"> {{url}} </div></div>',url:'<span class="btn left right default"><a href="{{url_minty_drafts}}">{{str_comp_savetodrafts}}</a></span><span class="btn left right"><a href="{{url_minty_inbox}}">{{str_comp_abandon}}</a></span><span class="btn left right"><a href="modal-cancel-compose.mu#">{{str_comp_keepwriting}}</a></span> '};},"1.0.0",{requires:["_shared_module_offscreen_bin_modal_close_icon"]});YUI.add("_shared_module_offscreen_bin_compose_menu_spell_langs",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_compose_menu_spell_langs={base:'<div id="menu-spell-langs" class="optionMenu"> <ul> <li data-action="asl" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_auto_select}}</span></a></li> <li data-action="en_US" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_english_us}}</span></a></li> <li data-action="en_GB" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_english_uk}}</span></a></li> <li data-action="en_CA" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_english_ca}}</span></a></li> <li data-action="ar" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_arabic}}</span></a></li> <li data-action="bn" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_bengali}}</span></a></li> <li data-action="bg" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_bulgarian}}</span></a></li> <li data-action="hr" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_croatian}}</span></a></li> <li data-action="cs" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_czech}}</span></a></li> <li data-action="da" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_danish}}</span></a></li> <li data-action="nl" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_dutch}}</span></a></li> <li data-action="et" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_estonian}}</span></a></li> <li data-action="tl" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_filipino}}</span></a></li> <li data-action="fi" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_finnish}}</span></a></li> <li data-action="fr_CA" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_french_canada}}</span></a></li> <li data-action="fr_FR" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_french_france}}</span></a></li> <li data-action="fr_CH" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_french_switzerland}}</span></a></li> <li data-action="de_AT" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_german_austria}}</span></a></li> <li data-action="de_CH" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_german_switzerland}}</span></a></li> <li data-action="de_DE" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_german_germany}}</span></a></li> <li data-action="el" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_greek}}</span></a></li> <li data-action="gu" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_gujarati}}</span></a></li> <li data-action="he" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_hebrew}}</span></a></li> <li data-action="hi" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_hindi}}</span></a></li> <li data-action="hu" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_hungarian}}</span></a></li> <li data-action="id" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_indonesian}}</span></a></li> <li data-action="it" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_italian}}</span></a></li> <li data-action="kn" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_kannada}}</span></a></li> <li data-action="lv" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_latvian}}</span></a></li> <li data-action="lt" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_lithuanian}}</span></a></li> <li data-action="ms" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_malay}}</span></a></li> <li data-action="ml" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_malayalam}}</span></a></li> <li data-action="mr" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_marathi}}</span></a></li> <li data-action="nb" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_norwegian_bokmal}}</span></a></li> <li data-action="nn" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_norwegian_nynorsk}}</span></a></li> <li data-action="pl" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_polish}}</span></a></li> <li data-action="pt_BR" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_portuguese_brazil}}</span></a></li> <li data-action="pt_PT" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_portuguese_portugal}}</span></a></li> <li data-action="ro" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_romanian}}</span></a></li> <li data-action="ru" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_russian}}</span></a></li> <li data-action="sr-cyrl" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_serbian}}</span></a></li> <li data-action="sk" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_slovak}}</span></a></li> <li data-action="sl" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_slovenian}}</span></a></li> <li data-action="es" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_spanish}}</span></a></li> <li data-action="sv" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_swedish}}</span></a></li> <li data-action="ta" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_tamil}}</span></a></li> <li data-action="te" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_telugu}}</span></a></li> <li data-action="tr" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_turkish}}</span></a></li> <li data-action="uk" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_ukrainian}}</span></a></li> <li data-action="vi" role="menuitemradio" aria-checked="false"><a href="#"><span>{{str_rte_spell_lang_vietnamese}}</span></a></li> </ul></div>'};
},"1.0.0");YUI.add("_shared_module_compose_reply",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_compose_reply={base:"{{reply_rich}} {{reply_plain}} {{cchdr}} {{fwdhdr}} {{qthdr}} {{qtftr}} {{subject}} {{origHeader}} {{rulerHeader}} {{reply_rich_short}} {{reply_plain_short}} ",reply_rich:'<br> {{quotetext_header}} <div style="font-family: {{fontfamily}}; font-size: {{fontsize}};"> <div style="font-family: {{deffontfamily}}; font-size: {{deffontsize}};"> <div {{headerDir}}> <font size="2" face="Arial"> {{reply_rich_header}} <b><span style="font-weight:bold;">{{str_comp_reply_from}}</span></b> {{from_data}}<br> <b><span style="font-weight: bold;">{{str_comp_reply_to}}</span></b> {{to_data}} {{cchdr}}<br> <b><span style="font-weight: bold;">{{str_comp_reply_date}}</span></b> {{date_data}}<br> <b><span style="font-weight: bold;">{{str_comp_reply_subject}}</span></b> {{subject_data}}<br> </font> </div> <br>{{reply_rich_body}}<br><br> </div> </div> {{quotetext_footer}} ',reply_plain:"<div> <br> <div>{{reply_plain_header}}<br> {{quoteprefix}}{{str_comp_reply_from}} {{from_data}}<br> {{quoteprefix}}{{str_comp_reply_to}} {{to_data}}<br> {{quoteprefix}}{{str_comp_reply_cc}} {{cc_data}}<br> {{quoteprefix}}{{str_comp_reply_date}} {{date_data}}<br> {{quoteprefix}}{{str_comp_reply_subject}} {{subject_data}}<br> {{quoteprefix}}<br>{{reply_plain_body}} </div> </div> ",cchdr:'<br><b><span style="font-weight: bold;">{{str_comp_reply_cc}}</span></b> {{cc_data}} ',fwdhdr:"{{str_comp_reply_fwdHeader}}<br> ",qthdr:'<blockquote style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; margin-top: 5px; padding-left: 5px;"> ',qtftr:"</blockquote> ",subject:"{{subject_prefix}} {{subject_data}} ",origHeader:"{{str_comp_reply_origHeader}}<br> ",rulerHeader:'<hr size="1"> ',reply_rich_short:'<br> <div style="font-family: {{fontfamily}}; font-size: {{fontsize}};"> <div style="font-family: {{deffontfamily}}; font-size: {{deffontsize}};"> <div {{headerDir}}> <font size="2" face="Arial"> {{str_comp_reply_short}}<br> </font> </div> {{quotetext_header}} {{reply_rich_body}}<br><br> {{quotetext_footer}} </div> </div> {{quotetext_footer}} ',reply_plain_short:"<div> <br> <div> {{quoteprefix}}{{str_comp_reply_short}}<br> {{quoteprefix}}{{reply_plain_body}} </div> </div> "};},"1.0.0");YUI.add("mail-model-compose",function(D){var B=function(){B.superclass.constructor.apply(this,arguments);};var C={oComposeData:null,initializer:function(){this.oComposeData={header:{subject:null,from:null,replyto:null,to:null,cc:null,bcc:null},origin:{action:null,fid:null,oMsg:null,ctxReq:null,forwardAsAttachment:false,errInfo:null},content:null,textcontent:null,attachments:[],spellcheck:{corrections:null,correctionHash:[]},isRich:null};},destructor:function(){},updateData:function(G){var E,F={uiUpdate:true};for(E in G){if(E){this.set(E,G[E],F);}}},neas:function(E){return E&&E.length;},_getReplyHeader:function(){var E={from:this.oComposeData.header.from,to:this.oComposeData.header.to,cc:this.oComposeData.header.cc,subject:this.oComposeData.header.subject};return E;},_setReplyHeader:function(E){if(E.from){this.oComposeData.header.from=E.from;}if(E.to){this.oComposeData.header.to=E.to;}if(E.cc){this.oComposeData.header.cc=E.cc;}if(E.bcc){this.oComposeData.header.bcc=E.bcc;}if(E.subject){this.oComposeData.header.subject=E.subject;}},_getHeader:function(){return this.oComposeData.header;},_setHeader:function(E){this.oComposeData.header=E;},_getContent:function(){return this.oComposeData.content;},_setContent:function(E){this.oComposeData.content=E;},_getTextContent:function(){return this.oComposeData.textcontent;},_setTextContent:function(E){this.oComposeData.textcontent=E;},_getReplyContent:function(){return this._getContent();},_setReplyContent:function(E){this._setContent(E);},_getTextMode:function(){if(this.oComposeData.isRich!=null){return this.oComposeData.isRich;}else{var F=D.common.persist.UserData.get("userUIPref.useRichText"),E=((F))&&(F!="plain");this.oComposeData.isRich=E;return E;}},_setTextMode:function(E){this.oComposeData.isRich=E;D.common.persist.UserData.set("userUIPref.useRichText",E?"dynamic":"plain");setTimeout(function(){D.common.persist.UserData.saveOne("userUIPref.useRichText");},10);},_getOrigin:function(){return this.oComposeData.origin;},_setOrigin:function(E){this.oComposeData.origin=E;},_getOriginError:function(){return this.oComposeData.origin.errInfo;},_setOriginError:function(E){this.oComposeData.origin.errInfo=E;},_addAttachment:function(G){var F=this.oComposeData.attachments.length,E=G&&G.state&&G.state.uploaded||0;G.cdoIndex=F;this.oComposeData.attachments.push(G);this.fire("CDO_ATTACHMENT_ADDED",F,E);},_isAttachmentOversized:function(E){return E.state.failCause==="size";},_addAttachments:function(E){if(E){for(var F=0;F<E.length;F++){this._addAttachment(E[F]);}}},_removeAttachment:function(E){var F=this.oComposeData.attachments[E]||{};F.state=F.state||{};F.state.cancelled=true;this.fire("CDO_ATTACHMENT_DELETED",E);},_removeAllAttachments:function(F){var E=this.oComposeData.attachments;for(var G=0;G<E.length;G++){if(!F||F(E[G])){this._removeAttachment(G);}}this.fire("CDO_ALL_ATTACHMENTS_DELETED");},_updateAttachment:function(E,G){var F=this.oComposeData.attachments[E];for(var H in G){F[H]=G[H];}this.fire("CDO_ATTACHMENT_PROCESSED",E);},_getAttachmentsSize:function(){var I=this.oComposeData.attachments;var E=0;for(var F=0;F<I.length;F++){var H=I[F];var G=H.state||{};var J=H.size||{sampled:0,original:0};if(isNaN(J.original)){J.original=0;}if(isNaN(J.resampled)){J.resampled=0;}if(!G.cancelled){if(G.resampled){E+=J.sampled;}else{E+=J.original;}}}return E;},_getAttachmentsCount:function(E){var J=this.oComposeData.attachments;var F=0;for(var G=0;G<J.length;G++){var I=J[G];var H=I.state||{};if(E&&!E(I)){continue;}else{if(!E&&H.cancelled){continue;}}F++;}return F;},_getIsEmpty:function(){var G=this.oComposeData,F=this.oComposeData.header,E=this.neas(F.subject)||this.neas(F.to)||this.neas(F.cc)||this.neas(F.bcc)||(F.replyto!=null)||(G.origin.action!=null)||this.neas(G.attachments);return(!E);},_getAttachments:function(){return this.oComposeData.attachments;},_setSpellCheckCorrections:function(E){this.oComposeData.spellcheck.corrections=E;},_getSpellCheckCorrections:function(){return this.oComposeData.spellcheck.corrections;},_setSpellCheckCorrectionHash:function(E){this.oComposeData.spellcheck.correctionHash=E;},_getSpellCheckCorrectionHash:function(){return this.oComposeData.spellcheck.correctionHash;}};D.extend(B,D.Base,C,{NAME:"composeModel",ATTRS:{header:{setter:C._setHeader,getter:C._getHeader},replyheader:{setter:C._setReplyHeader,getter:C._getReplyHeader},content:{setter:C._setContent,getter:C._getContent},textcontent:{setter:C._setTextContent,getter:C._getTextContent},replycontent:{setter:C._setReplyContent,getter:C._getReplyContent},isRichText:{setter:C._setTextMode,getter:C._getTextMode},origin:{setter:C._setOrigin,getter:C._getOrigin},originerror:{setter:C._setOriginError,getter:C._getOriginError},attachments:{getter:C._getAttachments},attachmentsSize:{getter:C._getAttachmentsSize},attachmentsCount:{getter:C._getAttachmentsCount},spellcheckcorrections:{setter:C._setSpellCheckCorrections,getter:C._getSpellCheckCorrections},spellcheckcorrectionhash:{setter:C._setSpellCheckCorrectionHash,getter:C._getSpellCheckCorrectionHash},antivirus:{value:0},prePopulated:{value:false},saveaction:{}}});var A=new function(){var F=this;function E(H){var G=new B();G.isDirty=false;G.isDraft=H;return G;}D.mix(F,{createModel:E});};D.namespace("mail.model");D.mail.model.ComposeModel=B;D.mail.model.ComposeModelFactory=A;},"1.0.0",{requires:["base","common-persist-user-data"]});YUI.add('calendar_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_cal_fmt_addEvent_date":"{MM}\/{dd}\/{yyyy}","str_cal_fmt_add_event_time":"{h}:{mm}{tt}","str_cal_dateformat_AM":"AM","str_cal_dateformat_PM":"PM","str_cal_ae_never":"Never","str_cal_ae_daily":"Daily","str_cal_ae_weekly":"Weekly","str_cal_ae_monthly":"Monthly","str_cal_ae_yearly":"Yearly","str_cal_err_title_length":"Length of the title should be less than 1024 characters","str_cal_err_title":"Please specify a title for the event","str_event_saved":"Event Saved","str_cal_err_date":"Enter a valid date in the format","str_cal_err_email_id_title":"Please enter a valid email address in format: name@domain.com","str_cal_err_enddate":"Start Date should be before the End Date","str_cal_err_frequency":"The duration of the event must be shorter than how frequently it occurs. Shorten the duration or change the repeat pattern.","str_cal_err_invite":"There is a formatting problem with email address you entered. Be sure to use this format: user@example.com","str_cal_err_name":"Please specify a display name for the calendar","str_cal_err_reminder":"Please select at least one way to receive reminders","str_cal_err_time":"Enter a valid time in the format","str_cal_err_title_calendar":"Please specify a title for the calendar","str_cal_err_title_friends_id":"Please specify your friend's Email address","str_cal_err_title_ical":"Please enter a valid ical address","str_cal_err_title_todo":"Please specify a title for the ToDo","str_cal_err_title_todo_list":"Please specify a title for the ToDo List","str_cal_err_weekly_repeat":"Select at least a day for weekly repeat.","str_cal_mod_addevent":"New Event","str_event_title":"Title","str_event_AllDay":"All-Day","str_event_remindMe":"Remind Me","str_cal__label_repeat":"Repeat:","str_event_location":"Location","str_event_notes":"Notes","str_event_added_to_calendar":"This event has been added to your Calendar."});
}, '1.0.0');YUI.add("mail-controller-compose",function(o){var g=o.mail,z=o.mail.model.ComposeModelFactory,AN=g.Controller,W=AN.extend("Compose"),K=o.mail.Controller.Messages,a=o.common,q=a.Utils,AB=q.escapeHtml,D=q.unescapeHtml,N=q.substitute,AO=o.ui.Templates,AC=AO._shared_module_compose_reply,AK=a.persist.UserData,E=o.mail.persist.MetaData,u=">",J="general.prefixreplyquotetype",AQ=null,AS=new RegExp(/<a[^>]*href="([^\s]*?)"[^>]*>[\s]*<span[^>]*id="?lw_\d*?_\d*?"?[^>]*>http(([\s]|[^\s])*?)<\/span>[\s]*<\/a>/ig),M=new RegExp(/<span[^>]*id="?lw_\d*?_\d*?"?[^>]*>(([\s]|[^\s])*?)<\/span>/ig),AD=new RegExp(/<script[^>]*[^>]*>(([\s]|[^\s])*?)<\/script>/ig),R={subject_prefix:function(Y){return strings[(Y.action=="forward")?"str_comp_reply_spFWD":"str_comp_reply_spRE"];},subject_data:function(Y){if(!AQ){AQ=i();}return Y.oMsg.header.subject.replace(AQ,"");}},AE={quotetext_header:function(AY,Y){return AP()?AC.qthdr:"";},quotetext_footer:function(AY,Y){return AP()?AC.qtftr:"";},fontfamily:function(){return U().fontFamily;},fontsize:function(){return U().fontSize;},deffontfamily:function(){return AV(false);},deffontsize:function(){return AU(false);},from_data:function(Y){return(AB(D(r(X(Y.oMsg,true)))));},to_data:function(Y){return(AB(D(I(Y.oMsg.header.to,true))));},cchdr:function(Y){return Y.oMsg.header.cc.length>0?N(AC.cchdr,Y,AE,null,strings):"";},cc_data:function(Y){return(AB(D(I(Y.oMsg.header.cc,true))));},date_data:function(Y){return(AB(q.dateFormatter(new Date(Y.oMsg.header.receivedDate*1000),strings["str_tog_dateformat_header_l10n"])));},subject_data:function(Y){return AB(D(Y.oMsg.header.subject));},reply_rich_body:function(Y){return s(Y.oMsg.body.display);},reply_rich_header:function(Y){var AY=(Y.action==="forward")?AC.fwdhdr:(NeoConfig.intl==="jp")?AC.origHeader:AC.rulerHeader;return N(AY,null,null,null,strings);},reply_plain_body:function(AZ){var AY=s(AZ.oMsg.body.display);if(AP()){try{AY=B(AY);}catch(Y){}AY=T(AY);}return AY;},reply_plain_header:function(Y){return(strings[(Y.action=="forward")?"str_comp_reply_fwdHeader":"str_comp_reply_origHeader"]);},quoteprefix:function(){return(AP()?u+" ":"");},headerDir:function(){return(NeoConfig.isRTL)?' dir="rtl" ':' dir="ltr" ';}};function O(){return z.createModel();}function AH(){}function c(){}function H(Y){var AZ,AY=t(AK.get("userSendPref.defaultID"));if(AY){AZ=o.mail.Controller.Compose.injectSignature(Y.get("content"),Y.get("isRichText"),AY);if(AZ){Y.set("content",AZ);}}}function e(Y){o.use("mail-controller-sendconfirm",function(Ab){var AZ=(Y.saveBeforeSend?Y.saveBeforeSend:false),Aa={};Aa.sdo=j(Y.cdo,null,{"draftMID":Y.mid}),Aa.auto=Y.auto||null,Aa.mid=Y.mid;if(Y.cdo&&Y.cdo.appid){Aa.appid=Y.cdo.appid;}if(Y.cdo){var AY;if(AY=Y.cdo.get("origin")){Aa.cid=AY.oMsg&&AY.oMsg.cid;}}if(Y.auto){q.rocketstats.stat("savemessage","auto");}else{q.rocketstats.stat("savemessage","userInitiated");}Ab.mail.Controller.SendConfirm.saveMessage(Aa,function(Ad,Ac){Y.cdo.set("saveaction",{mid:Ad,auto:Aa.auto,failure:Ac,sendAfterSave:AZ});});});}function f(Y,AZ){var AY={textConvert:true};Y.set("isRichText",false);Y.set("content",AZ,AY);}function Q(Y){Y.set("isRichText",true);}function AI(AY,Y){o.common.persist.UserData.set(AY,Y);setTimeout(function(){o.common.persist.UserData.saveOne(AY);},10);}function AT(Aa,AZ,AY,Y){o.Array.each(Aa,function(Ab){if(Ab.uploadState!=="success"){return;}orig=Ab.original;if(!orig||AY){AZ.push({attachment:"upload://"+Ab.diskfilename,disposition:"attachment"});return;}if(orig.disposition!=="inline"){AZ.push({attachment:AX(orig.fid,Y?Y:orig.mid,orig.partId,orig.tnef),disposition:"attachment"});}});}function j(An,Aa,AY,Ak){var Ae=An.get("header"),Ac=An.get("origin"),Aj=An.get("content"),Am=An.get("textcontent"),Ai=An.get("isRichText"),AZ=An.get("attachments"),Ah=[],Ab=0,Ag=0,Al,Y,Ad,Af;if(NeoConfig.useAttComposerTT){AT(An.attachments.getAll(),Ah,An.get("passive"),AY?AY.draftMID:null);}else{for(Ag=AZ.length;Ab<Ag;++Ab){Al=AZ[Ab].original;Y=AZ[Ab].state||{};if(!Y.uploaded||Y.cancelled){continue;}if(Al&&!An.get("passive")){if(AZ[Ab].disposition!=="inline"||!AZ[Ab].isDisplayable){Ah.push({attachment:AX(Al.fid,Al.mid,Al.partId,Al.tnef),disposition:"attachment"});}}else{if(Y.failed){continue;}Ah.push({attachment:"upload://"+AZ[Ab].serverID,disposition:"attachment"});}}}Ad={subject:Ae.subj||Ae.subject,from:Ae.from,to:Ae.to,cc:Ae.cc,bcc:Ae.bcc,replyto:{name:Ae.from.name,email:AM(Ae.from.email)}};h(Ac,Ad);if(Aa){Aa.reset();}else{Aa=o.mail.model.SendModelFactory.createModel();}Aa.set("header",Ad);Aa.set("contenttext",Am);Aa.set("attachments",Ah);if(Ai){Aa.set("contenthtml",Aj);}if(Ak&&!!Ac&&Ac.action&&Ac.action!="edit"){Aa.set("origin",Ac);}if(AY){if(AY.draftMID){Aa.set("draftMID",AY.draftMID);}if(AY.keepDraft){Aa.set("keepDraft",AY.keepDraft);}if(AY.cid){Aa.set("cid",AY.cid);}}return Aa;}function P(AY,Ab,AZ,Y){var Ae=AY.get("origin");if(Ae.action&&Ae.fid&&Ae.oMsg){if(Ae.ctxReq&&o.mail.Controller.Messages){K.abort(Ae.ctxReq);}var Ad,Ac={truncateAt:null},Aa={success:function(){p.apply(this,arguments);Y&&Y();},failure:function(){m.apply(this,arguments);},args:{cdo:AY,isDraft:Ab,stopwatch:AZ}};Ad={fid:Ae.fid,msg:Ae.oMsg,ovparams:Ac};if(AZ&&!AZ.CMGStart){AZ.CMGStart=new Date();}o.use("mail-controller-messages",function(){Ae.ctxReq=o.mail.Controller.Messages.get(Ad,Aa);AY.set("origin",Ae);});}}function p(Ab,AZ){var Y=AZ.args.cdo,Aa=Y.get("origin"),AY=AZ.args.stopwatch;if(Ab.mid){if(AY){if(!AY.CMGEnd){AY.CMGEnd=new Date();AZ.respProps&&(AY.wasCached=AZ.respProps.wasCached);}AY.CMGSize=Ab.body.display.length;}Aa.oMsg=Ab;Aa.ctxReq=null;Aa.errInfo="ok";V(Y,AZ.args.isDraft);}else{m({msg:this.message},AZ);}}function m(AZ,AY){var Y=AY.args.cdo;Y.set("originerror",AZ);}function V(Af,AZ,AY){var Aa;b(Af);Aa=d(Af,AZ);if(NeoConfig.useAttComposerTT){o.Array.each(Aa.attachments,function(Ag){Af.attachments.add(Ag);});}else{Af._addAttachments(Aa.attachments);}if(!AZ){var Ae=Af.get("origin"),Ad=AW(Ae),Ab=t(Ad.email),Ac,Y=true;if(AY&&AY.noSig){Y=false;}if(Ab&&Y){Ac=o.mail.Controller.Compose.injectSignature(null,Af.get("isRichText"),Ab);
Aa.prolog=strings.str_cfg_tog_insert_signature_bottom?Aa.prolog+Ac:Ac+Aa.prolog;}}Af.set("replyheader",Aa.header);Af.set("replycontent",Aa.prolog);}function t(Ab){var Ac=AK.get("userSendPref"),AY,Y,Aa;if(strings.str_cfg_tog_use_accountbased_signature&&Ab&&Ab!==Ac.defaultFromAddress){Y=AK.get("aliases.alias");for(var AZ=0;AZ<Y.length;++AZ){Aa=Y[AZ];if(Ab===Aa.address){AY={text:Aa.signature,isRich:Aa.signatureType==="d",isActive:Aa.addSignature};break;}}}else{AY={text:Ac.signatureText,isRich:Ac.richTextSignature=="plainhtml"||Ac.richTextSignature=="dhtml",isActive:Ac.signatureActive};}return AY&&AY.isActive&&AY.text?AY:null;}function b(Y){o.use("mail-controller-messages-ops",function(){var AZ=Y.get("origin"),Aa={},AY=new Array(AZ.oMsg);Aa["read"]=1;o.mail.Controller.Messages.flag({fid:AZ.fid,mid:AY,setFlags:Aa},{failure:function(){}});});}function d(Y,AY){var Aa,AZ=Y.get("origin");Aa={prolog:null,header:null,attachments:null};if(AY){Aa.header=AZ.oMsg.header;Aa.prolog=s(AZ.oMsg.body.display);Aa.attachments=F(AZ);return Aa;}Aa.header=w(AZ);if(AZ.forwardAsAttachment){Aa.prolog="";Aa.attachments=x(AZ);return Aa;}Aa.prolog=AR(Y,AZ);if(AZ.action=="forward"){Aa.attachments=F(AZ);}return Aa;}function AR(Y,Ab){var AZ=AJ(Y),Aa=Z(Ab),AY;AY=N(AZ||Aa?AC.reply_rich:AC.reply_plain,Ab,AE,Y,strings);if(!AZ&&Aa){Y.set("isRichText",true);}return AY;}function w(Ad){var Ac,Ab=(Ad.action=="reply_sender"||Ad.action=="reply_all"),AY={from:null,to:null,cc:null,subject:null},Aa=[],Y=[],AZ=(Ad.fid=="Sent"||(Ad.fid=="%40S%40Search"&&Ad.oMsg.sourceFolderInfo.fid=="Sent"));AY.from=(Ab)?AW(Ad):L();if(Ab){Ac=X(Ad.oMsg);if(!AZ&&Ad.action=="reply_sender"){Y.push(Ac);AY.to=Y;}else{if(!AZ){Y.push(Ac);}Aa.push(Ac);Aa.push(AY.from);AY.to=Y.concat(l(Ad.oMsg.header.to,Aa));AY.cc=l(Ad.oMsg.header.cc,Aa);if(AZ&&AY.to.length==0&&AY.cc.length==0){AY.to=Ad.oMsg.header.to;if(AY.to.length==0){AY.cc=Ad.oMsg.header.cc;}}}}AY.subject=D(AF(Ad));if(!AZ){o.Array.each(Ad.oMsg.header.replyto||[],function(Af){var Ae=AY.to;if(Ae&&(o.Array.indexOf(Ae,Af)<0)&&(o.Array.indexOf(Y,Af)<0)){AY.to.push(Af);}});}return AY;}function AF(AY){var Y=AY.action=="reply_sender"||AY.action=="reply_all"||AY.action=="forward";if(Y){if(AY.oMsg.header.subject==strings["str_msg-view_no_subject"]){AY.oMsg.header.subject="";}return N(AC.subject.replace(/\s+$/,""),AY,R,null,strings);}else{return AY.oMsg.header.subject;}}function F(Aa){var Y=Aa.oMsg.attachments,AY=[];if(Y){for(var AZ=0;AZ<Y.length;AZ++){AY.push(S(Y[AZ],Aa));}}return AY;}function x(AY){var Y=strings.str_comp_nosubject;if(AY.oMsg.header.subject.length>0){Y=AY.oMsg.header.subject.substring(0,240);}if(NeoConfig.useAttComposerTT){return[{filename:Y+".eml",uploadState:"success",size:AY.oMsg.header.size,original:{fid:AY.fid,mid:AY.oMsg.mid,partId:"",tnef:"",disposition:"attachment",displayable:false}}];}return[{filename:Y+".eml",state:{uploaded:true},size:{original:AY.oMsg.header.size},original:{partId:"",mid:AY.oMsg.mid,fid:AY.fid,tnef:""}}];}function S(Y,AY){if(NeoConfig.useAttComposerTT){return{filename:Y.filename,size:Y.size,mimetype:Y.type+"/"+Y.subtype,thumbnail:Y.thumbnailurl,type:Y.type,referencedInline:Y.referencedInline,uploadState:"success",original:{fid:AY.fid,mid:AY.oMsg.mid,partId:Y.partId||"",tnef:Y.tnef,displayable:Y.isDisplayable,disposition:Y.disposition}};}return{filename:Y.filename,mimetype:Y.type+"/"+Y.subtype,size:{original:Y.size},state:{uploaded:true},disposition:Y.disposition,isDisplayable:Y.isDisplayable,original:{partId:Y.partId||"",mid:AY.oMsg.mid,fid:AY.fid,tnef:Y.tnefId}};}function AL(Y,Ad,Ab){var Aa=/[\x01-\x08\x0B-\x0C\x0E-\x1F\x7F-\x84\x86-\x9F]/ig,AY,Ac,AZ;AZ=Y.one("body");AY=Ab;Ac=this.convertToPlain(AZ,false);AY=AY.replace("<!-- ORIGINAL -->","");AY=AY.replace(Aa,"");Ac=Ac.replace(Aa,"");AY=AY.replace(/<br\b([^>]*?)\bclass="yui-cursor"(.*?)>/ig,"");AY=AY.replace(/<p\b([^>]*)>/ig,"<div$1>");AY=AY.replace(/<\/p\b[^>]*>/ig,"</div>");AY=["<html><body>",'<div style="color:',Ad.foreColor,"; background-color:",Ad.backColor,"; font-family:",Ad.fontFamily,";font-size:",Ad.fontSize,'">',AY,"</div></body></html>"].join("");return({html:AY,text:Ac});}function AJ(Y){return !NeoConfig.low_bandwidth&&Y.get("isRichText");}function AP(){return strings.str_cfg_tog_compose_autoattach_prefix||C(J)==="yes";}function C(Y){return E.get("cg.pref."+Y);}function T(AY){var Y=u+AY.replace(/\r?\n|(.{0,80})\r?\n|(.{1,80})$|(.{1,80} +)/mg,"$1$2$3<br />"+u);Y=Y.replace(/(^[\>|(?:&gt;)]+|\<br \/\>(?:\>|\&gt\;)*)/mgi,"$1 ");return Y.substring(0,Y.length-u.length);}function B(AY,Y){var Aa,AZ=document.createElement("div");AZ.innerHTML=AY;Aa=o.mail.Controller.Compose.convertGuts(AZ);if(!Y){Aa=AB(Aa);}AZ.innerHTML="";AZ=null;return Aa;}function Z(AZ){var AY=AZ.oMsg.part;if(AY){for(var Y=0;Y<AY.length;Y++){if(AY[Y].subtype=="html"){return true;}}}return false;}function s(Y){if(Y){Y=Y.replace(AS,"$1");Y=Y.replace(M,"$1");Y=Y.replace(AD,"");}return Y;}function AX(Aa,AY,Y,AZ){if(typeof AZ!="undefined"&&AZ!==""&&AZ!="null"){return["message:/",encodeURIComponent(Aa),encodeURIComponent(AY),Y,AZ].join("/");}else{return["message:/",encodeURIComponent(Aa),encodeURIComponent(AY),Y].join("/");}}function G(AZ){var AY,Y;if(AZ){return{fontFamily:AY=AV(true),fontSize:Y=AU(true)};}else{return U();}}function U(){var Y,AY;AY=AK.get("userUIPref.composeFontFamily");if(!AY){AY=AV(false);}Y=AK.get("userUIPref.composeFontSize");if(Y){Y+="pt";}else{Y=AU(false);}return{fontFamily:AY,fontSize:Y};}function AV(Y){if(Y){return n()[0];}return strings["str_rte_default_font"];}function AU(Y){if(Y){var AY=n();return""+parseInt(AY[1])+AY[2];}return parseInt(strings["str_rte_default_font_size"])+"pt";}function n(){return o.mail.ui.common.Fonts.getPlainTextOption()||[strings["str_comp_plaintext_default_font"],strings["str_comp_plaintext_default_font_size"],"px"];}function L(){var AZ,Ac,Ae,Aa=AK.get("userSendPref.defaultFromAddress"),Ad=AK.get("userSendPref.defaultFromName"),Y=AK.get("externalAccounts")||{},AY=Y.extAccountsTotal||0,Ab=Y.extAccount||[];
if(AY>0){for(AZ=0;AZ<AY;AZ++){Ac=Ab[AZ];Ae=Ac.address;if(Ac.address&&Ac.address.length>0&&Ac.isDefault){Aa=Ac.address;Ad=Ac.fromName;if(Ad==""){Ad=AK.get("userSendPref.defaultFromName");}}}}return({name:Ad,email:Aa});}function AW(AZ){var AY,Y={email:AK.get("userSendPref.defaultFromAddress"),name:AK.get("userSendPref.defaultFromName")};if(AZ.fid=="Sent"){return X(AZ.oMsg);}AY=A(AZ.oMsg.header.to,Y);if(!AY){AY=A(AZ.oMsg.header.cc,Y);}if(!AY){AY=A(AZ.oMsg.header.bcc,Y);}if(!AY){AY=L();}return AY;}function A(Ac,Ae){var Ab,Ad=null,Aa={},Af=(AK.get("externalAccounts")||{}).extAccount||[],AZ=(AK.get("aliases")||{}).alias||[],AY=(AK.get("disposableAddresses")||{}).deaName||[],Y=function(Ag){if(Ag&&Ag.address&&(Ag.address==Aa.email)){Ad={email:Ag.address,name:Ag.fromName};return true;}};for(Ab=0;!Ad&&(Ab<Ac.length);Ab++){Aa=Ac[Ab];if(Aa.email==Ae.email){return Ae;}o.Array.some([].concat(Af,AZ,AY),Y);}return Ad;}function AG(Y,Ab){var Aa=0,AZ=Ab.length,AY=new Array(AZ);while(AZ--){AY[Aa]=Y(Ab[Aa++]);}return AY;}function AA(Y){return(Y.name)?Y.name:Y.email;}function v(Y){return Y.email;}function r(AY){var Y="";if(AY.name){Y=y(AY.name)?'"'+AY.name+'"':AY.name;}if(AY.email){Y+=(Y.length)?" <"+AY.email+">":AY.email;}return Y;}function y(Y){return(Y.match(/[;,"<>@]/)!=null);}function X(AY,Y){if(!Y&&AY.header.replyto&&AY.header.replyto.length>0){return AY.header.replyto[0];}else{return AY.header.from;}}function I(AZ,Y,AY){AZ=l(AZ,AY);return AG(Y?r:AA,AZ).join("; ");}function l(AY,Y){return k(AY,Y);}function k(Ab,Ad){var Aa,AY,AZ,Ac=new Array(),Y;for(Aa=0;Aa<Ab.length;Aa++){Y=false;if(!Ab[Aa].email){continue;}AZ=Ab[Aa].email.toLowerCase();if(Ad){for(AY=0;AY<Ad.length;AY++){if(AZ==Ad[AY].email.toLowerCase()){Y=true;break;}}}if(!Y){Ac.push({name:Ab[Aa].name,email:Ab[Aa].email});if(Ad){Ad.push(Ab[Aa]);}}}return Ac;}function AM(Aa){var AZ=Aa,Y=AK.get("userSendPref.defaultFromAddress"),AY=function(Ab){if(Ab&&Ab.address&&(Ab.address==Aa)){AZ=(Ab.replyTo||Ab.address);}};if(Y==Aa){return AK.get("userSendPref.defaultReplyToAddress")||Y;}o.Array.each([].concat((AK.get("externalAccounts")||{}).extAccount||[],(AK.get("aliases")||{}).alias||[],(AK.get("disposableAddresses")||{}).deaName||[]),AY);return AZ;}function h(AY,AZ){if(AY.oMsg&&AY.oMsg.header){var Y=AY.oMsg.header;AZ.inreplyto=Y.messageId;AZ.references="";if(Y.references){AZ.references=Y.references+" ";}else{if(Y.inReplyTo){AZ.references=Y.inReplyTo+" ";}}AZ.references+=Y.messageId;}}function i(){return new RegExp("(^"+"re:"+"\\s?)|"+"(^"+"fw:"+"\\s?)|"+"(^"+strings["str_comp_reply_spRE"]+"\\s?)|"+"(^"+strings["str_comp_reply_spFWD"]+"\\s?)","i");}o.mix(W,{createCDO:O,insertSignature:H,applyStationery:AH,addAttachment:c,assembleSendBody:AL,transformSend:j,save:e,savePref:AI,toPlainText:f,toRichText:Q,fetchOrigin:P,getDefaultFontInfo:G,getStyleFontFamily:AV,getStyleFontSize:AU,getDefaultFromAddress:L,seedSubject:AF,htmlToText:B,getSignature:t,convertAttachmentData:F,getBody:AR,getHeaderContent:w,transformOrigin:d,updateFromOrigin:V},true);},"3.0.0",{requires:["mail-controller-base","mail-model-compose","common-persist-user-data","mail-persist-meta-data","mail-ui-common-fonts","_shared_module_compose_reply"]});YUI.add("_shared_module_compose_message_header_fresh",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_compose_message_header_fresh={base:'<div class="compose-header fresh"> <div class="field label-left account-select hidden"> <label for="from-field">{{str_msg_hdr_label_from_fresh}}</label> <div class="from-selector"> <select id="from-field" class="cm-from-field from-select"> {{compose_from_address}} </select> </div> </div> <div class="field label-left contact-search"> <label for="to-field">{{str_comp_label_to_fresh}}</label> <div id="to" class="cm-to ac-input" data-action="autocomplete" tabindex="-1"> <ul role="presentation"> {{conversation_user}} <li role="presentation" class="recipient-input"> <input role="textbox" aria-autocomplete="list" aria-expanded="false" id="to-field" name="to-field" class="cm-to-field" value=""> </li> </ul> </div> <div class="address-btns"> <span class="btn left right user-search btn-kiosk-choosecontact" data-action="modal"><a role="button" id="to_add_contacts" class="icon add" tabindex="-1" title="{{str_comp_btn_to_add_attr}}"><i>{{str_comp_btn_to_add}}</i></a></span> <span id="btn-show-cc-in-to" class="cm-btn-show-cc cc-btn btn left right small"><a role="button" href="cc-group&amp;btn-show-cc=0" id="cc_show_btn_in_to" tabindex="-1" data-action="toggle-visibility">{{str_comp_btn_show_cc}}</a></span> <span id="btn-show-bcc-in-to" class="cm-btn-show-bcc bcc-btn btn left right small btn-bcc-in-to"><a role="button" href="bcc-group&amp;btn-show-bcc=0" id="bcc_show_btn_in_to" tabindex="-1" data-action="toggle-visibility">{{str_comp_btn_show_bcc_fresh}}</a></span> {{make_reply_all}} </div> </div> <div id="cc-group" class="cm-cc-group field label-left contact-search hidden"> <label for="cc-field">{{str_comp_label_cc_fresh}}</label> <div id="cc" class="cm-cc ac-input" data-action="autocomplete" tabindex="-1"> <ul role="presentation"> <li role="presentation" class="recipient-input"> <input role="textbox" aria-autocomplete="list" aria-expanded="false" id="cc-field" name="cc-field" class="cm-cc-field"> </li> </ul> </div> <div class="address-btns"> <span class="btn left right user-search btn-kiosk-choosecontact" data-action="modal"><a role="button" id="cc_add_contacts" class="icon add" tabindex="-1" title="{{str_comp_btn_to_add_attr}}"><i>{{str_comp_btn_cc_add}}</i></a></span> <span class="cc-btn btn left right small"><a role="button" href="cc-group&amp;btn-show-cc=1" id="cc_hide_btn" tabindex="-1" data-action="toggle-visibility">{{str_comp_btn_hide_cc}}</a></span> <span id="btn-show-bcc-in-cc" class="cm-btn-show-bcc bcc-btn btn left right small btn-bcc-in-cc"><a role="button" href="bcc-group&amp;btn-show-bcc=0" id="bcc_show_btn_in_cc" tabindex="-1" data-action="toggle-visibility">{{str_comp_btn_show_bcc_fresh}}</a></span> </div> </div> <div id="bcc-group" class="cm-bcc-group field label-left contact-search hidden"> <label for="bcc-field">{{str_comp_label_bcc_fresh}}</label> <div id="bcc" class="cm-bcc ac-input" data-action="autocomplete" tabindex="-1"> <ul role="presentation"> <li role="presentation" class="recipient-input"> <input role="textbox" aria-autocomplete="list" aria-expanded="false" id="bcc-field" name="bcc-field" class="cm-bcc-field"> </li> </ul> </div> <div class="address-btns"> <span class="btn left right user-search btn-kiosk-choosecontact" data-action="modal"><a role="button" id="bcc_add_contacts" class="icon add" tabindex="-1" title="{{str_comp_btn_to_add_attr}}"><i>{{str_comp_btn_bcc_add}}</i></a></span> <span class="bcc-btn btn left right small"><a role="button" href="bcc-group&amp;btn-show-bcc=1" id="bcc_hide_btn" tabindex="-1" data-action="toggle-visibility">{{str_comp_btn_hide_bcc}}</a></span> </div> </div> <div class="field label-left subject"> <label for="subject-field">{{str_comp_label_subject_fresh}}</label> <div id="subject" class="cm-subject"><span> <input id="subject-field" name="subject-field{{timestamp_id}}" class="cm-subject-field" data-action="compose-subject" value="{{conversation_user1}}" /> </span></div> </div> </div> ',compose_from_address:'<option value="{{fromAddress}}"{{fromSelected}}>{{fromAddress}}</option> ',conversation_user:'<li role="presentation" class="recipient"> <span class="small btn left right lozenge {{lozengeerror}}"><a>{{conversation_user}}</a></span> </li> ',make_reply_all:'<span class="btn left right small makereplyall-btn replyall-toggle-btn hidden" data-action="make-replyall"><a id="btn-switch-reply-mode" tabindex="-1" role="button">{{title}}</a></span>',conversation_user1:"Our conversation on {{timestamp}}"};},"1.0.0");YUI.add("comms-ui-lozenge",function(E){var P=E.common.Utils.substitute,N=E.common.Utils.escapeHtml,B=E.comms.Utils,Q=E.Lang.trim,A={base:'<li class="hLozenge"><span role="button" class="lozenge-static {{errorClass}}" title="{{hover}}">{{label}}</span>{{editable}}</li>',edit:'<input class="lozenge-edit mask" type="text" value="{{fullDisplayData}}">'},H,M=[".cm-to",".cm-cc",".cm-bcc"];E.on("click",function(U){if(!U.altKey&&!U.shiftKey&&!U.ctrlKey&&!U.metaKey){var V=E.all(".hLozenge");V.each(function(W){if(W!==U.target&&W!==U.target.get("parentNode")&&W.hasClass("focus")){W.removeClass("focus");}});}});H=function(U){var Z=this,Y,V,X,W;Z.label=U["label"]||"";Z.hover=U["hover"]||"";Z.valFn=U["valFn"]||null;Z.error=U["error"]||false;Z.menu=U["menu"]||null;Z.edit=U["edit"]||false;Z.copy=U["copy"]||false;Z.bidi=U["bidi"]||false;if(NeoConfig){Z.bidi=!!(NeoConfig.bidi);}Z.data=U["data"]||{name:"",email:"",cid:null};Z.validate();Y=E.Node.create(P(A.base,null,null,null,{label:N(this.label),editable:Z.edit?A.edit:"",errorClass:Z.error?"lozenge-error":""}));V=Z.staticL=Y.one(".lozenge-static");V.setAttribute("title",Z.hover);Y.setData("lozenge",Z);Y.setData("user",Z.data);if(Z.bidi){W=E.Intl.detectDirection(Z.label.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,">").replace(/&amp;/g,"&"));Y.setAttribute("dir",W);Y.addClass(W);}E.on("contextmenu",Z.popupMenu,V,Z);if(Z.edit){X=Z.editL=Y.one(".lozenge-edit");X.setAttribute("value",Z.getFullDisplayData());E.on("click",Z.highlight,V,Z);E.on("dblclick",Z.startEdit,V,Z);E.on("keydown",Z.typeEdit,X,Z);E.on("blur",Z.finishEdit,X,Z);}Z.rootNode=Y;};function I(U){var V=this;E.use("contacts-ui-contact-popup",function(Z){var a=V.getNode(),W=a.ancestor("ul"),X=V.data;X.copyable=V.copy;X.editable=V.edit;X.isContext=true;X.stateChangeCB=function(Y){if(Z.Node.getDOMNode(a)){if(Y.state=="show"){a.addClass(NeoConfig.isFresh?"focus":"lozenge-open-menu");}else{a.removeClass("lozenge-open-menu").removeClass("focus");}}};if(W){W.all("li").removeClass("focus");}Z.mail.ContactPopup.showContactMenu(Z.mail.ContactPopup.TYPE_INTERMEDIATE,V.rootNode,X,V.error);if(a.menu&&a.menu.isVisible()){U.stopPropagation();}});U.preventDefault();}function G(f){var b=function(e){e.addClass("focus");E.fire("lozenge:highlight");};var j=(E.UA.os=="macintosh")?f.metaKey:f.ctrlKey;var a=-2,h=-1,g=-1,c,X=-1,V,Y,U=true;var W,Z;if(j||f.shiftKey){W=this.rootNode.ancestor(".ac-input");if(W){this.rootNode.ancestor(".compose-header").all(".ac-input").each(function(e){if(e!=W){e.all(".hLozenge").removeClass("focus");}});}if(j){if(this.rootNode.hasClass("focus")){this.rootNode.removeClass("focus");}else{b(this.rootNode);}}else{if(W){var d=W.all(".hLozenge");d.each(function(e){if(e.hasClass("focus")){c=d.indexOf(e);(X==c-1&&U)?U=true:((X>=0)?U=false:U=true);if(h<c){h=c;}if(a<0){a=c;}X=c;}});g=d.indexOf(this.rootNode);if(a==h||g<a||g>h){if(g<a){if(!U){V=g;Y=a;}else{V=g;Y=h;}}else{if(g>h){if(!U){V=h;Y=g;}else{V=a;Y=g;}}}}else{V=a;Y=g;}d.removeClass("focus");if(V<0||Y<0){b(this.rootNode);}else{for(c=V;c<=Y;c++){b(d.item(c));}}}}}else{Z=this.rootNode.ancestor(".compose-header");if(Z){Z=Z.all(".hLozenge");Z.removeClass("focus");}b(this.rootNode);}}function S(){var V=this,U=V.getFullDisplayData();V.staticL.setContent(N(U));V.editL.removeClass("mask");V.staticL.addClass("mask");V.editL.focus();V.editL.setAttribute("value",U);}function C(Y){var a=this,X,Z,U,W,V=Y.keyCode;if(V==13){X=a.rootNode.ancestor("div");if(X){Z=X.get("scrollTop");U=X.all("li");W=U.item(U.size()-1).one("input");W.focus();E.later(50,a,function(){X.set("scrollTop",Z);W.addClass("whiteout");});}}else{a.staticL.setContent(N(a.editL.get("value")));a.staticL.setAttribute("title",a.getFullDisplayData());}}function K(){var V=this;var U=Q(V.editL.get("value"));if(!U){V.remove();return;}V.data=V.createUserDataFromString(U);V.validate();V.setState();V.setLabel();V.staticL.setAttribute("title",V.getFullDisplayData());V.staticL.removeClass("mask");V.editL.addClass("mask");}function F(){return this.rootNode;}function L(){var U=this;if(U.valFn){if(!U.valFn.call(U,U.data)){U.data.fail=true;U.error=true;return false;}}else{if(!B.isValidEmail(U.data.email)){U.data.fail=true;U.error=true;return false;}}U.data.fail=false;U.error=false;return true;}function R(){var U=this.data,V;V=U.name||U.email;this.staticL.setContent(N(V));}function O(){if(this.error){this.staticL.addClass("lozenge-error");}else{this.staticL.removeClass("lozenge-error");}}function J(a){var U=false,W=null,V=null,Y=/(<[^<>]+[^<>]+\.[^<>]+>)|(\([^\(\)]+@[^\(\)]+\.[^\(\)]+\))|(\[[^\[\]]+@[^\[\]]+\.[^\[\]]+\])/,Z,X;a=Q(a);X=a.replace(/\".*\"/g,"");if(!Q(X)||X.indexOf("@")<0){U=true;V=W=a;}else{if(Y.test(a)){Z=a.match(Y);V=Z[0];W=Q(a.replace(V,""));V=V.substring(1,V.length-1);}else{V=W=a;}if(B.isValidEmail(V)){this.error=false;U=false;}else{this.error=true;U=true;}}return{fail:U,email:V,name:W};}function D(){var V=this.data,W=V.name||"",U=V.email;if(this.error){return U;}W=(W==U)?"":W+" ";return W+"<"+U+">";}function T(){var U=this;U.rootNode.remove().destroy(true);}H.prototype={popupMenu:I,highlight:G,startEdit:S,typeEdit:C,finishEdit:K,getNode:F,validate:L,setLabel:R,setState:O,getFullDisplayData:D,createUserDataFromString:J,remove:T};E.namespace("comms.ui");E.comms.ui.Lozenge=H;E.comms.ui.LozengeUtils={makeContact:function(j,U){var b,Y=[],Z=[],g,a,V,f,e,h,d,c=j.all("span.lozenge");for(b in U){a=U[b]["fields"];for(var X=0,W=a.length;X<W;X++){g=a[X];if(g["type"]=="email"){Y=Y.concat(g["value"]);}else{if(g["type"]=="name"){V=g["value"];f=E.common.Utils.substitute(strings["str_name_format"],{given_name:V.givenName,family_name:V.familyName});Z=Z.concat(f);}}}}c.each(function(i){if(i.hasClass("lozengeadd")){h=i.getAttribute("data-address");for(e=0;e<Y.length;e++){if(Y[e]==h){i.remove();if(d){d.addClass("right");f=Z[e];if(f){d.one("a").setContent(f);}d=null;}}}}else{d=i;}});}};},"0.0.1",{requires:["comms-ui-lozenge_css","common-utils","comms-utils","node"]});YUI.add("mail-controller-compose-text",function(A){A.namespace("mail.Controller");var J=A.common.Utils,B=A.common.persist.UserData,P={address:1,blockquote:1,body:1,caption:1,center:1,col:1,colgroup:1,dd:1,dir:1,div:1,dl:1,dt:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,li:1,menu:1,ol:1,p:1,pre:1,table:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,ul:1};function C(S,T){var U=S.cloneNode(true),R=A.Node.getDOMNode(U),Q=F(R);if(T){Q=I(Q,true);}return Q;}function L(S,U){var Q=A.Node.create("<div>"+S+"</div>"),T=A.Node.getDOMNode(Q),R=F(T);if(U){R=I(R);}return R;}function F(R){var Q=A.UA.ie;if(!Q){K(R);}else{R.innerHTML=R.innerHTML.replace(/(((<div\s+[^>]*>)|(<div\s*>))&nbsp;<\/div>)/gi,"<BR/>");}return M(R,false,"").replace(/\n[\s\xA0]+$/,"");}function M(T,X,Y){if(T.nodeType===1||T.nodeType===11){var S=T.tagName;if(A.UA.ie&&T.tagName=="DIV"&&T.getAttribute("class")&&T.getAttribute("class")!=null&&T.getAttribute("class").indexOf("hr")!=-1){S="HR";}switch(S){case"SCRIPT":case"STYLE":case"LINK":case"OBJECT":case"EMBED":return"";case"HR":var a=T.previousSibling;return(G(a)?"":"\n")+Y+"________________________________\n"+Y;case"BR":return"\n"+Y;case"BLOCKQUOTE":Y+=">";default:var V=[];var Q=T.firstChild;var W=0;while(Q!==null){var Z=M(Q,Q.tagName==="PRE",Y);if(Q.nodeType===1){if(H(Q)==="block"&&V.length>0&&Q.tagName!=="TD"){var U=Z.match(/^[ \t\r\n\v\f]*$/);if(!U||Q.tagName==="LI"){V.push("\n"+Y);}}switch(Q.tagName){case"LI":W++;V.push("\t"+(Q.parentNode.tagName==="OL"?W+".":"*")+" ");break;}}if(Z){V.push(Z);}if(Q.nodeType===1){switch(Q.tagName){case"TD":V.push(" ");break;}}Q=Q.nextSibling;}return V.join("");}}else{if(T.nodeType===3){var V=T.nodeValue;if(!X){var a=T.previousSibling;var R=a?H(a):null;V=G(a)?V:V.replace(/\n[ \t\r\n\v\f]+/g," ");if(a===null||G(a)){V=V.replace(/^[ \t\r\n\v\f]+/,"");}else{if(R==="block"){V=V.replace(/^[ \t\r\n\v\f]+/,"\n");}else{if(R==="inline"){V=V.replace(/^[ \t\r\n\v\f]+/," ");}}}V=V.replace(/[ \t\r\n\v\f]+$/," ");}return V;}else{return"";}}}function G(Q){if(Q===null||Q.nodeType!==1){return false;}return Q.tagName==="BR";}function H(Q){if(Q===null||Q.nodeType!==1){return null;}if(Q.style.display){if(Q.style.display==="block"){return"block";}else{if(Q.style.display==="inline"){return"inline";}}}return P[Q.tagName.toLowerCase()]?"block":"inline";}function K(T){if(T.nodeType===1||T.nodeType===11){var R=T.firstChild;while(R!==null){var V=R.nextSibling;K(R);R=V;}}else{if(T.nodeType===3){var S=T.nodeValue;if(S.match(/^[ \t\r\n\v\f]*$/)){var Q=T.previousSibling;var U=Q?H(Q):"inline";if(U==="inline"&&!G(Q)){T.nodeValue=T.nodeValue.replace(/\n.*/," ");}else{T.parentNode.removeChild(T);}}}}}function I(R,Q){R=J.escapeHtml(R);R=O(R);if(Q){R=R.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");R=R.replace(/( ){2}/g,"&nbsp;&nbsp;");}R=R.replace(/\n/ig,"<br />");return R;}function O(R){R=R.replace(/(https?:\/\/[^\s<]+)/ig,"<a target='_blank' href=''>$1</oa>");R=R.replace(/([^\/])(www\.(\w+\.)+[^\s<]+)/ig,"$1<a target='_blank' href='http://'>$2</oa>");R=R.replace(/^(www\.(\w+\.)+[^\s<]+)/ig,"<a target='_blank' href='http://'>$1</oa>");R=R.replace(/((&lt;|&gt;|[^A-Za-z0-9#_\/]){1,10})<\/oa>/g,"</oa>$1");var Q;try{Q=new RegExp("'>([^<]+?)</oa>","g");}catch(S){Q=new RegExp("'>([^<]+)","g");}R=R.replace(Q,"$1'>$1</a>");return R;}function D(W,S,U){var T,Q,V=U&&U.isRich,R,X=U&&U.text;if(!X){return"";}X=N(X,V);if(!V){X=E(X);}else{if(!S){try{R="<br>";X=X.replace(/((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))/gi,R);X=X.replace(/((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))/gi,R);X=X.replace(/((<p\s+[^>]*>)|(<p\s*>)&nbsp;<\/p>)/gi,R);X=X.replace(/(((<div\s+[^>]*>)|(<div\s*>))&nbsp;<\/div>)/gi,R);X=X.replace(/(<br\s+[^>]*>)|(<br\s*>)/gi,R);X=X.replace(/(<br\/\s+[^>]*>)|(<br\/\s*>)/gi,R);X=X.replace(/(<p\s+[^>]*>)|(<p\s*>)/gi,"");X=X.replace(/<\/p>/gi,R);X=X.replace(/(<hr\s*>)/gi,R+"________________________________"+R);X=L(X,true);}catch(T){}}}W=W||"";Q=W!="";if(X!=""){if(A.UA.ie||A.UA.webkit){if(Q){W=W+"<div></div><div>&nbsp;</div>"+X;}else{W="<div></div><div>&nbsp;</div>"+X+W;}}else{if(Q){W=W+"<div>&nbsp;</div>"+X;}else{W="<div>&nbsp;</div>"+X+W;}}}return W;}function N(R,Q){if(R!=null){if(!Q){return R.replace(/<vbr>|\n/gi,"<br />");}else{R=R.replace(/<vbr>/gi,"");}}return R||"";}function E(S){var R,Q;S=A.common.Utils.unescapeHtml(S);S=S.replace(/<hr\s*[^>]*>/gi,"<div><hr></div>");S=S.replace(/((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))/gi,"endptagpblanklineppblanklinepstartptag");S=S.replace(/((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))/gi,"endptagpblanklinepstartptag");S=S.replace(/((<p\s+[^>]*>)|(<p\s*>)&nbsp;<\/p>)/gi,"endptagpblanklinepstartptag");S=S.replace(/(((<div\s+[^>]*>)|(<div\s*>))&nbsp;<\/div>)/gi,"endptagpblanklinepstartptag");S=S.replace(/(<br\s+[^>]*>)|(<br\s*>)/gi,"brtag");S=S.replace(/(<br\/\s+[^>]*>)|(<br\/\s*>)/gi,"brtag");S=S.replace(/(<p\s+[^>]*>)|(<p\s*>)/gi,"startptag");S=S.replace(/(<p\s+[^>]*>)|(<p\s*>)/gi,"startptag");S=S.replace(/<\/p>/gi,"endptag");R=S.replace(/<div\s+[^>]*dir\s*=\s*[\'|\"]ltr[\'|\"]\s*[^>]*>/gi,"ltrstartptag");R=R.replace(/<div\s+[^>]*dir\s*=\s*[\'|\"]rtl[\'|\"]\s*[^>]*>/gi,"rtlstartptag");R=R.replace(/(<div\s+[^>]*>)|(<div\s*>)/gi,"startptag");S=R.replace(/<\/div>/gi,"endptag");Q=A.common.Utils.escapeHtml(S);Q=Q.replace(/brtag/g,"<br />");Q=Q.replace(/ltrstartptag/g,"<div dir='ltr'>");Q=Q.replace(/rtlstartptag/g,"<div dir='rtl'>");Q=Q.replace(/startptag/g,"<div>");Q=Q.replace(/endptag/g,"</div>");Q=Q.replace(/pblanklinep/g,"<br/><br/>");return Q;}A.mix(A.mail.Controller.Compose,{convertToPlain:C,convertHTMLToPlain:L,convertGuts:F,injectSignature:D});},"1.0.0",{requires:["common-persist-user-data","mail-controller-compose"]});YUI.add("mail-ui-mailcompose-base-header",function(y){var n=y.mail,AZ=y.Lang.trim,P=y.Node.create,K=n.Controller.Compose,AV=y.common.persist.UserData,F=n.persist.MetaData,AG=y.common.Utils,r=n.ui.PaneUtils,Q=AG.substitute,AR=AG.escapeHtml,E=AG.unescapeHtml,Z=strings.str_cfg_tog_unescape_ncr,Ab=y.ui.Templates,l=(NeoConfig.isFresh)?Ab._shared_module_compose_message_header_fresh:Ab._shared_module_compose_message_header,x=l&&l.compose_from_address,o=y.contacts,W=o.api,a=o.utils,Ah="neo.pref.compose.showBcc",Aa="neo.pref.compose.showCc",AF="hidden",z="focus",Ad="offscreen",AH="restore",T="move",I="reply_all",AJ="reply_sender",w=0;var J=function(Y,Aj){var Ak=this;Ak.isLozengeHighlighted=false;Ak.allLozengesSelected=false;Ak.composeView=Aj;Ak.offscreenContent=null;Ak.listeners=[];J.superclass.constructor.apply(Ak,arguments);};function AN(){}function L(){var Ap={},Aq=(AV.get("externalAccounts")||{}).extAccount||[],Aj=(AV.get("aliases")||{}).alias||[],Y=(AV.get("disposableAddresses")||{}).deaName||[],Ao=Aq.concat(Aj,Y),Am=AV.get("userSendPref"),Ak,Al,An=Ao.length;Ap[Am.defaultID]=1;Ap[Am.defaultFromAddress]=1;for(Al=0;Al<An;Al++){if((Ak=Ao[Al].address)){Ap[Ak]=1;}}return Ap;}function AO(Y){var Aj=this;if(Aj.composeView.attView){Aj.composeView.attView.reposAttachObj(Y);}}function q(){if(y.ACWidgetInst){y.ACWidgetInst.hide();}}function B(Y){Y.removeAttribute("aria-owns");Y.removeAttribute("aria-activedescendant");}function Ac(Y){Y.removeAttribute("aria-describedby");}function S(){var Y=y.ACWidgetInst;Y.get("ac").get("host").set("aria-owns",Y.get("contentBox").generateID());}function AY(Y){var Al=Y.ancestor("ul"),Ak=Al.all(".lozenge-static"),Aj;if(Ak.size()>0){Aj=[];Ak.each(function(Am){Aj.push(Am.generateID());});}if(Aj){Y.set("aria-describedby",Aj.join(" "));}else{Y.removeAttribute("aria-describedby");}}function k(Ak){var Aj=Ak.get("value"),An=Aj.length,Am=parseInt(Ak.ancestor(".ac-input").getStyle("width"),10)-40,Al=150,Y=17;if(An>Y){Al+=(An-Y)*10;if(Al>Am){Al=Am;}Ak.setStyle("width",Al+"px");}else{Ak.setStyle("width","");}}function AT(Ao){var Y=false,Ak=null,Aj=null,Am=/(<[^<>]+@[^<>]+\.[^<>]+>)|(\([^\(\)]+@[^\(\)]+\.[^\(\)]+\))|(\[[^\[\]]+@[^\[\]]+\.[^\[\]]+\])/,An,Al=Ao.replace(/\".*\"/g,"");if(!AZ(Al)||Al.indexOf("@")<0){return{fail:true,email:Ao,name:Ao};}if(Am.test(Ao)){An=Ao.match(Am);Aj=An[0];Ak=AZ(Ao.replace(Aj,""));Aj=Aj.substring(1,Aj.length-1);}else{Aj=Ak=AZ(Ao);}if(!y.comms.Utils.isValidEmail(Aj)){Y=true;}return{fail:Y,email:Aj,name:Ak};}function X(Aj){var Ao=0,Al=0,Ak=Aj.length,Y=[],An=false,Ap=false;for(Al=0;Al!=Ak;Al++){var Am=Aj.charAt(Al);switch(Am){case'"':An=!An;break;case"&":Ap=true;break;case";":if(Ap){Ap=false;break;}case",":if(!An){Y.push(Aj.slice(Ao,Al));Ao=Al+1;}}}if(Ao!=Al){Y.push(Aj.slice(Ao,Al));}return Y;}function AA(Y){var Al=this,Ak=Y.ancestor("ul"),Aj=Ak.all(".hLozenge");if(Aj){B(Y);Ac(Y);Aj.remove();}}function d(){var Aj=this,Y;if(!Aj.isLozengeHighlighted){return;}Y=Aj.composeView.baseNode.all(".hLozenge.focus");Y.removeClass(z);B(y.all("#to-field, #cc-field, #bcc-field"));Aj.allLozengesSelected=false;Aj.isLozengeHighlighted=false;}function Ag(Aj,Y){var Al=this;Al._removeLozengeHighlights();Aj.toggleClass(z);Al.isLozengeHighlighted=true;var Ak=Aj.one(".lozenge-static").generateID();Y.setAttrs({"aria-owns":Ak,"aria-activedescendant":Ak});if(!y.UA.ie&&Al.composeView.type=="fullCompose"){Aj.scrollIntoView();}}function s(Y){var Al=this,Ak=Y.ancestor("ul"),Aj=Ak.all(".hLozenge");if(Aj){Aj.addClass(z);Al.isLozengeHighlighted=true;}Al.allLozengesSelected=true;}function Af(Y){var Am=this,Ak,Aj,Al;Ak=Y.ancestor();Aj=AZ(Y.get("value"));if(!AZ(Aj)){Y.set("value","");return;}if(Aj&&Aj.indexOf('"')>-1){Al=X(Aj);}else{if(Aj.lastIndexOf(",")===(Aj.length-1)){Aj=Aj.substring(0,Aj.length-1);}Al=Aj.split(/[;,]+/);}Am._makeLozenges(Al,Ak);AY(Y);Y.set("value","");if(NeoConfig.isFresh){Am.checkOtherLozengeBoxes();}}function Ae(Ao,Am){var Ap=this,Aj,Y=Ao.length,Ak,An,Al;for(Aj=0;Aj<Y;Aj++){Ak=Ao[Aj];AZ(Ak);if(Ak){An=AT(Ak);Al=Ap._createLozenge(An);Am.insert(Al,Am);Ap.composeView._setDirty();}}if(NeoConfig.isFresh){Ap.composeView._showSendBtn(true);}}function AW(Am){var Ap,Al;if(!Am){return null;}Am.name=Am.name||Am.email;if(strings.str_cfg_tog_compose_enable_nickname){var Y=a.getContactsByEmail(Am.email),Ak;if(Y){Ak=a.getFirstFieldValue(Y[0],"nickname");if(Ak){Am.isNN=true;Am.name=Ak;}}}if(!Ap){Ap={email:Am.email,firstName:Am.name||Am.email};}if(Am.fail){Al=strings.str_comp_error_email_lozenge_attr;}else{Al=Am.email;}var Aj,Ao={label:E(Am.name),hover:E(Al),state:Am.fail?"error":"normal",data:Am,menu:null,edit:true,copy:true};Aj=new y.comms.ui.Lozenge(Ao);var An=Aj.getNode();An.set("role","presentation");return An;}function AL(Ao){var Ap=Ao.getData("lozenge");var Al=Ap.data;var An=Ap.error;if(strings.str_cfg_tog_compose_enable_nickname){if(Al.name&&Al.isNN){var Ak=y.contacts.utils,Aj=Ak.getContactsByEmail(Al.email),Am,Y;Am=Ak.getFirstFieldValue(Aj[0],"name");Y=Am?(Am.familyName+" "+Am.givenName):"";Al.name=Y;}}if(An){this.currentAddress=Al.email;this.validAddress=false;}else{this[this.currentField].push(Al);}}function AD(){var Ar=this,Am={to:[],cc:[],bcc:[],validAddress:true,currentAddress:"",currentField:""},Ap,At,Au,Ao,Av,As,Ak,Y,Aj,Aq,An,Al;Ap=Ar.composeView.baseNode.one(".cm-to.ac-input").all(".hLozenge");Am.currentField="to";Ap.each(AL,Am);At=Ar.composeView.baseNode.one(".cm-cc.ac-input").all(".hLozenge");Am.currentField="cc";At.each(AL,Am);Au=Ar.composeView.baseNode.one(".cm-bcc.ac-input").all(".hLozenge");Am.currentField="bcc";Au.each(AL,Am);Av=((AV.get("externalAccounts")||{}).extAccount||[]).length;As=((AV.get("aliases")||{}).alias||[]).length;Ak=((AV.get("disposableAddresses")||{}).deaName||[]).length;if((Av>0)||(As>0)||(Ak>0)){if(Ar.composeView.type&&Ar.composeView.type==="inlineCompose"){Am.from={email:Ar.composeView.cdo.get("header").from.email,name:Ar.composeView.cdo.get("header").from.name};}else{Y=Ar.composeView.baseNode.one(".from-select").get("value");Aj=Y.lastIndexOf("<");
Aq=Y.lastIndexOf(">");An=Y.substring(Aj+1,Aq);Al=Y.substring(0,Aj-1);Am.from={email:An,name:Al};}}else{Am.from={email:AV.get("userSendPref.defaultFromAddress"),name:AV.get("userSendPref.defaultFromName")};}Ao=Ar.composeView.baseNode.one(".cm-subject-field");if(Ao){Am.subj=Ao.get("value");}else{Am.subj=Ar.composeView.cdo.get("header").subject;}return Am;}function O(Ar){var An=this,Al=An.composeView,Ak,At,As,Aq=Al.type=="inlineCompose"?Al.baseNode.one(".thread-recipients"):null,Ao="",Y=[],Am={to:{list:Ar.to,node:".cm-to-field"},cc:{list:Ar.cc,node:".cm-cc-field"},bcc:{list:Ar.bcc,node:".cm-bcc-field"}},Ap=function(Au){var Av={to:r.getConvName(Au),email:r.getAddress(Au)};return Av;};function Aj(Aw,Ax){var Av=Al.baseNode.one(Ax),Au=Av.ancestor("li");if(Aq&&Ax!=".cm-bcc-field"){Y=Y.concat(Aw);}y.Array.each(Aw,function(Ay){Ak=An._createLozenge({name:Ay.name,email:Ay.email});Au.insert(Ak,Au);Al._setDirty();});AY(Av);}for(As in Am){if(Am[As].list){Aj(Am[As].list,Am[As].node);}}if(Aq){Ao=r.createRecipientList(Y,Ab._shared_module_thread_thread_display_rollup.recipients1,null,null,Ap);Aq.setContent(Ao);}if(Am.cc.list&&Am.cc.list.length!=0&&NeoConfig.isFresh){An._bccSwitch(true,false,"cc");}if(Am.bcc.list&&Am.bcc.list.length!=0){An._bccSwitch(true,false,"bcc");}if(Al.type=="fullCompose"){if(Ar.from){An._setFromMenu(Ar.from);}if(Ar.subject){Al.baseNode.one(".cm-subject-field").set("value",Ar.subject);Al._setDirty();}}if(NeoConfig.isFresh){An.checkOtherLozengeBoxes();}}function C(Aj){var Al=this,Y=Al.composeView.baseNode.all("div.ac-input input"),Ak=Al.composeView.baseNode.all("div.subject input");if(Aj){Y.removeAttribute("readOnly");Ak.removeAttribute("readOnly");}else{Y.setAttribute("readOnly",true);Ak.setAttribute("readOnly",true);}}function c(Ak){var An=this,Am,Aj=Ak.name+" "+"<"+Ak.email+">",Y=An.composeView.baseNode.one(".from-select"),Al=Y.all("option").getDOMNodes();for(Am=0;Am<Al.length;Am++){if(Al[Am].value==Aj){Y.set("value",Aj);}}}function i(Y,As,An,Au){var Am=this,Aq,Ak,Al,Ar=strings.str_tog_loadRTLCss?"rtl":"ltr",Av,Aj=An.fromNameDir||Ar,At,Ao=An.fromName||"",Ap=An.address||"";if(!Ao&&strings.str_cfg_tog_use_default_fromname){Ao=Au;}if(NeoConfig.bidi){At=(Aj==="rtl"?"\u202B":"\u202A")+Ao+"\u202C";Av=(Ar==="rtl"?"\u202B":"\u202A")+"\u200E&lt;"+Ap+"&gt;\u200E\u202C";Al=AR(At)+" "+Av;}else{Al=AR(Ao,Z)+" &lt;"+Ap+"&gt;";}if(Ap){Aq=Q(x,{isDefault:An.isDefault,address:Al},Am.composeView.formatters,null,strings);Ak=Aq.toLowerCase();Y.push(Ak);As[Ak]=Aq;}}function AM(){var Ay=this,A0,Ak,A4=[],A1=(AV.get("aliases")||{}).alias||[],Ap=A1.length,Ao=AV.get("userSendPref"),Aj,A5="",Y,Aq,Az,At=strings.str_tog_loadRTLCss?"rtl":"ltr",Au=AV.get("externalAccounts")||{},Av=(AV.get("disposableAddresses")||{}).deaName||[],Al=Av.length,Ar=Au.extAccount||[],A2=Ar.length,Aw=Ay.composeView.baseNode.one(".from-select"),Am={},As,An,A3=false;if(Ao){A5=Ao.defaultFromName||"";}for(A0=0;A0<A2;A0++){Ak=Ar[A0];if(Ak&&Ak.mailFromAllowed){Ay._buildFromAccount(A4,Am,Ak,A5);if(!A3){A3=Ak.isDefault?true:false;}}}for(A0=0;A0<Ap;A0++){Ak=A1[A0];if(Ak){Ay._buildFromAccount(A4,Am,Ak,A5);if(!A3){A3=Ak.isDefault?true:false;}}}for(A0=0;A0<Al;A0++){Ak=Av[A0];if(Ak&&(!strings.tog_check_active_compos||Ak.activeComposition)){Ay._buildFromAccount(A4,Am,Ak,Ak.address);if(!A3){A3=Ak.isDefault?true:false;}}}if(Ao){if(NeoConfig.bidi){Aq=Ao.defaultFromNameDir||At;Y=(Aq==="rtl"?"\u202B":"\u202A")+A5+"\u202C";Az=(At==="rtl"?"\u202B":"\u202A")+"\u200E&lt;"+Ao.defaultFromAddress+"&gt;\u200E\u202C";Aj=AR(Y)+" "+Az;}else{Aj=AR(A5,Z)+" "+"&lt;"+Ao.defaultFromAddress+"&gt;";}As=Q(x,{isDefault:(A3)?false:true,address:Aj},Ay.composeView.formatters,null,strings);An=As.toLowerCase();A4.push(An);Am[An]=As;}if(A4.length>(Ao?1:0)){Ay.composeView.baseNode.one("div.account-select").removeClass(AF);}A4=A4.sort(function(A7,A6){if(A7<A6){return -1;}if(A7>A6){return 1;}return 0;});var Ax=[];for(A0 in A4){Ax.push(Am[A4[A0]]);}Aw.setContent(Ax.join(""));y.later(10,Ay,function(A6){if(A6>-1){Aw.set("selectedIndex",A6);}},Aw.all("option").indexOf(Aw.one(".nsel")));}function AC(){var Y=this;Y.hdr=Y.composeView.baseNode.one("div.compose-header")||Y.composeView.baseNode.one(".thread-reply-to-edit");Y._bindUIHeader();if(Y.composeView.type=="fullCompose"){Y._buildFromMenu();}}function AQ(Ak,Aj){var Al=this,Y=F.get(Ah),Aj=Aj||"";Al._bccSwitch(Y,false);if(NeoConfig.isFresh){}}function AI(Am){var Al,Ak,Aj,Y=-1;if(typeof Am.get("selectionEnd")==="number"){Y=Am.get("selectionEnd");}else{if(document.selection&&document.selection.createRange){Al=document.selection.createRange();Al.moveStart("character",-Am.get("value").length);Y=Al.text.length;}}return Y;}function h(Y,Al){Al=Al||"bcc";var An=this,Am=An.composeView.baseNode,Ak=Am.one(".cm-"+Al+".ac-input").all(".hLozenge"),Aj=Am.one(".cm-"+Al+"-field");key=(Al==="bcc")?Ah:Aa;if(Y||(Ak.isEmpty()&&Aj.get("value").length==0)){An._bccSwitch(Y,true,Al);F.set(key,Y);}else{An.composeView.confirm(null,strings["str_comp_conf_"+Al],function(){Ak.each(function(Ao){Ao.remove();An.composeView._setDirty();});Aj.set("value","");An._bccSwitch(false,true,Al);F.set(key,false);});}An.composeView._resizeRTE();}function AS(Aq,Ao,Ak){var Am=this,Ak=Ak||"bcc",Aj=Am.composeView.baseNode.all(".cm-btn-show-"+Ak),Ar=Am.composeView.baseNode.one(".cm-"+Ak+"-group");if(typeof Ao=="undefined"){Ao=true;}if(Aq){Ar.removeClass(AF);Aj.addClass(AF);Ao&&Am.composeView.setFocus(Ak);}else{Ar.addClass(AF);Aj.removeClass(AF);Ao&&Am.composeView.setFocus(Ak);}if(NeoConfig.isFresh){var Al=Am.composeView.baseNode.one(".btn-bcc-in-to"),Y=Am.composeView.baseNode.one(".cm-bcc-group"),Ap=Am.composeView.baseNode.one(".cm-cc-group"),An=Am.composeView.baseNode.one(".btn-bcc-in-cc");if(Y.hasClass(AF)){if(Aq){Al.addClass(AF);An.removeClass(AF);}else{if(Ap.hasClass(AF)){Al.removeClass(AF);An.addClass(AF);}else{Al.addClass(AF);An.removeClass(AF);}}}}Am._reposAttachObj(T);}function Ai(Y){var Aj=this;if(NeoConfig.isCorpmail){y.use("ac-corp-widget",function(Ak){Aj._initAutoComplete2(Y);});
}else{Aj._initAutoComplete2(Y);}}function u(An){var Ak={"to-field":".cm-to","cc-field":".cm-cc","bcc-field":".cm-bcc"},Ao=this,Al=NeoConfig.isCorpmail?o.ui.ACCorpWidget:o.ui.ACWidget,Am=An.get("id");if(Am&&Ak[Am]){An.removeClass("whiteout");var Aj=Ao.composeView.baseNode.one(Ak[Am]);var Y=function(){Ao.listeners.push(y.ACWidgetInst.get("ac").on("ac:query",function(Aw){var Ap=this,Au=Ap.get("dataSource"),At=Aw.value,Av,Ar=this.get("badResult"),As;if(a.areContactsLoaded()){var Aq=new y.comms.FilterContacts();Aq.updateFilterItems(At);Av=Aq.fastMatch();Av.queryStr=At;As=y.bind(Ap.reload,Ap,Av);As(Av);}}));};if(!y.ACWidgetInst){if(Ao.offscreenContent){Ao.offscreenContent.remove();}Ao.offscreenContent=y.Node.create(Q(Ab._shared_module_offscreen_bin_compose.base,{},null,null,strings,Ab));y.one(document.body).append(Ao.offscreenContent);y.ACWidgetInst=new Al({acNode:Aj,acTarget:An,contentBox:"#ac-to-results",selectFirst:true}).setAlign().render();Ao._setACWidgetARIAOwns();y.ACWidgetInst.after("visibleChange",function(As){var Ar=this.get("ac").get("host"),Ap=y.ACWidgetInst.get("contentBox").one("li"),Aq=(As.newVal&&Ap)?true:false;Ar.set("aria-expanded",Aq);if(!Aq){Ar.set("aria-activedescendant","");}});y.ACWidgetInst.after("selectedIndexChange",function(Aq){var Ap="";if(Aq.newVal>-1){Ap=this.get("contentBox").one(".yui3-acwidget-selected").generateID();}this.get("ac").get("host").set("aria-activedescendant",Ap);});Y();}else{if(y.ACWidgetInst.get("ac").get("alignNode")!==Aj){y.ACWidgetInst.get("ac").destructor();y.ACWidgetInst.refresh({acNode:Aj,acTarget:An,width:Aj.getStyle("width"),selectFirst:true}).setAlign().render();Y();Ao._setACWidgetARIAOwns();}}}}function D(){var Al=this,Aj=Al.listeners;if(Aj){var Ak=Aj.length,Y;for(Y=0;Y<Ak;Y++){if(Aj[Y]){Aj[Y].detach();}}Aj.length=0;}if(Al.lozengeDD){Al.lozengeDD.destroy(true);}if(Al.hdr){Al.hdr.detachAll();Al.hdr.remove();}J.superclass.ondestroy.call(Al,arguments);}function U(Aj){var Al=this,Y=Aj.target,Ak=Y.ancestor("div.ac-input",false);if(Ak){Al.composeView.focusNode=Ak.get("id");Ak.addClass(z);Ak.get("parentNode").addClass("active");}if((Y.hasClass("cm-to-field"))||(Y.hasClass("cm-cc-field"))||(Y.hasClass("cm-bcc-field"))){Al.composeView._registerFocus(Y);Al._initAutoComplete(Y);if(NeoConfig.isFresh){Al.checkOtherLozengeBoxes();}}}function AX(Y){if(!(y.one("div.ac-results:hover")||y.one("div.ac-results li.over"))){q();this._lozengeIt(Y);}}function m(Ak){var Am=this,Aj=Ak.target,Y=Am.composeView.cdo;if(Aj.hasClass("cm-to-field")||Aj.hasClass("cm-cc-field")||Aj.hasClass("cm-bcc-field")){Ak.halt();this.handleACBlur(Aj);}else{if(Aj.get("id")==="subject-field"){var Al=Aj.get("value");if(Al&&Al!==""){if(Y.oComposeData&&Y.oComposeData.header&&typeof Y.oComposeData.header.subj!=="undefined"&&Y.oComposeData.header.subj!==Al){Am.composeView._setDirty();}}}}}function A(Al,Aq){var Aj=this,Am=Al.target,As=Al.keyCode,Ar,Ak,Y=Am.ancestor("div"),An=Y.one(".hLozenge.focus"),Ao=Am.get("value"),Ap=Am.get("id");if(Ap){Ar={"to_add_contacts":"to","cc_show_btn_in_to":Aq.one("#to_add_contacts"),"bcc_show_btn_in_to":Aq.one("#cc_show_btn_in_to"),"cc_add_contacts":"cc","cc_hide_btn":Aq.one("#cc_add_contacts"),"bcc_show_btn_in_cc":Aq.one("#cc_hide_btn"),"bcc_add_contacts":"bcc","bcc_hide_btn":Aq.one("#bcc_add_contacts")};Ak={"cc_add_contacts":Aq.one("#cc_hide_btn"),"cc_hide_btn":Aq.one("#bcc_show_btn_in_cc"),"bcc_add_contacts":Aq.one("#bcc_hide_btn"),"to-field":Aq.one("#to_add_contacts"),"to_add_contacts":Aq.one("#cc_show_btn_in_to"),"cc_show_btn_in_to":Aq.one("#bcc_show_btn_in_to"),"cc-field":Aq.one("#cc_add_contacts"),"bcc-field":Aq.one("#bcc_add_contacts")};if(Am.get("nodeName")==="A"||(!Ao&&!An)||(Ao&&AI(Am)===Ao.length)){focusNode=(As===37?Ar[Ap]:Ak[Ap]);if(focusNode){Aj.composeView.setFocus(focusNode);return;}}}if(!Am.get("value")){Al.preventDefault();if(An){if(As==37){nextLozenge=An.previous();}else{nextLozenge=An.next();if(!nextLozenge.hasClass("hLozenge")){nextLozenge=null;Aj._removeLozengeHighlights();Am.removeClass("whiteout");}}if(nextLozenge){Aj._removeLozengeHighlights();Aj._selectSingleLozenge(nextLozenge,Am);}}else{if(As==37){listItem=Am.ancestor();nextLozenge=listItem.previous();if(nextLozenge){Aj._removeLozengeHighlights();Aj._selectSingleLozenge(nextLozenge,Am);Am.addClass("whiteout");}}}}}function p(An){var Ap=this,Am=An.keyCode,Al=An.target;if(!Al.get("value")){var Ak=Al.ancestor(),Aj=Al.ancestor("div"),Ao=Aj.all(".hLozenge.focus"),Y=Ao.size();An.halt();if(Ap.allLozengesSelected){Ap.removeAllLozenges(Al);Al.removeClass("whiteout");return;}if(Y){Ap.removeARIAFocus(Al);Ap.removeARIADescription(Al);if(Y==1){focusedLozenge=Ao.item(0);nextLozenge=focusedLozenge.next();if(nextLozenge==Ak){nextLozenge=focusedLozenge.previous();}if(nextLozenge){Ap._selectSingleLozenge(nextLozenge,Al);}else{Al.removeClass("whiteout");}}else{Al.removeClass("whiteout");}Ap.composeView._setDirty();Ao.detachAll();Ao.remove();Ao=null;}else{if(Am==8){nextLozenge=Ak.previous();if(nextLozenge){Ap._removeLozengeHighlights();Ap._selectSingleLozenge(nextLozenge,Al);Al.addClass("whiteout");}}}if(NeoConfig.isFresh){Ap.checkOtherLozengeBoxes();}}}function j(){var Am=this,Ak=Am.composeView.baseNode.one(".cm-to.ac-input").all(".hLozenge").size(),Y=Am.composeView.baseNode.one(".cm-cc.ac-input").all(".hLozenge").size(),Al=Am.composeView.baseNode.one(".cm-bcc.ac-input").all(".hLozenge").size(),Aj=0;Aj=Ak+Y+Al;Am.totalLozenges=Aj;return Aj;}function AU(){var Aj=this,Y=Aj.lozengeCount();if(Y<=0){Aj.composeView._showSendBtn(false);}else{Aj.composeView._showSendBtn(true);}}function N(){var Y=y.ACWidgetInst;return(Y&&Y.isVisible()&&(Y.get("data").length>0||(NeoConfig.isCorpmail&&Y.get("gabData").length>0)));}function e(Ak,Ao){var An=this,At=y.ACWidgetInst,As=Ak.decodeCategory(Ao.get("value"));if(As){function Ar(A0,Az,Ax,Ay,Aw){switch(Az){case"amp":if(Ax){return Ar(A0,Ax,"",Ay+5,Aw);}return"&";case"#39":return"'";case"quot":return'"';case"lt":return"<";case"gt":return">";case"#35":return"#";default:return"";
}}var Au,Aq=[];for(Au in As){var Ap=As[Au];if(Ap){var Aj="",Al=Ap.firstname&&AR(Ap.firstname),Av=Ap.middlename&&AR(Ap.middlename),Am=Ap.lastname&&AR(Ap.lastname),Y=Ap.nickname&&AR(Ap.nickname);Aj=At.buildName(Al,Av,Am,Y);Aj=Aj+"("+Ap.email+")";Aq.push(Aj.replace(/&((?:[a-zA-Z]+)|(?:#[0-9]+));(?:([a-zA-Z]+|(?:#[0-9]+));)?|([;,])/gi,Ar));}}An._makeLozenges(Aq,Ao.ancestor());An.addARIADescription(Ao);Ao.set("value","");}else{An._lozengeIt(Ao);}}function f(An){var Am=this,Ao=An.target,Aq=An.shiftKey,Aj=An.ctrlKey,Ap=An.metaKey,Y=An.altKey,As=(y.UA.os=="macintosh")?Ap:Aj,Ar=y.ACWidgetInst;if(Ao.get("nodeName")==="A"||(Aj||Ap)){return;}var Ak=new y.comms.FilterContacts();if(Am.canACWidgetInstHandleEnter()){Ar.handleEnter(An,Ar);}else{Ak.updateFilterItems(Ao.get("value"));var At=Ak.fastMatch();if(At&&At.length){var Al=At[0],Au=P(Ar.getItemMarkup(Al));Au.one("span.ac-remove-item").remove();Ao.set("value",Au.get("text"));}else{}}An.halt();if(!Ao.get("value")){An.preventDefault();addressField=Ao.ancestor("div");focusedLozenge=addressField.one(".hLozenge.focus");if(focusedLozenge){focusedLozenge.getData("lozenge").startEdit();}return;}Am.setACCategory(Ak,Ao);}function g(An){var Am=this,Ao=An.target,Aq=An.shiftKey,Aj=An.ctrlKey,Ap=An.metaKey,Y=An.altKey,Au=(y.UA.os=="macintosh")?Ap:Aj,At=y.ACWidgetInst,Al,As,Ak=(Al=At.get("data"))&&Al.length,Ar=(As=At.get("gabData"))&&As.length;if((Aj||Ap)||!Ao.get("value")){return;}if(Ak>=2||Ar>=2){return;}else{if(Ak==1||Ar==1){An.halt();if(At&&At.isVisible()){Ao.simulate("keydown",{keyCode:13});}}else{An.halt();Am._lozengeIt(Ao);}}}function R(Ak){var An=this,Aj=Ak.target,Am=Ak.ctrlKey,Al=Ak.metaKey,Y=(y.UA.os=="macintosh")?Al:Am;if((!Am&&!Al)||Aj.get("value")){return;}Ak.halt();An._selectAllLozenges(Aj);Aj.addClass("whiteout");}function b(Am){var Al=this,An=Am.target,Ap=Am.shiftKey,Aj=Am.ctrlKey,Ao=Am.metaKey,Y=Am.altKey,Ar=(y.UA.os=="macintosh")?Ao:Aj,Aq=y.ACWidgetInst,Ak=(data=Aq.get("data"))&&data.length;if(!An.get("value")&&!Aq.isVisible()){return;}if(!Aj&&!Ao&&!Y){if(Ak>=1){Am.halt();}Al.composeView.keepHdrFocus=true;An.simulate("keydown",{keyCode:13});}}function V(Al,Ap){var Ao=this,Ak=Al.target,An=Al.ctrlKey,Am=Al.metaKey,Aj=(y.UA.os=="macintosh")?Am:An;function Y(){var Aq=Ak,At=Ao.hdr,As=n.ui.MessagePaneUtils,Ar="";At.all("li.focus").each(function(Au){Ar+=Au.one("input").get("value");Ar+="; ";});if(Ar!=""){Ar=Ar.substring(0,Ar.length-1);As.initializeCopyText();As.copyToClipboard(Ar,null,document.activeElement);}}if(Aj){Al.stopPropagation();Y();}}function AE(Ak){var An=this,Aj=Ak.target,Am=Ak.ctrlKey,Al=Ak.metaKey,Y=(y.UA.os=="macintosh")?Al:Am;if(Y){setTimeout(function(){An.updateTextField(Aj);},0);}}function AK(Al){var Ao=this,Ak=Al.target,Y=Al.shiftKey,An=Al.ctrlKey,Am=Al.metaKey,Aj=(y.UA.os=="macintosh")?Am:An;Ak.removeClass("whiteout");if(!(Aj||Y)){Ao._removeLozengeHighlights();}}function AP(Al){var Am=this,Ak=Al.target;if(Ak.hasClass("cm-to-field")||Ak.hasClass("cm-cc-field")||Ak.hasClass("cm-bcc-field")){var Y=Am.composeView.baseNode.one(".ac-input.focus .recipient-input input"),Aj=Am.totalLozenges;if(Y===null&&Aj<=0){Am.composeView._showSendBtn(false);}else{if(Y.getDOMNode().value===""&&Aj<=0){Am.composeView._showSendBtn(false);}else{Am.composeView._showSendBtn(true);}}}}function M(Am){var Ak=this,Aq=Ak.hdr,As=Am.keyCode,Ao=Am.shiftKey,Aj=Am.ctrlKey,An=Am.metaKey,Y=Am.altKey,Ap=(y.UA.os=="macintosh")?An:Aj,Ar,Al=Am.target;if(Al.hasClass("cm-subject-field")||Al.hasClass("cm-to-field")||Al.hasClass("cm-cc-field")||Al.hasClass("cm-bcc-field")||Al.get("nodeName")==="A"){if((As===83||(As===89&&Ao)||(As===85&&Ao))&&(Aj||An)||As===27){Ak.composeView.author?Ak.composeView.author.onKeyDown(Am):Ak.composeView.onKeyDown(Am);return;}else{if(Al.hasClass("cm-subject-field")){Ar=(Aj||An)&&(!Y&&!Ao)||As==9;if(!Ar||(Ap&&As==86)){Ak.composeView._setDirty();}if(As==9&&!Ao){Al.blur();Ak.composeView.setFocus("body");Am.halt();}return;}else{switch(As){case 37:case 39:Ak.handleLeftRightArrow(Am,Aq);break;case 8:case 46:Ak.handleDelete(Am);break;case 13:Ak.handleEnter(Am);break;case 32:Ak.handleSpacebar(Am);break;case 65:Ak.handleSelectAll(Am);break;case 38:break;case 9:Ak.handleTab(Am);break;case 67:Ak.handleCopy(Am,Aq);break;case 86:Ak.handlePaste(Am);break;default:Ak.handleDefaultKeydown(Am);}}}}}function H(){var Ak=this,Aj=Ak.hdr,Y=Ak.listeners;Y.push(Aj.on("blur",Ak.setInputBlur,Ak));Y.push(Aj.on("keydown",Ak.keyHandler,Ak));if(NeoConfig.isFresh){Y.push(Aj.on("keyup",Ak.sendEnableKeyHandle,Ak));}Y.push(Aj.on("change",function(Am){var Al=Am.target;if(Al.hasClass("cm-to-field")||Al.hasClass("cm-cc-field")||Al.hasClass("cm-bcc-field")){Ak.composeView._setDirty();}}));}function AB(){var Aw=this,Y=Aw.composeView.baseNode,Ao=Y.one("input.cm-subject-field"),At=Y.one("input.cm-to-field"),Au=Y.one("input.cm-cc-field"),Ay=Y.one("input.cm-bcc-field"),Al=Aw.hdr,Aq,Aj,Ax,Ak,Am,An,Az,Ar,Ap,As,Av;Aw._bindAutoComplete();Aw.listeners.push(y.on("lozenge:highlight",function(A0){Aw.isLozengeHighlighted=true;}));if(NeoConfig.useDD&&Aw.composeView.type=="fullCompose"){y.use("common-ui-lozengeDD",function(A0){A0.Lang.later(0,0,function(){Aw.lozengeDD=new A0.common.ui.lozengeDD({composeView:Aw.composeView,dragSelector:".ac-input"});});});}Aw.listeners.push(Al.on("focus",U,Aw));if(Aw.composeView.type=="fullCompose"){Aw.listeners.push(Ao.after("focus",function(){Ao.ancestor("div").addClass(z);Aw.composeView._registerFocus(Ao);}));Aw.listeners.push(At.after("blur",function(){At.ancestor("div").removeClass(z);})),Aw.listeners.push(Au.after("blur",function(){Au.ancestor("div").removeClass(z);})),Aw.listeners.push(Ay.after("blur",function(){Ay.ancestor("div").removeClass(z);})),Aw.listeners.push(Ao.after("blur",function(){var A0=Aw.composeView.author;A0.setSubjectAsTitle();}));}Aw.listeners.push(Al.delegate("click",function(A2){A2.halt();Aw._reposAttachObj(Ad);var A0={"to_add_contacts":".cm-to","cc_add_contacts":".cm-cc","bcc_add_contacts":".cm-bcc"},A1={wspath:NeoConfig.socdirProxyPath,guid:NeoConfig.neoguid,wssid:NeoConfig.wssid,requestFn:y.common.net.SessionMgr.requestProxy,selectAll:false,lookForSelect:true,lookForInput:true,onDone:function(A8,A9){var A5,BA,A7,A6=A9.one("a").get("id");
allLozenges=Aw.composeView.baseNode.one(A0[A6]).all("li"),hiddenLi=allLozenges.item(allLozenges.size()-1);for(A5 in A8){BA={name:A8[A5].name,email:E(A8[A5].field.value)};A7=Aw._createLozenge(BA);Aw.composeView._setDirty();hiddenLi.insert(A7,hiddenLi);}Aw._reposAttachObj(AH);Aw.composeView._restoreFocus();},onCancel:function(){Aw._reposAttachObj(AH);}};y.use("contacts-ui-choosecontactdialog",function(A5){if(!Aw.composeView.cancelDialogLoad){A5.fire("ccd:create",A1,A2.currentTarget);}});var A4=A2.currentTarget.one("a").get("id"),A3="addbcc";if(A4==="to_add_contacts"){A3="addrec";}else{if(A4==="cc_add_contacts"){A3="addcc";}}y.fire("mt:click",{action:"cmps_"+A3,append:{t1:"cmpsTb"}});},".btn-kiosk-choosecontact"));Aw.listeners.push(Al.delegate("click",function(A3){var A2=A3.target,A1=A3.currentTarget,A5=A1.getElementsByTagName("INPUT"),A0=A5.item(A5.size()-1),A4;if(A2.hasClass("lozenge-edit")){return;}A4=A1.get("scrollTop");A0.focus();if(A2.hasClass("lozenge-static")||A2.hasClass("lozenge-edit")){A1.set("scrollTop",A4);A0.addClass("whiteout");}else{A0.removeClass("whiteout");Aw._removeLozengeHighlights();A1.set("scrollTop",A1.get("scrollHeight"));}},"div.ac-input"));Aw.listeners.push(Al.on("keyup",function(A3){var A4=A3.target,A1=A4.get("value"),A2=A1.length,A0=A1[A2-1];if(!(A4.hasClass("cm-to-field")||A4.hasClass("cm-cc-field")||A4.hasClass("cm-bcc-field"))){return;}if(A2>0){Aw.composeView._setDirty();}if(A0===";"||A0===","){A3.halt();A1=AZ(A1);if(A1.length==1){A4.set("value","");return;}if(!A1){return;}Aw._lozengeIt(A4);}Aw.updateTextField(A4);Aw._reposAttachObj(T);}));}function G(Y,Aj){var Ak=Y.action==I;if(Ak){Aj.removeClass("ico-thread-reply");Aj.addClass("ico-thread-reply-all");}else{Aj.removeClass("ico-thread-reply-all");Aj.addClass("ico-thread-reply");}}function t(){var Am=this,Aq=Am.composeView.cdo.oComposeData.origin,Y=Am.composeView.baseNode,Aj,An=Y.one(".cm-to-field"),Ap=Y.one(".cm-cc-field"),Al=Y.all(".replyall-toggle-btn a"),Ak=Aq.action||0,Ao;if(Ak!=I&&Ak!=AJ){return;}if(Ak==I){Aq.action=AJ;Al.set("text",strings.str_comp_btn_reply_all);AG.rocketstats.stat("SwitchReplyMode","Reply_To_Sender");y.fire("mt:click",{action:"cmps_rplysndr",append:{t1:"cmpsTb"}});}else{Aq.action=I;Al.set("text",strings.str_comp_btn_reply_sender);AG.rocketstats.stat("SwitchReplyMode","Reply_All");y.fire("mt:click",{action:"cmps_rplyall",append:{t1:"cmpsTb"}});}if(Am.composeView.type=="inlineCompose"){G(Aq,Al);}Am.removeAllLozenges(An);Am.removeAllLozenges(Ap);Ao=K.getHeaderContent(Aq);Aj=Y.one(".cm-subject-field");if(Aj){Ao.subject=Aj.get("value");}Am.setHeader(Ao);Am.composeView._restoreFocus();}function v(){var Av=this,Ak=Av.hdr,Au,Aw,Al=Av.composeView.cdo.oComposeData.origin,Ay=Al&&Al.oMsg&&Al.oMsg.header,Ar=Al&&Al.oMsg&&Al.oMsg.body,Ap=Ay&&((Ay.to?Ay.to.length:0)+(Ay.cc?Ay.cc.length:0))||0,Ax=Al.action,Ao,An,Am,Y=Av.composeView.baseNode,As=Y.all(".replyall-toggle-btn"),Az,Aj={},A1,At,Aq=1,A0;if(Al.fid=="Sent"&&Ax==AJ){Al.action=I;}if((Ax!=I&&Ax!=AJ)||!Ar||!Ap){return;}if(Ay.replyto){A0=Ay.replyto.length;for(Az=0;Az<A0;Az++){Aj[Ay.replyto[Az].email]=1;}}A1=Ay.to.concat(Ay.cc);Ao=Av.getAllAccountEmails()||{};A0=A1.length;for(Az=0;Az<A0;Az++){An=A1[Az].email||"";if((At&&An!=At)||(A0==1&&!(An in Ao||An in Aj))){Aq=0;}At=An;if((An in Ao||An in Aj)&&!Am){Am=0;}else{Am=1;}}if(Ax&&Am&&!Aq&&Y.one(".replyall-toggle-btn")&&Al.fid!="Sent"){As.removeClass("hidden");Au=Ak.one("#to");Aw=Ak.one(".address-btns");if(Aw&&Au.getX()+Au.get("clientWidth")+Aw.get("clientWidth")+20>Ak.get("clientWidth")+Ak.getX()){As.addClass("hidden");return;}if(Av.composeView.type=="inlineCompose"){G(Al,Y.all(".replyall-toggle-btn a"));}Av.listeners.push(Y.delegate("click",t,".replyall-toggle-btn a",Av));}}y.extend(J,n.ui.BaseWidget);y.mix(J.prototype,{NAME:"HeaderBase",render:AC,getHeader:AD,setHeader:O,enableHeader:C,getAllAccountEmails:L,allowEditing:AQ,_bindUIHeader:AB,setInputFocus:U,setInputBlur:m,keyHandler:M,lozengeCount:j,sendEnableKeyHandle:AP,handleACBlur:AX,handleLeftRightArrow:A,handleDelete:p,handleEnter:f,handleSpacebar:g,handleTab:b,handleSelectAll:R,handleCopy:V,handlePaste:AE,handleDefaultKeydown:AK,setACCategory:e,canACWidgetInstHandleEnter:N,checkOtherLozengeBoxes:AU,_bindAutoComplete:H,ondestroy:D,destroy:D,hideACWidget:q,_cmdBccSwitch:h,_reposAttachObj:AO,_setFromMenu:c,removeAllLozenges:AA,_removeLozengeHighlights:d,_createLozenge:AW,enableSwitchReplyButton:v,switchReplyMode:t,_lozengeIt:Af,_makeLozenges:Ae,_selectSingleLozenge:Ag,_selectAllLozenges:s,_tokenizeAddresses:X,removeARIAFocus:B,_setACWidgetARIAOwns:S,removeARIADescription:Ac,addARIADescription:AY,updateTextField:k,_buildFromAccount:i,_buildFromMenu:AM,createAddress:AT,_initAutoComplete:Ai,_initAutoComplete2:u,_bccSwitch:AS,getCursorLocation:AI,_ccSwitch:function(){}},true);y.namespace("mail.compose");n.compose.HeaderBase=J;},"1.0.0",{requires:["comms-ui-lozenge","ac-widget","_shared_module_offscreen_bin_compose","mail-controller-compose","mail-controller-compose-text","contacts-api","_shared_module_compose_message_header","_shared_module_compose_message_header_fresh","mail-ui-basewidget"]});YUI.add("mail-ui-mailcompose",function(E){var U=E.common.Utils.substitute,W=E.Lang.trim,M=E.Node.create,b=E.mail.Controller.Compose,K=E.common.persist.UserData,F=E.common.Utils,J=E.ui.Templates,G=(NeoConfig.isFresh)?J._shared_module_compose_message_header_fresh:J._shared_module_compose_message_header;var X=function(Y,c,e,d){var f=this;f.header=new E.mail.compose.HeaderBase(Y,f);f.cdo=Y;f.isDraft=c;f.title=(NeoConfig.isFresh)?strings.str_tabs_compose_fresh:strings.str_tabs_compose;f.parent=null;f.baseNode=null;f.compArea=null;f.loadingArea=null;f.type="compose";f.dirty=false;f.focusNode=null;f.author=e;f.attachmentsLoading=[];f.attView=null;f.loadingTimer=null;f.allowEdit=false;f.allowSend=true;f.richFontInfo={fontFamily:null,fontSize:null};f.draftMID=null;f.saveTimer=null;f.hasHardDraft=false;f.blockSave=false;f.lastSave=null;f.lastSaveType=null;f.isSending=false;f.isSaving=false;f.cancelDialogLoad=false;f.contentLoaded=false;f.stopwatch=d?d.stopwatch:null;f.suppressDialog=false;f.formatTmpl=J._shared_module_rte_well_content_format;f.handles=[];if(NeoConfig.isFresh){f.formatTmpl=J._shared_module_rte_well_content_format_fresh;}f.formatters={page_well_email:function(){return U(J._shared_module_rte_well_tabs_compose.base,{},f.wellTabFormatters,null,strings,J);},page_well_format:function(){return U(f.formatTmpl.base,{},f.formatters,null,strings,J);},page_well_format_fresh:function(){return U(f.formatTmpl.base,{},f.formatters,null,strings,J);},page_well_emoticons:function(){return U(J._shared_module_rte_well_content_emoticons.base,{},f.formatters,null,strings,J);},page_well_attachments:function(){return U(J._shared_module_rte_well_content_attachments.base,{},f.formatters,null,strings,J);},page_compose_email:function(){return U(f.formatTmpl.page_compose_email,{},f.formatters,null,strings,J);},make_reply_all:function(){var i=f.cdo.oComposeData.origin,g=i.action,h={title:(g=="reply_all"||i.fid=="Sent")?strings.str_comp_btn_reply_sender:strings.str_comp_btn_reply_all};return((g!="reply_all"&&g!="reply_sender")?"":U(G.make_reply_all,h,0,0,strings));},spellCheckEnabled:function(){if(strings.str_tog_spellcheckEnabled){return U(f.formatTmpl.spellCheckEnabled,{HiddenClassName:""},f.formatters,null,strings,J);}else{return U(f.formatTmpl.spellCheckEnabled,{HiddenClassName:" hidden"},f.formatters,null,strings,J);}},is_rtl:function(){var g;if(NeoConfig.bidi){g=strings.str_tog_loadRTLCss?f.formatTmpl.is_rtl:f.formatTmpl.is_rtl_else;return U(g,{},f.formatters,null,strings,J);}else{return"";}},bidi:function(){if(NeoConfig.bidi){return U(f.formatTmpl.bidi,{},f.formatters,null,strings,J);}else{return"";}},page_compose_conversation:function(){return"";},compose_from_address:function(){return U(G.compose_from_address,{},f.formatters,null,strings,J);},timestamp_id:function(){return(new Date()).getTime();},fromSelected:function(g){return(g.isDefault?' selected="selected" class="nsel"':"");},fromAddress:function(g){if(typeof g=="string"){return g;}else{if(typeof g=="object"&&typeof g.address=="string"){return g.address;}}return"";},global_path_img:function(){return NeoConfig.globalPathImg+"/u/assets/img";},display_av_logo:function(){return NeoConfig.avLogoUrl?U(J._shared_module_rte_well_content_file_count.display_av_logo,{},f.formatters,null,strings,J):"";},antivirus_logo_path_img:function(){return NeoConfig.avLogoUrl;},page_compose_email_else:function(){return"hidden";},intl_fonts:function(){function h(l,j){var k=f.formatTmpl;if(NeoConfig.isFresh){k=J._shared_module_rte_well_content_fontname_fresh;}return U(k.intl_fonts,{},{font_value:function(){return l;},font_name:function(){return j;}},null,strings,J);}var g="";if(strings.str_cfg_intl_fonts){var i=E.JSON.parse(strings.str_cfg_intl_fonts);E.Array.each(i,function(j){g+=h(j.value,j.name);});}return g;}};SAVE_TIME_LIMIT=(NeoConfig.autoSaveInSec||120)*1000;X.superclass.constructor.call(f);if(NeoConfig.isFresh){f.addChild(f.header);}f.cdo.after("saveactionChange",function(h){var g=h.newVal;if(g&&f.cdo){if(g.failure<0){f.saveFailure(g);}else{f.saveSuccess(g);}}});};function V(){var Y=this;X.superclass.ondestroy.call(this,arguments);}function L(){var Y=this;return Y.dirty;}function C(){var Y=this;return Y.draftMID==null?false:true;}function I(g,f,e,d,Y){var h=this,c=g?g:strings.str_comp_dialogheader;if(h.suppressDialog===true){e();return;}E.use("common-ui-dialog-helper",function(j){var i={hd:c,bd:f,suppressRestoreFocus:true};j.common.ui.DialogHelper.confirm(i,{ok:{text:Y,handler:e},cancel:{handler:function(){h._restoreFocus();if(d){d();}}}});});if(h.hiliteCP){h.hiliteCP.hide();}if(h.textCP){h.textCP.hide();}}function T(){var e=this,c=e.attachmentsLoading,Y,d;if(NeoConfig.useAttComposerTT&&e.cdo){return !e.cdo.attachments.areAllUploadsDone();}if(!c){return 0;}Y=c.length;for(d=0;d<Y;d++){if((c[d]*1)){return 1;}}return 0;}function S(Y){var c=this;c.focusNode=Y;if(c.author){c.author.set("focusNode",Y);}}function P(){var Y=this;Y.setFocus(Y.focusNode);}function a(){var Y=this;if(!Y.isSending&&!Y.isSaving){Y.fire("compose:dirty");Y.dirty=true;if(!Y.saveTimer){Y.resetSaveTimer();}}}function B(c){var Y=this;if(!c){c=SAVE_TIME_LIMIT;}if(Y.saveTimer){Y.saveTimer.cancel();}if(!NeoConfig.isAMT){Y.saveTimer=E.later(c,Y,function(){Y._invokeSaveDraft({auto:true});},[],false);}}function O(){var Y=this;if(Y.saveTimer){Y.saveTimer.cancel();Y.saveTimer=null;}}function Q(c){var f=this,d,e={},Y;if(f.isSaving&&(!c||!c.forceOverwrite)){return;}else{if(!f.contentLoaded){return;}else{if(typeof c=="undefined"&&!f.dirty){return;}}}c=c||{};if(!c.forceSave){if(c.auto&&(f.blockSave||!f.dirty)){f.resetSaveTimer();return;}}f.isSaving=true;f.blockSave=true;if(!c.retry){d=f.assembleSendBody(true);Y={header:f._getHeader(true),textcontent:d.text,content:d.html};f.cdo.updateData(Y);}c.auto?e.auto=true:"";e.cdo=f.cdo;e.author=f.author;e.mid=f.draftMID;e.saveBeforeSend=(c.saveBeforeSend?c.saveBeforeSend:false);b.save(e);}function H(f){var h=this,d,e,c,Y,g;if(h.cdo==null){return;}d=h.cdo.get("attachments");f=f||{};
if(h.dirty!=="ForceClose"&&!h.areAttachmentsPending()){h.dirty=false;}if(d){if(NeoConfig.useAttComposerTT){E.Array.each(d.getAll(),function(i){e=i.original;if(e){e.mid=f.mid;e.fid="Draft";}});}else{Y=d.length;for(g=0;g<Y;g++){e=d[g].original;if(e){e.mid=f.mid;e.fid="Draft";}}}h.cdo.set("attachments",d);if(h.cdo.get("isRichText")){NeoConfig.hasConv?c=h.baseNode:c=h.getRTEDocNode();c.all("img").each(function(i){var j=i.get("src");if(j.indexOf("ya/download")!=-1&&j.indexOf("fid=Draft")!=-1){j=j.replace(/mid=.*?([&'">])/,"mid="+encodeURIComponent(f.mid)+"$1");i.set("src",j);}});}}h.lastSave=F.dateFormatter(new Date(),strings.str_tog_dateformat_rsstime_l10n);h.lastSaveType=f.auto?1:0;if(h.type==="inlineCompose"){h.updateSaveText();}else{if(h.author.get("active")){h.updateToolbar();}}h.draftMID=f.mid;f.auto?"":h.hasHardDraft=true;h.resetSaveTimer();h.blockSave=false;h.isSaving=false;h.fire("compose:saveSuccess");if(f.sendAfterSave){h._invokeSend(false,{keepDraft:true});}}function D(d,c){var e=this,Y=d?d:strings.str_comp_dialogheader;if(e.allowSend){E.use("common-ui-dialog-helper",function(h){e.allowSend=false;var g={hd:Y,bd:c,suppressRestoreFocus:true};var f=function(){e.allowSend=true;e._restoreFocus();};h.common.ui.DialogHelper.alert(g,{ok:{handler:f},cancel:{handler:f}});});}else{e._restoreFocus();}}function N(d){var e=this,Y=e.lastSaveType;d=d||{};e.lastSaveType=-1;e.blockSave=false;e.isSaving=false;if(Y!==-1){if(!d.mid){e.draftMID=null;e.hasHardDraft=false;}e._invokeSaveDraft({auto:d.auto,forceOverwrite:true,retry:true});return;}if(e.type==="inlineCompose"){e.updateSaveText();}else{if(e.author.get("active")){e.updateToolbar();}}if(!d.auto){var c=e.allowSend;e.allowSend=true;e._alertProblem(strings.str_comp_title_saveasdraftfail,strings.str_comp_saveasdraftfail);e.allowSend=c;}e.fire("compose:saveFail");}function R(){var e=this,Y=e.richFontInfo,d=Y.fontFamily,c=Y.fontSize;if(!d){d=b.getStyleFontFamily(false);}if(!c){c=b.getStyleFontSize(false);}return{fontFamily:d,fontSize:c,foreColor:Y.foreColor,backColor:Y.backColor};}function Z(){var d=this,Y=d.areAttachmentsPending(),c='<span id="{{btnID}}ModalOverlay" class="btn left right {{default}}"><a href="#" data-action="{{btnID}}">{{btnLabel}}</a></span>';E.use("common-ui-dialog-helper",function(e){var m=U(c,{btnID:"SaveDraft","default":"default",btnLabel:(NeoConfig.isFresh?strings.str_comp_savetodrafts_fresh:strings.str_comp_savetodrafts)}),h=U(c,{btnID:"DontSave",btnLabel:(Y?strings.str_comp_closewithoutsaving:strings.str_comp_abandon)}),f=U(c,{btnID:"Continue","default":(Y?"default":""),btnLabel:(Y?strings.str_comp_returntomessage:strings.str_comp_keepwriting)}),k=m+h+f,l=(Y?strings.str_comp_close_attachmentprocessing:strings.str_comp_close_confirm);if(Y){k=f+h;}var g={modal_classes:"lg",hd:strings.str_comp_close,bd:l,ft:k,suppressRestoreFocus:true};var i={SaveDraft:{handler:function(){d._invokeSaveDraft();if(d.header){d.header.hideACWidget();}d.blockSave=true;d.dirty="ForceClose";d._closeAfterWarning(true);}},DontSave:{handler:function(){if(d.header){d.header.hideACWidget();}d.blockSave=true;d.dirty="ForceClose";if(!d.hasHardDraft&&d.draftMID){e.use("mail-controller-messages-ops",function(n){n.mail.Controller.Messages.remove({fid:"Draft",mid:d.draftMID,force:true},{failure:function(){},success:function(){}});});}d._closeAfterWarning(false);}},Continue:{handler:function(){d._restoreFocus();d.blockSave=false;d.cancelDialogLoad=false;}}};var j=function(n){if(n){d.setFocus("to");}e.common.ui.DialogHelper.createCommon(g,i,function(o){o.set&&o.set("adAction","disableRetriggerOnOk");});};if(d.author.tab!=e.mail.Tabs.getActiveTab()){e.mail.Tabs.switchToTab(d.author.tab,j(d.type!=="inlineCompose"));}else{j(d.type!=="inlineCompose");}d.blockSave=true;});}function A(Y){var f=this,e=f.baseNode.one(".attachment-button-attach");f.cancelDialogLoad=true;if(f.hiliteCP){f.hiliteCP.hide();}if(f.textCP){f.textCP.hide();}if(f.dirty==="ForceClose"){return true;}var d=f.isDirty()||(f.draftMID&&!f.hasHardDraft&&!Y),c=f.areAttachmentsPending();if(c){d=f.dirty=1;}if(d){f.showSaveDraftDialog();}else{e&&e.fire("compose:close");}return !d;}E.extend(X,E.mail.ui.BaseWidget);E.mix(X.prototype,{NAME:"MailCompose",isDirty:L,_setDirty:a,_getHeader:function(){return this.header.getHeader();},_setHeader:function(Y){this.header.setHeader(Y);},isSaved:C,areAttachmentsPending:T,resetSaveTimer:B,_canClose:A,showSaveDraftDialog:Z,getRichFontInfo:R,saveSuccess:H,saveFailure:N,_alertProblem:D,_invokeSaveDraft:Q,_cancelSaveTimer:O,_closeAfterWarning:function(Y){},confirm:I,_registerFocus:S,_restoreFocus:P,ondestroy:V},true);E.namespace("mail.ui");E.mail.ui.MailCompose=X;},"1.0.0",{requires:["autocomplete_css","common-persist-user-data","mail-persist-meta-data","_shared_module_compose_message_header","mail-controller-compose","_shared_module_compose_message_header_fresh","mail-ui-mailcompose-base-header","rocket-stats","comms-utils","mail-ui-basewidget"]});/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("selector-css3",function(e,t){e.Selector._reNth=/^(?:([\-]?\d*)(n){1}|(odd|even)$)*([\-+]?\d*)$/,e.Selector._getNth=function(t,n,r,i){e.Selector._reNth.test(n);var s=parseInt(RegExp.$1,10),o=RegExp.$2,u=RegExp.$3,a=parseInt(RegExp.$4,10)||0,f=[],l=e.DOM._children(t.parentNode,r),c;u?(s=2,c="+",o="n",a=u==="odd"?1:0):isNaN(s)&&(s=o?1:0);if(s===0)return i&&(a=l.length-a+1),l[a-1]===t?!0:!1;s<0&&(i=!!i,s=Math.abs(s));if(!i){for(var h=a-1,p=l.length;h<p;h+=s)if(h>=0&&l[h]===t)return!0}else for(var h=l.length-a,p=l.length;h>=0;h-=s)if(h<p&&l[h]===t)return!0;return!1},e.mix(e.Selector.pseudos,{root:function(e){return e===e.ownerDocument.documentElement},"nth-child":function(t,n){return e.Selector._getNth(t,n)},"nth-last-child":function(t,n){return e.Selector._getNth(t,n,null,!0)},"nth-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName)},"nth-last-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName,!0)},"last-child":function(t){var n=e.DOM._children(t.parentNode);return n[n.length-1]===t},"first-of-type":function(t){return e.DOM._children(t.parentNode,t.tagName)[0]===t},"last-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n[n.length-1]===t},"only-child":function(t){var n=e.DOM._children(t.parentNode);return n.length===1&&n[0]===t},"only-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n.length===1&&n[0]===t},empty:function(e){return e.childNodes.length===0},not:function(t,n){return!e.Selector.test(t,n)},contains:function(e,t){var n=e.innerText||e.textContent||"";return n.indexOf(t)>-1},checked:function(e){return e.checked===!0||e.selected===!0},enabled:function(e){return e.disabled!==undefined&&!e.disabled},disabled:function(e){return e.disabled}}),e.mix(e.Selector.operators,{"^=":"^{val}","$=":"{val}$","*=":"{val}"}),e.Selector.combinators["~"]={axis:"previousSibling"}},"3.7.2",{requires:["selector-native","selector-css2"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("yui-throttle",function(e,t){
/*! Based on work by Simon Willison: http://gist.github.com/292562 */
;e.throttle=function(t,n){n=n?n:e.config.throttleTime||150;if(n===-1)return function(){t.apply(null,arguments)};var r=e.Lang.now();return function(){var i=e.Lang.now();i-r>n&&(r=i,t.apply(null,arguments))}}},"3.7.2",{requires:["yui-base"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("frame",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)},r=":last-child",i="body";e.extend(n,e.Base,{_ready:null,_rendered:null,_iframe:null,_instance:null,_create:function(t){var r,i,s,o,u="",a=this.get("extracss")?'<style id="extra_css">'+this.get("extracss")+"</style>":"";this._iframe=e.Node.create(n.HTML),this._iframe.setStyle("visibility","hidden"),this._iframe.set("src",this.get("src")),this.get("container").append(this._iframe);var f=this.get("src")===n.ATTRS.src.value;this._iframe.set("height","99%"),f&&(u=e.Lang.sub(n.PAGE_HTML,{DIR:this.get("dir"),LANG:this.get("lang"),TITLE:this.get("title"),META:n.META,LINKED_CSS:this.get("linkedcss"),CONTENT:this.get("content"),BASE_HREF:this.get("basehref"),DEFAULT_CSS:n.DEFAULT_CSS,EXTRA_CSS:a}),e.config.doc.compatMode!="BackCompat"&&(u=n.getDocType()+"\n"+u)),s=this._resolveWinDoc(),u&&(s.doc.open(),s.doc.write(u),s.doc.close());if(!s.doc.documentElement)var l=e.later(1,this,function(){s.doc&&s.doc.documentElement&&(t(s),l.cancel())},null,!0);else t(s)},_resolveWinDoc:function(t){var n=t?t:{};return n.win=e.Node.getDOMNode(this._iframe.get("contentWindow")),n.doc=e.Node.getDOMNode(this._iframe.get("contentWindow.document")),n.doc||(n.doc=e.config.doc),n.win||(n.win=e.config.win),n},_onDomEvent:function(t){var n,r;if(!e.Node.getDOMNode(this._iframe))return;t.frameX=t.frameY=0,(t.pageX>0||t.pageY>0)&&t.type.substring(0,3)!=="key"&&(r=this._instance.one("win"),n=this._iframe.getXY(),t.frameX=n[0]+t.pageX-r.get("scrollLeft"),t.frameY=n[1]+t.pageY-r.get("scrollTop")),t.frameTarget=t.target,t.frameCurrentTarget=t.currentTarget,t.frameEvent=t,this.fire("dom:"+t.type,t)},initializer:function(){this.publish("ready",{emitFacade:!0,defaultFn:this._defReadyFn})},destructor:function(){var e=this.getInstance();e.one("doc").detachAll(),e=null,this._iframe.remove()},_DOMPaste:function(e){var t=this.getInstance(),n="",r=t.config.win;e._event.originalTarget&&(n=e._event.originalTarget),e._event.clipboardData&&(n=e._event.clipboardData.getData("Text")),r.clipboardData&&(n=r.clipboardData.getData("Text"),n===""&&(r.clipboardData.setData("Text",n)||(n=null))),e.frameTarget=e.target,e.frameCurrentTarget=e.currentTarget,e.frameEvent=e,n?e.clipboardData={data:n,getData:function(){return n}}:e.clipboardData=null,this.fire("dom:paste",e)},_defReadyFn:function(){var t=this.getInstance();e.each(n.DOM_EVENTS,function(r,i){var s=e.bind(this._onDomEvent,this),o=e.UA.ie&&n.THROTTLE_TIME>0?e.throttle(s,n.THROTTLE_TIME):s;t.Node.DOM_EVENTS[i]||(t.Node.DOM_EVENTS[i]=1),r===1&&i!=="focus"&&i!=="blur"&&i!=="paste"&&(i.substring(0,3)==="key"?t.on(i,o,t.config.doc):t.on(i,s,t.config.doc))},this),t.Node.DOM_EVENTS.paste=1,t.on("paste",e.bind(this._DOMPaste,this),t.one("body")),t.on("focus",e.bind(this._onDomEvent,this),t.config.win),t.on("blur",e.bind(this._onDomEvent,this),t.config.win),t.__use=t.use,t.use=e.bind(this.use,this),this._iframe.setStyles({visibility:"inherit"}),t.one("body").setStyle("display","block"),e.UA.ie},_fixIECursors:function(){var e=this.getInstance(),t=e.all("table"),n=e.all("br"),r;t.size()&&n.size()&&(r=t.item(0).get("sourceIndex"),n.each(function(t){var n=t.get("parentNode"),i=n.get("children"),s=n.all(">br");n.test("div")&&(i.size()>2?t.replace(e.Node.create("<wbr>")):t.get("sourceIndex")>r?s.size()&&t.replace(e.Node.create("<wbr>")):s.size()>1&&t.replace(e.Node.create("<wbr>")))}))},_onContentReady:function(t){if(!this._ready){this._ready=!0;var n=this.getInstance(),r=e.clone(this.get("use"));this.fire("contentready"),t&&(n.config.doc=e.Node.getDOMNode(t.target)),r.push(e.bind(function(){n.EditorSelection&&(n.EditorSelection.DEFAULT_BLOCK_TAG=this.get("defaultblock")),this.get("designMode")&&(e.UA.ie?(n.config.doc.body.contentEditable="true",this._ieSetBodyHeight(),n.on("keyup",e.bind(this._ieSetBodyHeight,this),n.config.doc)):n.config.doc.designMode="on"),this.fire("ready")},this)),n.use.apply(n,r),n.one("doc").get("documentElement").addClass("yui-js-enabled")}},_ieHeightCounter:null,_ieSetBodyHeight:function(t){this._ieHeightCounter||(this._ieHeightCounter=0),this._ieHeightCounter++;var n=!1;t||(n=!0);if(t){switch(t.keyCode){case 8:case 13:n=!0}if(t.ctrlKey||t.shiftKey)n=!0}if(n)try{var r=this.getInstance(),i=this._iframe.get("offsetHeight"),s=r.config.doc.body.scrollHeight;i>s?(i=i-15+"px",r.config.doc.body.style.height=i):r.config.doc.body.style.height="auto"}catch(t){this._ieHeightCounter<100&&e.later(200,this,this._ieSetBodyHeight)}},_resolveBaseHref:function(t){if(!t||t==="")t=e.config.doc.location.href,t.indexOf("?")!==-1&&(t=t.substring(0,t.indexOf("?"))),t=t.substring(0,t.lastIndexOf("/"))+"/";return t},_getHTML:function(e){if(this._ready){var t=this.getInstance();e=t.one("body").get("innerHTML")}return e},_setHTML:function(t){if(this._ready){var n=this.getInstance();n.one("body").set("innerHTML",t)}else this.on("contentready",e.bind(function(e,t){var n=this.getInstance();n.one("body").set("innerHTML",e)},this,t));return t},_getLinkedCSS:function(t){e.Lang.isArray(t)||(t=[t]);var n="";return this._ready?n=t:e.each(t,function(e){e!==""&&(n+='<link rel="stylesheet" href="'+e+'" type="text/css">')}),n},_setLinkedCSS:function(e){if(this._ready){var t=this.getInstance();t.Get.css(e)}return e},_setExtraCSS:function(e){if(this._ready){var t=this.getInstance(),n=t.one("#extra_css");n.remove(),t.one("head").append('<style id="extra_css">'+e+"</style>")}return e},_instanceLoaded:function(t){this._instance=t,this._onContentReady();var n=this._instance.config.doc;if(this.get("designMode")&&!e.UA.ie)try{n.execCommand("styleWithCSS",!1,!1),n.execCommand("insertbronreturn",!1,!1)}catch(r){}},use:function(){var t=this.getInstance(),n=e.Array(arguments),r=!1;e.Lang.isFunction(n[n.length-1])&&(r=n.pop()),r&&n.push(function(){r.apply(t,arguments)}),t.__use.apply(t,n)},delegate:function(e,t,n,r){var i=this.getInstance();return i?(r||(r=n,n="body"),i.delegate(e,t,n,r)):!1},getInstance:function(){return this._instance},render:function(t){return this._rendered?this:(this._rendered=!0,t&&this.set("container",t),this._create(e.bind(function(t){var n,r,i=e.bind(function(e){this._instanceLoaded(e)},this),s=e.clone(this.get("use")),o={debug:!1,win:t.win,doc:t.doc},u=e.bind(function(){o=this._resolveWinDoc(o),n=YUI(o),n.host=this.get("host");try{n.use("node-base",i),r&&clearInterval(r)}catch(e){r=setInterval(function(){u()},350)}},this);s.push(u),e.use.apply(e,s)},this)),this)},_handleFocus:function(){var e=this.getInstance(),t=new e.EditorSelection;if(t.anchorNode){var n=t.anchorNode,r;n.test("p")&&n.get("innerHTML")===""&&(n=n.get("parentNode")),r=n.get("childNodes");if(r.size())if(r.item(0).test("br"))t.selectNode(n,!0,!1);else if(r.item(0).test("p"))n=r.item(0).one("br.yui-cursor"),n&&(n=n.get("parentNode")),n||(n=r.item(0).get("firstChild")),n||(n=r.item(0)),n&&t.selectNode(n,!0,!1);else{var i=e.one("br.yui-cursor");if(i){var s=i.get("parentNode");s&&t.selectNode(s,!0,!1)}}}},focus:function(t){if(e.UA.ie&&e.UA.ie<9){try{e.one("win").focus(),this.getInstance()&&this.getInstance().one("win")&&this.getInstance().one("win").focus()}catch(n){}t===!0&&this._handleFocus(),e.Lang.isFunction(t)&&t()}else try{e.one("win").focus(),e.later(100,this,function(){this.getInstance()&&this.getInstance().one("win")&&this.getInstance().one("win").focus(),t===!0&&this._handleFocus(),e.Lang.isFunction(t)&&t()})}catch(r){}return this},show:function(){this._iframe.setStyles({position:"static",left:""});if(e.UA.gecko){try{this.getInstance()&&(this.getInstance().config.doc.designMode="on")}catch(t){}this.focus()}return this},hide:function(){return this._iframe.setStyles({position:"absolute",left:"-999999px"}),this}},{THROTTLE_TIME:100,DOM_EVENTS:{dblclick:1,click:1,paste:1,mouseup:1,mousedown:1,keyup:1,keydown:1,keypress:1,activate:1,deactivate:1,beforedeactivate:1,focusin:1,focusout:1},DEFAULT_CSS:"body { background-color: #fff; font: 13px/1.22 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small; } a, a:visited, a:hover { color: blue !important; text-decoration: underline !important; cursor: text !important; } img { cursor: pointer !important; border: none; }",HTML:'<iframe border="0" frameBorder="0" marginWidth="0" marginHeight="0" leftMargin="0" topMargin="0" allowTransparency="true" width="100%" height="99%"></iframe>',PAGE_HTML:'<html dir="{DIR}" lang="{LANG}"><head><title>{TITLE}</title>{META}<base href="{BASE_HREF}"/>{LINKED_CSS}<style id="editor_css">{DEFAULT_CSS}</style>{EXTRA_CSS}</head><body>{CONTENT}</body></html>',getDocType:function(){var t=e.config.doc.doctype,r=n.DOC_TYPE;return t?r="<!DOCTYPE "+t.name+(t.publicId?" "+t.publicId:"")+(t.systemId?" "+t.systemId:"")+">":e.config.doc.all&&(t=e.config.doc.all[0],t.nodeType&&t.nodeType===8&&t.nodeValue&&t.nodeValue.toLowerCase().indexOf("doctype")!==-1&&(r="<!"+t.nodeValue+">")),r},DOC_TYPE:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">',META:'<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=7">',NAME:"frame",ATTRS:{title:{value:"Blank Page"},dir:{value:"ltr"},lang:{value:"en-US"},src:{value:"javascript"+(e.UA.ie?":false":":")+";"},designMode:{writeOnce:!0,value:!1},content:{value:"<br>",setter:"_setHTML",getter:"_getHTML"},basehref:{value:!1,getter:"_resolveBaseHref"},use:{writeOnce:!0,value:["node","node-style","selector-css3"]},container:{value:"body",setter:function(t){return e.one(t)}},node:{readOnly:!0,value:null,getter:function(){return this._iframe}},id:{writeOnce:!0,getter:function(t){return t||(t="iframe-"+e.guid()),t}},linkedcss:{value:"",getter:"_getLinkedCSS",setter:"_setLinkedCSS"},extracss:{value:"",setter:"_setExtraCSS"},host:{value:!1},defaultblock:{value:"p"}}}),e.Frame=n},"3.7.2",{requires:["base","node","selector-css3","yui-throttle"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("exec-command",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)};e.extend(n,e.Base,{_lastKey:null,_inst:null,command:function(e,t){var r=n.COMMANDS[e];return r?r.call(this,e,t):this._command(e,t)},_command:function(e,t){var n=this.getInstance();try{try{n.config.doc.execCommand("styleWithCSS",null,1)}catch(r){try{n.config.doc.execCommand("useCSS",null,0)}catch(i){}}n.config.doc.execCommand(e,null,t)}catch(s){}},getInstance:function(){return this._inst||(this._inst=this.get("host").getInstance()),this._inst},initializer:function(){e.mix(this.get("host"),{execCommand:function(e,t){return this.exec.command(e,t)},_execCommand:function(e,t){return this.exec._command(e,t)}}),this.get("host").on("dom:keypress",e.bind(function(e){this._lastKey=e.keyCode},this))},_wrapContent:function(e,t){var n=this.getInstance().host.editorPara&&!t?!0:!1;return n?e="<p>"+e+"</p>":e+="<br>",e}},{NAME:"execCommand",NS:"exec",ATTRS:{host:{value:!1}},COMMANDS:{wrap:function(e,t){var n=this.getInstance();return(new n.EditorSelection).wrapContent(t)},inserthtml:function(t,n){var r=this.getInstance();if(r.EditorSelection.hasCursor()||e.UA.ie)return(new r.EditorSelection).insertContent(n);this._command("inserthtml",n)},insertandfocus:function(e,t){var n=this.getInstance(),r,i;return n.EditorSelection.hasCursor()?(t+=n.EditorSelection.CURSOR,r=this.command("inserthtml",t),i=new n.EditorSelection,i.focusCursor(!0,!0)):this.command("inserthtml",t),r},insertbr:function(t){var n=this.getInstance(),r=new n.EditorSelection,i="<var>|</var>",s=null,o=e.UA.webkit?"span.Apple-style-span,var":"var";r._selection.pasteHTML?r._selection.pasteHTML(i):this._command("inserthtml",i);var u=function(e){var t=n.Node.create("<br>");return e.insert(t,"before"),t};n.all(o).each(function(t){var n=!0;e.UA.webkit&&(n=!1,t.get("innerHTML")==="|"&&(n=!0));if(n){s=u(t);if((!s.previous()||!s.previous().test("br"))&&e.UA.gecko){var r=s.cloneNode();s.insert(r,"after"),s=r}t.remove()}}),e.UA.webkit&&s&&(u(s),r.selectNode(s))},insertimage:function(e,t){return this.command("inserthtml",'<img src="'+t+'">')},addclass:function(e,t){var n=this.getInstance();return(new n.EditorSelection).getSelected().addClass(t)},removeclass:function(e,t){var n=this.getInstance();return(new n.EditorSelection).getSelected().removeClass(t)},forecolor:function(t,n){var r=this.getInstance(),i=new r.EditorSelection,s;e.UA.ie||this._command("useCSS",!1);if(r.EditorSelection.hasCursor())return i.isCollapsed?(i.anchorNode&&i.anchorNode.get("innerHTML")==="&nbsp;"?(i.anchorNode.setStyle("color",n),s=i.anchorNode):(s=this.command("inserthtml",'<span style="color: '+n+'">'+r.EditorSelection.CURSOR+"</span>"),i.focusCursor(!0,!0)),s):this._command(t,n);this._command(t,n)},backcolor:function(t,n){var r=this.getInstance(),i=new r.EditorSelection,s;if(e.UA.gecko||e.UA.opera)t="hilitecolor";e.UA.ie||this._command("useCSS",!1);if(r.EditorSelection.hasCursor())return i.isCollapsed?(i.anchorNode&&i.anchorNode.get("innerHTML")==="&nbsp;"?(i.anchorNode.setStyle("backgroundColor",n),s=i.anchorNode):(s=this.command("inserthtml",'<span style="background-color: '+n+'">'+r.EditorSelection.CURSOR+"</span>"),i.focusCursor(!0,!0)),s):this._command(t,n);this._command(t,n)},hilitecolor:function(){return n.COMMANDS.backcolor.apply(this,arguments)},fontname2:function(e,t){this._command("fontname",t);var n=this.getInstance(),r=new n.EditorSelection;r.isCollapsed&&this._lastKey!=32&&r.anchorNode.test("font")&&r.anchorNode.set("face",t)},fontsize2:function(t,n){this._command("fontsize",n);var r=this.getInstance(),i=new r.EditorSelection;if(i.isCollapsed&&i.anchorNode&&this._lastKey!=32){e.UA.webkit&&i.anchorNode.getStyle("lineHeight")&&i.anchorNode.setStyle("lineHeight","");if(i.anchorNode.test("font"))i.anchorNode.set("size",n);else if(e.UA.gecko){var s=i.anchorNode.ancestor(r.EditorSelection.DEFAULT_BLOCK_TAG);s&&s.setStyle("fontSize","")}}},insertunorderedlist:function(e){this.command("list","ul")},insertorderedlist:function(e){this.command("list","ol")},list:function(t,n){var r=this.getInstance(),i,s=this,o="dir",u="yui3-touched",a,f,l,c,h,p,d,v,m,g,y=r.host.editorPara?!0:!1,b=new r.EditorSelection;t="insert"+(n==="ul"?"un":"")+"orderedlist";if(e.UA.ie&&!b.isCollapsed){f=b._selection,i=f.htmlText,l=r.Node.create(i)||r.one("body");if(l.test("li")||l.one("li")){this._command(t,null);return}if(l.test(n))c=f.item?f.item(0):f.parentElement(),h=r.one(c),g=h.all("li"),p="<div>",g.each(function(e){p=s._wrapContent(e.get("innerHTML"))}),p+="</div>",d=r.Node.create(p),h.get("parentNode").test("div")&&(h=h.get("parentNode")),h&&h.hasAttribute(o)&&(y?d.all("p").setAttribute(o,h.getAttribute(o)):d.setAttribute(o,h.getAttribute(o))),y?h.replace(d.get("innerHTML")):h.replace(d),f.moveToElementText&&f.moveToElementText(d._node),f.select();else{v=e.one(f.parentElement()),v.test(r.EditorSelection.BLOCKS)||(v=v.ancestor(r.EditorSelection.BLOCKS)),v&&v.hasAttribute(o)&&(a=v.getAttribute(o));if(i.indexOf("<br>")>-1)i=i.split(/<br>/i);else{var w=r.Node.create(i),E=w?w.all("p"):null;E&&E.size()?(i=[],E.each(function(e){i.push(e.get("innerHTML"))})):i=[i]}m="<"+n+' id="ie-list">',e.each(i,function(e){var t=r.Node.create(e);t&&t.test("p")&&(t.hasAttribute(o)&&(a=t.getAttribute(o)),e=t.get("innerHTML")),m+="<li>"+e+"</li>"}),m+="</"+n+">",f.pasteHTML(m),c=r.config.doc.getElementById("ie-list"),c.id="",a&&c.setAttribute(o,a),f.moveToElementText&&f.moveToElementText(c),f.select()}}else if(e.UA.ie){v=r.one(b._selection.parentElement());if(v.test("p")){v&&v.hasAttribute(o)&&(a=v.getAttribute(o)),i=e.EditorSelection.getText(v);if(i===""){var S="";a&&(S=' dir="'+a+'"'),m=r.Node.create(e.Lang.sub("<{tag}{dir}><li></li></{tag}>",{tag:n,dir:S})),v.replace(m),b.selectNode(m.one("li"))}else this._command(t,null)}else this._command(t,null)}else{r.all(n).addClass(u),b.anchorNode.test(r.EditorSelection.BLOCKS)?v=b.anchorNode:v=b.anchorNode.ancestor(r.EditorSelection.BLOCKS),v||(v=b.anchorNode.one(r.EditorSelection.BLOCKS)),v&&v.hasAttribute(o)&&(a=v.getAttribute(o));if(v&&v.test(n)){var x=v.ancestor("p");i=r.Node.create("<div/>"),c=v.all("li"),c.each(function(e){i.append(s._wrapContent(e.get("innerHTML"),x))}),a&&(y?i.all("p").setAttribute(o,a):i.setAttribute(o,a)),y&&(i=r.Node.create(i.get("innerHTML")));var T=i.get("firstChild");v.replace(i),b.selectNode(T)}else this._command(t,null);m=r.all(n),a&&m.size()&&m.each(function(e){e.hasClass(u)||e.setAttribute(o,a)}),m.removeClass(u)}},justify:function(t,n){if(e.UA.webkit){var r=this.getInstance(),i=new r.EditorSelection,s=i.anchorNode,o=s.getStyle("backgroundColor");this._command(n),i=new r.EditorSelection;if(i.anchorNode.test("div")){var u="<span>"+i.anchorNode.get("innerHTML")+"</span>";i.anchorNode.set("innerHTML",u),i.anchorNode.one("span").setStyle("backgroundColor",o),i.selectNode(i.anchorNode.one("span"))}}else this._command(n)},justifycenter:function(e){this.command("justify","justifycenter")},justifyleft:function(e){this.command("justify","justifyleft")},justifyright:function(e){this.command("justify","justifyright")},justifyfull:function(e){this.command("justify","justifyfull")}}});var r=function(t,n,r){var i=this.getInstance(),s=i.config.doc,o=s.selection.createRange(),u=s.queryCommandValue(t),a,f,l,c,h,p,d;u&&(a=o.htmlText,f=new RegExp(r,"g"),l=a.match(f),l&&(a=a.replace(r+";","").replace(r,""),o.pasteHTML('<var id="yui-ie-bs">'),c=s.getElementById("yui-ie-bs"),h=s.createElement("div"),p=s.createElement(n),h.innerHTML=a,c.parentNode!==i.config.doc.body&&(c=c.parentNode),d=h.childNodes,c.parentNode.replaceChild(p,c),e.each(d,function(e){p.appendChild(e)}),o.collapse(),o.moveToElementText&&o.moveToElementText(p),o.select())),this._command(t)};e.UA.ie&&(n.COMMANDS.bold=function(){r.call(this,"bold","b","FONT-WEIGHT: bold")},n.COMMANDS.italic=function(){r.call(this,"italic","i","FONT-STYLE: italic")},n.COMMANDS.underline=function(){r.call(this,"underline","u","TEXT-DECORATION: underline")}),e.namespace("Plugin"),e.Plugin.ExecCommand=n},"3.7.2",{requires:["frame"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("editor-selection",function(e,t){var n="textContent",r="innerHTML",i="fontFamily";e.UA.ie&&(n="nodeValue"),e.EditorSelection=function(t){var n,r,i,s,o,u;e.config.win.getSelection&&(!e.UA.ie||e.UA.ie<9)?n=e.config.win.getSelection():e.config.doc.selection&&(n=e.config.doc.selection.createRange()),this._selection=n;if(!n)return!1;if(n.pasteHTML){this.isCollapsed=n.compareEndPoints("StartToEnd",n)?!1:!0;if(this.isCollapsed){this.anchorNode=this.focusNode=e.one(n.parentElement()),t&&(i=e.config.doc.elementFromPoint(t.clientX,t.clientY)),o=n.duplicate();if(!i){r=n.parentElement(),s=r.childNodes;for(u=0;u<s.length;u++)o.inRange(n)&&(i||(i=s[u]))}this.ieNode=i;if(i){i.nodeType!==3&&(i.firstChild&&(i=i.firstChild),i&&i.tagName&&i.tagName.toLowerCase()==="body"&&i.firstChild&&(i=i.firstChild)),this.anchorNode=this.focusNode=e.EditorSelection.resolve(i),o.moveToElementText(n.parentElement());var a=n.compareEndPoints("StartToStart",o),f=0;a&&(f=Math.abs(n.move("character",-9999))),this.anchorOffset=this.focusOffset=f,this.anchorTextNode=this.focusTextNode=e.one(i)}}else if(n.htmlText&&n.htmlText!==""){var l=e.Node.create(n.htmlText);if(l&&l.get("id")){var c=l.get("id");this.anchorNode=this.focusNode=e.one("#"+c)}else l&&(l=l.get("childNodes"),this.anchorNode=this.focusNode=l.item(0))}}else this.isCollapsed=n.isCollapsed,this.anchorNode=e.EditorSelection.resolve(n.anchorNode),this.focusNode=e.EditorSelection.resolve(n.focusNode),this.anchorOffset=n.anchorOffset,this.focusOffset=n.focusOffset,this.anchorTextNode=e.one(n.anchorNode),this.focusTextNode=e.one(n.focusNode);e.Lang.isString(n.text)?this.text=n.text:n.toString?this.text=n.toString():this.text=""},e.EditorSelection.removeFontFamily=function(t){t.removeAttribute("face");var n=t.getAttribute("style").toLowerCase();(n===""||n=="font-family: ")&&t.removeAttribute("style"),n.match(e.EditorSelection.REG_FONTFAMILY)&&(n=n.replace(e.EditorSelection.REG_FONTFAMILY,""),t.setAttribute("style",n))},e.EditorSelection.filter=function(t){var n=(new Date).getTime(),r=e.all(e.EditorSelection.ALL),s=e.all("strong,em"),o=e.config.doc,u,a={},f="",l,c=(new Date).getTime();r.each(function(t){var n=e.Node.getDOMNode(t);n.style[i]&&(a["."+t._yuid]=n.style[i],t.addClass(t._yuid),e.EditorSelection.removeFontFamily(n))});var h=(new Date).getTime();e.all(".hr").addClass("yui-skip").addClass("yui-non"),e.UA.ie&&(u=o.getElementsByTagName("hr"),e.each(u,function(e){var t=o.createElement("div");t.className="hr yui-non yui-skip",t.setAttribute("readonly",!0),t.setAttribute("contenteditable",!1),e.parentNode&&e.parentNode.replaceChild(t,e);var n=t.style;n.border="1px solid #ccc",n.lineHeight="0",n.height="0",n.fontSize="0",n.marginTop="5px",n.marginBottom="5px",n.marginLeft="0px",n.marginRight="0px",n.padding="0"})),e.each(a,function(e,t){f+=t+" { font-family: "+e.replace(/"/gi,"")+"; }"}),e.StyleSheet(f,"editor"),s.each(function(t,n){var r=t.get("tagName").toLowerCase(),i="i";r==="strong"&&(i="b"),e.EditorSelection.prototype._swap(s.item(n),i)}),l=e.all("ol,ul"),l.each(function(e,t){var n=e.all("li");n.size()||e.remove()}),t&&e.EditorSelection.filterBlocks();var p=(new Date).getTime()},e.EditorSelection.filterBlocks=function(){var t=(new Date).getTime(),r=e.config.doc.body.childNodes,i,s,o=!1,u=!0,a,f,l,c,h,p,d;if(r){for(i=0;i<r.length;i++)s=e.one(r[i]),s.test(e.EditorSelection.BLOCKS)?o=e.EditorSelection._wrapBlock(o):(u=!0,r[i].nodeType==3&&(p=r[i][n].match(e.EditorSelection.REG_CHAR),d=r[i][n].match(e.EditorSelection.REG_NON),p===null&&d&&(u=!1)),u&&(o||(o=[]),o.push(r[i])));o=e.EditorSelection._wrapBlock(o)}f=e.all(e.EditorSelection.DEFAULT_BLOCK_TAG);if(f.size()===1){l=f.item(0).all("br");if(l.size()===1){l.item(0).test(".yui-cursor")||l.item(0).remove();var v=f.item(0).get("innerHTML");if(v===""||v===" ")f.set("innerHTML",e.EditorSelection.CURSOR),a=new e.EditorSelection,a.focusCursor(!0,!0);l.item(0).test(".yui-cursor")&&e.UA.ie&&l.item(0).remove()}}else f.each(function(e){var t=e.get("innerHTML");t===""&&e.remove()});!e.UA.ie;var m=(new Date).getTime()},e.EditorSelection.REG_FONTFAMILY=/font-family: ;/,e.EditorSelection.REG_CHAR=/[a-zA-Z-0-9_!@#\$%\^&*\(\)-=_+\[\]\\{}|;':",.\/<>\?]/gi,e.EditorSelection.REG_NON=/[\s|\n|\t]/gi,e.EditorSelection.REG_NOHTML=/<\S[^><]*>/g,e.EditorSelection._wrapBlock=function(t){if(t){var n=e.Node.create("<"+e.EditorSelection.DEFAULT_BLOCK_TAG+"></"+e.EditorSelection.DEFAULT_BLOCK_TAG+">"),r=e.one(t[0]),i;for(i=1;i<t.length;i++)n.append(t[i]);r.replace(n),n.prepend(r)}return!1},e.EditorSelection.unfilter=function(){var t=e.all("body [class]"),n="",r,s,o=e.one("body");return t.each(function(e){e.hasClass(e._yuid)&&(e.setStyle(i,e.getStyle(i)),e.removeClass(e._yuid),e.getAttribute("class")===""&&e.removeAttribute("class"))}),r=e.all(".yui-non"),r.each(function(e){!e.hasClass("yui-skip")&&e.get("innerHTML")===""?e.remove():e.removeClass("yui-non").removeClass("yui-skip")}),s=e.all("body [id]"),s.each(function(e){e.get("id").indexOf("yui_3_")===0&&(e.removeAttribute("id"),e.removeAttribute("_yuid"))}),o&&(n=o.get("innerHTML")),e.all(".hr").addClass("yui-skip").addClass("yui-non"),n},e.EditorSelection.resolve=function(t){if(t&&t.nodeType===3)try{t=t.parentNode}catch(n){t="body"}return e.one(t)},e.EditorSelection.getText=function(t){var n=t.get("innerHTML").replace(e.EditorSelection.REG_NOHTML,"");return n=n.replace("<span><br></span>","").replace("<br>",""),n},e.EditorSelection.DEFAULT_BLOCK_TAG="p",e.EditorSelection.ALL="[style],font[face]",e.EditorSelection.BLOCKS="p,div,ul,ol,table,style",e.EditorSelection.TMP="yui-tmp",e.EditorSelection.DEFAULT_TAG="span",e.EditorSelection.CURID="yui-cursor",e.EditorSelection.CUR_WRAPID="yui-cursor-wrapper",e.EditorSelection.CURSOR='<span><br class="yui-cursor"></span>',e.EditorSelection.hasCursor=function(){var t=e.all("#"+e.EditorSelection.CUR_WRAPID);return t.size()},e.EditorSelection.cleanCursor=function(){var t,n="br.yui-cursor";t=e.all(n),t.size()&&t.each(function(t){var n=t.get("parentNode.parentNode.childNodes"),r;n.size()?t.remove():(r=e.EditorSelection.getText(n.item(0)),r!==""&&t.remove())})},e.EditorSelection.prototype={text:null,isCollapsed:null,anchorNode:null,anchorOffset:null,anchorTextNode:null,focusNode:null,focusOffset:null,focusTextNode:null,_selection:null,_wrap:function(t,n){var i=e.Node.create("<"+n+"></"+n+">");return i.set(r,t.get(r)),t.set(r,""),t.append(i),e.Node.getDOMNode(i)},_swap:function(t,n){var i=e.Node.create("<"+n+"></"+n+">");return i.set(r,t.get(r)),t.replace(i,t),e.Node.getDOMNode(i)},getSelected:function(){e.EditorSelection.filter(),e.config.doc.execCommand("fontname",null,e.EditorSelection.TMP);var t=e.all(e.EditorSelection.ALL),n=[];return t.each(function(r,s){r.getStyle(i)==e.EditorSelection.TMP&&(r.setStyle(i,""),e.EditorSelection.removeFontFamily(r),r.test("body")||n.push(e.Node.getDOMNode(t.item(s))))}),e.all(n)},insertContent:function(e){return this.insertAtCursor(e,this.anchorTextNode,this.anchorOffset,!0)},insertAtCursor:function(t,r,i,s){var o=e.Node.create("<"+e.EditorSelection.DEFAULT_TAG+' class="yui-non"></'+e.EditorSelection.DEFAULT_TAG+">"),u,a,f,l,c=this.createRange(),h;r&&r.test("body")&&(h=e.Node.create("<span></span>"),r.append(h),r=h);if(c.pasteHTML){if(i===0&&r&&!r.previous()&&r.get("nodeType")===3)return r.insert(t,"before"),c.moveToElementText&&c.moveToElementText(e.Node.getDOMNode(r.previous())),c.collapse(!1),c.select(),r.previous();l=e.Node.create(t);try{c.pasteHTML('<span id="rte-insert"></span>')}catch(p){}u=e.one("#rte-insert");if(u)return u.set("id",""),u.replace(l),c.moveToElementText&&c.moveToElementText(e.Node.getDOMNode(l)),c.collapse(!1),c.select(),l;e.on("available",function(){u.set("id",""),u.replace(l),c.moveToElementText&&c.moveToElementText(e.Node.getDOMNode(l)),c.collapse(!1),c.select()},"#rte-insert")}else i>0?(u=r.get(n),a=e.one(e.config.doc.createTextNode(u.substr(0,i))),f=e.one(e.config.doc.createTextNode(u.substr(i))),r.replace(a,r),l=e.Node.create(t),l.get("nodeType")===11&&(h=e.Node.create("<span></span>"),h.append(l),l=h),a.insert(l,"after"),f&&(l.insert(o,"after"),o.insert(f,"after"),this.selectNode(o,s))):(r.get("nodeType")===3&&(r=r.get("parentNode")),l=e.Node.create(t),t=r.get("innerHTML").replace(/\n/gi,""),t===""||t==="<br>"?r.append(l):l.get("parentNode")?r.insert(l,"before"):e.one("body").prepend(l),r.get("firstChild").test("br")&&r.get("firstChild").remove());return l},wrapContent:function(t){t=t?t:e.EditorSelection.DEFAULT_TAG;if(!this.isCollapsed){var n=this.getSelected(),r=[],i,s,o,u;return n.each(function(e,i){var s=e.get("tagName").toLowerCase();s==="font"?r.push(this._swap(n.item(i),t)):r.push(this._wrap(n.item(i),t))},this),i=this.createRange(),o=r[0],s=r[r.length-1],this._selection.removeAllRanges?(i.setStart(r[0],0),i.setEnd(s,s.childNodes.length),this._selection.removeAllRanges(),this._selection.addRange(i)):(i.moveToElementText&&(i.moveToElementText(e.Node.getDOMNode(o)),u=this.createRange(),u.moveToElementText(e.Node.getDOMNode(s)),i.setEndPoint("EndToEnd",u)),i.select()),r=e.all(r),r}return e.all([])},replace:function(t,r){var i=this.createRange(),s,o,u,a;return i.getBookmark?(u=i.getBookmark(),o=this.anchorNode.get("innerHTML").replace(t,r),this.anchorNode.set("innerHTML",o),i.moveToBookmark(u),a=e.one(i.parentElement())):(s=this.anchorTextNode,o=s.get(n),u=o.indexOf(t),o=o.replace(t,""),s.set(n,o),a=this.insertAtCursor(r,s,u,!0)),a},remove:function(){return this._selection&&this._selection.removeAllRanges&&this._selection.removeAllRanges(),this},createRange:function(){return e.config.doc.selection?e.config.doc.selection.createRange():e.config.doc.createRange()},selectNode:function(t,n,r){if(!t)return;r=r||0,t=e.Node.getDOMNode(t);var i=this.createRange();if(i.selectNode){i.selectNode(t),this._selection.removeAllRanges(),this._selection.addRange(i);if(n)try{this._selection.collapse(t,r)}catch(s){this._selection.collapse(t,0)}}else{t.nodeType===3&&(t=t.parentNode);try{i.moveToElementText(t)}catch(o){}n&&i.collapse(r?!1:!0),i.select()}return this},setCursor:function(){return this.removeCursor(!1),this.insertContent(e.EditorSelection.CURSOR)},getCursor:function(){return e.all("#"+e.EditorSelection.CURID)},removeCursor:function(e){var t=this.getCursor();return t&&(e?(t.removeAttribute("id"),t.set("innerHTML",'<br class="yui-cursor">')):t.remove()),t},focusCursor:function(e,t){e!==!1&&(e=!0),t!==!1&&(t=!0);var n=this.removeCursor(!0);n&&n.each(function(n){this.selectNode(n,e,t)},this)},toString:function(){return"EditorSelection Object"}},e.Selection=e.EditorSelection},"3.7.2",{requires:["node"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("editor-base",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)},r=":last-child",i="body";e.extend(n,e.Base,{frame:null,initializer:function(){var t=(new e.Frame({designMode:!0,title:n.STRINGS.title,use:n.USE,dir:this.get("dir"),extracss:this.get("extracss"),linkedcss:this.get("linkedcss"),defaultblock:this.get("defaultblock"),host:this})).plug(e.Plugin.ExecCommand);t.after("ready",e.bind(this._afterFrameReady,this)),t.addTarget(this),this.frame=t,this.publish("nodeChange",{emitFacade:!0,bubbles:!0,defaultFn:this._defNodeChangeFn})},destructor:function(){this.frame.destroy(),this.detachAll()},copyStyles:function(t,n){if(t.test("a"))return;var r=["color","fontSize","fontFamily","backgroundColor","fontStyle"],i={};e.each(r,function(e){i[e]=t.getStyle(e)}),t.ancestor("b,strong")&&(i.fontWeight="bold"),t.ancestor("u")&&(i.textDecoration||(i.textDecoration="underline")),n.setStyles(i)},_lastBookmark:null,_resolveChangedNode:function(e){var t=this.getInstance(),n,s,o;if(e&&e.test(i)){var u=new t.EditorSelection;u&&u.anchorNode&&(e=u.anchorNode)}if(t&&e&&e.test("html")){n=t.one(i).one(r);while(!o)n?(s=n.one(r),s?n=s:o=!0):o=!0;n&&(n.test("br")&&(n.previous()?n=n.previous():n=n.get("parentNode")),n&&(e=n))}return e||(e=t.one(i)),e},_defNodeChangeFn:function(t){var r=(new Date).getTime(),i=this.getInstance(),s,o,u=i.EditorSelection.DEFAULT_BLOCK_TAG;if(e.UA.ie)try{s=i.config.doc.selection.createRange(),s.getBookmark&&(this._lastBookmark=s.getBookmark())}catch(a){}t.changedNode=this._resolveChangedNode(t.changedNode);switch(t.changedType){case"keydown":e.UA.gecko||!n.NC_KEYS[t.changedEvent.keyCode]&&!t.changedEvent.shiftKey&&!t.changedEvent.ctrlKey&&t.changedEvent.keyCode!==13;break;case"tab":!t.changedNode.test("li, li *")&&!t.changedEvent.shiftKey&&(t.changedEvent.frameEvent.preventDefault(),e.UA.webkit?this.execCommand("inserttext","	"):e.UA.gecko?this.frame.exec._command("inserthtml",n.TABKEY):e.UA.ie&&this.execCommand("inserthtml",n.TABKEY));break;case"backspace-up":e.UA.webkit&&t.changedNode&&t.changedNode.set("innerHTML",t.changedNode.get("innerHTML"))}if(e.UA.webkit&&t.commands&&(t.commands.indent||t.commands.outdent)){var f=i.all(".webkit-indent-blockquote, blockquote");f.size()&&f.setStyle("margin","")}var l=this.getDomPath(t.changedNode,!1),c={},h,p,d=[],v="",m="";t.commands&&(c=t.commands);var g=!1;e.each(l,function(t){var r=t.tagName.toLowerCase(),s=n.TAG2CMD[r];s&&(c[s]=1);var o=t.currentStyle||t.style;""+o.fontWeight=="normal"&&(g=!0),""+o.fontWeight=="bold"&&(c.bold=1),e.UA.ie&&o.fontWeight>400&&(c.bold=1),o.fontStyle=="italic"&&(c.italic=1),o.textDecoration.indexOf("underline")>-1&&(c.underline=1),o.textDecoration.indexOf("line-through")>-1&&(c.strikethrough=1);var u=i.one(t);if(u.getStyle("fontFamily")){var a=u.getStyle("fontFamily").split(",")[0].toLowerCase();a&&(h=a),h&&(h=h.replace(/'/g,"").replace(/"/g,""))}p=n.NORMALIZE_FONTSIZE(u);var f=t.className.split(" ");e.each(f,function(e){e!==""&&e.substr(0,4)!=="yui_"&&d.push(e)}),v=n.FILTER_RGB(u.getStyle("color"));var l=n.FILTER_RGB(o.backgroundColor);l!=="transparent"&&l!==""&&(m=l)}),g&&(delete c.bold,delete c.italic),t.dompath=i.all(l),t.classNames=d,t.commands=c,t.fontFamily||(t.fontFamily=h),t.fontSize||(t.fontSize=p),t.fontColor||(t.fontColor=v),t.backgroundColor||(t.backgroundColor=m);var y=(new Date).getTime()},getDomPath:function(e,t){var n=[],r,i=this.frame.getInstance();r=i.Node.getDOMNode(e);while(r!==null){if(r===i.config.doc.documentElement||r===i.config.doc||!r.tagName){r=null;break}if(!i.DOM.inDoc(r)){r=null;break}r.nodeName&&r.nodeType&&r.nodeType==1&&n.push(r);if(r==i.config.doc.body){r=null;break}r=r.parentNode}return n.length===0&&(n[0]=i.config.doc.body),t?i.all(n.reverse()):n.reverse()},_afterFrameReady:function(){var t=this.frame.getInstance();this.frame.on("dom:mouseup",e.bind(this._onFrameMouseUp,this)),this.frame.on("dom:mousedown",e.bind(this._onFrameMouseDown,this)),this.frame.on("dom:keydown",e.bind(this._onFrameKeyDown,this)),e.UA.ie&&(this.frame.on("dom:activate",e.bind(this._onFrameActivate,this)),this.frame.on("dom:beforedeactivate",e.bind(this._beforeFrameDeactivate,this))),this.frame.on("dom:keyup",e.bind(this._onFrameKeyUp,this)),this.frame.on("dom:keypress",e.bind(this._onFrameKeyPress,this)),this.frame.on("dom:paste",e.bind(this._onPaste,this)),t.EditorSelection.filter(),this.fire("ready")},_beforeFrameDeactivate:function(e){if(e.frameTarget.test("html"))return;var t=this.getInstance(),n=t.config.doc.selection.createRange();n.compareEndPoints&&!n.compareEndPoints("StartToEnd",n)&&n.pasteHTML('<var id="yui-ie-cursor">')},_onFrameActivate:function(e){if(e.frameTarget.test("html"))return;var t=this.getInstance(),n=new t.EditorSelection,r=n.createRange(),i=t.all("#yui-ie-cursor");i.size()&&i.each(function(e){e.set("id","");if(r.moveToElementText)try{r.moveToElementText(e._node);var t=r.move("character",-1);t===-1&&r.move("character",1),r.select(),r.text=""}catch(n){}e.remove()})},_onPaste:function(e){this.fire("nodeChange",{changedNode:e.frameTarget,changedType:"paste",changedEvent:e.frameEvent})},_onFrameMouseUp:function(e){this.fire("nodeChange",{changedNode:e.frameTarget,changedType:"mouseup",changedEvent:e.frameEvent})},_onFrameMouseDown:function(e){this.fire("nodeChange",{changedNode:e.frameTarget,changedType:"mousedown",changedEvent:e.frameEvent})},_currentSelection:null,_currentSelectionTimer:null,_currentSelectionClear:null,_onFrameKeyDown:function(t){var r,i;this._currentSelection?i=this._currentSelection:(this._currentSelectionTimer&&this._currentSelectionTimer.cancel(),this._currentSelectionTimer=e.later(850,this,function(){this._currentSelectionClear=!0}),r=this.frame.getInstance(),i=new r.EditorSelection(t),this._currentSelection=i),r=this.frame.getInstance(),i=new r.EditorSelection,this._currentSelection=i,i&&i.anchorNode&&(this.fire("nodeChange",{changedNode:i.anchorNode,changedType:"keydown",changedEvent:t.frameEvent}),n.NC_KEYS[t.keyCode]&&(this.fire("nodeChange",{changedNode:i.anchorNode,changedType:n.NC_KEYS[t.keyCode],changedEvent:t.frameEvent}),this.fire("nodeChange",{changedNode:i.anchorNode,changedType:n.NC_KEYS[t.keyCode]+"-down",changedEvent:t.frameEvent})))},_onFrameKeyPress:function(e){var t=this._currentSelection;t&&t.anchorNode&&(this.fire("nodeChange",{changedNode:t.anchorNode,changedType:"keypress",changedEvent:e.frameEvent}),n.NC_KEYS[e.keyCode]&&this.fire("nodeChange",{changedNode:t.anchorNode,changedType:n.NC_KEYS[e.keyCode]+"-press",changedEvent:e.frameEvent}))},_onFrameKeyUp:function(e){var t=this.frame.getInstance(),r=new t.EditorSelection(e);r&&r.anchorNode&&(this.fire("nodeChange",{changedNode:r.anchorNode,changedType:"keyup",selection:r,changedEvent:e.frameEvent}),n.NC_KEYS[e.keyCode]&&this.fire("nodeChange",{changedNode:r.anchorNode,changedType:n.NC_KEYS[e.keyCode]+"-up",selection:r,changedEvent:e.frameEvent})),this._currentSelectionClear&&(this._currentSelectionClear=this._currentSelection=null)},execCommand:function(e,t){var n=this.frame.execCommand(e,t),r=this.frame.getInstance(),i=new r.EditorSelection,s={},o={changedNode:i.anchorNode,changedType:"execcommand",nodes:n};switch(e){case"forecolor":o.fontColor=t;break;case"backcolor":o.backgroundColor=t;break;case"fontsize":o.fontSize=t;break;case"fontname":o.fontFamily=t}return s[e]=1,o.commands=s,this.fire("nodeChange",o),n},getInstance:function(){return this.frame.getInstance()},render:function(e){return this.frame.set("content",this.get("content")),this.frame.render(e),this},focus:function(e){return this.frame.focus(e),this},show:function(){return this.frame.show(),this},hide:function(){return this.frame.hide(),this},getContent:function(){var e="",t=this.getInstance();return t&&t.EditorSelection&&(e=t.EditorSelection.unfilter()),e=e.replace(/ _yuid="([^>]*)"/g,""),e}},{NORMALIZE_FONTSIZE:function(e){var t=e.getStyle("fontSize"),n=t;switch(t){case"-webkit-xxx-large":t="48px";break;case"xx-large":t="32px";break;case"x-large":t="24px";break;case"large":t="18px";break;case"medium":t="16px";break;case"small":t="13px";break;case"x-small":t="10px"}return n!==t&&e.setStyle("fontSize",t),t},TABKEY:'<span class="tab">&nbsp;&nbsp;&nbsp;&nbsp;</span>',FILTER_RGB:function(e){if(e.toLowerCase().indexOf("rgb")!=-1){var t=new RegExp("(.*?)rgb\\s*?\\(\\s*?([0-9]+).*?,\\s*?([0-9]+).*?,\\s*?([0-9]+).*?\\)(.*?)","gi"),n=e.replace(t,"$1,$2,$3,$4,$5").split(",");if(n.length==5){var r=parseInt(n[1],10).toString(16),i=parseInt(n[2],10).toString(16),s=parseInt(n[3],10).toString(16);r=r.length==1?"0"+r:r,i=i.length==1?"0"+i:i,s=s.length==1?"0"+s:s,e="#"+r+i+s}}return e},TAG2CMD:{b:"bold",strong:"bold",i:"italic",em:"italic",u:"underline",sup:"superscript",sub:"subscript",img:"insertimage",a:"createlink",ul:"insertunorderedlist",ol:"insertorderedlist"},NC_KEYS:{8:"backspace",9:"tab",13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete"},USE:["substitute","node","selector-css3","editor-selection","stylesheet"],NAME:"editorBase",STRINGS:{title:"Rich Text Editor"},ATTRS:{content:{value:'<br class="yui-cursor">',setter:function(t){return t.substr(0,1)==="\n"&&(t=t.substr(1)),t===""&&(t='<br class="yui-cursor">'),t===" "&&e.UA.gecko&&(t='<br class="yui-cursor">'),this.frame.set("content",t)},getter:function(){return this.frame.get("content")}},dir:{writeOnce:!0,value:"ltr"},linkedcss:{value:"",setter:function(e){return this.frame&&this.frame.set("linkedcss",e),e}},extracss:{value:!1,setter:function(e){return this.frame&&this.frame.set("extracss",e),e}},defaultblock:{value:"p"}}}),e.EditorBase=n},"3.7.2",{requires:["base","frame","node","exec-command","editor-selection"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("editor-para-base",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)},r="host",i="body",s="nodeChange",o="parentNode",u=i+" > p",a="p",f="<br>",l="firstChild",c="li";e.extend(n,e.Base,{_fixFirstPara:function(){var e=this.get(r),t=e.getInstance(),n,i,s=t.config.doc.body,o=s.innerHTML,l=o.length?!0:!1;o===f&&(o="",l=!1),s.innerHTML="<"+a+">"+o+t.EditorSelection.CURSOR+"</"+a+">",i=t.one(u),n=new t.EditorSelection,n.selectNode(i,!0,l)},_afterEditorReady:function(){var e=this.get(r),t=e.getInstance(),n;t&&(t.EditorSelection.filterBlocks(),n=t.EditorSelection.DEFAULT_BLOCK_TAG,u=i+" > "+n,a=n)},_afterContentChange:function(){var e=this.get(r),t=e.getInstance();t&&t.EditorSelection&&t.EditorSelection.filterBlocks()},_afterPaste:function(){var t=this.get(r),n=t.getInstance(),i=new n.EditorSelection;e.later(50,t,function(){n.EditorSelection.filterBlocks()})},initializer:function(){var t=this.get(r);if(t.editorBR){e.error("Can not plug EditorPara and EditorBR at the same time.");return}t.after("ready",e.bind(this._afterEditorReady,this)),t.after("contentChange",e.bind(this._afterContentChange,this)),e.Env.webkit&&t.after("dom:paste",e.bind(this._afterPaste,this))}},{NAME:"editorParaBase",NS:"editorParaBase",ATTRS:{host:{value:!1}}}),e.namespace("Plugin"),e.Plugin.EditorParaBase=n},"3.7.2",{requires:["editor-base"]});
