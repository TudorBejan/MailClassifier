YUI.add("lang/yim-lang_en-US",function(A){A.Intl.add("yim-lang","en-US",{"str_branding_mail":"Yahoo! Mail","str_btn_cancel":"Cancel","str_btn_ok":"OK","str_cancel":"Cancel","str_close":"Close","str_comp_font_menu_attr":"Select a font","str_comp_font_size_attr":"Select a font size","str_comp_loadheader":"Loading ...","str_comp_send_error":"Sorry, there was a problem sending your message","str_cont_add_contact_error_general":"An error occurred while trying to add the contact.","str_cont_add_contact_error_id_already_in_list":"{{user}} already exists in your {{str_cfg_branding_messenger}} List.","str_cont_add_contact_error_invalid_email":"Please enter a valid email address format: name@domain.com.","str_cont_add_contact_error_invalid_id":"{{user}} is not a valid {{str_cfg_branding_messenger}} ID.","str_cont_add_contact_error_max_reached":"You reached 1000 contacts, the maximum allowed number.","str_cont_add_email_label":"Email:","str_cont_add_email_option_primary":"Primary","str_cont_add_first_name_label":"First","str_cont_add_im_label":"Instant Message:","str_cont_add_last_name_label":"Last","str_cont_add_phone_label":"Phone:","str_cont_add_phone_option_home":"Home","str_cont_add_phone_option_mobile":"Mobile","str_cont_add_phone_option_work":"Work","str_cont_add_request_denied_body":"{{user}} has denied your request to add them to your {{str_cfg_branding_messenger}} List.","str_cont_add_request_denied_header":"Add to {{str_cfg_branding_messenger}} List Request Denied","str_cont_add_request_denied_message":"They responded with the following message:  {{response_text}}","str_cont_add_to_cont":"Add to Contacts","str_cont_list_default_group_empty":'Send IM and SMS from {{str_cfg_branding_messenger}}. <a href="javascript:;">Add a Contact</a>',"str_cont_list_default_group_id":"0","str_cont_list_default_group_name":"Online Contacts","str_cont_list_default_group_offline":"All contacts are currently offline.","str_cont_list_default_group_sign_out_msg_fresh":"You're signed out of {{str_cfg_branding_messenger}}. Click {{bttn_img}}to sign in.","str_cont_list_default_group_sign_out_msg":"You are signed out of {{str_cfg_branding_messenger}}. Click the{{bttn_img}}to sign in.","str_cont_list_default_mobile_group_id":"997","str_cont_list_default_mobile_group_name":"Mobile Contacts","str_cont_list_facebook_appname":'"Facebook Chat"',"str_cont_list_facebook_down_header":"Problem Connecting to Facebook","str_cont_list_facebook_down":"We are unable to sign you into Facebook Chat. Facebook is currently unavailable. Try again later.","str_cont_list_facebook_group_id":"999","str_cont_list_facebook_group_name":"Facebook Friends","str_cont_list_facebook_invalid_cred":"Link your Facebook account to {{str_cfg_branding}} and chat with your Facebook Friends from {{str_cfg_branding_messenger}}","str_cont_list_facebook_missing_cred":"Update your linked Facebook account to include Facebook Chat. Re-link your Facebook account so that you can chat with your Facebook Friends.","str_cont_list_facebook_sign_out_msg":"You are signed out of Facebook Chat. Click the{{bttn_img}}to sign in.","str_cont_list_status_away":"Away","str_cont_list_status_be_right_back":"Be right back","str_cont_list_status_busy":"Busy","str_cont_list_status_idle":"Idle","str_cont_list_status_not_at_home":"Not at home","str_cont_list_status_not_at_my_desk":"Not at my desk","str_cont_list_status_not_in_the_office":"Not in the office","str_cont_list_status_on_the_phone":"On the phone","str_cont_list_status_on_vacation":"On vacation","str_cont_list_status_out_to_lunch":"Out to lunch","str_cont_list_status_pending_add_request":"Pending add request","str_cont_list_status_stepped_out":"Stepped out","str_cont_list_top_contacts_group_name":"Top Contacts","str_cont_search_for":"Type contact information...","str_conv_add_requests":"Add Requests","str_conv_btn_accept":"Accept","str_conv_btn_accept_attr":"Allow {{conversation_yid}} to add me and see when Iâ€™m online","str_conv_btn_add_to_contacts":"Add to Contacts","str_conv_btn_add_to_contacts_attr":"Add {{conversation_yid}} to your Contacts","str_conv_btn_block":"Block","str_conv_btn_block_user_attr":"Add to Blocked List","str_conv_btn_block_user":"Block User","str_conv_btn_decline_attr":"Don't allow {{conversation_yid}} to add me or see when I'm online","str_conv_btn_decline":"Decline","str_conv_btn_hide_recent_conv":"Hide Recent Conversations","str_conv_btn_show_recent_conv":"Show Recent Conversations","str_conv_btn_start_conversation":"Start Conversation","str_conv_btn_unblock_user_attr":"Remove {{conversation_yid}} from your Blocked List","str_conv_btn_unblock_user":"Unblock User","str_conv_close_confirm":"You have unread messages, are you sure you want to close the window?","str_conv_conversations":"Conversations","str_conv_default_group":"Friends","str_conv_dialog_alert":"Alert","str_conv_dialog_confirm":"Confirm","str_conv_enter_phone_number_label":"Enter a mobile phone number for <b>{{conversation_user}}</b>:","str_conv_enter_phone_number_label_no_user":"a mobile phone number for <b>{{conversation_user}}</b>:","str_conv_error_empty_general":"All fields are required.","str_conv_example":"Example:","str_conv_imconv_new_hint":"Start a new instant message.<br>Enter a Messenger ID or an email address.","str_conv_im":"IM","str_conv_look_for":"Look for...","str_conv_mode-tray_btn_sms_attr":"Switch to SMS","str_conv_new_hint":"Start a new instant message or SMS message.<br>Enter a Messenger ID, email, or mobile number.","str_conv_new_message_browser_title":"{{conversation_user}} sent you a new message.","str_conv_no_contact_add_request":"<b>{{conversation_yid}}</b> would like to add you to his or her {{str_cfg_branding_messenger}} List.","str_conv_non_users_blocked":"<em>You are currently blocking messages from users who are not in your contact list.  To communicate with this user you will need to either add them to your contacts or change your privacy settings.</em>","str_conv_ntf_spam_reported":"<em>This message from <span><strong>{{userid}}</strong></span> has been reported as spam.</em>  They were also added to your Block List.  Unblock this person if you want to contact them.","str_conv_ntf_user_blocked":"<em>You have blocked <span><strong>{{userid}}</strong></span>.</em> You cannot send and receive instant messages from blocked users.","str_conv_ntf_user_unblocked":"<em><span><strong>{{userid}}</strong></span> has been removed from your Blocked List.</em>","str_conv_prompt_tab_btn_attr":"Change to display your conversations in a tab by default.","str_conv_prompt_tab_btn":"Change to Tab","str_conv_prompt_tab":"View {{str_cfg_branding_messenger}} Conversations in a tab!","str_conv_report_abuse_attr":"Report Abuse","str_conv_report_abuse":"Report Abuse","str_conv_report_abuse_title":"{{str_cfg_branding_messenger}} Report Abuse","str_conv_self_objective":"Me","str_conv_send_sms":"Send SMS","str_conv_signed_out_hint":"You are not signed in to {{str_cfg_branding_messenger}}. Please sign in to start a new conversation.","str_conv_smsconv_new_hint":"Start a new SMS message.<br>Enter a name or mobile number.","str_conv_sms_fees":"Wireless carrier charges may apply.","str_conv_sms_input_title":"Compose SMS","str_conv_sms":"SMS","str_conv_spam_reported_description_bl":"To permanently block this contact from sending you messages, add {{user}} to your Block list in {{str_cfg_generic_messenger}} Options.","str_conv_spam_reported_description_bnc":"To permanently block this contact from sending you messages, delete {{user}} from your Contacts list. Right click on display image, then choose Delete.","str_conv_spam_reported_description_bottom":"<strong>{{userid}}</strong> has also been blocked, and you will no longer receive messages from this user.","str_conv_spam_reported_description_top":"Thank you. Every IM you report as spam helps SpamGuard work better.","str_conv_spam_reported_title":"Spam Report Submitted","str_conv_tab_close_confirm":"You have unread messages, are you sure you want to close this conversation?","str_conv_typing":"{{conversation_user}} is typing...","str_conv_user_appears_offline":"<b>{{user}}</b> appears to be offline.","str_conv_user_invisible":"You currently appear offline to {{conversation_user}} (manage with Stealth Settings)","str_conv_user_notification_ssa_button":"Open {{str_cfg_branding_messenger}} Options","str_conv_user_offlineMessage_notice":"Messages sent to you while you were signed out:","str_conv_user_signed_back_in":"<b>{{conversation_user}}</b> has signed back in.","str_conv_user_signed_out":"<b>{{conversation_user}}</b> has signed out.","str_conv_user_sms_edit_number_attr":"Edit number","str_conv_user_sms_edit_number":"Edit number","str_conv_user_sms_learn_more_btn_attr":"Learn more","str_conv_user_sms_learn_more_btn":"Learn more","str_conv_user_sms_notice":"<b>{{conversation_user}}</b> ({{msg_sms_number}}) will receive your instant message as an SMS.","str_conv_user_sms_notice_error_failed_to_deliver":"SMS could not be sent to <b>{{number}}</b>. It may be an invalid mobile number, formatted incorrectly, or no longer in service.","str_conv_user_sms_notice_error_msg_blocked":"Phone number {{number}} cannot receive SMS messages at this time.","str_conv_user_sms_notice_error_number_empty":"An empty number is not supported.","str_conv_user_sms_notice_error_number_not_supported":"The number <b>{{number}}</b> is not supported.","str_conv_user_sms_notice_error_ration_breached":"<b>{{user}}</b> must reply to one of your messages before you can send any more.","str_conv_user_sms_notice_error_system_busy":"SMS could not be sent to {{number}}. The system is currently busy. Please try again later.","str_conv_user_statexfer_notice":"Your ongoing conversation with {{conversation_user}}...","str_conv_wrn_interop_add_request_pending_2":"Send {{user}} an SMS instead.","str_conv_wrn_interop_add_request_pending":"To IM with {{user}}, they must first accept your request to add them to your {{str_cfg_generic_messenger}} List contacts. Your request is still pending.","str_conv_wrn_unknown_interop_user_2":"To contact {{user}} right now, send an SMS.","str_conv_wrn_unknown_interop_user":"To send IM to {{user}}, they must first accept your request to add them to your {{str_cfg_generic_messenger}} List contacts.","str_conv_wrn_unknown_user":"<em><span><strong>{{userid}}</strong></span> is not in your contacts.</em>  Be careful when corresponding with people you donâ€™t know. Never share private information with them.","str_country_argentina":"Argentina","str_country_australia":"Australia","str_country_brazil":"Brazil","str_country_canada":"Canada","str_country_chile":"Chile","str_country_china":"China","str_country_denmark":"Denmark","str_country_finland":"Finland","str_country_france":"France","str_country_germany":"Germany","str_country_greece":"Greece","str_country_hong_kong":"Hong Kong","str_country_india":"India","str_country_indonesia":"Indonesia","str_country_ireland":"Ireland","str_country_italy":"Italy","str_country_kuwait":"Kuwait","str_country_malaysia":"Malaysia","str_country_mexico":"Mexico","str_country_netherlands":"Netherlands","str_country_new_zealand":"New Zealand","str_country_norway":"Norway","str_country_pakistan":"Pakistan","str_country_peru":"Peru","str_country_philippines":"Philippines","str_country_poland":"Poland","str_country_romania":"Romania","str_country_singapore":"Singapore","str_country_south_korea":"South Korea","str_country_spain":"Spain","str_country_sweden":"Sweden","str_country_taiwan":"Taiwan","str_country_thailand":"Thailand","str_country_turkey":"Turkey","str_country_united_kingdom":"United Kingdom","str_country_united_states":"United States","str_country_venezuela":"Venezuela","str_country_vietnam":"Vietnam","str_del_contact_msg_ab_only_desc":"Are you sure you want to delete {{contact_highlighted}} from your {{str_cont_list_default_group_name}}?{{line_spacing}}This is a contact shared by {{str_cfg_generic_messenger}} and Mail. Deleting {{contact}} will also delete this contact from Mail.{{line_spacing}}Instead of deleting, you can change {{str_cont_list_default_group_name}} to show only {{str_cfg_generic_messenger}} List contacts in {{open_msg_link}}{{str_messenger_options}}{{close_msg_link}}.","str_del_contact_msg_also_delete_ab":"Also delete from {{str_cfg_branding_mail}} Contacts","str_del_contact_msg_header":"Delete Contact","str_del_contact_msg_messenger_desc":"Are you sure you want to delete {{contact_highlighted}} from your {{str_cfg_generic_messenger}} List contacts?","str_del_contact_msg_not_deleted_ab":"Because {{contact_highlighted}} is a contact shared by {{str_cfg_generic_messenger}} and Mail, {{contact_highlighted}} may continue to show in {{str_cont_list_default_group_name}}.{{line_spacing}}You can change {{str_cont_list_default_group_name}} to show only {{str_cfg_generic_messenger}} List contacts in {{open_msg_link}}{{str_messenger_options}}{{close_msg_link}}.","str_delete":"Delete","str_error_btn_reconnect":"Reconnect","str_error_disconnected_error":"You have been disconnected from {{str_cfg_branding_messenger}}.","str_error_loading_recent_messages":"Sorry, problem loading conversation history.","str_error_logged_out_another":"You have been signed out because you signed into a different computer or device.","str_error_recent_messages_empty":"You have no recent conversations with {{contact}}.","str_error_reconnected_message":"You have successfully signed in.","str_form_lbl_im_lotus":"Lotus Sametime","str_form_lbl_im_mslcs":"Microsoft LCS","str_label_sign_in_facebookchat":"Sign In To Facebook Chat button","str_label_sign_in_messenger":"Sign In To {{str_cfg_branding_messenger}} button","str_mail_dateformat_AM_l10n":"AM","str_mail_dateformat_PM_l10n":"PM","str_mail_month_abbr_april":"Apr","str_mail_month_abbr_august":"Aug","str_mail_month_abbr_december":"Dec","str_mail_month_abbr_february":"Feb","str_mail_month_abbr_january":"Jan","str_mail_month_abbr_july":"Jul","str_mail_month_abbr_june":"Jun","str_mail_month_abbr_march":"Mar","str_mail_month_abbr_may":"May","str_mail_month_abbr_november":"Nov","str_mail_month_abbr_october":"Oct","str_mail_month_abbr_september":"Sep","str_mail_month_april":"April","str_mail_month_august":"August","str_mail_month_december":"December","str_mail_month_february":"February","str_mail_month_january":"January","str_mail_month_july":"July","str_mail_month_june":"June","str_mail_month_march":"March","str_mail_month_may":"May","str_mail_month_november":"November","str_mail_month_october":"October","str_mail_month_september":"September","str_mail_weekday_abbr_friday":"Fri","str_mail_weekday_abbr_monday":"Mon","str_mail_weekday_abbr_saturday":"Sat","str_mail_weekday_abbr_sunday":"Sun","str_mail_weekday_abbr_thursday":"Thu","str_mail_weekday_abbr_tuesday":"Tue","str_mail_weekday_abbr_wednesday":"Wed","str_mail_weekday_friday":"Friday","str_mail_weekday_monday":"Monday","str_mail_weekday_saturday":"Saturday","str_mail_weekday_sunday":"Sunday","str_mail_weekday_thursday":"Thursday","str_mail_weekday_tuesday":"Tuesday","str_mail_weekday_wednesday":"Wednesday","str_menu_appear_offline":"Appear Offline to {{contact_name}}","str_menu_appear_online":"Appear Online to {{contact_name}}","str_menu_appear_permanently_offline":"Appear Permanently Offline to {{contact_name}}","str_menu_available":"Available","str_menu_busy":"Busy","str_menu_contact_delete":"Delete Contact","str_menu_email":"Email","str_menu_im_attr":"Instant Message","str_menu_im":"Instant Message","str_menu_im_shortcut":"I","str_menu_invisible":"Invisible to Everyone","str_menu_messenger_options":"{{str_cfg_branding_messenger}} Options","str_menu_new_im":"Instant Message","str_menu_report_abuse":"Report Abuse","str_menu_report_spam":"Report as Spam","str_menu_send_text":"SMS","str_menu_sign_in_facebookchat":"Sign In To Facebook Chat","str_menu_sign_in_messenger":"Sign In To {{str_cfg_branding_messenger}}","str_menu_sign_out_facebookchat":"Sign Out of Facebook Chat","str_menu_sign_out_messenger":"Sign Out of {{str_cfg_branding_messenger}}","str_menu_sms_shortcut":"T","str_menu_sms":"SMS","str_menu_view_facebook_profile":"View Facebook Profile","str_menu_view_profile":"View Profile","str_more":"More","str_msgr_em_angel":"angel","str_msgr_em_angry":"angry","str_msgr_em_applause":"applause","str_msgr_em_batting_eyelashes":"batting eyelashes","str_msgr_em_big_grin":"big grin","str_msgr_em_big_hug":"big hug","str_msgr_em_blushing":"blushing","str_msgr_em_broken_heart":"broken heart","str_msgr_em_call_me":"call me","str_msgr_em_catch":"catch","str_msgr_em_cheer":"cheer","str_msgr_em_clown":"clown","str_msgr_em_cold":"cold","str_msgr_em_confused":"confused","str_msgr_em_cook":"cook","str_msgr_em_cool":"cool","str_msgr_em_cowboy":"cowboy","str_msgr_em_crying":"crying","str_msgr_em_daydreaming":"day dreaming","str_msgr_em_devilish":"devilish","str_msgr_em_dizzy":"dizzy","str_msgr_em_doh":"d'oh!","str_msgr_em_down_on_luck":"down on luck","str_msgr_em_drooling":"drooling","str_msgr_em_eat":"eat","str_msgr_em_exercise":"exercise","str_msgr_em_fight":"fight","str_msgr_em_gift":"gift","str_msgr_em_give_up":"give up","str_msgr_em_high_five":"high five","str_msgr_em_hot":"hot","str_msgr_em_hypnotized":"hypnotized","str_msgr_em_kiss":"kiss","str_msgr_em_label":"{{shortcut}} {{description}}","str_msgr_em_laughing":"laughing","str_msgr_em_liar":"liar","str_msgr_em_loser":"loser","str_msgr_em_lovestruck":"lovestruck","str_msgr_em_music":"music","str_msgr_em_nail_biting":"nail biting","str_msgr_em_nerd":"nerd","str_msgr_em_not_talking":"not talking","str_msgr_em_on_the_phone":"on the phone","str_msgr_em_party":"party","str_msgr_em_phbbbt":"phbbbt","str_msgr_em_play_game":"play game","str_msgr_em_puke":"puke","str_msgr_em_raised_eyebrow":"raised eyebrow","str_msgr_em_rofl":"rolling on the floor laughing","str_msgr_em_rolling_eyes":"rolling eyes","str_msgr_em_sad":"sad","str_msgr_em_searching":"searching","str_msgr_em_shh":"don't tell anyone shh!","str_msgr_em_sick":"sick","str_msgr_em_sigh":"sigh","str_msgr_em_silly":"silly","str_msgr_em_sing":"sing","str_msgr_em_sleepy":"sleepy","str_msgr_em_smile":"smile","str_msgr_em_smug":"smug","str_msgr_em_spooky":"spooky","str_msgr_em_straight_face":"straight face","str_msgr_em_studying":"studying","str_msgr_em_surprise":"surprise","str_msgr_em_talk_to_the_hand":"talk to the hand","str_msgr_em_thinking":"thinking","str_msgr_em_time_out":"time out","str_msgr_em_tongue":"tongue","str_msgr_em_tv":"tv","str_msgr_em_unlucky":"unlucky","str_msgr_em_waiting":"waiting","str_msgr_em_wave":"wave","str_msgr_em_whew":"whew!","str_msgr_em_wink":"wink","str_msgr_em_wits_end":"at wits' end","str_msgr_em_worried":"worried","str_msgr_em_yawn":"yawn","str_msgr_server_error_10":"The operation failed because you have reached the maximum number of ignored users.","str_msgr_server_error_12":"The operation failed because the user is in your Contact List.","str_msgr_server_error_1":"There was a problem handling your request, please retry the operation.","str_msgr_server_error_28":"Your session has expired, please login and try again.","str_msgr_server_error_2":"The operation failed because the user already exists.","str_msgr_server_error_32":"The operation failed because the Group ID is invalid.","str_msgr_server_error_33":"The operation failed because the user is in your Ignore List.","str_msgr_server_error_3":"The operation failed because the user does not exist.","str_msgr_server_error_42":"The operation failed because you have reached the maximum number of pending Add Requests.","str_msgr_server_error_4":"Authentication failed.","str_msgr_server_error_53":"The login failed because you have reached the maximum number of simultaneous sessions.","str_msgr_server_error_59":"Failed to send the message because the user appears to be offline.","str_msgr_server_error_6":"The operation failed because you have reached the maximum number of contacts.","str_msgr_server_error_7":"The operation failed because you have reached the maximum number of groups.","str_msgr_server_error_8":"The operation failed because the group already exists.","str_msgr_server_error_self":"The operation failed because this is the signed in user.","str_nav_opt_msg_title":"Messenger Options","str_new_conversation":"New Conversation","str_new_im":"New Instant Message","str_new_sms":"New SMS Message","str_offline_msg_reportasspam":'<em>This message from <span style="font-weight:bold;">{{user}}</span> has been reported as spam</em>.',"str_offline_msg_report_spam":"Report Spam","str_opt_msg_blocked_ids_add_title":"Ignore User","str_opt_msg_general_history_attr":"Click to disable conversation archiving","str_opt_msg_general_history_description":"{{str_cfg_branding_messenger}} can keep a history of all your conversations. You can browse and search your history from any computer you sign in to.","str_opt_msg_general_history_disabled_attr":"Click to enable conversation archiving","str_opt_msg_phonecountry_label":"{{country_name}} (+{{country_code}})","str_save":"Save","str_session_display_name_order_no_trans":"{{first}} {{last}}","str_start_new_conversation_attr":"Start new conversation","str_window_btn_minimize":"Minimize","str_window_btn_popin":"Pop in conversation back to {{str_cfg_branding_messenger}}","str_window_btn_popout":"Pop out conversation to a separate window","str_window_btn_restore":"Restore","str_window_title_addcontact":"{{str_cfg_branding_messenger}} Add Contact Dialog","str_window_title_alert":"{{str_cfg_branding_messenger}} Confirm Dialog","str_window_title_conversation":"{{str_cfg_branding_messenger}} Conversation Window","str_window_title_main":"{{str_cfg_branding_messenger}} Contact List","str_window_title_options":"{{str_cfg_branding_messenger}} Options Dialog","str_window_title_signout":"{{str_cfg_branding_messenger}} Sign Out Confirmation Dialog","str_window_title_smsinput":"{{str_cfg_branding_messenger}} SMS Number Input Dialog"});
},"@VERSION@");YUI.add("yim-lang",function(C){var B="yim-lang";var A={NAME:B,STRINGS:C.Intl.get(B),getLang:function(){return C.Intl.getLang(B);},get:function(E){var D=A.STRINGS[E]||C.Intl.get(B)[E];return D;},isCJKV:function(){if(A.getLang()=="ko-KR"||A.getLang()=="zh-Hans-CN"||A.getLang()=="zh-Hant-HK"||A.getLang()=="zh-Hant-TW"||A.getLang()=="vi-VN"){return true;}else{return false;}},isCJK:function(){return(A.isCJKV()&&A.getLang()!="vi-VN");},isRTL:function(){var D=window.launchData;if(D){return D.rtl;}return false;},isBIDI:function(){var D=window.launchData;if(D){if(D.urlParams&&D.urlParams.ymsgrrtl){return true;}if(D.intl=="xa"||D.intl=="xe"||A.getLang().indexOf("ar-JO")>-1||A.getLang().indexOf("ur-PK")>-1||A.getLang().indexOf("he-IL")>-1){return true;}}return false;}};C.namespace("Messenger").Lang=A;},"@VERSION@",{requires:["intl"],lang:["ar-JO","bg-BG","bn-BD","bn-IN","cs-CZ","da-DK","de-AT","de-CH","de-DE","el-GR","en-GB","en-US","es-AR","es-ES","es-MX","es-US","et-EE","fi-FI","fil-PH","fr-BE","fr-CA","fr-CH","fr-FR","gu-IN","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-CH","it-IT","kn-IN","ko-KR","lt-LT","lv-LV","ml-IN","mr-IN","ms-MY","nb-NO","nl-BE","nl-NL","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sr-Cyrl-RS","sv-SE","ta-IN","te-IN","th-TH","ti-PH","tl-PH","tr-TR","uk-UA","ur-PK","vi-VN","zh-Hans-CN","zh-Hant-HK","zh-Hant-TW"]});YUI.add("lang/yim-intl_en-US",function(A){A.Intl.add("yim-intl","en-US",{"str_urls_report_abuse":"http://help.yahoo.com/l/us/yahoo/messenger/forms/abusetranscript.html","str_urls_sms_learn_more":"http://help.yahoo.com/l/us/yahoo/mail/ymail/chat/sms-11.html","str_cfg_branding_messenger":"Yahoo! Messenger","str_cfg_generic_messenger":"Messenger","str_cfg_branding":"Yahoo!"});},"@VERSION@");YUI.add("yim-intl",function(C){var B="yim-intl";var A={NAME:B,STRINGS:C.Intl.get(B),getLang:function(){return C.Intl.getLang(B);},get:function(E){var D=C.Messenger.Lang.get(E)||A.STRINGS[E];if(C.Lang.isUndefined(D)||C.Lang.isNull(D)){if(launchData&&launchData.strings&&launchData.strings[E]){return launchData.strings[E];}else{return"";}}return D;},isCJKV:function(){return C.Messenger.Lang.isCJKV();},isCJK:function(){return C.Messenger.Lang.isCJK();},isRTL:function(){return C.Messenger.Lang.isRTL();},isBIDI:function(){return C.Messenger.Lang.isBIDI();}};C.namespace("Messenger").Intl=A;},"@VERSION@",{requires:["intl","yim-lang"],lang:["ar-EG","ar-JO-nokia","ar-JO","ar-MA","ar-SA","bg-BG","bn-BD","bn-IN","cs-CZ","da-DK","de-AT","de-CH","de-DE","el-GR","en-AU","en-CA-rogers","en-CA","en-GB-bt","en-GB-sky","en-GB","en-IE","en-IN-mts","en-IN","en-MY","en-NZ","en-PH","en-SG","en-US-ftr","en-US-sbc","en-US-vzn","en-US","en-ZA","es-AR-nokia","es-AR","es-CL-nokia","es-CL","es-CO-nokia","es-CO","es-ES-nokia","es-ES","es-MX-nokia","es-MX","es-PE-nokia","es-PE","es-US-nokia","es-US","es-VE-nokia","es-VE","et-EE","fi-FI","fil-PH","fr-BE","fr-CA-rogers","fr-CA","fr-CH","fr-FR","gu-IN","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-CH","it-IT","kn-IN","ko-KR-nokia","ko-KR","lt-LT","lv-LV","ml-IN","mr-IN","ms-MY-nokia","ms-MY","nl-BE","nl-NL","no-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU-nokia","ru-RU","sk-SK","sl-SL","sr-Cyrl-RS","sv-SE","ta-IN","te-IN","th-TH","tr-TR-nokia","tr-TR","uk-UA","ur-PK-nokia","ur-PK","vi-VN","zh-Hans-CN-nokia","zh-Hans-CN","zh-Hant-HK-nokia","zh-Hant-HK","zh-Hant-TW-nokia","zh-Hant-TW"]});/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("classnamemanager",function(e,t){var n="classNamePrefix",r="classNameDelimiter",i=e.config;i[n]=i[n]||"yui3",i[r]=i[r]||"-",e.ClassNameManager=function(){var t=i[n],s=i[r];return{getClassName:e.cached(function(){var n=e.Array(arguments);return n[n.length-1]!==!0?n.unshift(t):n.pop(),n.join(s)})}}()},"3.7.2",{requires:["yui-base"]});
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("substitute",function(e,t){var n=e.Lang,r="dump",i=" ",s="{",o="}",u=/(~-(\d+)-~)/g,a=/\{LBRACE\}/g,f=/\{RBRACE\}/g,l=function(t,l,c,h){var p,d,v,m,g,y,b=[],w,E,S=t.length;for(;;){p=t.lastIndexOf(s,S);if(p<0)break;d=t.indexOf(o,p);if(p+1>=d)break;w=t.substring(p+1,d),m=w,y=null,v=m.indexOf(i),v>-1&&(y=m.substring(v+1),m=m.substring(0,v)),g=l[m],c&&(g=c(m,g,y)),n.isObject(g)?e.dump?n.isArray(g)?g=e.dump(g,parseInt(y,10)):(y=y||"",E=y.indexOf(r),E>-1&&(y=y.substring(4)),g.toString===Object.prototype.toString||E>-1?g=e.dump(g,parseInt(y,10)):g=g.toString()):g=g.toString():n.isUndefined(g)&&(g="~-"+b.length+"-~",b.push(w)),t=t.substring(0,p)+g+t.substring(d+1),h||(S=p-1)}return t.replace(u,function(e,t,n){return s+b[parseInt(n,10)]+o}).replace(a,s).replace(f,o)};e.substitute=l,n.substitute=l},"3.7.2",{requires:["yui-base"],optional:["dump"]});
YUI.add("globalconfig",function(F){var A=YUI.namespace("Messenger"),D=window.launchData||{},B=D.userPrefs||{},C=F.Messenger.RequestManager,E={},G={"us":{name:"united_states",format:"408-345-1212",code:"1",idd:["011"],ndd:["1"],examples:["(408) 345-1212","+1 408-345-1212","+91 98-2424-5353"]},"ca":{name:"canada",format:"604-345-1212",code:"1",idd:["011"],ndd:["1"],examples:["(604) 345-1212","+1 604-345-1212","+91 98-2424-5353"]},"hk":{name:"hong_kong",format:"9234-5678",code:"852",idd:["001"],ndd:[],examples:["9234-5678","+852 9234-5678","+1 (408) 345-1212"]},"id":{name:"indonesia",format:"86-2424-5353",code:"62",idd:["001","008"],ndd:["0"],examples:["86-2424-5353","+62 86-2424-5353","+1 (408) 345-1212"]},"in":{name:"india",format:"98-2424-5353",code:"91",idd:["00"],ndd:["0"],examples:["98-2424-5353","+91 98-2424-5353","+1 (408) 345-1212"]},"kr":{name:"south_korea",format:"14-567-890",code:"82",idd:["001","002"],ndd:["0"],examples:["14-567-890","+82 14-567-890","+1 (408) 345-1212"]},"kw":{name:"kuwait",format:"9123-4567",code:"965",idd:["00"],ndd:["0"],examples:["9123-4567","+965 9123-4567","+1 (408) 345-1212"]},"my":{name:"malaysia",format:"12-345-6789",code:"60",idd:["00"],ndd:["0"],examples:["12-345-6789","+60 12-345-6789","+1 (408) 345-1212"]},"ph":{name:"philippines",format:"917-234-5678",code:"63",idd:["00"],ndd:["0"],examples:["917-234-5678","+63 917-234-5678","+1 (408) 345-1212"]},"pk":{name:"pakistan",format:"32-3456-7890",code:"92",idd:["00"],ndd:["0"],examples:["32-3456-7890","+92 32-3456-7890","+1 (408) 345-1212"]},"th":{name:"thailand",format:"8-1234-5678",code:"66",idd:["001"],ndd:["0"],examples:["8-1234-5678","+66 8-1234-5678","+1 (408) 345-1212"]},"vn":{name:"vietnam",format:"902-345-678",code:"84",idd:["00"],ndd:["0"],examples:["902-345-678","+84 902-345-678","+1 (408) 546-1212"]}};if(!A.GlobalConfig){A.GlobalConfig=(function(){var H=F.Messenger.Intl;function I(J){I.superclass.constructor.apply(this,arguments);}I.NAME="yim-globalconfig";I.NETWORK_CAPABILITIES={"yahoo":{"video":true,"voice":true,"filetransfer":true,"stealthsettings":true,"ssa":true,"photosharing":true,"addbuddy":true,"sms":true},"sms":{"addbuddy":true,"sms":true},"facebook":{"video":false,"voice":false,"filetransfer":false,"stealthsettings":false,"ssa":false,"addbuddy":false,"sms":false},"msn":{"video":false,"voice":false,"filetransfer":false,"stealthsettings":true,"ssa":false,"addbuddy":true,"sms":true},"lcs":{},"ibm":{}};I.REQUESTS={"SSP_SET":{method:"PUT",path:"/v1/preferences",server:"ssp"},"SSP_GET":{method:"GET",path:"/v1/preferences",server:"ssp"}};I.PERSISTED_ATTRS=["contactListImageSize","blockNonContacts","useTopContacts","conversationStyle"];I.SSP_MAP={"ssaEnabled":{"key":"server.archive.enable","defaultValue":"1"}};I.persistAttrSetter=function(M,J){var K=this.get(J),L={};if(typeof(K)!="undefined"&&M!==K){if(F.Messenger.OMAPI){L.keys={};L.keys[J]=M;F.Messenger.OMAPI.setData(L);}}return M;};I.sspAttrSetter=function(O,K){var L=!E[K]?this.get(K):undefined,N=I.REQUESTS.SSP_SET,J={},M={};if(typeof(L)!="undefined"&&O!==L){J.preferences=[];M.preference={};M.preference.key=I.SSP_MAP[K].key;M.preference.value=[];M.preference.value.push(O);J.preferences.push(M);C.issueRequest({type:"SSP_SET",server:N.server,postBody:J,method:N.method,path:N.path});}return O;};I.sspAttrGetter=function(M,J){var L=I.REQUESTS.SSP_GET,K=["pref="+I.SSP_MAP[J].key];if(typeof(M)=="undefined"&&!E[J]){E[J]=true;C.issueRequest({type:"SSP_GET",server:L.server,args:K,method:L.method,path:L.path,successCallback:F.bind(function(N){var O=N&&N.preferences?N.preferences[0].preference.value[0]:null;if(O==null){O=I.SSP_MAP[J].defaultValue;}this.set(J,O);delete E[J];},this),failureCallback:function(){delete E[J];}});}return M;};I.ATTRS={smsEnabled:{value:typeof(D.smsSupported)!="undefined"?D.smsSupported:true,validator:F.Lang.isBoolean},videoEnabled:{value:false,validator:F.Lang.isBoolean},useSingleAddReq:{value:true},lastActive:{setter:I.persistAttrSetter,value:B.lastActive||"never"},ssaEnabled:{getter:I.sspAttrGetter,setter:I.sspAttrSetter},mpopSignOutType:{setter:I.persistAttrSetter,value:B.mpopSignOutType?B.mpopSignOutType:"local"},conversationStyle:{setter:I.persistAttrSetter,value:D.isSecure?"text":(B.conversationStyle?B.conversationStyle:"bubbles")},bidiEnabled:{value:false,validator:F.Lang.isBoolean},showModeTray:{value:"1"},tabbedMessaging:{value:true},tabDragDropSupported:{value:false},latintls:{value:["ar","e1","mx","pe","ve","co","cl"]},allowInteropAdd:{value:true},conversationPopOutSupported:{value:D.urlParams&&D.urlParams.ymsgrpopout?true:false},convWindowStyle:{setter:I.persistAttrSetter,value:B.convWindowStyle&&B.convWindowStyle!="browserWindow"?B.convWindowStyle:"iframe"},showPresenceTransitions:{value:((D.urlParams&&D.urlParams.showTransitions==0)||F.UA.ie!=0)?false:true},getImagesFromFB:{value:false},contactListImageSize:{setter:I.persistAttrSetter,value:(D.isFresh||D.isSecure)?"none":B.contactListImageSize?B.contactListImageSize:"none"},blockNonContacts:{setter:I.persistAttrSetter,value:B.blockNonContacts?B.blockNonContacts:false},useTopContacts:{setter:I.persistAttrSetter,value:(typeof(B.useTopContacts)!="undefined")&&B.useTopContacts!==""?B.useTopContacts:B.mimContactScoringData&&B.mimContactScoringData.scoreThresholdReached?true:false},topContactsEnabled:{value:window.openmail?true:false},fbEnabled:{value:window.openmail?(!D.isFresh&&D.fbEnabled):true},ssaNotificationSeen:{setter:I.persistAttrSetter,value:B.ssaNotificationSeen?B.ssaNotificationSeen:false},enableSounds:{setter:I.persistAttrSetter,value:typeof(B.enableSounds)!="undefined"?B.enableSounds:true},showOfflineContacts:{value:false},hideAddressBookContacts:{setter:I.persistAttrSetter,value:typeof(B.hideAddressBookContacts)!="undefined"?B.hideAddressBookContacts:false},showOfflineImages:{value:true},enableRTE:{value:true},themeInfo:{value:D.themeinfo},homeCountry:{setter:function(K,J){if(K){switch(K){case"e1":case"":K="us";break;case"cf":K="ca";break;case"hi":K="in";
break;default:if(G[K]){return I.persistAttrSetter.call(this,K,J);}else{return"us";}}}},value:(function(){var J="";if(B){J=B.homeCountry?B.homeCountry:D.intl;}else{J="us";}return J;})()},isFresh:{value:!!(D&&D.isFresh)}};F.extend(I,F.Base,{initializer:function(){var K,J;if(window.openmail){if(D.urlParams&&D.urlParams.vnv){this.set("videoEnabled",true);}}else{if(window.frameElement&&window.frameElement.baseURI&&window.frameElement.baseURI.indexOf("vnv=1")!=-1){this.set("videoEnabled",true);}}if(!this.get("topContactsEnabled")){this.set("useTopContacts",false);}},getNetworkCapabilities:function(J){return J?I.NETWORK_CAPABILITIES[J]:I.NETWORK_CAPABILITIES;},getLATIntls:function(){var J=this.get("latintls");return J.join(",");},getAppName:function(){return H.get("str_cfg_branding_messenger");},getGenericAppName:function(){return H.get("str_cfg_generic_messenger");},preferenceUpdated:function(J){var K,L;F.some(I.SSP_MAP,function(N,M){if(J.key==N.key){K=M;return true;}});if(this.attrAdded(K)&&J.value&&J.value.length){L=J.value[0];this.set(K,L);}}});return new I();})();A.GlobalConfig.COUNTRY_CODES_MAP=G;}F.namespace("Messenger").GlobalConfig=A.GlobalConfig;},"@VERSION@",{requires:["base-base","yim-intl"]});YUI.add("delayloader",function(A){if(!YUI.namespace("Messenger").DelayLoader){YUI.Messenger.DelayLoader=(function(){var F=A.Messenger.GlobalConfig,K=A.Messenger.Events,I=A.Messenger.RequestManager,J,G,H,E={"initModules":{modules:[{"use":"ommenus","className":"OMMenus"}],events:[K.APP_INIT_COMPLETE],skipRefire:true},"conversations":{modules:[{"use":"conversationmanager","className":"ConversationManager"},{"use":"conversationapi","className":"ConversationAPI"}],events:[K.LOGGED_IN],notifications:["message","offlineMessage","sms","recentMessages","stateTransfer"]}},B={},D=function(S,T,N){var L=E[S],Q,O,P,M=[],R;if(!L){return;}for(O=0,P=L.modules.length;O<P;O++){if(!A.Messenger[L.modules[O].className]){M.push(L.modules[O].use);}}if(M.length){if(!B[S]){B[S]=[{evt:T,data:N}];M.push(function(V){if(!L.skipRefire){for(O=0,P=B[S].length;O<P;O++){R=B[S][O];if(R.evt){try{V.Global.fire(R.evt,R.data);}catch(U){}}}}delete B[S];for(Q in L.listeners){L.listeners[Q].detach();}for(Q in L.notificationListeners){L.notificationListeners[Q].detach();}delete E[S];});A.use.apply(A,M);}else{B[S].push({evt:T,data:N});}}else{for(Q in L.listeners){L.listeners[Q].detach();}delete E[S];}},C=function(){for(J in E){E[J].listeners=[];E[J].notificationListeners=[];for(G=0,H=E[J].events.length;G<H;G++){(function(M,L){E[M].listeners.push(A.Global.on(L,function(N){D(M,L,N);}));})(J,E[J].events[G]);}if(E[J].notifications){for(G=0,H=E[J].notifications.length;G<H;G++){(function(M,L){E[M].notificationListeners.push(I.watchNotifications(L,function(N){D(M,null,N);}));})(J,E[J].notifications[G]);}}}};return{start:C};})();}A.namespace("Messenger").DelayLoader=YUI.Messenger.DelayLoader;},"@VERSION@",{requires:["events","requestmanager","globalconfig"]});YUI.add("command",function(B){if(!YUI.Command){var A={};YUI.Command={exec:function(E){var G=E.split(":"),H=G[0],D=G[1],C=Array.prototype.slice.apply(arguments,[1]);var F=A[H],I;if(!F){return;}I=F[D]||null;if(I===null){I=F["default"]||null;if(I===null){YUI.log("could not resolve command "+E+".","warn","Y.Command");return;}C.unshift(D);}YUI.log("executing "+E+".","info","Y.Command");return I.f.apply(I.c,C);},registerModule:function(E,F,G,D){if(!F){return;}if(!A[E]){A[E]={};}D=D||F;for(var C in F){if(typeof(F[C])=="function"&&C.indexOf("_")!==0){A[E][C]={f:F[C],c:D};}}if(G){A[E]["default"]={f:G,c:D};}},registerHandler:function(D,E,F,C){if(!A[D]){A[D]={};}A[D][E]={f:F,c:C};}};}B.Command=YUI.Command;},"@VERSION@");YUI.add("globalconstants",function(A){if(!YUI.namespace("Messenger").GlobalConstants){YUI.Messenger.GlobalConstants={NOTIFICATION_INLINE:0,NOTIFICATION_STATICTOP:1,NOTIFICATION_INLINE_PLAINTEXT:2,NOTIFICATION_STATIC_RED:3,NOTIFICATION_INLINE_RED:4,NOTIFICATION_INLINE_TOP:5,SSA_NOTIFICATION:"SSA_NOTIFICATION",ACK_DELAY:7000,SMS_INPUT_WINDOW:"SMSInputWindow",ADD_CONTACT_WINDOW:"AddContactWindow",SIGNOUT_WINDOW:"SignoutWindow",DIALOG_WINDOW:"DialogWindow",CONTACT_MENU_WINDOW:"ContactMenuWindow",REPORT_ABUSE_WINDOW:"ReportAbuseDialog",DEFAULT_IMAGE:"http://mail.yimg.com/ok/u/assets/img/display-img/profile_{{pixels|32|48}}e.png",DEFAULT_IMAGE_SSL:"https://s.yimg.com/ok/u/assets/img/display-img/profile_{{pixels|32|48}}e.png"};}A.namespace("Messenger").GlobalConstants=YUI.Messenger.GlobalConstants;},"@VERSION@");YUI.add("ymlutil",function(B){var A={emoticons:{"yahoo":{":)":1,":-)":1,"(-:":1,"(:)":1,"(:":1,":(":2,":-(":2,";)":3,";-)":3,":-/":7,":-\\":7,":S":7,":x":8,":-x":8,"(L)":8,':">':9,":$":9,":-P":10,":P":10,":-*":11,":*":11,"(K)":11,"=((":12,"(U)":12,":-O":13,":O":13,"X-(":14,"X(":14,":@":14,"B-)":16,"(H)":16,">:)":19,"(6)":19,":((":20,":-((":20,":'(":20,":|":22,":-|":22,"/:)":23,"/:-)":23,"^o)":23,"o:-)":25,"0:-)":25,"o:)":25,"0:)":25,"(A)":25,":-B":26,":B":26,"8-|":29,"8-)":29,":-&":31,"+o(":31,":-$":32,":-#":32,"<:-P":36,"<:o)":36,"(:|":37,"(:}":37,":-?":39,"*-)":39,":))":21,":-))":21,"=))":24,":D":4,":-D":4,";;)":5,";;-)":5,">:D<":6,":->":15,":>":15,":-S":17,"#:-S":18,"=;":27,"I-)":28,"|-)":28,"L-)":30,"[-(":33,":o)":34,":0)":34,"<@:)":34,"8-}":35,"=P~":38,"#-o":40,"=D>":41,":-SS":42,"@-)":43,":^O":44,":-w":45,":-<":46,">:P":47,"<):)":48,":)]":100,":-c":101,"~x(":102,":-h":103,":-t":104,"8->":105,":-??":106,"%-(":107,":o3":108,"X_X":109,":!!":110,"\\m/":111,":@)":49,"3:-O":50,"3:-0":50,":(|)":51,"~:>":52,"@};-":53,"%%-":54,"**==":55,"(~~)":56,"~o)":57,"*-:)":58,"8-X":59,"=:)":60,"=:-)":60,">-)":61,":-L":62,"[-O<":63,"$-)":64,':-"':65,"b-(":66,":)>-":67,"[-X":68,"\\:D/":69,">:/":70,";))":71,"o->":72,"o=>":73,"o-+":74,"(%)":75,":-@":76,"^:)^":77,":-j":78,"(*)":79,":-q":112,":-bd":113,"^#(^":114,":bz":115,"~^o^~":120,"'@^@|||":121,"[]---":122,"^O^||3":123,":-(||>":124,"'+_+":125,":::^^:::":126,"o|^_^|o":127,":puke!":128,"o|\\~":129,"o|:-)":130,"[]==[]":131,":-)/\\:-)":132,":(game)":133,"'@-@":134,":->~~":135,"?@_@?":136,":(tv)":137,"&[]":138,"%||:-{":139,"%*-{":140,":(fight)":141},"msn":{":)":1,":(":2,";)":3,":S":7,"(L)":8,":$":9,":P":10,"(K)":11,"(U)":12,":-O":13,":@":14,"(H)":16,"(6)":19,":'(":20,":|":22,"^o)":23,"(A)":25,":-B":26,"8-)":29,"+o(":31,":-#":32,"<:o)":36,"(:|":37,"*-)":39},"facebook":{":)":1,":-)":1,":]":1,"=)":1,":-(":2,":(":2,":[":2,"=(":2,";)":3,";-)":3,"O.o":7,"o.O":7,"<3":8,":p":10,":-p":10,"=P":10,":*":11,":-*":11,":O":13,":o":13,":-O":13,":-o":13,"8|":16,"8-|":16,"B|":16,"B-|":16,"3:)":19,"3:-)":19,":v":20,":'(":20,"O:)":25,"O:-)":25,"8)":26,"8-)":26,"B)":26,"B-)":26,":/":39,":-/":39,":-\\":39,":\\":39,":D":4,":-D":4,"=D":4,"-_-":33,":3":45,">:(":102,">:-(":102,"^_^":111,">:O":114,">:-O":114,">:o":114,">:-o":114}},deentitize:function(D){var C=D.replace(/&gt;/g,">");C=C.replace(/&lt;/g,"<");C=C.replace(/&quot;/g,'"');C=C.replace(/&apos;/g,"'");C=C.replace(/&amp;/g,"&");return C;},emoticonPickerEntries:{"yahoo":{"1":":)","2":":(","3":";)","4":":-/","5":":x","6":':">',"7":":P","8":":-*","9":"=((","10":":-<","11":"~X(","12":":-O","13":"X-(","14":"B-)","15":">:)","16":":((","17":":|","18":"/:)","19":"O:-)","20":":-B","21":">:P","22":":-h","23":"8-|","24":":-&","25":":-$","26":"<:-P","27":"(:|","28":":-?","29":":))","30":"=))","31":":D","32":"<):)","33":":-t","34":";;)","35":">:D<","36":":>","37":":-S","38":"#:-S","39":"=;","40":"I-)","41":"L-)","42":"[-(","43":":)]","44":"8->","45":":O)","46":"8-}","47":"=P~","48":"#-o","49":"=D>","50":":-SS","51":"@-)","52":":^o","53":":-w","54":":-c","57":"~^o^~","58":"'@^@|||","59":"[]---","60":"^O^||3","61":":-(||>","62":"'+_+","63":":::^^:::","64":"o|^_^|o","65":":puke!","66":"o|\\~","67":"o|:-)","68":"[]==[]","69":":-)/\\:-)","70":":(game)","71":"'@-@","72":":->~~","73":"?@_@?","74":":(tv)","75":"&[]","76":"%||:-{","77":"%*-{","78":":(fight)"},"msn":{"1":":)","2":":(","3":";)","4":":S","5":"(L)","6":":$","7":":P","8":"(K)","9":"(U)","12":":-O","13":":@","14":"(H)","15":"(6)","16":":'(","17":":|","18":"^o)","20":":-B","23":"8-)","24":"+o(","25":":-#","26":"<:o)","27":"(:|","28":"*-)"},"facebook":{"1":" =) ","2":" =( ","3":" ;-) ","4":" o.O ","5":" <3 ","7":" =P ","8":" :-* ","12":" :-o ","14":" B-| ","15":" 3:-) ","16":" :'( ","20":" B-) ","28":" :\\ ","31":" =D ","42":" -_- ","53":" :3 "}},emoticonLabels:{"1":"smile","2":"sad","3":"wink","4":"confused","5":"lovestruck","6":"blushing","7":"tongue","8":"kiss","9":"broken_heart","12":"surprise","13":"angry","14":"cool","15":"devilish","16":"crying","17":"straight_face","18":"raised_eyebrow","19":"angel","20":"nerd","23":"rolling_eyes","24":"sick","25":"shh","26":"party","27":"yawn","28":"thinking","29":"laughing","30":"rofl","31":"big_grin","34":"batting_eyelashes","35":"big_hug","36":"smug","37":"worried","38":"whew","39":"talk_to_the_hand","40":"sleepy","41":"loser","42":"not_talking","45":"clown","46":"silly","47":"drooling","48":"doh","49":"applause","50":"nail_biting","51":"hypnotized","52":"liar","53":"waiting","10":"sigh","21":"phbbbt","32":"cowboy","43":"on_the_phone","54":"call_me","11":"wits_end","22":"wave","33":"time_out","44":"daydreaming","57":"cheer","58":"dizzy","59":"cook","60":"eat","61":"give_up","62":"cold","63":"hot","64":"music","65":"puke","66":"sing","67":"catch","68":"exercise","69":"high_five","70":"play_game","71":"searching","72":"spooky","73":"studying","74":"tv","75":"gift","76":"unlucky","77":"down_on_luck","78":"fight"},ymlToHtml:function(E,C,D){E=A.addClosingTags(E);E=A.ymlToHtmlRaw(E,true,null,D);if(!C){E=A.addDefaultFont(E,false);E=A.addClosingTags(E);}return E;},ymlToHtmlRaw:function(D,C,Z,f){var S=launchData.isSecure?"https://s.yimg.com/pu/emoticon/v2/":"http://l.yimg.com/pu/emoticon/v2/";var c=15,a=6,M=32,Q=a,H=M,b=15,K=64,e=[],P=[],L={"black":"#000000","red":"#ff0000","green":"#008200","yellow":"#848200","blue":"#0000ff","purple":"#840084","cyan":"#008284","orange":"#ff8000","pink":"#ff0084","gray":"#848284"};function R(g){g=g.replace(/&/g,"&"+"amp;");g=g.replace(/</g,"&"+"lt;");g=g.replace(/>/g,"&"+"gt;");g=g.replace(/'/g,"&"+"#x27;");g=g.replace(/"/g,"&"+"quot;");return g;}function U(){var h=(this.s=[]);for(var g=0;g<arguments.length;g++){h.push(arguments[g]);}if(h.length===0){h.push("");}this.$=function(i){h.push(i);return this;};this.toString=function(){if(h.length>1){h=[h.join("")];}return h[0];};}function d(l,k,h){if(typeof k=="undefined"){if(l.charAt(0)=="#"){l=l.substring(1);}var j=parseInt(l,16);this.red=(j&16711680)>>16;this.green=(j&65280)>>8;
this.blue=(j&255);}else{this.red=l;this.green=k;this.blue=h;}this.toString=function(){function g(n){var m="00"+n.toString(16);return m.substring(m.length-2);}return"#"+g(this.red)+g(this.green)+g(this.blue);};}function Y(AD,m,j){if((AD.length<2)||(j<2)){return AD[0];}if(AD!=e){e=AD;var q=0;var s=AD[0];var AE=AD[1];var w=s.red;var AB=s.green;var h=s.blue;var n=AE.red;var z=AE.green;var AF=AE.blue;var o=(AD.length-1)/K;for(var p=0;p<K;p++){var u=p*o;var AA=Math.floor(u);if(AA!=q){w=n;AB=z;h=AF;AE=AD[AA+1];n=AE.red;z=AE.green;AF=AE.blue;q=AA;}var AC=u-AA;var x=1-AC;var k=Math.floor(w*x+n*AC);var t=Math.floor(AB*x+z*AC);var g=Math.floor(h*x+AF*AC);P[p]=new d(k,t,g);}}var y=j-1;if(m>y){m=y;}var v=Math.floor(m*(K-1)/y);return P[v];}function E(g){if(C){g=g.replace(/\r\n/g,"<br/>");g=g.replace(/\r/g,"<br/>");g=g.replace(/\n/g,"<br/>");}if(Z){g=g.replace(/\s/g,"&nbsp;");}return g;}function V(g){return E(R(g));}function F(m,l){if(!l||l.mode=="normal"){m=V(m);}else{var k,h=new U(),g;for(var j=0;j<m.length;j++){if(l.mode=="fade"){k=Y(l.colors,j,m.length);}else{k=l.colors[j%l.colors.length];}g=V(m.charAt(j));h.$('<font color="').$(k).$('">').$(g).$("</font>");}m=h.toString();}return m;}function X(g){return g.replace(/\[/ig,"\\[").replace(/\$/ig,"\\$").replace(/\^/ig,"\\^").replace(/\\/ig,"\\\\").replace(/\./ig,"\\.").replace(/\|/ig,"\\|").replace(/\?/ig,"\\?").replace(/\*/ig,"\\*").replace(/\+/ig,"\\+").replace(/\(/ig,"\\(").replace(/\)/ig,"\\)").replace(/\//ig,"\\/");}function J(w,AI){AI=AI||0;var o=/<([a-zA-Z0-9#]+[^><]*)>/,n,g,AB,j,AG,AH=null,z=AI===0?w:w.substring(AI),AF=o.exec(z),v,q,m,k,x;if(AF){AH={};AH.startTag=AF[0];AG=AF[1];AH.treatAsText=false;AH.startPos=AF.index+AI;if(AG.charAt(AG.length-1)==="/"){AH.treatAsText=true;AH.endPos=AH.startPos+AH.startTag.length;return AH;}n=AG.indexOf(" ");AH.name=n!==-1?AG.substring(0,n):AG;AH.attributes=n!==-1?AG.substring(n+1):"";AH.contentStartPos=AH.startPos+AH.startTag.length;v=X(AH.name);if(AH.name.indexOf("url=")==0){g=new RegExp("</\\s*url\\s*>","ig");}else{g=new RegExp("</\\s*"+v+"\\s*>","ig");}z=w.substring(AH.contentStartPos);AF=g.exec(z);var h=new RegExp("<\\s*"+v+"[^>]*>","ig");var AE=0;while(AF!==null){AH.endTag=AF[0];AH.endPos=AH.contentStartPos+g.lastIndex;h.lastIndex=0;var AD=h.exec(z.substring(AE,g.lastIndex));if(AH.endPos<w.length&&AD){AF=g.exec(z);AH.endTag=null;AH.endPos=null;AE+=h.lastIndex;}else{AF=null;}}if(AH.endTag){AH.contentEndPos=AH.endPos-AH.endTag.length;AH.content=w.substring(AH.contentStartPos,AH.contentEndPos);}else{AH.endPos=w.length;AH.content=w.substring(AH.contentStartPos);if(AH.name=="font"||AH.name=="b"||AH.name=="u"||AH.name=="i"){AH.endTag="</"+AH.name+">";}}if(AH.attributes!==""&&(AH.attributes.toLowerCase().indexOf("<script")!==-1||AH.attributes.toLowerCase().indexOf("javascript:")!==-1)){AH.treatAsText=true;return AH;}switch(AH.name.toLowerCase()){case"b":AH.startTag="<b>";break;case"i":AH.startTag="<i>";break;case"u":AH.startTag="<u>";break;case"font":var u="",t,l="",y="";t=AG.match(/size="([^"]*)"/);if(t!==null){var p;if(t[1].match(/[^0-9]/)){p=R(t[1]);}else{p=t[1]-0;if(p<Q){p=Q;}if(p>H){p=H;}p=R(p+"")+"pt";}u=' style="font-size:'+p+'"';}t=AG.match(/face="([^"]*)"/);if(t!==null){l=' face="'+R(t[1])+'"';}t=AG.match(/color="([^"]*)"/);if(t!==null){y=' color="'+R(t[1])+'"';}if(u+l+y){AH.startTag="<font"+u+l+y+">";}break;case"a":AH.treatAsText=true;return AH;case"url":AH.startTag="";AH.endTag="";break;case"fade":case"alt":AH.startTag="";if(!AH.endTag){AH.content=w.substring(AH.contentStartPos);AH.endPos=w.length;}AH.endTag="";AH.colors=AH.attributes.split(",");var AC=AH.colors.length;for(var AA=0;AA<AC;AA++){AH.colors[AA]=new d(AH.colors[AA]);}if(AH.colors.length>1){AH.setRenderMode=AH.name.toLowerCase();}else{if(AH.colors.length==1){AH.startTag='<font color="'+AH.colors[0]+'">';AH.endTag="</font>";}}break;case"black":case"blue":case"cyan":case"gray":case"green":case"pink":case"purple":case"orange":case"red":case"yellow":AH.startTag='<font color="'+L[AH.name]+'">';AH.endTag="</font>";break;default:if(AH.name.indexOf("url=")===0){if(AH.startTag.indexOf("javascript:")!==-1){AH.treatAsText=true;}else{AH.startTag=AH.name.substring(4);if(AH.startTag.indexOf('"')==0){AH.startTag=AH.startTag.substring(1);}if(AH.startTag.charAt(AH.startTag.length-1)=='"'){AH.startTag=AH.startTag.substring(0,AH.startTag.length-1);}j=AH.startTag;AH.startTag='<a href="'+AH.startTag+'" class="link" target="_blank">';if(AH.content){AH.startTag+=AH.content;AH.content=null;}else{AH.startTag+=j;}AH.startTag+="</a>";AH.treatAsText=false;AH.endTag="";}}else{if(AH.name.charAt(0)=="#"){AH.startTag='<font color="'+R(AH.name)+'">';AH.endTag="</font>";}else{if(AH.name.indexOf("snd=")===0){AH.startTag="";AH.endTag="";}else{AH.treatAsText=true;}}}}}return AH;}function T(r){var k=r.split("\u001b["),n,m,o=0,q=0,h=0;if(k.length==1){return r;}else{var g=new U();for(n=0;n<k.length;n++){var u=k[n],p=u.indexOf("m");if(p===-1){g.$(u);}else{var l=u.substring(0,p),t=true;switch(l){case"0":g.$("</font>");break;case"1":g.$("<b>");o++;break;case"2":g.$("<i>");h++;break;case"30":g.$('<font color="'+L.black+'">');break;case"31":g.$('<font color="'+L.blue+'">');break;case"32":g.$('<font color="'+L.cyan+'">');break;case"33":g.$('<font color="'+L.gray+'">');break;case"34":g.$('<font color="'+L.green+'">');break;case"35":g.$('<font color="'+L.pink+'">');break;case"36":g.$('<font color="'+L.purple+'">');break;case"37":g.$('<font color="'+L.orange+'">');break;case"38":g.$('<font color="'+L.red+'">');break;case"39":g.$('<font color="'+L.yellow+'">');break;case"4":g.$("<u>");q++;break;case"l":g.$("<url>");break;case"x1":if(o){g.$("</b>");o--;}break;case"x2":if(h){g.$("</i>");h--;}break;case"x4":if(q){g.$("</u>");q--;}break;case"xc":g.$("</font>");break;case"xl":g.$("</url>");break;default:if(l.indexOf("#")===0){g.$('<font color="'+l+'">');}else{g.$(u);t=false;}}p++;if(t&&p<u.length){g.$(u.substring(p));}}}return g.toString();}}function O(r,u,m){var s,g=0,q=0,v="yahoo";if(m=="msn"||m=="facebook"){v=m;
}s=new U();for(var p=0;p<r.length;p++){var o=8,n=0,h;for(;(!n)&&(o>=2);o--){h=r.substring(p,p+o);if(h!=="eval"){n=A.emoticons[v][h];if(!n){n=A.emoticons[v][h.toUpperCase()];}if(!n){n=A.emoticons[v][h.toLowerCase()];}}}if(n){if(q!==p){s.$(F(r.substring(q,p),u));}var l=h.replace('"',"&quot;"),t='<img border=0 src="'+S+n+'.gif" alt="'+l+'" title="'+l+'" data-emoticon="true"/>';s.$(t);p+=o;q=p+1;g++;if(g==c){break;}}}if(q<r.length){s.$(F(r.substring(q),u));}return s.toString();}function I(m,p,h){var g=/(\b(www\.|https?:\/\/)[A-Z0-9][A-Z0-9\-_.!~*();\/?:@&=+$,#%]*)/ig,n=new U(),j,i,o,k=0,l;j=g.exec(m);while(j!==null){i=j[0];o=g.lastIndex-i.length;if(k<o){n.$(O(m.substring(k,o),p,h));}k=g.lastIndex;l=(i.toLowerCase().indexOf("http")===0);if(l){n.$('<a href="'+i+'" target="_blank" class="link">'+i+"</a>");}else{n.$('<a href="http://'+i+'" target="_blank" class="link">'+i+"</a>");}j=g.exec(m);}if(k<m.length){n.$(O(m.substring(k),p,h));}return n.toString();}function W(n,h,m,l,k){l=l||0;if(l===b){return false;}var g=J(n,0),j=0;while(g){if(g.startPos>j){h.$(I(n.substring(j,g.startPos),m,k));}if(g.treatAsText){h.$(I(g.startTag),m);}else{h.$(g.startTag);}if(g.content){var i=g.setRenderMode?{mode:g.setRenderMode,colors:g.colors}:m;if(!W(g.content,h,i,l+1,k)){return false;}}if(g.endTag){if(g.treatAsText){h.$(I(g.endTag,m,k));}else{h.$(g.endTag);}}j=g.endPos;g=g.endPos<n.length?J(n,g.endPos):null;}if(j<n.length){h.$(I(n.substring(j),m,k));}return true;}var N=T(D);var G=new U();if(W(N,G,{mode:"normal"},null,f)){return G.toString();}else{return V(D);}},domToYml:function(C){if(B.UA.gecko){C.innerHTML=A.removeTrailingBR(C.innerHTML);}var D=A.domToYmlRaw(C);return A.addDefaultFont(D,true,C.style).replace(/\u00a0/g," ");},domToYmlRaw:function(H){var M=["8","10","12","14","18","24","36"];var K="",P=0;var E=null;var N=H.childNodes.length;if(N>0){E=H.childNodes;}if(H.nodeType==3){return H.nodeValue;}else{if(H.nodeType==1){switch(H.tagName){case"BR":K+="\n";break;case"B":case"STRONG":K+="<b>";for(P=0;P<N;P++){K+=A.domToYmlRaw(E[P]);}K+="</b>";break;case"I":case"EM":K+="<i>";for(P=0;P<N;P++){K+=A.domToYmlRaw(E[P]);}K+="</i>";break;case"U":K+="<u>";for(P=0;P<N;P++){K+=A.domToYmlRaw(E[P]);}K+="</u>";break;case"DIV":case"SPAN":case"FONT":var S;var C;var O;var L=false,U=false,I=false;var Q=H.getAttribute("style");var R=false;S=H.getAttribute("face");C=H.getAttribute("size");O=H.getAttribute("color");if(Q){if(H.style.fontFamily&&H.style.fontFamily.length>0){S=H.style.fontFamily;}if(H.style.fontSize&&H.style.fontSize.length>0){R=true;C=H.style.fontSize;}if(H.style.color&&H.style.color.length>0){O=H.style.color;}if(H.style.fontWeight=="bold"){L=true;}if(H.style.textDecoration=="underline"){U=true;}if(H.style.fontStyle=="italic"){I=true;}}if(S||C||O){K+="<font";if(S&&C){K+=' face="'+S+'" size="'+(R?C:M[C-1])+'"';}else{if(S&&!C){K+=' face="'+S+'"';}else{if(!S&&C){if(C.match(/\D/)){K+=' size="'+C+'"';}else{K+=' size="'+M[C-1]+'"';}}}}if(O){O=O.replace(/\s/g,"");var F;if(F=O.match(/rgb\((\d*),(\d*),(\d*)\)/i)){O="#";var G=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");var T=Math.floor((F[1]-0)/16);O+=G[T]+G[(F[1]-0)-(16*T)];T=Math.floor((F[2]-0)/16);O+=G[T]+G[(F[2]-0)-(16*T)];T=Math.floor((F[3]-0)/16);O+=G[T]+G[(F[3]-0)-(16*T)];}K+=' color="'+O+'"';}K+=">";}if(L){K+="<b>";}if(U){K+="<u>";}if(I){K+="<i>";}if(O){K+="\033["+O+"m";}for(P=0;P<N;P++){K+=A.domToYmlRaw(E[P]);}if(I){K+="</i>";}if(U){K+="</u>";}if(L){K+="</b>";}if(C||S||O){K+="</font>";}if(B.UA.ie&&H.tagName=="DIV"&&(H!==H.parentNode.lastChild)){K+="\n";}break;case"IMG":var J=H.getAttribute("alt"),D=H.getAttribute("data-emoticon");if(D&&J){K+=J;}break;default:for(P=0;P<N;P++){K+=A.domToYmlRaw(E[P]);}break;}return K;}else{return"";}}},addClosingTags:function(G){var H=G;var E=G.split("<font");var D=E.length-1;E=G.split("</font>");var F=E.length-1;for(var C=0;C<(D-F);C++){H+="</font>";}return H;},removeTrailingBR:function(E){var C;var D=E;if(C=E.match(/^(.*)<br>(.*)$/)){if(C[2].match(/>?[^<>]+?</)){D=C[1]+"<br>"+C[2];}else{D=C[1]+C[2];}}return D;},addDefaultFont:function(I,E,C){if(!I.match){I=""+I;}if(C){var F="";var D="";if(C.fontFamily&&C.fontFamily!==""){D='face="'+C.fontFamily+'"';}if(C.fontSize&&C.fontSize!==""){F='size="'+C.fontSize.replace(/pt/,"")+'"';}if(F.length>0||D.length>0){I="<font "+D+" "+F+">"+I+"</font>";}return I;}else{var J="";var G="";var H=I;while(H.match&&H.match(/^<(.*?)>/)){var K=RegExp.$1;H=H.replace(/^<(.*?)>/,"");if((K.indexOf("font")===0)&&(K.indexOf("size")<0)){J=G+"<"+K+' size="'+(E?"12":"2")+'">'+H;break;}else{if(K.indexOf("font")===0){J=G+"<"+K+">"+H;break;}else{G+="<"+K+">";}}}if(J.length==0){J='<font size="'+(E?"12":"2")+'">'+G+H+"</font>";}return J;}}};B.namespace("Messenger").YMLUtil=A;},"@VERSION@");YUI.add("commonutils",function(C){var F=YUI.namespace("Messenger");if(!F.CommonUtils){F.CommonUtils={};var J=F.CommonUtils,B=C.Object,I=C.Lang,G=C.Messenger.GlobalConfig,D=C.Messenger.GlobalConstants,K=G.COUNTRY_CODES_MAP,H=window.logRocketStats||function(){},A=C.Messenger.Intl,E=window.launchData;J.domainToNetworkMap={"ameritech.net":"yahoo","btinternet.com":"yahoo","btopenworld.com":"yahoo","demobroadband.com":"yahoo","ovi.com":"yahoo","flash.net":"yahoo","hotmail.co.jp":"msn","hotmail.co.th":"msn","hotmail.co.tr":"msn","hotmail.co.uk":"msn","hotmail.com":"msn","hotmail.com.ar":"msn","hotmail.de":"msn","hotmail.fr":"msn","hotmail.it":"msn","live.com":"msn","messengeruser.com":"msn","msn.co":"msn","msympatico.ca":"msn","nl.rogers.com":"yahoo","nvbell.net":"yahoo","pacbell.net":"yahoo","passport.co":"msn","prodigy.net":"yahoo","rogers.com":"yahoo","sbcglobal.net":"yahoo","snet.net":"yahoo","swbell.net":"yahoo","talk21.com":"yahoo","verizon.net":"yahoo","wans.net":"yahoo","webtv.net":"msn","ymail.com":"yahoo"};J.PartnerDomains={"ameritech.net":1,"btinternet.com":1,"btopenworld.com":1,"demobroadband.com":1,"ovi.com":1,"flash.net":1,"nl.rogers.com":1,"nvbell.net":1,"pacbell.net":1,"prodigy.net":1,"rocketmail.com":1,"rogers.com":1,"sbcglobal.net":1,"snet.net":1,"swbell.net":1,"talk21.com":1,"verizon.net":1,"wans.net":1,"yahoo.cn":1,"ymail.com":1};J.TLD={"aero":1,"asia":1,"biz":1,"com":1,"edu":1,"gov":1,"info":1,"jobs":1,"mil":1,"mobi":1,"museum":1,"name":1,"net":1,"org":1};J.CountryCodes={};cc=["ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bv","bw","by","bz","ca","cc","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cs","cu","cv","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","es","et","fi","fj","fk","fm","fo","fr","fx","ga","gb","gd","ge","gh","gi","gl","gp","gq","gf","gm","gn","gr","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","in","io","iq","ir","is","it","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","mg","mh","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nt","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pt","pr","pw","py","qa","re","ro","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","st","su","sv","sy","sz","tc","td","tf","tg","th","tj","tk","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","um","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yu","za","zm","zr","zw"];cci=cc.length;while(cci--){J.CountryCodes[cc[cci]]=1;}J.YidPattern=/^[a-z][a-z0-9\._]*$/i;J.DmnPattern=/^[a-z0-9][a-z0-9-]*[a-z0-9]$/i;J.MbxPattern=/^[a-z0-9._%+-]+$/i;C.mix(J,{isEmpty:function(M){var L;if(M){for(L in M){return false;}}return true;},arrayFire:function(Q,P,N){if(!this._arrayCache){this._arrayCache={};}var M=this._arrayCache,O,L=this;if(!M[Q]){O={t:0,a:[],id:Q};M[Q]=O;}else{O=M[Q];clearTimeout(O.t);}O.a=O.a.concat(P);O.t=setTimeout(function(){var R=O.a,S=O.id;C.Global.fire(S,R);delete L._arrayCache[S];},N||0);},parseURI:function(P){var R=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,N=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Q=/(?:^|&)([^&=]*)=?([^&]*)/g,L=R.exec(P),O={queryKey:{}},M=N.length;while(M--){O[N[M]]=L[M]||"";}O.query.replace(Q,function(T,S,U){if(S){O.queryKey[S]=U;}});return O;},congruent:function(N,M,L){var P=L||(B.size(N)==B.size(M));if(P){try{if(N!=M){B.each(N,function(R,Q){P=I.isObject(R)?J.congruent(R,M[Q]):(R==M[Q]);if(!P){throw new Error();}});}}catch(O){P=false;}}return P;},wcopy:function(M){var L,N=M?C.Object(M):M;for(L in N){if(I.isObject(N[L])){N[L]=J.wcopy(N[L]);}}return N;},merge:function(S,Q,P,N){var O,R,M,L;if(I.isObject(Q)){S=S||{};for(O in Q){if(N&&!Q.hasOwnProperty(O)){continue;}if(I.isArray(Q[O])){M=Q[O];if(!S[O]||P){S[O]=[];}for(L=0;L<M.length;L++){S[O].push(J.merge(S[O][L],M[L],P,N));}}else{if(I.isObject(Q[O])){if(!S[O]){S[O]={};}S[O]=J.merge(S[O],Q[O],P,N);}else{if((P&&(S[O]!=Q[O]))||I.isUndefined(S[O])){S[O]=Q[O];}}}}}else{S=Q;}return S;},assert:function(L){if(!L){alert("invalid parameter");}},isPhoneNumber:function(L){if(!L){return false;}if(L.search(/[0-9]/)===-1){return false;}if(L.search(/[^0-9\+\(\)\- \.]/)!==-1){return false;}return true;},substitute:function(S,R,N,M,L,O,Q){var P=/{{([^{}]*)}}/g;if(S){return S.replace(P,function(W,U){var Y,X,T=C.Messenger.CommonUtils.substitute;if(N&&(Y=N[U])){return(Y.call(null,R,M))||"";}else{if(R&&U in R){return R[U];}else{if(L&&U in L){X=L[U];return X.match(P)?T(X,R,N,M,L,O,Q):X;}else{if(O&&U in O){return T(O[U].base,R,N,M,L,O,Q);}else{if(Q){var V=Q.get(U,true);return V?V:"";}else{return"";}}}}}});}else{return"";}},escapeHtml:function(L){if(L==null){return null;}L=L.replace(/&/g,"&amp;");L=L.replace(/</g,"&lt;");L=L.replace(/>/g,"&gt;");L=L.replace(/\"/g,"&quot;");L=L.replace(/&(?:amp;)+/g,"&amp;");return L;},unescapeHtml:function(M){var L=M.replace(/&gt;/g,">");L=L.replace(/&lt;/g,"<");L=L.replace(/&quot;/g,'"');L=L.replace(/&apos;/g,"'");L=L.replace(/&amp;/g,"&");return L;},unencode:function(L){if(L==null||L==undefined||!C.Lang.isString(L)){return null;}L=L.replace(/&#39;/g,"'");L=L.replace(/&#34;/g,'"');L=L.replace(/&quot;/g,'"');return L;},getHtml5AudioSupport:function(){var L={audioObjectSupported:false,audioPlaySupported:false,oggSupported:false,wavSupported:false,mp3Supported:false,aacSupported:false},M;try{M=new Audio("");if(M.canPlayType){L.audioObjectSupported=true;if(M.play){L.audioPlaySupported=true;}if(M.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,"")!==""){L.oggSupported=true;}if(M.canPlayType("audio/wav").replace(/no/,"")!==""){L.wavSupported=true;
}if(M.canPlayType("audio/mp3").replace(/no/,"")!==""){L.mp3Supported=true;}if(M.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(/no/,"")!==""){L.mp3Supported=true;}}}catch(N){}return L;},getPresenceIconClass:function(M){var L="";switch(M){case -1:L="ymsg-offline";break;case 0:L="ymsg-available";break;case 2:L="ymsg-busy";break;case 999:L="ymsg-away";break;default:L="ymsg-busy";break;}return L;},getConversationId:function(M,L,N){return[M,L,N||"yahoo"].join("~");},getNetworkFromUserId:function(M){var L,O,N;L=M.indexOf("@");if(L!==-1){O=M.substr(L+1);N=this.domainToNetworkMap[O];if(!N){if(M.indexOf("@yahoo.")!==-1){N="yahoo";}}}else{N="yahoo";}return N;},_getImageServer:function(){var L;if(E.isSecure){L="http://ycpi-mail-rest-img.msg.yahoo.com";if(E.targetServer=="alpha"){L="https://rdis1.a1.msg.sp1.yahoo.com";}else{if(E.urlParams.ymsgrrdis){L=E.urlParams.ymsgrrdis;}}return L;}else{L="http://rest-img.msg.yahoo.com";if(E.targetServer=="alpha"){L="http://rdis1.a1.msg.sp1.yahoo.com";}else{if(E.urlParams.ymsgrrdis){L=E.urlParams.ymsgrrdis;}}return L;}},getImageUrl:function(P){if(E.isSecure){return D.DEFAULT_IMAGE_SSL;}var N=P.avatarPreference,M,O=this._getImageServer();if(P.network=="facebook"){if(!P.imageUrl){if(!G.get("getImagesFromFB")){if(P.checksum){return O+"/v1/displayImage/custom/facebook/"+encodeURIComponent(P.user)+"?size=square&chksum="+encodeURIComponent(P.checksum)+"&redirect=true&src=minty";}else{return O+"/v1/displayImage/custom/facebook/"+encodeURIComponent(P.user)+"?size=square&cachebuster="+(+new Date)+encodeURIComponent(Math.floor(Math.random()*10000))+"&redirect=true&src=minty";}}else{return E.protocol+"graph.facebook.com/"+encodeURIComponent(P.user.split("@")[0].replace("-",""))+"/picture?size=square";}}else{return P.imageUrl;}}if(+N===1){M=P.avatarHash?E.protocol+"avatars.zenfs.com/users/"+encodeURIComponent(P.avatarHash)+".medium.png":(E.isSecure?D.DEFAULT_IMAGE_SSL:D.DEFAULT_IMAGE);return M;}else{if(+N===2){if(C.Lang.isString(P.guid)&&P.guid.length>0){var L="";if(!C.Lang.isUndefined(P.checksum)){L+="?checksum="+encodeURIComponent(P.checksum);}return E.protocol+"msgr.zenfs.com/msgrDisImg/"+encodeURIComponent(P.guid)+L;}else{if(!P.checksum){return E.isSecure?D.DEFAULT_IMAGE_SSL:D.DEFAULT_IMAGE;}return O+"/v1/displayImage/custom/yahoo/"+encodeURIComponent(P.user)+"?height={{pixels|32|48}}&width={{pixels|32|48}}&chksum="+encodeURIComponent(P.checksum)+"&redirect=false&src=minty";}}else{if(+N===-1){if(P.network==="yahoo"){return O+"/v1/displayImage/yahoo/"+encodeURIComponent(P.user)+"?height=48&width=48&maxage=259200";}}}}return E.isSecure?D.DEFAULT_IMAGE_SSL:D.DEFAULT_IMAGE;},postToURL:function(M,P){var O=document.createElement("form");O.action=M;O.target="_blank";O.method="POST";for(var N in P){if(P.hasOwnProperty(N)){var L=document.createElement("input");L.type="hidden";L.name=N;L.value=P[N];O.appendChild(L);}}document.body.appendChild(O);O.submit();document.body.removeChild(O);},getYidFromEmailAddr:function(T,M){var R,O,Q,L={"yid":false,"value":T},N,S;if(typeof T==="string"){Q=T.split("@");S=Q[0];switch(Q.length){case 2:R=Q[1];if(this.PartnerDomains[R]){L.yid=true;}else{O=R.split(".");if(O.length==1){L.error="Incomplete domain";}else{if(M&&M!=="yahoo"){var P=O.length;var U=O[--P];if(this.TLD[U]||this.CountryCodes[U]){while(P--&&this.DmnPattern.test(O[P])){}if(P==-1){if(!this.MbxPattern.test(S)){L.error="Malformed mailbox name";}}else{L.error="Malformed domain";}}else{L.error="Invalid TLD";}}else{if(O[0]==="yahoo"){switch(O.length){case 3:if(this.CountryCodes[O[2].toLowerCase()]&&((N=O[1].toLowerCase())==="co"||this.TLD[N])&&(L.yid=S.length>=4&&S.length<=32&&this.YidPattern.test(S))){L.value=S;}else{L.error="Malformed YID";}break;case 2:if((this.CountryCodes[N=O[1].toLowerCase()]||this.TLD[N])&&(L.yid=S.length>=4&&S.length<=32&&this.YidPattern.test(S))){L.value=S;}else{L.error="Malformed YID";}break;default:L.error="Invalid Y! domain";}}}}}break;case 1:if(M&&M!="yahoo"){L.error="Missing domain";}else{if(S.length>=4&&S.length<=32&&this.YidPattern.test(S)){L.yid=true;L.value=S;}else{L.error="Malformed YID";}}break;default:L.error="Multiple @ found";}}else{L.error="Email is not a string";}return L;},createNodeInDoc:function(N,L){var M;if(C.UA.ie){if(!L){return;}M=L._node.ownerDocument.createElement("span");M.innerHTML=N;if(M.children.length==1){M=C.Node.one(M.firstChild);}else{M=C.Node.one(M);}}else{M=C.Node.create(N);}return M;},selectNode:function(N,P){var M,L,O,P;O=N.ownerDocument;if(O){P=P||O.defaultView||window;}else{P=P||window;O=P.document;}if(typeof(P.getSelection)!="undefined"&&typeof(O.createRange)!="undefined"&&(M=P.getSelection())&&typeof(M.removeAllRanges)!="undefined"){L=O.createRange();L.selectNode(N);M.removeAllRanges();M.addRange(L);}else{if(O.body&&typeof(O.body.createTextRange)!="undefined"&&(L=O.body.createTextRange())){L.moveToElementText(N);L.select();}}},clearSelection:function(O){if(O.getSelection){var M=O.getSelection();M.removeAllRanges();}else{try{if(O.document.selection.createRange){var L=O.document.selection.createRange();O.document.selection.empty();}}catch(N){}}},makeNonSelectable:function(L){if(typeof(L)==="string"){L=C.one(L);}if(L){L.set("unselectable","on");L.setStyle("MozUserSelect","none");L.setStyle("WebkitUserSelect","none");}},makeSelectable:function(L){if(typeof(L)==="string"){L=C.one(L);}if(L){L.set("unselectable","off");L.setStyle("MozUserSelect","");L.setStyle("WebkitUserSelect","");}},countUtf8Bytes:function(N){var P,O,M=N.length,L=0;for(P=0;P<M;P+=1){O=N.charCodeAt(P);if(O<128){L+=1;}else{if(O<2048){L+=2;}else{L+=3;}}}return L;},checkUtf8Bytes:function(O,N){var Q,P,M=O.length,L=0;for(Q=0;Q<M;Q+=1){P=O.charCodeAt(Q);if(P<128){L+=1;}else{if(P<2048){L+=2;}else{L+=3;}}if(L>N){break;}}return Q;},normalizeNumber:function(Q,L){var S,R,X;X=false;S=Q.search(/\+/);if(S>=0){R=Q.search(/[0-9]/);X=(S<R);if(L){L.leadingPlus=X;}}Q=Q.replace(/[^0-9]/g,"");if(L&&Q.length===0){L.noDigits=true;}if(X){return Q;}var P=G.get("homeCountry"),M=K[P],N,U,O,T,V,W;
if(!M){return null;}U=M.idd;if(!U||U.length===0){}else{for(S=0,T=U.length;S<T;S+=1){V=U[S];if(Q.indexOf(V)===0){Q=Q.slice(V.length);if(L){L.idd=V;}return Q;}}}N=M.code;if(!N){return null;}O=M.ndd;if(O){for(S=0,T=O.length;S<T;S+=1){W=O[S];if(Q.indexOf(W)===0){Q=N+Q.slice(W.length);if(L){L.ndd=W;}return Q;}}}Q=N+Q;if(L){L.noPrefix=true;}return Q;},logRocketStats:H,logRSTimeInterval:function(L,M){if(L&&M){H({key:L,value:((new Date()).getTime()-M)});}},addNativeEventListener:function(N,L,P,M){var O=N._node?N._node:N;M=!!M;if(typeof(O.addEventListener)!="undefined"){O.addEventListener(L,P,M);}else{if(typeof(O.attachEvent)!="undefined"){O.attachEvent("on"+L,function(){var Q=O.ownerDocument.parentWindow.event;Q.target=Q.srcElement;P(Q);});}else{O["on"+L]=function(Q){P(Q||O.ownerDocument.parentWindow.event);};}}},removeNativeEventListener:function(N,L,P,M){var O=N._node?N._node:N;M=!!M;if(typeof(O.removeEventListener)!="undefined"){O.removeEventListener(L,P,M);}else{O["on"+L]=null;}},haltEvent:function(L){if(L.stopPropagation){L.stopPropagation();L.preventDefault();}else{L.returnValue=false;L.cancelBubble=true;}},convertCloudId:function(L){var M;switch(L){case 0:case"0":M="yahoo";break;case 1:case"1":M="lcs";break;case 2:case"2":M="msn";break;case 9:case"9":M="ibm";break;default:}return M;},normalizePresenceState:function(L){var N={"1":"str_cont_list_status_be_right_back","2":"str_cont_list_status_busy","3":"str_cont_list_status_not_at_home","4":"str_cont_list_status_not_at_my_desk","5":"str_cont_list_status_not_in_the_office","6":"str_cont_list_status_on_the_phone","7":"str_cont_list_status_on_vacation","8":"str_cont_list_status_out_to_lunch","9":"str_cont_list_status_stepped_out","10":"str_cont_list_status_away"},O={state:L.presenceState,message:L.presenceMessage};switch(L.presenceState){case 99:O.state=({"0":0,"1":2,"2":999})[L.customDNDStatus];if(O.state===undefined){O.state=0;O.message=L.presenceMessage||A.get("str_menu_available");}break;case 999:O.message=L.presenceMessage||A.get("str_cont_list_status_idle");break;default:if(L.presenceState==0){O.state=0;O.message=L.presenceMessage||"";}else{var M=N[L.presenceState];if(M){O.state=2;O.message=L.presenceMessage||A.get(M);}}break;}if(O.message){O.message=this.escapeHtml(O.message);O.anchoredMessage=C.Messenger.YMLUtil.ymlToHtml(O.message,true);}else{O.anchoredMessage="";}return O;},_replaceURLWithLink:function(S){var M=/(\b(?:www\.|(telnet|(?:ht|f)tp(?:s?)):\/\/)[A-Z0-9][A-Z0-9\-_.!~*'();\/?:@&=+$,#%]*)|\b(?:mailto:|)([A-Z0-9._%+\-]+@(?:[A-Z0-9\-]+\.)+[A-Z]{2,4})\b/ig;var R,L,T=S,Q;var N=M.exec(S);if(!N){N=M.exec(S);}if(N){Q=RegExp.$1;R=S.indexOf(Q);var P=RegExp.$2!="";var O=RegExp.$3!="";if(R===0){if(P){T=S.replace(M,"<a href='$1' target='_blank' class='link' title='$1'>$1</a>");}else{if(!O){T=S.replace(M,"<a href='http://$1' target='_blank' class='link' title='$1'>$1</a>");}else{T=S.replace(M,"<a href='mailto:$3' target='_blank' class='link' title='$3'>$3</a>");}}}else{L=S.substring(S,R);L=C.Lang.trim(L);if(L==""){L=Q;}T=this.substitute("<a href='{{link}}' target='_blank' class='link' title='{{link}}'>"+L+"</a>",{link:(P?"":"http://")+Q});}}return T;},convertErrorToMessage:function(M){var L="";switch(M){case 0:break;case 1:L=A.get("str_msgr_server_error_1");break;case 2:L=A.get("str_msgr_server_error_2");break;case 3:L=A.get("str_msgr_server_error_3");break;case 4:L=A.get("str_msgr_server_error_4");break;case 6:L=A.get("str_msgr_server_error_6");break;case 7:L=A.get("str_msgr_server_error_7");break;case 8:L=A.get("str_msgr_server_error_8");break;case 10:L=A.get("str_msgr_server_error_10");break;case 12:L=A.get("str_msgr_server_error_12");break;case 28:L=A.get("str_msgr_server_error_28");break;case 32:L=A.get("str_msgr_server_error_32");break;case 33:L=A.get("str_msgr_server_error_33");break;case 42:L=A.get("str_msgr_server_error_42");break;case 53:L=A.get("str_msgr_server_error_53");break;case 55:L=A.get("str_msgr_server_error_55");break;case 58:L=A.get("str_msgr_server_error_58");break;case 59:L=A.get("str_msgr_server_error_59");break;default:L=A.get("str_msgr_server_error_1");break;}return L;}});}C.namespace("Messenger").CommonUtils=F.CommonUtils;},"@VERSION@",{requires:["globalconfig","yim-intl","ymlutil"]});YUI.add("sessionmanager",function(B){if(!YUI.namespace("Messenger").SessionManager){var D=window.launchData,G=D.fbEnabled,J=B.Messenger.RequestManager,F=B.Messenger.GlobalConfig,I=B.Messenger.CommonUtils,C=B.Messenger.GlobalConstants,A=B.Messenger.Intl,E=YUI.namespace("Messenger.Metrics"),K=B.Messenger.Events;function H(L){H.superclass.constructor.apply(this,arguments);}H.ATTRS={presenceState:{value:-1},presenceMessage:{value:""},primaryId:{value:""},loggedInId:{value:""},aliases:{value:[]},online:{value:false,setter:function(L){if(!E.convWindowPref){if(F.get("convWindowStyle")==="iframe"){logRocketStats({key:"messageWindowFloating",value:""});}else{logRocketStats({key:"messageWindowTab",value:""});}E.convWindowPref=true;}return L;}},facebookOnline:{value:false},mpopInfo:{},presenceSubscriptionsMaxPerRequest:{value:D.loginData?D.loginData.constants.presenceSubscriptionsMaxPerRequest:30},displayImage:{value:D.isSecure?C.DEFAULT_IMAGE_SSL:C.DEFAULT_IMAGE},fbConnectSeen:{value:false}};H.REQUESTS={"LOGIN":{method:"POST",path:"/v1/session"},"LOGOUT":{method:"DELETE",path:"/v1/session"},"SET_PRESENCE":{method:"PUT",path:"/v1/presence"},"LOGIN_FB":{method:"POST",path:"/v1/federation/facebook"},"LOGOUT_FB":{method:"DELETE",path:"/v1/federation/facebook"},"WAKEUP":{method:"PUT",path:"/v1/session",args:["action=mpop-activate"]}};B.extend(H,B.Base,{start:function(){var L=D.loginData,N,M=[];if(L){this.set("presenceState",D.initialPresence);this._processLoginData(L);this.set("online",true);}else{if(D.failedLogin){this.login(D.initialPresence||0);}}this._previousState={state:D.initialPresence||0,message:""};J.addListeners([{id:"buddyStatus",callback:B.bind(this._processBuddyStatus,this)},{id:"disconnect",callback:B.bind(this._processDisconnect,this)},{id:"endPointState",callback:B.bind(this._processEndPointState,this)},{id:"setVisibilityState",callback:B.bind(this._processVisibilityState,this)},{id:"federationLogin",callback:B.bind(this._processFederationLogin,this)},{id:"federationLogoff",callback:B.bind(this._processFederationLogoff,this)}]);B.Global.on(K.FATAL_IO_ERROR,B.bind(this._processDisconnect,this));B.Global.on(K.LOGGED_OUT,B.bind(this._processDisconnect,this));B.Global.on(K.SESSION_EXPIRED,B.bind(this._processSessionExpired,this));if(B.UA.ie){window.attachEvent("onunload",B.bind(this.quickLogout,this));}else{window.addEventListener("unload",B.bind(this.quickLogout,this),false);}},isOnline:function(){return this.get("online");},isOnlineFacebook:function(){return this.get("online")&&this.get("facebookOnline");},isInvisible:function(){return this.get("online")&&this.get("presenceState")==-1;},getStateID:function(){if(this.isInvisible()){return"invisible";}switch(this.get("presenceState")){case -1:case"-1":return"offline";break;case 0:case"0":return"available";break;case 2:case"2":return"busy";break;case 999:case"999":return"idle";break;default:return"offline";}},getOwnDisplayImage:function(L){L=L||32;return I.substitute(this.get("displayImage"),{"pixels|32|48":L});},login:function(P,R,S){if(this.get("online")){return;}P=P||0;R=R||"";var N=H.REQUESTS["LOGIN"],Q=I.normalizePresenceState({presenceState:P,presenceMessage:R}),O=[{"clientCapability":"smiley"},{"clientCapability":"mpop"},{"clientCapability":"richText"},{"clientCapability":"interop"},{"clientCapability":"activateSSA"},{"clientCapability":"typing"}],L,M;if(F.get("smsEnabled")){O.push({"clientCapability":"sms"});}if(F.get("fileTransferEnabled")){O.push({"clientCapability":"fileXfer"});}L={presenceState:Q.state,presenceMessage:Q.message,profileLogin:0,clientCapabilities:O,mpopLoginInfo:{"loginType":0}};L.loginTriggers=[{loginTrigger:"mpopStateTransfer"},{loginTrigger:"ignoreList"},{loginTrigger:"invisibleList"}];if(F.get("fbEnabled")){L.loginTriggers.push({loginTrigger:"fbAutoLogin"});O.push({"clientCapability":"fbInterop"});}M=["notifyServerToken=2","fieldsBuddyList="+encodeURIComponent("+groups"),"fieldsBuddyList="+encodeURIComponent("-uri")];if(!(window.openmail)){M.push("fieldsBuddyList="+encodeURIComponent("+addressbook"));}J.issueRequest({type:"LOGIN",method:N.method,path:N.path,args:M,postBody:L,successCallback:B.bind(function(T){this.set("presenceState",Q.state);this.set("presenceMessage",Q.message);J.setServerUrl("yim_core",D.protocol+T.server);J.setServerUrl("yim_notify",D.protocol+T.notifyServer);this._processLoginData(T);J.startListening();this.set("online",true);B.Command.exec("yim:processBuddies",T.contacts);B.Global.fire(K.CONNECTION_UPDATE,{isOnline:true});B.Global.fire(K.SELF_PRESENCE_CHANGED,{state:Q.state,message:Q.message});B.Global.fire(K.PRESENCE_PREF_UPDATED,P);B.Global.fire(K.EXPLICIT_LOGIN);S&&S();},this),errorCallback:B.bind(function(T){this.set("presenceState",-1);this.set("presenceMessage","");this.set("online",false);B.Global.fire(K.CONNECTION_UPDATE,{isOnline:false,reason:4});},this)});},logout:function(N){var M=H.REQUESTS["LOGOUT"],O=F.get("mpopSignOutType"),P=this.get("mpopInfo"),L;N=N?N:O=="always_local"?"local":O=="always_global"?"global":null;if(!N&&P&&P.totalEndpoints>1){B.Global.fire(K.SHOW_WINDOW,C.SIGNOUT_WINDOW);return;}if(N){L={logoffType:N=="local"?0:2};}J.issueRequest({type:"LOGOUT",method:M.method,path:M.path,postBody:L,successCallback:B.bind(function(Q){this.set("presenceState",-1);this.set("presenceMessage","");this.set("online",false);this.set("facebookOnline",false);J.handleLogout();B.Global.fire(K.CONNECTION_UPDATE,{isOnline:false,reason:4});B.Global.fire(K.PRESENCE_PREF_UPDATED,9999);},this),errorCallback:B.bind(function(Q){B.Global.fire(K.CONNECTION_UPDATE,{isOnline:true});},this)});},_processLoginData:function(N){var M=D.protocol+N.server+H.REQUESTS.LOGOUT.path,L=[],O;M+="/delete?logoffType=0";M+="&sid="+encodeURIComponent(N.sessionId);M+="&c="+encodeURIComponent(J.get("crumb"));M+="&msgrAppId=mim&blocking=0";J.setLogoutURL(M);this.set("primaryId",N.primaryLoginId);this.set("loggedInId",N.primaryLoginId);J.set("primaryLoginId",N.primaryLoginId);J.set("sessionId",N.sessionId);J.set("imToken",N.notifyServerToken.token);
if(N.profileLoginIds){for(O=0;O<N.profileLoginIds.length;O++){L.push(N.profileLoginIds[O].profileLoginId);if(N.profileLoginIds[O]["default"]){this.set("loggedInId",N.profileLoginIds[O].profileLoginId);}}this.set("aliases",L);}this.set("mpopInfo",N.mpopInfo);this._processOwnImageData(N.displayInfo);this.set("presenceSubscriptionsMaxPerRequest",N.constants.presenceSubscriptionsMaxPerRequest);B.Global.fire(K.LOGGED_IN);},_processOwnImageData:function(L){var M=L;M.user=this.get("loggedInId");M.network="yahoo";this.set("displayImage",I.getImageUrl(M));},quickLogout:function(){J.killConnections();this.set("presenceState",-1);this.set("presenceMessage","");this.set("online",false);this.set("facebookOnline",false);},toggleMessengerPresence:function(){if(this.get("online")){this.logout();}else{this.login();}},toggleFacebookPresence:function(){if(this.isOnlineFacebook()){this.logoutFacebook();}else{this.loginFacebook();}},isSelfUser:function(M){var L=this.get("aliases"),O=this.get("primaryId");if(M===O){return true;}else{for(var N=0;N<L.length;N++){if(L[N]===M){return true;}}}return false;},loginFacebook:function(L){if(F.get("isFresh")){return;}var N=H.REQUESTS["LOGIN_FB"],M=L?[]:["updateAutoLoginPref=1"];if(!G){throw new Error("Attempt made to log in to facebook but facebook is disabled");}if(this.isOnlineFacebook()){return;}if(!this.isOnline()){this.login(0,"",B.bind(function(){this.loginFacebook(L);},this));return;}J.issueRequest({type:"LOGIN_FB",method:N.method,path:N.path,args:M,postBody:"",successCallback:B.bind(function(O){this.set("facebookOnline",true);B.Global.fire(K.LOGIN_FACEBOOK);},this),failureCallback:B.bind(function(){B.Global.fire(K.LOGOUT_FACEBOOK);},this)});},logoutFacebook:function(L){var N=H.REQUESTS["LOGOUT_FB"],M=L?[]:["updateAutoLoginPref=1"];if(!this.isOnlineFacebook()){return;}J.issueRequest({type:"LOGOUT_FB",method:N.method,path:N.path,args:M,postBody:"",successCallback:B.bind(function(O){this.set("facebookOnline",false);B.Global.fire(K.LOGOUT_FACEBOOK);},this)});},setPresence:function(N,O){if(!this.get("online")){this.login(N,O);}else{if(!this.isPrimary()){this.becomePrimary(B.bind(function(){this.setPresence(N,O);},this));return;}var M=H.REQUESTS["SET_PRESENCE"],L={presenceState:N};if(O){L.presenceMessage=O;}J.issueRequest({type:"PRESENCE",method:M.method,path:M.path,postBody:L,successCallback:B.bind(function(P){this.set("presenceState",N);this.set("presenceMessage",O||"");B.Global.fire(K.SELF_PRESENCE_CHANGED,{state:N,message:O});if(N==-1){this.logoutFacebook(true);}B.Global.fire(K.PRESENCE_PREF_UPDATED,N);},this)});}},becomePrimary:function(O){var M=H.REQUESTS.WAKEUP,N=this,L=this.get("mpopInfo");if(this.isOnline()&&L&&L.state!=0){J.issueRequest({type:"MPOP_ACTIVATE",method:M.method,path:M.path,args:M.args,successCallback:function(){L=N.get("mpopInfo");L.state=0;N.set("mpopInfo",L);B.Global.fire(K.MPOP_STATE_CHANGE,L);O&&O();}});}},isPrimary:function(){return this.get("mpopInfo").state==0?true:false;},_processBuddyStatus:function(O){if(O.echo){var N=this.get("presenceState"),L=this.get("presenceMessage"),M=I.normalizePresenceState(O);if(M.state!=N||M.message!=L){this.set("presenceState",M.state);this.set("presenceMessage",M.message);B.Global.fire(K.SELF_PRESENCE_CHANGED,M);}}},_processDisconnect:function(L){this.set("presenceState",-1);this.set("presenceMessage","");this.set("online",false);this.set("facebookOnline",false);J.handleLogout();B.Global.fire(K.CONNECTION_UPDATE,{isOnline:false,reason:L?L.reason:-1});},_processSessionExpired:function(M){var L=this.get("presenceState")||"0",N=this.get("presenceMessage")||"";this._processDisconnect();this.login(L,N);},_processEndPointState:function(M){var L=this.get("mpopInfo"),N=M.endPointInfo;if(N){N.totalEndpoints=N.totalEndpoints||N.numberOfEndPoints;this.set("mpopInfo",N);if(N.state!=0&&N.numberOfEndPoints==1){this.becomePrimary();}if(L.state!=N.state){B.Global.fire(K.MPOP_STATE_CHANGE,N);}}},_processVisibilityState:function(M){var L=this.get("presenceState");if(M.state==2){if(L!=-1){this._previousState={state:L,message:this.get("presenceMessage")};this.set("presenceState",-1);this.set("presenceMessage","");B.Global.fire(K.SELF_PRESENCE_CHANGED,{state:-1,message:""});}}else{if(L==-1){this.set("presenceState",this._previousState.state);this.set("presenceMessage",this._previousState.message);B.Global.fire(K.SELF_PRESENCE_CHANGED,this._previousState);}}},_processFederationLogin:function(O){if(O&&(O.network=="facebook")&&!F.get("isFresh")){if(O.status==-1){B.Global.fire(K.LOGOUT_FACEBOOK,O);this.set("facebookOnline",false);var L=function(){this.set("fbConnectSeen",true);var S=(D&&D.lang)?D.lang:"en-US",Q=(D&&D.isSecure)?"https://ycpi-mail-credstore.msg.yahoo.com/v1/credStore.php?lang="+S+"&c="+encodeURIComponent(J.get("crumb")):"http://credstore.msg.yahoo.com/v1/credStore.php?lang="+S+"&c="+encodeURIComponent(J.get("crumb")),R=window.open(Q,"","height=700,width=980"),P=420000,T=B.later(1000,null,B.bind(function(){P-=1000;if(P<0){T.cancel();return;}if(R.closed){T.cancel();this.loginFacebook();}else{}},this),null,true);},M=A.get("str_cont_list_facebook_missing_cred"),N=I.substitute(A.get("str_cont_list_facebook_invalid_cred"),{str_cfg_branding:A.get("str_cfg_branding"),str_cfg_branding_messenger:F.getGenericAppName()});switch(O.errorCode){case 56:if(!this.get("fbConnectSeen")){B.Messenger.WindowManager.confirm(M,B.bind(L,this),null,A.get("str_cont_list_facebook_down_header").replace(/"/g,""),"warning");}else{this.set("fbConnectSeen",false);}break;case 57:if(!this.get("fbConnectSeen")){B.Messenger.WindowManager.confirm(N,B.bind(L,this),null,A.get("str_cont_list_facebook_down_header").replace(/"/g,""),"warning");}else{this.set("fbConnectSeen",false);}break;case 40:B.Messenger.WindowManager.alert(A.get("str_cont_list_facebook_down").replace(/"/g,""),null,A.get("str_cont_list_facebook_down_header").replace(/"/g,""),"warning");break;default:}}else{if(this.get("facebookOnline")){return;}this.set("facebookOnline",true);B.Global.fire(K.LOGIN_FACEBOOK,O);
}}},_processFederationLogoff:function(L){if(L&&L.network=="facebook"){if(!this.get("facebookOnline")){return;}this.set("facebookOnline",false);B.Global.fire(K.LOGOUT_FACEBOOK,L);}}});YUI.Messenger.SessionManager=new H();B.Command.registerModule("yim",YUI.Messenger.SessionManager);}B.namespace("Messenger").SessionManager=YUI.Messenger.SessionManager;},"@VERSION@",{requires:["base-base","requestmanager","command","commonutils","events","globalconstants"]});/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("lang/datatype-date-format_en-US",function(e){e.Intl.add("datatype-date-format","en-US",{a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a, %b %d, %Y %l:%M:%S %p %Z",p:["AM","PM"],P:["am","pm"],x:"%m/%d/%y",X:"%l:%M:%S %p"})},"3.7.2");
/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("datatype-date-math",function(e,t){var n=e.Lang;e.mix(e.namespace("Date"),{isValidDate:function(e){return n.isDate(e)&&isFinite(e)&&e!="Invalid Date"&&!isNaN(e)&&e!=null?!0:!1},areEqual:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()==t.getTime()},isGreater:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()>t.getTime()},isGreaterOrEqual:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()>=t.getTime()},isInRange:function(e,t,n){return this.isGreaterOrEqual(e,t)&&this.isGreaterOrEqual(n,e)},addDays:function(e,t){return new Date(e.getTime()+864e5*t)},addMonths:function(e,t){var n=e.getFullYear(),r=e.getMonth()+t;n=Math.floor(n+r/12),r=(r%12+12)%12;var i=new Date(e.getTime());return i.setFullYear(n),i.setMonth(r),i},addYears:function(e,t){var n=e.getFullYear()+t,r=new Date(e.getTime());return r.setFullYear(n),r},listOfDatesInMonth:function(e){if(!this.isValidDate(e))return[];var t=this.daysInMonth(e),n=e.getFullYear(),r=e.getMonth(),i=[];for(var s=1;s<=t;s++)i.push(new Date(n,r,s,12,0,0));return i},daysInMonth:function(e){if(!this.isValidDate(e))return 0;var t=e.getMonth(),n=[31,28,31,30,31,30,31,31,30,31,30,31];if(t!=1)return n[t];var r=e.getFullYear();return r%400===0?29:r%100===0?28:r%4===0?29:28}}),e.namespace("DataType"),e.DataType.Date=e.Date},"3.7.2",{requires:["yui-base"]});
YUI.add("mim-dateformat",function(C){var B=C.Messenger.Intl,A=window.launchData;if(A.dateFormatter){C.Intl.add("datatype-date-format",A.lang,A.dateFormatter);C.Intl.setLang("datatype-date-format",A.lang);}else{if(B.get("str_mail_weekday_abbr_sunday")){A.dateFormatter={"a":[B.get("str_mail_weekday_abbr_sunday"),B.get("str_mail_weekday_abbr_monday"),B.get("str_mail_weekday_abbr_tuesday"),B.get("str_mail_weekday_abbr_wednesday"),B.get("str_mail_weekday_abbr_thursday"),B.get("str_mail_weekday_abbr_friday"),B.get("str_mail_weekday_abbr_saturday")],"A":[B.get("str_mail_weekday_sunday"),B.get("str_mail_weekday_monday"),B.get("str_mail_weekday_tuesday"),B.get("str_mail_weekday_wednesday"),B.get("str_mail_weekday_thursday"),B.get("str_mail_weekday_friday"),B.get("str_mail_weekday_saturday")],"b":[B.get("str_mail_month_abbr_january"),B.get("str_mail_month_abbr_february"),B.get("str_mail_month_abbr_march"),B.get("str_mail_month_abbr_april"),B.get("str_mail_month_abbr_may"),B.get("str_mail_month_abbr_june"),B.get("str_mail_month_abbr_july"),B.get("str_mail_month_abbr_august"),B.get("str_mail_month_abbr_september"),B.get("str_mail_month_abbr_october"),B.get("str_mail_month_abbr_november"),B.get("str_mail_month_abbr_december")],"B":[B.get("str_mail_month_january"),B.get("str_mail_month_february"),B.get("str_mail_month_march"),B.get("str_mail_month_april"),B.get("str_mail_month_may"),B.get("str_mail_month_june"),B.get("str_mail_month_july"),B.get("str_mail_month_august"),B.get("str_mail_month_september"),B.get("str_mail_month_october"),B.get("str_mail_month_november"),B.get("str_mail_month_december")],"c":"%a, %b %d, %Y %l:%M:%S %p %Z","p":[B.get("str_mail_dateformat_AM_l10n"),B.get("str_mail_dateformat_PM_l10n")],"P":[B.get("str_mail_dateformat_AM_l10n"),B.get("str_mail_dateformat_PM_l10n")],"x":"%m/%d/%y","X":"%l:%M:%S %p"};C.Intl.add("datatype-date-format",A.lang,A.dateFormatter);C.Intl.setLang("datatype-date-format",A.lang);}}},"@VERSION@",{requires:["yim-intl","datatype-date"]});YUI.add("abutils",function(B){function A(C){A.superclass.constructor.apply(this,arguments);}A.NAME="yim-abutils";A.ONE_PASS_TIMER=50;A.ATTRS={rawAddressBook:{value:false}};B.extend(A,B.Base,{initializer:function(){},destructor:function(){},isYUser:function(D){var E={"yahoo.com":true,"ymail.com":true,"rocketmail.com":true,"ameritech.net":true,"flash.net":true,"nvbell.net":true,"pacbell.net":true,"prodigy.net":true,"sbcglobal.net":true,"snet.net":true,"swbell.net":true,"wans.net":true,"btinternet.com":true,"btopenworld.com":true,"talk21.com":true,"rogers.com":true,"nl.rogers.com":true,"verizon.net":true,"demobroadband.com":true},C=D.split("@");if(C.length!==2||!E[C[1]]||(C[0].length<4)||(C[0].length>32)){return false;}return C[0];},parse:function(C,D){log("Begin parsing ABData");this._parseContacts(C||{},0,D);},parseUpdate:function(H,D,J){var L=H,K=[],E=[];if(!L||(typeof L!=="object")){}var I,F,G,C;for(I=0;I<L.length;I+=1){G=L[I].id;for(F=0;F<D.length;F+=1){if(G===D[F]){K.push(L[I]);break;}}}E=this._parseContacts(K,0,function(M){B.Command.exec("yim:abContactsUpdated",M);});},_parseContacts:function(C,E,F){var I=C.length,D=function(){return new Date().getTime();};this._parsedContacts=this._parsedContacts||[];var K=D();for(var Q=E;Q<I;Q++){var L=C[Q].fields,J,S,M=false,T={},P={},R=false,G=false,V,U;for(var O=0;L&&O<L.length;O++){if(L[O].type=="phone"){R=true;}if(L[O].type=="yahooid"){if(L[O].value&&L[O].value.length>=4&&L[O].value.length<=32){M=true;J=L[O].value;}break;}if(L[O].type=="email"&&!(L[O].id<=0)){S=B.Messenger.CommonUtils.getYidFromEmailAddr(L[O].value);if(S.yid){J=S.value;M=true;break;}else{}}if(L[O].type=="otherid"&&!B.Lang.isUndefined(L[O].flags)){if((L[O].flags[0]=="MSN")||L[O].flags[0]=="IBM"||L[O].flags[0]=="LCS"){G=true;V=L[O].value;U=L[O].flags[0].toLowerCase();break;}}}if(M||R||G){if(M){P.id=J;P.network="yahoo";}else{if(G){P.id=V;P.network=U;}}for(var N=0;L&&N<L.length;N++){switch(L[N].type){case"name":if(!T.firstname){T.firstname=L[N].value.givenName||"";}if(!T.lastname){T.lastname=L[N].value.familyName||"";}break;case"nickname":if(!T.nickname){T.nickname=L[N].value;}break;case"email":if(!T.email){T.email=L[N].value;T.sc_score=L[N].sc_score;}break;case"phone":if(!B.Lang.isUndefined(L[N].flags)&&B.Lang.isString(L[N].flags[0])){var H=L[N].flags[0];switch(H){case"HOME":if(!T.homeno){T.homeno=L[N].value;}break;case"WORK":if(!T.workno){T.workno=L[N].value;}break;case"MOBILE":if(!T.mobileno){T.mobileno=L[N].value;if(!P.id){P.id=B.Messenger.CommonUtils.normalizeNumber(T.mobileno);P.network="sms";}}break;default:}}else{}break;case"guid":P.guid=L[N].value;break;default:}}P.addressbookId=C[Q].id;P.addressbook=T;if(P.id&&P.network){this._parsedContacts.push(P);}}else{}if((D()-K)>A.ONE_PASS_TIMER){break;}else{}}if(Q<I){log("ABUtils parsed from "+E+" to "+Q+". But we have more, so scheduling next batch");B.later(50,this,B.bind(function(){this._parseContacts(C,Q+1,F);},this));}else{if(this._parsedContacts.length){F&&F(this._parsedContacts);}delete this._parsedContacts;}}});B.namespace("Messenger").ABUtils=A;},"@VERSION@",{requires:["base-base","commonutils"]});YUI.add("contactsmanager",function(C){if(!YUI.namespace("Messenger").ContactsManager){var E=window.launchData,I=0,A=C.Messenger.Intl,H=C.Messenger.CommonUtils,K=C.Messenger.Events,F=C.Messenger.GlobalConfig,D=C.Messenger.GlobalConstants,J=C.Messenger.RequestManager,G=C.Messenger.SessionManager;function B(L){B.superclass.constructor.apply(this,arguments);}B.ATTRS={ABDataReceived:{value:false},started:{value:false}};B.REQUESTS={"BLOCK_USER":{method:"PUT",path:"/v1/ignorelist"},"UNBLOCK_USER":{method:"DELETE",path:"/v1/ignorelist"},"ACCEPT_ADD":{method:"POST",path:"/v1/buddyrequest/{{network}}/{{user}}"},"DENY_ADD":{method:"DELETE",path:"/v1/buddyrequest/{{network}}/{{user}}"},"REPORT_SPAM":{method:"POST",path:"/v1/abuse/spim"},"SUBSCRIBE_PRESENCE":{method:"PUT",path:"/v1/subscription/presence",args:["blocking=0"]},"UNSUBSCRIBE_PRESENCE":{method:"DELETE",path:"/v1/subscription/presence",args:["blocking=0"]},"VISIBLE_LIST_ADD":{method:"PUT",path:"/v1/stealth/visiblelist"},"VISIBLE_LIST_DELETE":{method:"DELETE",path:"/v1/stealth/visiblelist"},"INVISIBLE_LIST_ADD":{method:"PUT",path:"/v1/stealth/invisiblelist"},"INVISIBLE_LIST_DELETE":{method:"DELETE",path:"/v1/stealth/invisiblelist"},"ADD_USER":{method:"PUT",path:"/v1/group/{{groupname}}/contact/{{network}}/{{user}}"},"DELETE_USER":{method:"DELETE",path:"/v1/group/{{groupname}}/contact/{{network}}/{{user}}"},"UPDATE_USER":{method:"PUT",path:"/v1/contact/{{network}}/{{user}}"}};C.extend(B,C.Base,{initializer:function(L){this._contacts={};this._ignoredUsers=[];this._invisibleList=[];this._visibleList=[];this._pendingAddRequests={};this._incomingAddRequests={};this._presenceReceived=false;this._bufferedAddRequests=[];this._imContacts=0;this._mobileContacts=0;},destructor:function(){if(this._abUtils){this._abUtils.destroy();delete this._abUtils;}if(this._addReqThrottleTimer){this._addReqThrottleTimer.cancel();delete this._addReqThrottleTimer;}},start:function(){var L=E.loginData,M=E.abData;if(L){this.processBuddies(L.contacts);}if(M){this._handleAddressBookData(M);delete E.abData;}C.Global.on(K.AB_DATA_RECEIVED,this._handleAddressBookData,this);this._startListening();C.Global.on(K.CONNECTION_UPDATE,C.bind(this._handleConnectionChange,this));this.set("started",true);},getIgnoreList:function(){return this._ignoredUsers;},addBuddy:function(M){var N=M.user,L=M.network||"yahoo",T=M.group||A.get("str_conv_default_group"),V=M.message||"",U=M.addressbook||{},Q={addressbook:M.addressbook},P=[N,L].join("~"),S=B.REQUESTS.ADD_USER,R=M.addAs,O;if(L!="yahoo"){this._pendingAddRequests[P]=M;}O={message:V,addressbook:U};if(R){O.addAs=R;}J.issueRequest({successCallback:C.bind(function(W){if(!this._contacts[P]){Q.user=N;Q.network=L;Q.groups=[T];Q.authorized=0;Q.type="buddy";this._addContact(Q);C.Global.fire(K.ADD_CONTACT_SENT,Q);}else{Q=this._contacts[P];Q.groups=Q.groups||[];if(Q.type=="buddy"){throw new Error("Attempted to send an add request to an existing Messenger Buddy");}Q.type="buddy";Q.authorized=0;Q.groups.push(T);this._updateContact(Q);}M.successCallback&&M.successCallback(W);},this),errorCallback:M.errorCallback,method:S.method,path:H.substitute(S.path,{user:encodeURIComponent(N),network:encodeURIComponent(L),groupname:encodeURIComponent(T)}),postBody:O});},acceptAddRequest:function(N){var P=N.alias,O=N.user,M=N.network||"yahoo",T=B.REQUESTS.ACCEPT_ADD,S=[O,M].join("~"),U=this._incomingAddRequests[S],Q=P?{authAs:P}:{},R=this.getContact(O,M),L;J.issueRequest({successCallback:C.bind(function(V){delete this._incomingAddRequests[S];N.successCallback&&N.successCallback(V);},this),errorCallback:N.errorCallback,method:T.method,path:H.substitute(T.path,{user:encodeURIComponent(O),network:encodeURIComponent(M)}),postBody:Q});if(!R||R.type!="buddy"){L={alias:P,user:O,network:M,addressbook:{firstname:U.fname||"",lastname:U.lname||"",nickname:U.nickName||"",mobileno:U.mobileNumber||""},successCallback:C.bind(function(V){this.addContacts([{user:O,network:M,authorized:0,firstname:U.fname,lastname:U.lname,nickname:U.nickName,mobileno:U.mobileNumber}]);},this)};this.addBuddy(L);}},abContactDeleted:function(L){var O=this.getContacts(),N,M;for(N=0;N<O.length;N++){if(O[N].addressbookId==L){this.unsubscribeForPresence([{id:O[N].user,network:O[N].network}]);M=[O[N].user,O[N].network].join("~");C.Global.fire(K.CONTACT_DELETED,this._contacts[M]);delete this._contacts[M];break;}}},abContactsUpdated:function(L){this.addContacts(L);this._subscribeABContacts();},getIMContactCount:function(){return this._imContacts;},getMobileContactCount:function(){return this._mobileContacts;},declineAddRequest:function(S){var O=S.alias,M=S.user,R=S.network||"yahoo",Q=B.REQUESTS.DENY_ADD,N=[M,R].join("~"),P=this._incomingAddRequests[N],L=O?{authAs:O}:{};if(S.message){L.authReason=S.message;}J.issueRequest({successCallback:C.bind(function(T){delete this._incomingAddRequests[N];S.successCallback&&S.successCallback(T);},this),errorCallback:S.errorCallback,method:Q.method,path:H.substitute(Q.path,{user:encodeURIComponent(M),network:encodeURIComponent(R)}),postBody:L});},removeContactFromGroup:function(S){var P=B.REQUESTS.DELETE_USER,N=S.user,Q=S.network||"yahoo",R=S.group,M=this._contacts[[N,Q].join("~")],O,L;J.issueRequest({method:P.method,path:H.substitute(P.path,{user:encodeURIComponent(N),network:encodeURIComponent(Q),groupname:encodeURIComponent(R)}),successCallback:function(T){for(O=0,L=M.groups.length;O<L;O++){if(M.groups[O]==R){M.groups.splice(O,1);break;}}C.Global.fire(K.CONTACT_REMOVED_FROM_GROUP,{"user":N,"network":Q,"group":R});S.successCallback&&S.successCallback(T);},errorCallback:S.errorCallback});},deleteContact:function(S){var Q,N,O=S.user,R=S.network,P=[O,R].join("~"),M=this._contacts[[O,R].join("~")],L=M.groups.slice(0);for(Q=0,N=L.length;Q<N;Q++){this.removeContactFromGroup({user:O,network:R,group:L[Q]});}M.groups=[];if(window.openmail){if(R=="facebook"){C.Global.fire(K.CONTACT_REMOVED_FROM_GROUP,{"user":O,"network":R,"group":A.get("str_cont_list_facebook_group_id")});}else{C.Global.fire(K.CONTACT_REMOVED_FROM_GROUP,{"user":O,"network":R,"group":A.get("str_cont_list_default_group_id")});
}}C.Global.fire(K.CONTACT_DELETED,M);delete this._contacts[P];},showDeleteConfirm:function(R){if(!(R&&R.user&&R.network)){return;}var O=R.user,N=R.network,M=O+"~"+N,Q=this.getContact(O,N);if(!Q){return;}var T,P,S=A.get("str_del_contact_msg_header"),L=C.bind(function(V){if(C.Lang.isObject(V)&&V.checked&&Q.type!=="addressbook"){this.unsubscribeForPresence([{id:O,network:N}]);C.Global.fire(K.DELETE_FROM_AB,Q);this.deleteContact(R);}else{if(P===undefined){this.unsubscribeForPresence([{id:O,network:N}]);C.Global.fire(K.DELETE_FROM_AB,Q);this.deleteContact(R);}else{var U=A.get("str_del_contact_msg_not_deleted_ab");U=H.substitute(U,{"contact_highlighted":"<strong>"+Q.displayname+"</strong>","str_cont_list_default_group_name":A.get("str_cont_list_default_group_name"),"str_cfg_generic_messenger":A.get("str_cfg_generic_messenger"),"str_messenger_options":H.substitute(A.get("str_menu_messenger_options"),{"str_cfg_branding_messenger":A.get("str_cfg_generic_messenger")}),"line_spacing":"<p>"});C.Messenger.WindowManager.alert(U,null,S,"warning");this.deleteContact(R);}}},this);if(Q.type==="addressbook"){T=A.get("str_del_contact_msg_ab_only_desc");T=H.substitute(T,{"contact_highlighted":"<strong>"+Q.displayname+"</strong>","contact":Q.displayname,"str_cont_list_default_group_name":A.get("str_cont_list_default_group_name"),"str_cfg_generic_messenger":A.get("str_cfg_generic_messenger"),"str_messenger_options":H.substitute(A.get("str_menu_messenger_options"),{"str_cfg_branding_messenger":A.get("str_cfg_generic_messenger")}),"line_spacing":"<p>"});}else{callInternal("getNeoString",{key:"str_branding_mail"},function(U){T=A.get("str_del_contact_msg_messenger_desc");T=H.substitute(T,{"contact_highlighted":"<strong>"+Q.displayname+"</strong>","str_cfg_generic_messenger":A.get("str_cfg_generic_messenger")});P=A.get("str_del_contact_msg_also_delete_ab");P=H.substitute(P,{"str_cfg_branding_mail":U.value});C.Messenger.WindowManager.confirm(T,L,null,S,null,P,A.get("str_delete"));});return;}C.Messenger.WindowManager.confirm(T,L,null,S,null,P,A.get("str_delete"));},blockUser:function(O){var M=B.REQUESTS.BLOCK_USER,L=O.user,N=O.network||"yahoo";C.Global.fire(K.ACK_CONVERSATION,{"alias":G.get("loggedInId"),"user":L,"network":N});J.issueRequest({successCallback:C.bind(function(P){this._ignoredUsers.push({user:L,network:N});C.Global.fire(K.USER_BLOCKED,{user:L,network:N});O.successCallback&&O.successCallback(P);},this),errorCallback:O.errorCallback,method:M.method,path:M.path,postBody:{members:[{"id":L,"network":N}]}});},unblockUser:function(L){this.unblockUsers({members:[{id:L.user,network:L.network}]});},unblockUsers:function(M){var L=B.REQUESTS.UNBLOCK_USER;J.issueRequest({method:L.method,path:L.path,postBody:{members:M.members},successCallback:C.bind(function(P){var O,N,Q;for(O=0;O<M.members.length;O++){Q=M.members[O];for(N=0;N<this._ignoredUsers.length;N++){if(this._ignoredUsers[N].user==Q.id){this._ignoredUsers.splice(N,1);break;}}C.Global.fire(K.USER_UNBLOCKED,{user:Q.id,network:Q.network||"yahoo"});}M.successCallback&&M.successCallback(P);},this),errorCallback:M.errorCallback});},showReportAbuseDialog:function(L){C.Global.fire(K.SHOW_WINDOW,D.REPORT_ABUSE_WINDOW,null,{user:L.user,alias:G.get("loggedInId"),network:L.network||"yahoo"});},reportSpam:function(O){var W=B.REQUESTS.REPORT_SPAM,X,V,P,S=O.alias,Q=O.user,N=O.network,M=O.initiatedBy,R,T,U=O.spims||[],L;if(!U.length){X=H.getConversationId(S,Q,N);V=C.Messenger.ConversationManager.getConversation(X);if(!P&&V){P=V.getMessages();}if(!P||!P.length){this.reportAbuse(O);return;}for(R=0,T=P.length;R<T&&R<50;R++){L={message:P[R].content,initiatedBy:P[R].fromSelf?1:2};if(P[R].hash){L.hash=P[R].hash;}U.push(L);}}if(!M){M=U[0].initiatedBy;}J.issueRequest({method:W.method,path:W.path,postBody:{spammerId:Q,spammedAs:S,initiatedBy:M,network:N,spims:U},successCallback:O.successCallback,errorCallback:O.errorCallback});},reportAbuse:function(R){if(R!==null){var M=H.getYidFromEmailAddr(R.user,R.network),L=M.value,P=R.network,N=R.alias||G.get("loggedInId");if(L&&P){var S=H.getConversationId(N,L,P),O,Q;if(S){Q=C.Messenger.ConversationManager.getConversation(S);O=Q.getMessages();this.openReportAbuseWindow(N,L,P,O);}}}},openReportAbuseWindow:function(V,S,O,R){var L=A.get("str_urls_report_abuse"),P,X="\r\n{{userid}} ({{time}}): {{message}}",U,W,M,Q="";if(window.launchData&&E.intl!=="us"){window.open(L,"_blank");return;}for(U=0,W=R.length;U<W;U++){M=R[U];var N=M.time?new Date(M.time*1000):new Date(),Y=C.DataType.Date.format(N,{format:E.dtf}),T=document.createElement("DIV");T.innerHTML=M.content;Q+=H.substitute(X,{userid:M.fromSelf===true?V:S,time:Y,message:T.textContent||T.innerText});}P={reporterYID:V,abuserYID:S,messengerAbuseChatLog:Q};H.postToURL(L,P);},addToVisibleList:function(M){var L=B.REQUESTS.VISIBLE_LIST_ADD;if(this.isContactOnInvisibleList(M.user,M.network)){this.removeFromInvisibleList(M);}J.issueRequest({method:L.method,path:L.path,postBody:{members:[{id:M.user,network:M.network}]},successCallback:C.bind(function(N){this._visibleList.push({user:M.user,network:M.network});M.successCallback&&M.successCallback(N);C.Global.fire(K.VISIBILITY_CHANGED,{user:M.user,network:M.network,visible:true});},this),errorCallback:M.errorCallback});},removeFromVisibleList:function(O){var M=B.REQUESTS.VISIBLE_LIST_DELETE,L=O.user,N=O.network;J.issueRequest({method:M.method,path:M.path,postBody:{members:[{id:L,network:N}]},successCallback:C.bind(function(S){var Q,P,R;for(Q=0,P=this._visibleList.length;Q<P;Q++){R=this._visibleList[Q];if(R.user==L&&R.network==N){this._visibleList.splice(Q,1);break;}}O.successCallback&&O.successCallback(S);C.Global.fire(K.VISIBILITY_CHANGED,{user:L,network:N,visible:this.isContactVisible(L,N)});},this),errorCallback:O.errorCallback});},addToInvisibleList:function(M){var L=B.REQUESTS.INVISIBLE_LIST_ADD;if(this.isContactOnVisibleList(M.user,M.network)){this.removeFromVisibleList(M);}J.issueRequest({method:L.method,path:L.path,postBody:{members:[{id:M.user,network:M.network}]},successCallback:C.bind(function(N){this._invisibleList.push({user:M.user,network:M.network});
M.successCallback&&M.successCallback(N);C.Global.fire(K.VISIBILITY_CHANGED,{user:M.user,network:M.network,visible:false});},this),errorCallback:M.errorCallback});},removeFromInvisibleList:function(O){var M=B.REQUESTS.INVISIBLE_LIST_DELETE,L=O.user,N=O.network;J.issueRequest({method:M.method,path:M.path,postBody:{members:[{id:L,network:N}]},successCallback:C.bind(function(S){var Q,P,R;for(Q=0,P=this._invisibleList.length;Q<P;Q++){R=this._invisibleList[Q];if(R.user==L&&R.network==N){this._invisibleList.splice(Q,1);break;}}O.successCallback&&O.successCallback(S);C.Global.fire(K.VISIBILITY_CHANGED,{user:L,network:N,visible:this.isContactVisible(L,N)});},this),errorCallback:O.errorCallback});},getContacts:function(P,N){var M=[],L;for(var O in this._contacts){L=this._contacts[O];if(this._contacts.hasOwnProperty(O)&&(!P||L.presence.state>-1)&&(N||L.network!="sms")){M.push(C.clone(L));}}return M;},getFacebookContacts:function(){var M=[],L;for(var N in this._contacts){L=this._contacts[N];if(this._contacts.hasOwnProperty(N)&&(L.network=="facebook")){M.push(C.clone(L));}}return M;},isContactInGroup:function(O,M){var L=this.getContactGroups(M),N;for(N=0;N<L.length;N++){if(L[N]==O){return true;}}return false;},findContactWithMobileNo:function(M){var N,L;for(N in this._contacts){if(this._contacts.hasOwnProperty(N)){L=this._contacts[N];if(L.mobileno&&H.normalizeNumber(L.mobileno)==M){return L;}}}},getContactById:function(P){var M=this._contacts[P];if(M){return C.clone(M);}else{var L=P.split("~"),N=L[0],O=L[1];return this._normalizeContact({user:N,network:O,type:"temporary"});}},isUserInContactList:function(L,M){if(this._contacts[[L,M].join("~")]){return true;}return false;},getContactGroups:function(L){if(!L.groups&&!L.displayGroup&&window.openmail){if(L.network==="facebook"){L.displayGroup=A.get("str_cont_list_facebook_group_id");}else{if(L.network=="sms"){L.displayGroup=A.get("str_cont_list_default_mobile_group_id");}else{L.displayGroup=A.get("str_cont_list_default_group_id");}}}return L.displayGroup?[L.displayGroup]:L.groups;},isPresenceAvailable:function(){return this._presenceReceived;},getIncomingAddRequests:function(){return this._incomingAddRequests;},_startListening:function(){J.addListeners([{id:"buddyInfo",callback:C.bind(this._handleBuddyInfo,this)},{id:"logOff",callback:C.bind(this._handleBuddyLogoff,this)},{id:"ignoreList",callback:C.bind(this._handleIgnoreList,this)},{id:"invisibleList",callback:C.bind(this._handleInvisibleList,this)},{id:"buddyStatus",callback:C.bind(this._handleBuddyStatus,this)},{id:"buddyAuthorize",callback:C.bind(this._handleBuddyAuthorize,this)},{id:"displayImage",callback:C.bind(this._handleDisplayImage,this)},{id:"removeBuddy",callback:C.bind(this._handleRemoveBuddy,this)},{id:"addResponse",callback:C.bind(this._handleAddResponse,this)},{id:"buddyMove",callback:C.bind(this._handleBuddyMove,this)},{id:"renameGroup",callback:C.bind(this._handleRenameGroup,this)},{id:"editIgnoreList",callback:C.bind(this._handleEditIgnore,this)},{id:"editInvisibleList",callback:C.bind(this._handleEditInvisible,this)},{id:"editVisibleList",callback:C.bind(this._handleEditVisible,this)},{id:"avatarImage",callback:C.bind(this._handleAvatarImage,this)},{id:"displayImagePrefs",callback:C.bind(this._handleDisplayImgPrefs,this)}]);},_handleAddressBookData:function(L){if(!this._abUtils){this._abUtils=new C.Messenger.ABUtils();}this._abUtils.parse(L,C.bind(function(M){this.addContacts(M);this.set("ABDataReceived",true);C.later(1000,this,this._subscribeABContacts);},this));},_subscribeABContacts:function(){if(!G.isOnline()){return;}var P,L,O,M=[],N=G.get("presenceSubscriptionsMaxPerRequest");for(P in this._contacts){if(this._contacts.hasOwnProperty(P)){L=this._contacts[P];if(!L.subscribed&&L.type=="addressbook"&&L.network!="sms"&&!G.isSelfUser(L.user)){O={id:L.user};if(L.network!="yahoo"){O.network=L.network;}L.subscribed=true;M.push(O);if(M.length==N){this.subscribeForPresence(M);M=[];}}}}if(M.length){this.subscribeForPresence(M);}},subscribeForPresence:function(L){var M=B.REQUESTS.SUBSCRIBE_PRESENCE;J.issueRequest({type:"PRESENCE",method:M.method,path:M.path,args:M.args,postBody:{members:L}});},unsubscribeForPresence:function(L){var M=B.REQUESTS.UNSUBSCRIBE_PRESENCE;J.issueRequest({type:"PRESENCE_OFF",method:M.method,path:M.path,args:M.args,postBody:{members:L}});},_handleConnectionChange:function(L){if(!L.isOnline){for(var M in this._contacts){if(this._contacts.hasOwnProperty(M)){this._contacts[M].presence={state:-1,message:""};if(this._contacts[M].type=="addressbook"){this._contacts[M].subscribed=false;}}}this._presenceReceived=false;}else{this._subscribeABContacts();}},isContactVisible:function(N,P){var Q=[N,P].join("~"),O,M,L;if(G.isInvisible()){return this.isContactOnVisibleList(N,P);}else{return !this.isContactOnInvisibleList(N,P);}},isContactOnVisibleList:function(N,P){var O,M,L;for(O=0,M=this._visibleList.length;O<M;O++){L=this._visibleList[O];if(L.user==N&&L.network==P){return true;}}return false;},isContactOnInvisibleList:function(N,P){var O,M,L;for(O=0,M=this._invisibleList.length;O<M;O++){L=this._invisibleList[O];if(L.user==N&&L.network==P){return true;}}return false;},isUserBlocked:function(L,M){return this.isUserIgnored(L,M)||this.isBlockedNonContact(L,M);},isUserIgnored:function(M,P){var N,L,O;for(N=0,L=this._ignoredUsers.length;N<L;N++){O=this._ignoredUsers[N];if(O.user==M&&O.network==P){return true;}}return false;},isBlockedNonContact:function(L,M){return F.get("blockNonContacts")&&(M!=="sms")&&!this.isUserInContactList(L,M);},getPendingAddRequest:function(L,M){return this._incomingAddRequests[[L,M||"yahoo"].join("~")];},getPendingAddRequests:function(){var M,L=[];for(M in this._incomingAddRequests){if(this._incomingAddRequests.hasOwnProperty(M)){L.push(this._incomingAddRequests[M]);}}return L;},addContacts:function(N){var M,L;for(M=0;M<N.length;M++){L=N[M].contact||N[M];this._addContact(L);}},processBuddies:function(O){var N,M,L;for(N=0,M=O.length;N<M;N++){L=O[N].contact||O[N];
L.type="buddy";O[N]=L;}this.addContacts(O);},_addContact:function(L){L.user=L.user||L.id||L.sender;L.network=L.network||"yahoo";var N=[L.user,L.network].join("~"),M;if(!this._contacts[N]){L.hash=I++;M=this._normalizeContact(L);if(L.network==="facebook"&&L.displayname===L.user){return null;}this._contacts[N]=M;H.arrayFire(K.CONTACTS_ADDED,[L]);}else{this._updateContact(L);}if(L.network=="sms"){this._mobileContacts++;}else{this._imContacts++;}return this._contacts[N];},_updateContact:function(M){M.user=M.user||M.id||M.sender;M.network=M.network||"yahoo";var N=[M.user,M.network].join("~"),L=this._contacts[N];if(!L){return this._addContact(M);}else{C.mix(L,this._normalizeContact(M,true),true,null,0,true);H.arrayFire(K.CONTACTS_UPDATED,[this._contacts[N]]);}return this._contacts[N];},viewFacebookProfile:function(L){var O="",N="",M=L.network;if(M=="facebook"){O=(L.user).replace("@chat.facebook.com","").replace("-","");O=encodeURIComponent(O);N="http://www.facebook.com/profile.php?id="+O;window.open(N,"_newtab");}},getContact:function(L,M){return this.getContactById([L,M].join("~"));},updateContact:function(N,P,M){var S=this._contacts[[N,P].join("~")],O,L,R=M.mobileno,Q=S.mobileno;if(!S){return null;}this._updateContact(M);if(R&&R!==Q){O=B.REQUESTS.UPDATE_USER;L={addressbook:{id:M.addressbookId,mobileno:R}};J.issueRequest({method:O.method,path:H.substitute(O.path,{user:encodeURIComponent(N),network:encodeURIComponent(P)}),postBody:L});}},getContactDisplayImage:function(L,M){if(typeof(L)!="object"){L=this._contacts[L];}M=M||"32";var N=L&&L.imageUrl?L.imageUrl:this._getContactDisplayImage(L);return H.substitute(N,{"pixels|32|48":M});},isNonBuddyInterOpUser:function(M,N){N=N||"yahoo";var P,L,O=false;if(N!=="yahoo"&&N!=="sms"&&N!=="facebook"){P=M+"~"+N;L=this._contacts[P];O=!(L&&L.type==="buddy"&&L.authorized);}return O;},_getContactDisplayImage:function(L){if(L.url){if(L.network=="facebook"){delete L.url;return H.getImageUrl(L);}else{return L.url;}}else{return H.getImageUrl(L);}},_normalizeContact:function(N,M){N.user=N.user||N.id||N.sender;N.network=N.network||"yahoo";var P,L;if(typeof N.presenceState!="undefined"){N.presence=H.normalizePresenceState(N);}else{if(!M){N.presence=N.presence||{state:-1,message:""};}}if(typeof(N.authorized)!="undefined"||!M){N.authorized=N.authorized===0?false:true;}var O=N.clientCapabilities;if(O!==undefined&&O!==""&&C.Lang.isNumber(O)){N.clientCapabilities={};N.clientCapabilities.richText=!!(O&1);N.clientCapabilities.smileys=!!(O&2);N.clientCapabilities.buzz=!!(O&4);N.clientCapabilities.fileXfer=!!(O&32768);N.clientCapabilities.voice=!!(O&65536);N.clientCapabilities.video=!!(O&4194304);N.clientCapabilities.typing=!!(O&8388608);N.clientCapabilities.videoDevice=!!(O&16777216);}else{if(!M){N.clientCapabilities={};if(N.network==="yahoo"){N.clientCapabilities.richText=true;N.clientCapabilities.smileys=true;N.clientCapabilities.buzz=true;N.clientCapabilities.fileXfer=true;N.clientCapabilities.voice=true;N.clientCapabilities.video=true;N.clientCapabilities.typing=true;N.clientCapabilities.videoDevice=true;}}}if(!M){N.clientType=N.clientType||"0";if(!N.type){N.type=N.addressbook?"addressbook":"buddy";}}if(N.addressbook){C.aggregate(N,N.addressbook,false);N.displayname=this.getContactDisplayName(N);}else{if(!M){N.displayname=N.displayName||N.user;}}if(window.openmail){if(N.network==="facebook"){N.displayGroup=A.get("str_cont_list_facebook_group_id");}else{if(N.network=="sms"){N.displayGroup=A.get("str_cont_list_default_mobile_group_id");}else{N.displayGroup=A.get("str_cont_list_default_group_id");}}}if(N.groups||!M){N.groups=N.groups||[];for(P=0,L=N.groups.length;P<L;P++){if(N.groups[P].group){N.groups[P]=N.groups[P].group;}if(N.groups[P].name){N.groups[P]=N.groups[P].name;}}}return N;},getContactDisplayName:function(N){var P="",M=C.Lang.trim,L,O;if(N.displayname){return N.displayname;}if(N.nickname&&N.nickname!=N.user){P=N.nickname;}else{if(N.firstname){if(N.lastname){L=A.get("str_session_display_name_order_no_trans");O=H.substitute(L?L:"{{first}} {{last}}",{first:N.firstname,last:N.lastname});P=O;}else{P=N.firstname;}}else{if(N.lastname){P=N.lastname;}else{if(N.user){P=N.user;}else{if(N.mobileno){P=N.mobileno;}}}}}P=H.escapeHtml(P);return P;},_handleBuddyInfo:function(O){this._presenceReceived=true;var N=O.contact,M;if(!N){return;}if(!N.length){N=[N];}for(M=0;M<N.length;M++){var L=N[M];L.user=L.sender;if(L.displayName){L.displayname=L.displayName;}this._updateContact(L);}},_handleBuddyLogoff:function(O){var M=O.buddy,N=O.network||"yahoo",L;if(O.echo){return;}L=this._contacts[[M,N].join("~")];if(L){L.presence.state=-1;L.presence.message="";H.arrayFire(K.CONTACTS_UPDATED,[L]);}},_handleIgnoreList:function(O){this._ignoredUsers=[];var P=O.ignoredUsers,L,M,N;for(M=0;M<P.length;M++){N=P[M].ignoredUser;this._ignoredUsers.push({user:N.id,network:N.network||"yahoo"});C.Global.fire(K.USER_BLOCKED,{user:N.id,network:N.network||"yahoo"});}},_handleInvisibleList:function(P){this._invisibleList=[];var R=P.users,L,N,Q,M,O;for(N=0;N<R.length;N++){Q=R[N].user;M=Q.id;O=Q.network||"yahoo";this._invisibleList.push({user:M,network:O});C.Global.fire(K.VISIBILITY_CHANGED,{user:M,network:O,visible:false});}},_handleEditIgnore:function(P){var M=P.userName,O=P.network||"yahoo",N,L;if(!P.errorCode&&P.type==1&&M){if(P.state==1){this._ignoredUsers.push({user:M,network:O});C.Global.fire(K.USER_BLOCKED,{user:M,network:O});}else{for(N=0,L=this._ignoredUsers.length;N<L;N++){if(this._ignoredUsers[N].user==M&&this._ignoredUsers[N].network==O){this._ignoredUsers.splice(N,1);C.Global.fire(K.USER_UNBLOCKED,{user:M,network:O});break;}}}}},_handleEditInvisible:function(Q){var S=Q.buddyList,O,N,L,M,P,R;if(!Q.errorCode&&Q.type==1){if(Q.command==3){while(this._invisibleList.length){M=this._invisibleList.pop();if(!G.isInvisible()||this.isOnVisibleList(M.user,M.network)){C.Global.fire(K.VISIBILITY_CHANGED,{user:M.user,network:M.network,visible:this.isContactVisible(M.user,M.network)});}}}else{for(O=0,L=S.length;O<L;O++){M=S[O].buddy;
P=S[O].network||"yahoo";if(Q.command==1){this._invisibleList.push({user:M,network:P});C.Global.fire(K.VISIBILITY_CHANGED,{user:M,network:P,visible:false});}else{for(N=0;N<this._invisibleList.length;N++){if(this._invisibleList[N].user==M&&this._invisibleList[N].network==P){this._invisibleList.splice(N,1);C.Global.fire(K.VISIBILITY_CHANGED,{user:M,network:P,visible:this.isContactVisible(M,P)});break;}}}}}}},_handleEditVisible:function(Q){var R=Q.buddyList,O,N,L,M,P;if(!Q.errorCode&&Q.type==1){if(Q.command==3){while(this._visibleList.length){M=this._visibleList.pop();C.Global.fire(K.VISIBILITY_CHANGED,{user:M.user,network:M.network,visible:this.isContactVisible(M.user,M.network)});}}else{for(O=0,L=R.length;O<L;O++){M=R[O].buddy;P=R[O].network||"yahoo";if(Q.command==1){this._visibleList.push({user:M,network:P});C.Global.fire(K.VISIBILITY_CHANGED,{user:M,network:P,visible:true});}else{for(N=0;N<this._visibleList.length;N++){if(this._visibleList[N].user==M&&this._visibleList[N].network==P){this._visibleList.splice(N,1);C.Global.fire(K.VISIBILITY_CHANGED,{user:M,network:P,visible:this.isContactVisible(M,P)});break;}}}}}}},_handleBuddyStatus:function(M){if(M.echo){return;}var L={contact:[M]};this._handleBuddyInfo(L);},_handleBuddyAuthorize:function(N){var M,L;N.network=N.network||"yahoo";N.user=N.user||N.sender;N.alias=N.receiver;L=[N.user,N.network].join("~");if(!N.echo&&N.status==0||N.status==3){if(this._addReqThrottleTimer){this._addReqThrottleTimer.cancel();delete this._addReqThrottleTimer;}this._incomingAddRequests[L]=N;this._addReqThrottleTimer=C.later(1000,this,function(){var O=this.getPendingAddRequests();if(O.length==1){C.Global.fire(K.CONTACT_AUTHORIZE_REQUEST,O[0]);}else{C.Global.fire(K.MULTIPLE_CONTACT_AUTHORIZE_REQUEST,O);}delete this._addReqThrottleTimer;});}else{if(N.status==1){N.authResponse=N.authState==1?"allow":"deny";if(this._contacts[L]){this._contacts[L].authorized=N.authState==1?1:0;}this._incomingAddRequests[L]&&delete this._incomingAddRequests[L];C.Global.fire(K.CONTACT_AUTHORIZE_RESPONSE,N);}else{M=[{user:N.receiver,network:N.network,authorized:0,mobileno:N.mobileNumber,firstname:N.fname,lastname:N.lname,nickname:N.nickName}];this.addContacts(M);C.Global.fire(K.CONTACTS_ADDED,M);}}},_handleDisplayImage:function(O){var M=O.sender,N=O.network||"yahoo",L=this._contacts[[M,N].join("~")];if(G.isSelfUser(M)){G.set("displayImage",O.url);C.Global.fire(K.SELF_IMAGE_UPDATED);}else{if(L){L.url=O.url;L.checksum=O.checksum;if(N=="facebook"){L.imageUrl=H.getImageUrl(L);delete L.url;}else{L.imageUrl=O.url;}C.Global.fire(K.CONTACT_IMAGE_UPDATED,L);}}},_handleAvatarImage:function(N){var M=N.sender,L=this._contacts[[M,"yahoo"].join("~")];if(L){L.avatarHash=N.avatarHash;L.url="";L.imageUrl=this._getContactDisplayImage(L);C.Global.fire(K.CONTACT_IMAGE_UPDATED,L);}},_handleDisplayImgPrefs:function(P){var M=P.sender,O=P.network||"yahoo",L=this._contacts[[M,O].join("~")],N;if(L){L.url="";L.imageUrl="";L.checksum=P.checksum;L.avatarHash=P.avatarHash;L.avatarPreference=P.avatarPreference;L.imageUrl=this._getContactDisplayImage(L);C.Global.fire(K.CONTACT_IMAGE_UPDATED,L);}else{if(!M&&G.isSelfUser(P.receiver)){P.network="yahoo";P.user=G.get("loggedInId");N=H.getImageUrl(P);G.set("displayImage",N);C.Global.fire(K.SELF_IMAGE_UPDATED);}}},_handleRemoveBuddy:function(R){if(R.type==1&&!R.errorCode){var N=R.buddy,Q=R.network||"yahoo",S=R.groupName,P=[N,Q].join("~"),M=this._contacts[P],O,L;if(M){if(S){for(O=0,L=M.groups.length;O<L;O++){if(M.groups[O]==S){M.groups.splice(O,1);break;}}}else{M.groups=[];}C.Global.fire(K.CONTACT_REMOVED_FROM_GROUP,{"user":N,"network":Q,"group":S});if(M.groups.length===0){C.Global.fire(K.CONTACT_DELETED,M);delete this._contacts[P];}}}},_handleAddResponse:function(N){var O=N.buddy?[{buddy:N.buddy,network:N.network||"yahoo"}]:N.buddyList,P,M,L;for(M=0,L=O.length;M<L;M++){P=[O[M].buddy,O[M].network||"yahoo"].join("~");if(this._pendingAddRequests[P]){if(N.errorCode){this._pendingAddRequests[P].errorCallback&&this._pendingAddRequests[P].errorCallback(N);}else{this._pendingAddRequests[P].successCallback&&this._pendingAddRequests[P].successCallback(N);}delete this._pendingAddRequests[P];}}},_handleBuddyMove:function(P){if(P.type==1&&P.buddyInfo){var O,N,R,S,Q,T,L,M;for(Q=0,T=P.buddyInfo.length;Q<T;Q++){if(!P.buddyInfo[Q].errorCode){O=P.buddyInfo[Q].buddy;N=P.buddyInfo[Q].network||"yahoo";R=[O,N].join("~");S=this._contacts[R];L=P.buddyInfo[Q].group;M=P.buddyInfo[Q].targetGroup;if(S){for(Q=0,T=S.groups.length;Q<T;Q++){if(S.groups[Q]==L){S.groups.splice(Q,1);break;}}S.groups.push(M);C.Global.fire(K.CONTACT_MOVED,{contact:S,oldGroup:L,newGroup:M});}}}}},_handleRenameGroup:function(P){if(P.type==1&&!P.errorCode){var R=P.groupName,O=P.newGroupName,M,N,L,Q;for(Q in this._contacts){if(this._contacts.hasOwnProperty(Q)){M=this._contacts[Q];for(N=0,L=M.groups.length;N<L;N++){if(M.groups[N]==R){M.groups[N]=O;break;}}}}C.Global.fire(K.GROUP_RENAMED,{groupName:R,newGroupName:O});}}});YUI.Messenger.ContactsManager=new B();}C.namespace("Messenger").ContactsManager=YUI.Messenger.ContactsManager;C.Command.registerModule("yim",C.Messenger.ContactsManager);},"@VERSION@",{requires:["base-base","requestmanager","command","yim-intl","commonutils","events","abutils"]});YUI.add("om-window-api",function(A){if(!YUI.namespace("Messenger").WindowAPI){YUI.Messenger.WindowAPI=(function(){var B=openmail.Application,C=10;return{LoadHidden:function(F,E,D){this.LoadWindow(F,E,{hidden:true});},LoadWindow:function(L,F,O,J){var N={id:F,view:launchData.blankHtml,target:O.target||"overlay",title:O.title,options:O},M=!O.hidden,G=0;N.options.hidden=true;if(N.target=="tab"){N.view=launchData.blankTabHtml;}if(F=="yimapp_mintymainwindow"){N.target="folderpane";}function P(Q){try{if(Q.document&&Q.document.body&&Q.document.body.className.indexOf("yim-basic-skin")>-1){return true;}}catch(R){}return false;}if(O.new_browser_window){var K,E,D=false,I;if(launchData.isSecure){I=window.location.href.split("messenger.html")[0]+"sblank.html?#vid="+F;}else{I=window.location.href.split("messenger.html")[0]+"blank.html?#vid="+F;}K=window.open(I,"_blank","resizable=1,status=0,toolbar=0,menubar=0,location=0,scrollbars=0,height="+O.height+",width="+O.width);if(K===null){throw new Error("Couldn't create a popout window - probably due to a popup blocker.  Window ID = "+F);}if(J){K.onabort=K.onunload=function(Q){if(K.closed){J({loadError:"Window closed before load completed."});}};if(!A.UA.ie){K.onload=function(Q){K.onabort=K.onunload=null;J(K);};}else{function H(Q){Q=Q||0;if(Q>200){return;}try{if(P(K)){K.onabort=K.onunload=null;D=true;J(K);}else{E=A.later(100,this,H,++Q);}}catch(R){}}E=A.later(100,this,H);K.attachEvent("onload",A.bind(function(){if(!D&&P(K)){if(E){E.cancel();E=null;}D=true;try{K.onabort=K.onunload=null;J(K);}catch(Q){}}},this));}}}else{G=B.openView(N,A.bind(function(){if((O.top||O.bottom)&&(O.left||O.right)){this.MoveTo(F,O.left,O.top,O.right,O.bottom);}if(M){this.Show(F);}if(!J){return;}function T(){var W=null;for(var V=top.frames.length;V--;){try{W=top.frames[V];if(W.openmail.Application.sendMessage.viewId==F){break;}}catch(X){}}return W;}var U,R=false,S=A.later(2000,null,function(){var V=T();R=true;J(V);});function Q(V,W){W=W||0;if(S){S.cancel();S=null;}if(W>1000){return;}if(R){return;}try{U=top.frames[V.id]||T();if(!P(U)){U=T();}if(P(U)){R=true;J(U);}else{A.later(10,null,function(){Q(V,W++);});}}catch(X){}}B.callWebService({url:"apps://",method:"GET",parameters:{cmd:"getFrameNameByViewId",args:{id:F}}},Q);},this));if(G){}}return G;},Unload:function(D){B.closeView({id:D});},GetViewport:function(D){callInternal("getViewport",null,function(E){D&&D({x0:E.scrollX,y0:E.scrollY,dx:E.width,dy:E.height});});},Restore:function(D){callInternal("restoreView",{id:D});A.Global.fire("ytogo.WindowRestored",D);},Minimize:function(F,E,D){D=D||27;callInternal("minimizeView",{id:F,width:E,height:D});A.Global.fire("ytogo.WindowMinimized",F);},Hide:function(D){callInternal("hideView",{id:D});A.Global.fire("ytogo.WindowHidden",D);},Show:function(D){callInternal("showView",{id:D});A.Global.fire("ytogo.WindowShown",D);},MakeTopMostDiv:function(D){callInternal("makeTopMostView",{id:D});A.Global.fire("ytogo.WindowBroughtToFront",D);},Focus:function(D){callInternal("focusView",{id:D});},SetTitle:function(E,D){D.id=E;callInternal("setTabTitle",D);},BeginMove:function(D){this.MakeTopMostDiv(D);callInternal("beginMoveView",{id:D});},Move:function(F,E,D){callInternal("moveView",{id:F,dx:E,dy:D});},EndMove:function(D){callInternal("endMoveView",{id:D});},MoveTo:function(I,H,G,E,D,F){callInternal("moveViewTo",{id:I,"left":H,"top":G,"right":E,"bottom":D});if(F){this.RestrictToViewport(I);}},MoveToCenter:function(G,D,E,F){this.GetViewport(A.bind(function(H){var J=(H.dx/2-D/2)+H.x0,I=(H.dy/2-E/2)+H.y0;this.MoveTo(G,J,I,J+D,I+E);if(F){F();}},this));},DemoDock:function(D){callInternal("dockView",{id:D});},DemoUndock:function(D){callInternal("undockView",{id:D});},BeginResize:function(D){callInternal("beginResizeView",{id:D});},Resize:function(H,E,D,G,F){callInternal("resizeView",{id:H,dx:E,dy:D,left:G,top:F});A.Global.fire("ytogo.WindowResized",H);},EndResize:function(D){callInternal("endResizeView",{id:D});A.Global.fire("ytogo.WindowResized",D);},SetSize:function(G,E,D,F){callInternal("setViewSize",{id:G,width:E,height:D});A.Global.fire("ytogo.WindowResized",G);if(F){this.RestrictToViewport(G);}},GetPosAndSize:function(E,D){callInternal("getViewRegion",{id:E},D);},RestrictToViewport:function(F,D){var E=D&&D.top&&D.left&&D.width&&D.height?D:null;if(!E){this.GetPosAndSize(F,A.bind(function(G){this.RestrictToViewport(F,G);},this));}else{this.GetViewport(A.bind(function(G){var H=G.dy-C,J=G.dx-C,K=D.left,I=D.top;if(D.left<0){K=0;}else{if(D.left+D.width>J){K=J-D.width;}}if(D.top<0){I=0;}else{if(D.top+D.height>H){I=H-D.height;}}if(I!=D.top||K!=D.left){this.MoveTo(F,K,I);}},this));}}};})();}A.namespace("Messenger").WindowAPI=YUI.Messenger.WindowAPI;},"@VERSION@");