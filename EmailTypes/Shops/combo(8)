YUI.add("common-ui-dd",function(B){var F=150,H=B.one("body"),D=B.Node.create("<div></div>"),I=function(){var L=H.get("docHeight"),K=H.get("docWidth");D.setStyles({height:L+"px",width:K+"px"});},C=false,A,J=B.common.Utils;var G="transparent";if(B.UA.ie>0&&B.UA.ie<9){G="red";}D.setStyles({opacity:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:G,display:"none",height:"5px",width:"5px",borderWidth:"0 0 0 2px !important"});D.set("id",B.stamp(D));B.on("window:resize",I);H.prepend(D);var E=function(P){this.handles=[];var S=P.scope,Q=false,O=P.node,R=function(T){this.dragging=true;A=null;this.startXY=[T.pageX,T.pageY];this.lastXY=T.target.getXY();T.dd=this;this.f1=O.on("mousemove",B.bind(L,this));this.f2=D.on("mousemove",B.bind(L,this));this.f3=H.on("mousemove",B.bind(L,this));if(P.start){P.start.apply(S,[T]);if(T.notDragging){this.dragging=false;}}if(!Q&&this.dragging){Q=true;I();D.setStyle("display","block");if(P.cursor){D.setStyle("cursor",P.cursor);}else{D.setStyle("cursor","default");}}},K=function(T){if(T.button===1&&!A&&T.target&&T.target.get("type")!="text"){C=T.target;A=B.later(F,this,R,T);}},M=function(T){if(this.dragging){this.f1.detach();this.f2.detach();this.f3.detach();T.dd=this;D.setStyle("display","none");Q=false;this.dragging=false;if(NeoConfig.fullPage===1&&C){T.dd.originNode=C;C=false;}if(P.end){P.end.apply(S,[T]);}T.halt(true);return false;}else{if(A){A.cancel();A=null;}}},L=function(T){if(this.dragging&&P.move){T.dd=this;T.target.lastXY=[T.pageX,T.pageY];T.target.startXY=this.startXY;P.move.apply(S,[T]);return false;}};J.setSelect(D,false);J.setSelect(B.one("#msg-list"),false);var N=!NeoConfig.fullPage&&B.one("#msg-preview .comm-modes");if(N){J.setSelect(N,false);}J.setSelect(B.one("#shellnavigation"),false);if(P.dragSelector){this.handles.push(O.delegate("mousedown",B.bind(K,this),P.dragSelector));this.handles.push(O.delegate("mouseup",B.bind(M,this),P.dragSelector));}else{this.handles.push(O.on("mousedown",B.bind(K,this)));this.handles.push(O.on("mouseup",B.bind(M,this)));}this.handles.push(D.on("mouseup",B.bind(M,this)));this.handles.push(H.on("mouseup",B.bind(M,this)));};E.prototype.destroy=function(){var L=this.handles;if(L){var M=L.length,K;for(K=0;K<M;K++){if(L[K]){L[K].detach();L[K]=null;}}}};B.namespace("mail").DD=E;},"1.0.0",{requires:["node","common-utils"]});YUI.add("mail-ui-workspace-horizontal-slider",function(B){function A(){var G,J="rail-resize",C=B.one("#paneshell"),E=B.one("#shellnavigation"),F="pos.hslider",O=B.common.persist.getCookie(),D=B.one("#shellcontent"),M=NeoConfig.hSliderMinWidth,I=200,H=strings.str_tog_loadRTLCss,P=H?"right":"left",L=function(){return parseInt(D.get("offsetWidth"),10)-200;},N=function(){return parseInt(C.get("offsetWidth"),10);},S=function(T){E.setStyle("width",T);D.setStyle(P,T);};if(C&&D&&E){var K=L();if(parseInt(E.getStyle("width"),10)>K){S(I);O.set(F,I);}G=B.Node.one("#"+J);if(!G){G=B.Node.create('<div id="'+J+'"></div>');D.prepend(G);}if(NeoConfig.fullPage){G.setStyle("display","none");}var Q=function(U){var T=L();if(H){U.pageX=N()-U.pageX;}if(U.pageX<=M||U.pageX>=T){U.halt();return;}S(U.pageX);if(NeoConfig.intl==="jp"){B.fire("wsjp:dragHSlider",U.pageX);}};var R=function(U){var T=L();if(H){U.pageX=N()-U.pageX;}if(U.pageX<=M){U.pageX=M+1;}if(U.pageX>=T){U.pageX=T-1;}S(U.pageX);O.set(F,U.pageX);if(NeoConfig.intl==="jp"){B.fire("wsjp:dragHSlider",U.pageX);}};new B.mail.DD({end:R,move:Q,node:G,cursor:"col-resize",disable:B.one("#msg-list")});}}A.prototype={};B.namespace("mail.ui");B.mail.ui.WorkspaceHSlider=A;},"1.0.0",{requires:["node-base","common-persist-cookie-data","common-ui-dd"]});/*
YUI 3.7.2 (build 5639)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("stylesheet",function(e,t){function v(t,r){var o,a,f,l={},h,p,m,g,y,b;if(!e.instanceOf(this,v))return new v(t,r);if(t){if(e.Node&&t instanceof e.Node)a=t._node;else if(t.nodeName)a=t;else if(s(t)){if(t&&u[t])return u[t];a=n.getElementById(t.replace(/^#/,d))}if(a&&u[e.stamp(a)])return u[e.stamp(a)]}if(!a||!/^(?:style|link)$/i.test(a.nodeName))a=n.createElement("style"),a.type="text/css";s(t)&&(t.indexOf("{")!=-1?a.styleSheet?a.styleSheet.cssText=t:a.appendChild(n.createTextNode(t)):r||(r=t));if(!a.parentNode||a.parentNode.nodeName.toLowerCase()!=="head")o=(a.ownerDocument||n).getElementsByTagName("head")[0],o.appendChild(a);f=a.sheet||a.styleSheet,h=f&&"cssRules"in f?"cssRules":"rules",m="deleteRule"in f?function(e){f.deleteRule(e)}:function(e){f.removeRule(e)},p="insertRule"in f?function(e,t,n){f.insertRule(e+" {"+t+"}",n)}:function(e,t,n){f.addRule(e,t,n)};for(g=f[h].length-1;g>=0;--g)y=f[h][g],b=y.selectorText,l[b]?(l[b].style.cssText+=";"+y.style.cssText,m(g)):l[b]=y;v.register(e.stamp(a),this),r&&v.register(r,this),e.mix(this,{getId:function(){return e.stamp(a)},enable:function(){return f.disabled=!1,this},disable:function(){return f.disabled=!0,this},isEnabled:function(){return!f.disabled},set:function(e,t){var n=l[e],r=e.split(/\s*,\s*/),i,s;if(r.length>1){for(i=r.length-1;i>=0;--i)this.set(r[i],t);return this}return v.isValidSelector(e)?(n?n.style.cssText=v.toCssText(t,n.style.cssText):(s=f[h].length,t=v.toCssText(t),t&&(p(e,t,s),l[e]=f[h][s])),this):this},unset:function(t,n){var r=l[t],s=t.split(/\s*,\s*/),o=!n,u,a;if(s.length>1){for(a=s.length-1;a>=0;--a)this.unset(s[a],n);return this}if(r){if(!o){n=e.Array(n),i.cssText=r.style.cssText;for(a=n.length-1;a>=0;--a)c(i,n[a]);i.cssText?r.style.cssText=i.cssText:o=!0}if(o){u=f[h];for(a=u.length-1;a>=0;--a)if(u[a]===r){delete l[t],m(a);break}}}return this},getCssText:function(e){var t,n,r;if(s(e))return t=l[e.split(/\s*,\s*/)[0]],t?t.style.cssText:null;n=[];for(r in l)l.hasOwnProperty(r)&&(t=l[r],n.push(t.selectorText+" {"+t.style.cssText+"}"));return n.join("\n")}})}var n=e.config.doc,r=n.createElement("p"),i=r.style,s=e.Lang.isString,o={},u={},a="cssFloat"in i?"cssFloat":"styleFloat",f,l,c,h="opacity",p="float",d="";l=h in i?function(e){e.opacity=d}:function(e){e.filter=d},i.border="1px solid red",i.border=d,c=i.borderLeft?function(e,t){var n;t!==a&&t.toLowerCase().indexOf(p)!=-1&&(t=a);if(s(e[t]))switch(t){case h:case"filter":l(e);break;case"font":e.font=e.fontStyle=e.fontVariant=e.fontWeight=e.fontSize=e.lineHeight=e.fontFamily=d;break;default:for(n in e)n.indexOf(t)===0&&(e[n]=d)}}:function(e,t){t!==a&&t.toLowerCase().indexOf(p)!=-1&&(t=a),s(e[t])&&(t===h?l(e):e[t]=d)},f=function(t,s){var o=t.styleFloat||t.cssFloat||t[p],u=e.Lang.trim,f;try{i.cssText=s||d}catch(l){r=n.createElement("p"),i=r.style,i.cssText=s||d}o&&!t[a]&&(t=e.merge(t),delete t.styleFloat,delete t.cssFloat,delete t[p],t[a]=o);for(f in t)if(t.hasOwnProperty(f))try{i[f]=u(t[f])}catch(c){}return i.cssText},e.mix(v,{toCssText:h in i?f:function(t,n){return h in t&&(t=e.merge(t,{filter:"alpha(opacity="+t.opacity*100+")"}),delete t.opacity),f(t,n)},register:function(e,t){return!!(e&&t instanceof v&&!u[e]&&(u[e]=t))},isValidSelector:function(e){var t=!1;return e&&s(e)&&(o.hasOwnProperty(e)||(o[e]=!/\S/.test(e.replace(/\s+|\s*[+~>]\s*/g," ").replace(/([^ ])\[.*?\]/g,"$1").replace(/([^ ])::?[a-z][a-z\-]+[a-z](?:\(.*?\))?/ig,"$1").replace(/(?:^| )[a-z0-6]+/ig," ").replace(/\\./g,d).replace(/[.#]\w[\w\-]*/g,d))),t=o[e]),t}},!0),e.StyleSheet=v},"3.7.2",{requires:["yui-base"]});
YUI.add("mail-ui-messagesview-resize",function(A){A.namespace("mail.MessagesViewResize");var E=A.common.persist.getCookie(),B="pos.vslider",F=A.common.persist.UserData,C=function(){};function D(K){var J,N,M=this,L=K.cursor||"row-resize";M.id=K.id||"rail-resize-hori";M.drag_node=N=A.one("#"+M.id);M.realParent=J=K.messagesview.get("parentNode")||K.messagesview.get("tabNode");M.inbox=J.one("div.inbox");M.tripane=J.one("div.tripane");M.on=K.on||1;M.msgsView=K.messagesview;M.OFFSET_STYLE=M.OFFSET_STYLE||"offsetHeight";M.INBOX_STYLE=M.INBOX_STYLE||"height";M.TRIPANE_STYLE=M.TRIPANE_STYLE||"top";M.DRAG_STYLE=M.DRAG_STYLE||"top";M.COOKIE_NAME=M.COOKIE_NAME||B;M.PREFIX=M.PREFIX||"";M.MIN_PANE=M.MIN_PANE||80;M.MIN_LIST=M.MIN_LIST||100;M.DEFAULT=M.DEFAULT||148;if(!N){M.drag_node=N=A.Node.create('<div style="position:absolute;z-index:1" id="'+M.id+'"></div>');N.setStyles(K.styles||{top:(E.get(B)||M.DEFAULT)});J.append(N);}(new A.mail.DD({scope:this,start:M.start,end:M.endUp,move:M.moveMouse,node:M.drag_node,cursor:L,disable:A.one("#msg-list")}));M.checkDisplay();}D.prototype={checkDisplay:function(){var P=this,N=E.get(P.COOKIE_NAME)||(P.DEFAULT+""),M,O,L,J,K;if(N&&P.on){if(P.PREFIX&&N.charAt(0)==P.PREFIX){N=parseInt(N.substr(1));}N=parseInt(N);M=A.one("#shellcontent");O=M?M.get(P.OFFSET_STYLE):10000000;K=P.msgsView;if((N+P.MIN_PANE)>O){L=O-P.MIN_PANE;J=L>P.MIN_LIST;if(J){P.inbox.setStyle(P.INBOX_STYLE,L);P.tripane.setStyle(P.TRIPANE_STYLE,L+6);P.drag_node.setStyle(P.DRAG_STYLE,L);E.set(P.COOKIE_NAME,(P.PREFIX+L));}else{P.msgsView.togglePreviewPane();}}}},setDisplay:function(J){this.drag_node.setStyle("display",(J?"block":"none"));this.on=J?1:0;},start:C,endUp:function(){var J=parseInt(this.drag_node.getStyle("top"),10);E.set(B,J);A.fire("msgsview:splitterdone");},moveMouse:function(N){var Q=this,P=N.pageY,K=A.one("body").get("offsetHeight"),O=157,L=P-O,J=Q.MIN_LIST,M=Q.MIN_PANE;if(P>(K-M)){L=K-O-M;}if(L<=J){L=J;}Q.drag_node.setStyle("top",L);Q.inbox.setStyle("height",L);Q.tripane.setStyle("top",L+6);}};A.namespace("mail.ui").MessagesViewResize=D;function H(L){var J=["nsdate","nssubj","subj","from","to","date","size"];for(var K=0;K<J.length;K++){if(L.lastIndexOf(J[K])>-1){return J[K];}}}function G(L,M){var K=H(L.get("className")),J;if(K){J=Math.round(L.getData("col-right"));E.set("column_resize."+K+".width_pct",(100-(M+J)));E.set("column_resize."+K+".left_pct",M);}}var I={init:function(J){this.element=J;this.resizeableColumns=this.element.all(".flex > div");this.createResizeWidgets();},createResizeWidgets:function(){var K=A.one("div.flex");if(!K){return;}var J=K.get("offsetWidth");this.resizeableColumns.each(function(N,Y){var U=this;if(!N.getData("col-right")){var Z,V,R=N.get("offsetLeft"),W=N.get("offsetWidth");R=R>0?R:0;W=W>0?W:0;Z=Math.round(R/J*100);V=Math.round((J-(W+R))/J*100);N.setData("col-left",Z);N.setData("col-right",V);}if(!Y){return;}var M=A.Node.create('<div class="rail-resize" style="border: 3px solid transparent" id="resize-'+N.getAttribute("data-action")+'"></div>');N.append(M);var T=0,X,Q,a,O;var L=function(b){var c=N.get("region");O=N.previous();while(O&&!O.getData("col-right")){O=O.previous();}Q=O?O.get("region").left+75:75;X=c.left+c.width-75;a=N.get("parentNode").get("offsetWidth");};var S=function(e){if(!T){T=e.target.startXY[0];}var i,h,c,f,g,d,b=e.target.lastXY[0];if(b<Q||b>X){return false;}i=T-b;T=b;h=Math.round(i/a*100*1000)/1000;c=A.StyleSheet("ColResize");f=Math.round(N.getData("col-left"))-h;d=H(N.get("className"));if(d){N.setData("col-left",f);A.all("div.flex ."+d).setStyles({left:f+"%"});c.set("div div.flex div."+d,{left:f+"%"});}g=Math.round(O.getData("col-right"))+h;d=H(O.get("className"));if(d){O.setData("col-right",g);A.all("div.flex ."+d).setStyle("right",g+"%");c.set("div div.flex div."+d,{right:g+"%"});}};var P=function(b){var c=0;T=0;M.setStyle("left",-2);U.resizeableColumns.each(function(e,d){G(e,c);c+=(100-Math.round(e.getData("col-right")));});O=null;};(new A.mail.DD({scope:this,start:L,move:S,end:P,node:M,cursor:"col-resize"}));},this);}};A.all(".list-header").each(function(J){I.init(J);});A.namespace("mail.ui").MessagesViewColResize=I;A.namespace("test.MsgView.Resize");A.mix(A.test.MsgView.Resize,{retrieveClass:H,persistNode:G});},"1.0.0",{requires:["common-persist-cookie-data","stylesheet","node","common-ui-dd","common-persist-user-data"]});YUI.add("mail-ui-messagesview-dd",function(D){D.namespace("mail.MessagesViewDD");var C=D.common.Utils,E=["Draft","%40C%40Chats"],B=[],A=10;D.mail.MessagesViewDD={setDD:function(Q){var U=D.one("#system-folders"),N=false,R=100,G=D.one("#shellnavigation"),T=D.one("#custom-folders"),I=D.one("#custom-folders-nav"),M=D.one("body.fullpage"),P=false,S=D.one("#accordiontitlelist_bottom");var K={scrollTimer:null,dd:null,pageX:0,pageY:0,clientX:0,clientY:0,timerCB:null,start:function(W,Z,Y,X,V,a){this.timerCB=W;this.dd=Z;this.pageX=Y;this.pageY=X;this.clientX=V;this.clientY=a;this.scrollTimer=D.Lang.later(R,this,this.ssHandler,null,true);},update:function(V){this.pageY=V;},ssHandler:function(){this.timerCB(this.dd,this.pageX,this.pageY,this.clientX,this.clientY);},isActive:function(){return(this.scrollTimer!=null);},hasMoved:function(V,W){return(V!=this.clientX||W!=this.clientY);},clear:function(){if(this.scrollTimer){this.scrollTimer.cancel();delete this.scrollTimer;this.scrollTimer=null;}}};D.publish("dropMessages",{emitFacade:true,defaultFn:function(Z){var Y=Z.msgs,W=Z.fromFid,X=Z.toFid,V=Z.theList;if(D.mail.ui.MessageEvents||(NeoConfig.usingSearch&&D.mail.ui.Search)){if(NeoConfig.usingSearch){Q.handleMessageAction((X=="Trash")?"trash":"move",{fid:(X=="Trash")?W:X,selectedItems:Q.listMgr.getSelectedItems()});}else{D.mail.ui.MessageEvents.handleUI({action:"move",fid:X},W,V,Y);}if(X==="Trash"){D.fire("darlaEvent",{action:"dd_msg_to_trash"});}else{if(W==="Trash"){D.fire("darlaEvent",{action:"dd_msg_to_folder"});}}}}});D.publish("dropConvs",{emitFacade:true,defaultFn:function(Z){var Y=Z.msgs,W=Z.fromFid,X=Z.toFid,V=Z.theList;if(D.mail.ui.ConvEvents){Q.handleUI({action:"move",fid:X},W,V,Y);if(X==="Trash"){D.fire("darlaEvent",{action:"dd_msg_to_trash"});}else{if(W==="Trash"){D.fire("darlaEvent",{action:"dd_msg_to_folder"});}}}}});var F=function(W){var V=function(c){function a(Y){if(W.dd.dragging&&Y.arr.length&&c.Array.indexOf(E,Q.fid)===-1){W.dd.proxy=c.Node.create('<div style="z-index: 999" class="msgDragProxy"><span></span><b class="counter">'+Y.arr.length+"</b></div>");c.one("body").prepend(W.dd.proxy);W.dd.proxy.setXY([-100,-100]);W.dd.shellbottom=G.get("winHeight");W.dd.shelltop=G.getY();}else{W.notDragging=true;}}if(NeoConfig.usingSearch){var b=Q.listMgr.getSelectedItems(),Z=0,X;b.maps=b.hash;b.arr=[];for(X in b.maps){b.arr[Z]=X;B[Z++]=b.maps[X];}b.neighbors=[];a(b);}else{if(Q.hasMsgList){Q.msgList.vlist.getSelected(a);}else{a([Q.msgPane.get("message")]);}}P=I.hasClass("expanded")?true:false;};K.clear();if(W.target.hasClass("list-view-items")){W.notDragging=true;return;}if(!N){isConv=NeoConfig.hasConv;D.use(isConv?"mail-ui-convevents":"mail-ui-messageevents",V);N=true;}else{V(D);}};var O=function(W,X){var Y,V=D.mail.MessagesViewDD.currentDrop;if(X.getAttribute("data-fid")){Y=X.getAttribute("data-fid");if(W.proxy.inRegion(X)&&Q.fid!==Y&&Y!=="Draft"&&Y!=="Sent"&&Y!=="%40C%40Chats"){if(V){V.removeClass("popping");}X&&X.addClass("popping");D.mail.MessagesViewDD.currentDrop=X;}else{if(X.hasClass("popping")){X.removeClass("popping");D.mail.MessagesViewDD.currentDrop=null;}}}};var L=function(V){if(K.isActive()&&!K.hasMoved(V.clientX,V.clientY)){return;}K.clear();H(V.dd,V.pageX,V.pageY,V.clientX,V.clientY);};var H=function(e,a,Z,Y,W){var f,d=MARGIN_BOTTOM=MOVING_UNIT=30,V,b,g,X=e.shelltop,c=e.shellbottom;if(NeoConfig.intl=="jp"){MARGIN_BOTTOM=parseInt(S.getStyle("height"))+parseInt(S.getStyle("bottom"))+40;}if(e.proxy){if(e.proxy._node){e.proxy.setStyle("top",Z);e.proxy.setStyle("left",a);}if(!P){if(e.proxy.inRegion(I)){I.replaceClass("collapsed","expanded");P=true;}}if(e.proxy.inRegion(G)){if(e.proxy.inRegion(T)){T.all("li").each(function(h){O(e,h);});}else{if(e.proxy.inRegion(U)){U.all("li").each(function(h){O(e,h);});}else{if(D.mail.MessagesViewDD.currentDrop){D.mail.MessagesViewDD.currentDrop.removeClass("popping");D.mail.MessagesViewDD.currentDrop=null;}}}if(M){X=window.scrollY||0;c=X+M.get("winHeight");}if(Z<X+d){V=b=true;}else{if(Z>c-MARGIN_BOTTOM){V=true;b=false;}}if(V){if(b){if(M){window.scrollTo(0,X-MARGIN_BOTTOM);D.UA.ie&&(window.scrollY=X-MARGIN_BOTTOM);g=Z-MOVING_UNIT;if(g<0){g=0;}}else{f=G.get("scrollTop");G.set("scrollTop",f-MOVING_UNIT);g=Z;}}else{if(M){window.scrollTo(0,X+MOVING_UNIT);D.UA.ie&&(window.scrollY=X+MOVING_UNIT);g=Z+MOVING_UNIT;}else{f=G.get("scrollTop");G.set("scrollTop",f+MOVING_UNIT);g=Z;}}if(!K.isActive()){K.start(H,e,a,Z,Y,W);}K.update(g);}else{K.clear();}}else{if(D.mail.MessagesViewDD.currentDrop){D.mail.MessagesViewDD.currentDrop.removeClass("popping");D.mail.MessagesViewDD.currentDrop=null;K.clear();}}}};var J=function(Y){var V,X,W,Z;K.clear();if(Y.dd.proxy){Y.dd.proxy.remove(true);if(D.mail.MessagesViewDD.currentDrop){D.mail.MessagesViewDD.currentDrop.removeClass("popping");V=D.mail.MessagesViewDD.currentDrop.getAttribute("data-fid");Z=NeoConfig.hasConv;dropEvent=Z?"dropConvs":"dropMessages";X=function(a){if(NeoConfig.usingSearch){a.fire(dropEvent,{fromFid:Q.fid,toFid:V,msgs:B});}else{if(Q.hasMsgList){a.fire(dropEvent,{fromFid:Q.fid,toFid:V,theList:Q.msgList});if(NeoConfig.fullPage){Q.msgList.vlist.resetFocus();}}else{a.fire(dropEvent,{fromFid:Q.fid,toFid:V,msgs:[Q.msgPane.get("message")]});}}};if(!N&&!NeoConfig.usingSearch){D.use(Z?"mail-ui-convevents":"mail-ui-messageevents",X);N=true;}else{X(D);}}else{if(Y.dd.originNode){if(Math.abs(Y.pageX-Y.dd.startXY[0])<=A&&Math.abs(Y.pageY-Y.dd.startXY[1])<=A){D.one(Y.dd.originNode.simulate("click"));}}}}D.mail.MessagesViewDD.currentDrop=null;};(new D.mail.DD({start:F,move:L,end:J,node:D.one("div.list-view-items")}));}};},"1.0.0",{requires:["mail-model-datastore","common-utils","node-base","common-ui-dd"]});